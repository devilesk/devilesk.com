require=function t(e,a,n){function r(s,l){if(!a[s]){if(!e[s]){var o="function"==typeof require&&require;if(!l&&o)return o(s,!0);if(i)return i(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var c=a[s]={exports:{}};e[s][0].call(c.exports,function(t){var a=e[s][1][t];return r(a||t)},c,c.exports,t,e,a,n)}return a[s].exports}for(var i="function"==typeof require&&require,s=0;s<n.length;s++)r(n[s]);return r}({28:[function(t,e,a){var n=t("../ktlib"),r=t("../util/queryString"),i=t("../util/getJSON"),s=r.query_string,l=r.updateQueryStringParam;n.init(function(t){var e=n.attributeOptions,a=n.attributeModifiers;e.push({id:"HeroID",name:"HeroID"}),e=e.filter(function(t){return"attributeprimary"!==t.id}).sort(function(t,e){return t.name<e.name?-1:t.name>e.name?1:0});e.map(function(t){return t.id});i("/media/dota-json/heroes.json",function(n){function r(){++d===u.length&&o()}function i(t){return{label:t,fill:!1,lineTension:.1,backgroundColor:"rgba(75,192,192,0.4)",borderColor:"rgba(75,192,192,1)",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",pointBorderColor:"rgba(75,192,192,1)",pointBackgroundColor:"#fff",pointBorderWidth:1,pointHoverRadius:5,pointHoverBackgroundColor:"rgba(75,192,192,1)",pointHoverBorderColor:"rgba(220,220,220,1)",pointHoverBorderWidth:2,pointRadius:10,pointHitRadius:10,data:[],pointStyle:[]}}function o(){function n(){m.selectedX()&&m.selectedY()&&(p.data.datasets.forEach(function(t){var e=t._heroId,a=o(e);t.data.length=0,t.data.push(a)}),r(),p.update())}function r(){var t=e.filter(function(t){return t.id==m.selectedX()})[0].name,a=e.filter(function(t){return t.id==m.selectedY()})[0].name,n=a+" vs. "+t;p.options.scales.yAxes[0].scaleLabel.labelString=a,p.options.scales.xAxes[0].scaleLabel.labelString=t,document.getElementById("chart-title").innerHTML=n}function o(e){var n=t["npc_dota_hero_"+e];if(a.hasOwnProperty(m.selectedX()))var r=parseFloat(a[m.selectedX()].call(n,m.selectedLevel()).toFixed(4));else var r=parseFloat(n[m.selectedX()].toFixed(4));if(a.hasOwnProperty(m.selectedY()))var i=parseFloat(a[m.selectedY()].call(n,m.selectedLevel()).toFixed(4));else var i=parseFloat(n[m.selectedY()].toFixed(4));return{x:r,y:i}}var d=document.getElementById("myChart"),g={labels:[],datasets:[]};g.datasets.push();var h={yAxes:[{type:"linear",scaleLabel:{display:!0,labelString:""}}],xAxes:[{type:"linear",scaleLabel:{display:!0,labelString:""}}]},p=new Chart(d,{type:"scatter",data:g,options:{showLines:!1,xAxes:[{display:!0}],scales:h,hover:{mode:"single"},legend:{position:"bottom"},tooltips:{mode:"single",callbacks:{title:function(t,e,a){return e.datasets.filter(function(e){return e.data[0].x==t[0].xLabel&&e.data[0].y==t[0].yLabel}).map(function(t){return t.label}).sort().join(",")}}}}}),m={attributes:ko.observableArray(e),selectedX:ko.observable(),selectedY:ko.observable(),selectedLevel:ko.observable(),showLegend:ko.observable(!0),toggleOn:function(){p.data.datasets.forEach(function(t){t.hidden=!1,t._meta[0].hidden=null}),p.update()},toggleOff:function(){p.data.datasets.forEach(function(t){t.hidden=!0,t._meta[0].hidden=null}),p.update()},toggleLegend:function(){m.showLegend(!m.showLegend()),p.options.legend.display=m.showLegend(),p.update()}};m.selectedX.subscribe(function(t){l("x",t),n()}),m.selectedLevel.subscribe(function(t){l("level",t),n()}),m.selectedY.subscribe(function(t){l("y",t),n()}),m.selectedX(s.x||"ehp"),m.selectedY(s.y||"dps"),m.selectedLevel(s.level||1),function(){m.selectedX()&&m.selectedY()&&(g.datasets.length=0,u.forEach(function(e){var a=t["npc_dota_hero_"+e],n=new i(a.displayname),r=o(e);n._heroId=e,n.data.push(r),n.pointStyle.push(c[e]),g.datasets.push(n)}),g.datasets.sort(function(t,e){return t.label<e.label?-1:t.label>e.label?1:0}),r(),p.update())}(),ko.applyBindings(m)}var u=n.data,c={},d=0;u.forEach(function(t){var e=new Image;e.src="/media/images/miniheroes/"+t+".png",c[t]=e,e.onload=r})})})},{"../ktlib":33,"../util/getJSON":40,"../util/queryString":41}],41:[function(t,e,a){function n(t,e){baseUrl=[location.protocol,"//",location.host,location.pathname].join(""),urlQueryString=document.location.search;var a=t+"="+e,n="?"+a;urlQueryString&&(keyRegex=new RegExp("([?&])"+t+"[^&]*"),n=null!==urlQueryString.match(keyRegex)?urlQueryString.replace(keyRegex,"$1"+a):urlQueryString+"&"+a),window.history.replaceState({},"",baseUrl+n)}var r=function(t){if(""==t)return{};for(var e={},a=0;a<t.length;++a){var n=t[a].split("=",2);1==n.length?e[n[0]]="":e[n[0]]=decodeURIComponent(n[1].replace(/\+/g," "))}return e}(window.location.search.substr(1).split("&"));e.exports={query_string:r,updateQueryStringParam:n}},{}],33:[function(t,e,a){var n=t("./util/getJSON"),r=function(){function t(t,n,r){var n=n||1,r=r||0;return a.call(this,t)+e.call(this,t)*(n-1)+2*r}function e(t){switch(t){case"DOTA_ATTRIBUTE_STRENGTH":return this.attributestrengthgain;case"DOTA_ATTRIBUTE_AGILITY":return this.attributeagilitygain;case"DOTA_ATTRIBUTE_INTELLECT":return this.attributeintelligencegain}}function a(t){switch(t){case"DOTA_ATTRIBUTE_STRENGTH":return this.attributebasestrength;case"DOTA_ATTRIBUTE_AGILITY":return this.attributebaseagility;case"DOTA_ATTRIBUTE_INTELLECT":return this.attributebaseintelligence}}function r(){return e(this.attributeprimary)}function i(){return a(this.attributeprimary)}var s=[{id:"armorphysical",name:"Armor"},{id:"projectilespeed",name:"Missile Speed"},{id:"attackrange",name:"Attack Range"},{id:"attributeagilitygain",name:"Agi Gain"},{id:"attributestrengthgain",name:"Str Gain"},{id:"attributeintelligencegain",name:"Int Gain"},{id:"attributebaseagility",name:"Base Agi"},{id:"attributebaseintelligence",name:"Base Int"},{id:"attributebasestrength",name:"Base Str"},{id:"attributeprimary",name:"Primary Attr"},{id:"statushealth",name:"HP"},{id:"statusmana",name:"Mana"},{id:"statushealthregen",name:"HP Regen"},{id:"statusmanaregen",name:"Mana Regen"},{id:"movementspeed",name:"Movement Speed"},{id:"movementturnrate",name:"Turn Rate"},{id:"attackdamagemin",name:"Attack Damage Min"},{id:"attackdamagemax",name:"Attack Damage Max"},{id:"attackdamageavg",name:"Attack Damage Avg"},{id:"ehp",name:"EHP"},{id:"mehp",name:"Magical EHP"},{id:"dps",name:"DPS"},{id:"agility",name:"Agility"},{id:"intelligence",name:"Intelligence"},{id:"strength",name:"Strength"}],l=s.map(function(t){return t.id}),o={armorphysical:function(e,a){return this.armorphysical+t.call(this,"DOTA_ATTRIBUTE_AGILITY",e,a)*(1/6)},statushealth:function(e,a){return this.statushealth+20*t.call(this,"DOTA_ATTRIBUTE_STRENGTH",e,a)},statusmana:function(e,a){return this.statusmana+12*t.call(this,"DOTA_ATTRIBUTE_INTELLECT",e,a)},statushealthregen:function(e,a){return this.statushealthregen*(1+.007*t.call(this,"DOTA_ATTRIBUTE_STRENGTH",e,a))},statusmanaregen:function(e,a){return this.statusmanaregen*(1+.02*t.call(this,"DOTA_ATTRIBUTE_INTELLECT",e,a))},attackdamagemax:function(e,a){return this.attackdamagemax+t.call(this,this.attributeprimary,e,a)},attackdamagemin:function(e,a){return this.attackdamagemin+t.call(this,this.attributeprimary,e,a)},attackdamageavg:function(t,e){return(o.attackdamagemax.apply(this,arguments)+o.attackdamagemin.apply(this,arguments))/2},ehp:function(t,e){var a=o.armorphysical.apply(this,arguments);return o.statushealth.apply(this,arguments)/(1-.05*a/(1+.05*a))},mehp:function(t,e){return o.statushealth.apply(this,arguments)*(1/(1-this.magicalresistance/100))},dps:function(e,a){return o.attackdamageavg.apply(this,arguments)*(100+t.call(this,"DOTA_ATTRIBUTE_AGILITY",e,a))/100/this.attackrate},agility:function(e,a){return t.call(this,"DOTA_ATTRIBUTE_AGILITY",e,a)},intelligence:function(e,a){return t.call(this,"DOTA_ATTRIBUTE_INTELLECT",e,a)},strength:function(e,a){return t.call(this,"DOTA_ATTRIBUTE_STRENGTH",e,a)}},u=function(t,e){if(o.hasOwnProperty(e)){var a=Array.prototype.slice.call(arguments,2);return o[e].apply(c[t],a)}return c[t][e]},c=null;return{attributes:l,attributeOptions:s,attributeModifiers:o,getAttributeAtLevel:t,getAttributeBase:a,getAttributeGain:e,getPrimaryAttributeBase:i,getPrimaryAttributeGain:r,getAttributeValue:u,getHeroData:function(){return c||{}},init:function(t){n("/media/dota-json/herodata.json",function(e){c=e,t(e)})}}}();e.exports=r},{"./util/getJSON":40}]},{},[28]);