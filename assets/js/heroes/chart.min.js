require=function e(t,r,n){function a(i,l){if(!r[i]){if(!t[i]){var s="function"==typeof require&&require;if(!l&&s)return s(i,!0);if(o)return o(i,!0);var d=new Error("Cannot find module '"+i+"'");throw d.code="MODULE_NOT_FOUND",d}var u=r[i]={exports:{}};t[i][0].call(u.exports,function(e){var r=t[i][1][e];return a(r||e)},u,u.exports,e,t,r,n)}return r[i].exports}for(var o="function"==typeof require&&require,i=0;i<n.length;i++)a(n[i]);return a}({40:[function(e,t,r){var n=jQuery=e("jquery");e("bootstrap");var a=e("../ktlib"),o=e("../util/queryString"),i=o.query_string,l=o.updateQueryStringParam;n(function(){a.init(function(e){var t=a.attributeOptions,r=a.attributeModifiers;t.push({id:"HeroID",name:"HeroID"}),t=t.filter(function(e){return"attributeprimary"!==e.id}).sort(function(e,t){return e.name<t.name?-1:e.name>t.name?1:0});t.map(function(e){return e.id});n.getJSON("/media/dota-json/heroes.json",function(a){function o(){++p===u.length&&d()}function s(e){return{label:e,fill:!1,lineTension:.1,backgroundColor:"rgba(75,192,192,0.4)",borderColor:"rgba(75,192,192,1)",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",pointBorderColor:"rgba(75,192,192,1)",pointBackgroundColor:"#fff",pointBorderWidth:1,pointHoverRadius:5,pointHoverBackgroundColor:"rgba(75,192,192,1)",pointHoverBorderColor:"rgba(220,220,220,1)",pointHoverBorderWidth:2,pointRadius:10,pointHitRadius:10,data:[],pointStyle:[]}}function d(){function a(){h.selectedX()&&h.selectedY()&&(g.data.datasets.forEach(function(e){var t=e._heroId,r=d(t);e.data.length=0,e.data.push(r)}),o(),g.update())}function o(){var e=t.filter(function(e){return e.id==h.selectedX()})[0].name,r=t.filter(function(e){return e.id==h.selectedY()})[0].name,a=r+" vs. "+e;g.options.scales.yAxes[0].scaleLabel.labelString=r,g.options.scales.xAxes[0].scaleLabel.labelString=e,n("#chart-title").text(a)}function d(t){var n=e["npc_dota_hero_"+t];if(r.hasOwnProperty(h.selectedX()))var a=parseFloat(r[h.selectedX()].call(n,h.selectedLevel()).toFixed(4));else var a=parseFloat(n[h.selectedX()].toFixed(4));if(r.hasOwnProperty(h.selectedY()))var o=parseFloat(r[h.selectedY()].call(n,h.selectedLevel()).toFixed(4));else var o=parseFloat(n[h.selectedY()].toFixed(4));return{x:a,y:o}}var p=document.getElementById("myChart"),f={labels:[],datasets:[]};f.datasets.push();var b={yAxes:[{type:"linear",scaleLabel:{display:!0,labelString:""}}],xAxes:[{type:"linear",scaleLabel:{display:!0,labelString:""}}]},g=new Chart(p,{type:"scatter",data:f,options:{showLines:!1,xAxes:[{display:!0}],scales:b,hover:{mode:"single"},legend:{position:"bottom"},tooltips:{mode:"single",callbacks:{title:function(e,t,r){return t.datasets.filter(function(t){return t.data[0].x==e[0].xLabel&&t.data[0].y==e[0].yLabel}).map(function(e){return e.label}).sort().join(",")}}}}}),h={attributes:ko.observableArray(t),selectedX:ko.observable(),selectedY:ko.observable(),selectedLevel:ko.observable(),showLegend:ko.observable(!0),toggleOn:function(){g.data.datasets.forEach(function(e){e.hidden=!1,e._meta[0].hidden=null}),g.update()},toggleOff:function(){g.data.datasets.forEach(function(e){e.hidden=!0,e._meta[0].hidden=null}),g.update()},toggleLegend:function(){h.showLegend(!h.showLegend()),g.options.legend.display=h.showLegend(),g.update()}};h.selectedX.subscribe(function(e){l("x",e),a()}),h.selectedLevel.subscribe(function(e){l("level",e),a()}),h.selectedY.subscribe(function(e){l("y",e),a()}),h.selectedX(i.x||"ehp"),h.selectedY(i.y||"dps"),h.selectedLevel(i.level||1),function(){h.selectedX()&&h.selectedY()&&(f.datasets.length=0,u.forEach(function(t){var r=e["npc_dota_hero_"+t],n=new s(r.displayname),a=d(t);n._heroId=t,n.data.push(a),n.pointStyle.push(c[t]),f.datasets.push(n)}),f.datasets.sort(function(e,t){return e.label<t.label?-1:e.label>t.label?1:0}),o(),g.update())}(),ko.applyBindings(h)}var u=a.data,c={},p=0;u.forEach(function(e){var t=new Image;t.src="/media/images/miniheroes/"+e+".png",c[e]=t,t.onload=o})})})})},{"../ktlib":46,"../util/queryString":53,bootstrap:1,jquery:25}],53:[function(e,t,r){function n(e,t){baseUrl=[location.protocol,"//",location.host,location.pathname].join(""),urlQueryString=document.location.search;var r=e+"="+t,n="?"+r;urlQueryString&&(keyRegex=new RegExp("([?&])"+e+"[^&]*"),n=null!==urlQueryString.match(keyRegex)?urlQueryString.replace(keyRegex,"$1"+r):urlQueryString+"&"+r),window.history.replaceState({},"",baseUrl+n)}var a=function(e){if(""==e)return{};for(var t={},r=0;r<e.length;++r){var n=e[r].split("=",2);1==n.length?t[n[0]]="":t[n[0]]=decodeURIComponent(n[1].replace(/\+/g," "))}return t}(window.location.search.substr(1).split("&"));t.exports={query_string:a,updateQueryStringParam:n}},{}]},{},[40]);