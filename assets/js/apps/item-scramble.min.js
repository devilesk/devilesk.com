require=function e(n,t,r){function i(u,o){if(!t[u]){if(!n[u]){var s="function"==typeof require&&require;if(!o&&s)return s(u,!0);if(a)return a(u,!0);var p=new Error("Cannot find module '"+u+"'");throw p.code="MODULE_NOT_FOUND",p}var c=t[u]={exports:{}};n[u][0].call(c.exports,function(e){var t=n[u][1][e];return i(t?t:e)},c,c.exports,e,n,t,r)}return t[u].exports}for(var a="function"==typeof require&&require,u=0;u<r.length;u++)i(r[u]);return i}({33:[function(e,n,t){var r=jQuery=e("jquery");e("jquery-ui/ui/version"),e("jquery-ui/ui/ie"),e("jquery-ui/ui/data"),e("jquery-ui/ui/plugin"),e("jquery-ui/ui/safe-active-element"),e("jquery-ui/ui/safe-blur"),e("jquery-ui/ui/scroll-parent"),e("jquery-ui/ui/widget"),e("jquery-ui/ui/widgets/mouse"),e("jquery-ui/ui/widgets/draggable"),e("bootstrap");var i=e("underscore");r(function(){function e(e){for(var n,t,r=e.length;r>0;)t=Math.floor(Math.random()*r),r--,n=e[r],e[r]=e[t],e[t]=n;return e}function n(){s=i.sortBy(i.sample(l,f),function(e){return e.name}),d=i.pluck(s,"name"),p=s.reduce(function(e,n){return e.concat(n.allComponents)},[]),c=[],e(p),r("#components-container").empty();for(var a=0;a<p.length;a++){var m=r("<img>").attr("src","http://cdn.dota2.com/apps/dota2/images/items/"+p[a]+"_lg.png").addClass("component");m.data("componentName",p[a]),c.push(m),m.draggable({snap:!0,stop:function(e,a){var s=this,p=r(this).data("ui-draggable").snapElements,d=r(this).data("snap-state");snapDiff=i.pluck(p.filter(function(e,n){return!p[n].snapping==d[n].snapping}),"item"),r(this).data("snap-state",r(this).data("ui-draggable").snapElements),snapDiff.forEach(function(e){t(s,e)});for(var f=c.map(function(e){return e[0]}),m=[];f.length>0;){var g=o(f[0]);g&&m.push(g),f=i.difference(f,u(f[0],[],[]))}var h=r(".upgrade").map(function(){return r(this).data("upgradeName")}).get();m.length>0?(m.forEach(function(e){if(h.indexOf(e)==-1){var n=r("<img>").attr("src","http://cdn.dota2.com/apps/dota2/images/items/"+e+"_lg.png").addClass("upgrade").data("upgradeName",e);r("#upgrades-container").append(n.hide().fadeIn(500))}else h.splice(h.indexOf(e),1)}),r(".upgrade").each(function(e){h.indexOf(r(this).data("upgradeName"))!=-1&&(r(this).remove(),h.splice(h.indexOf(r(this).data("upgradeName")),1))})):r("#upgrades-container").empty();var v=c.reduce(function(e,n){return o(n[0])||e.push(n),e},[]);if(c.forEach(function(e){v.indexOf(e)==-1?e.addClass("combined"):e.removeClass("combined")}),0==v.length&&m.every(function(e){return i.find(l,function(n){return n.name==e})})){setTimeout(function(){r.when(r(".upgrade").fadeOut(500)).then(function(){r(this).remove(),n()})},1e3)}}}),r("#components-container").append(m.hide().fadeIn(500))}c.forEach(function(e){e.data("snap-state",c.reduce(function(n,t){return e!=t&&n.push({item:t[0],snapping:!1}),n},[]))})}function t(e,n){if(r(n).data("snap-state")){var t=i.find(r(n).data("snap-state"),function(n){return n.item==e}),a=i.find(r(e).data("snap-state"),function(e){return e.item==n});t.snapping=a.snapping}}function a(e){var n=r(e).data("snap-state"),t=[];return n&&(t=r.map(n,function(e){return e.snapping?e.item:null})),t}function u(e,n,t){var r=a(e);if(t.indexOf(e)==-1&&(n.push(e),t.push(e)),r)for(var i=0;i<r.length;i++)t.indexOf(r[i])==-1&&u(r[i],n,t);return n}function o(e){var n=u(e,[],[]).map(function(e){return r(e).data("componentName")});n=n.sort();var t=n.reduce(function(e,n){return e+n},"");return g[t]}var s,p,c,d,f=5,m=[],l=[],g={};r.getJSON("/media/dota-json/itemdata.json",function(e){function t(n){var a=[];return r.indexOf(n)==-1?n.indexOf("item_recipe_")==-1?a.push(n.replace("item_","")):a.push("recipe"):a=a.concat(e[i[n]].ItemRequirements.map(t).reduce(function(e,n){return e.concat(n)},[])),a}delete e.item_ward_dispenser,delete e.item_recipe_ward_dispenser;var r=[],i={};for(var a in e)e[a].ItemRecipe&&(r.push(e[a].ItemResult),i[e[a].ItemResult]=a);for(var a in e)e[a].ItemRecipe?l.push({name:e[a].ItemResult.replace("item_",""),components:e[a].ItemRequirements.map(function(e){return e.indexOf("item_recipe_")==-1?e.replace("item_",""):"recipe"}),cost:e[e[a].ItemResult].itemcost,allComponents:t(e[a].ItemResult)}):r.indexOf(a)==-1&&a.indexOf("winter_")==-1&&a.indexOf("greevil_")==-1&&a.indexOf("halloween_")==-1&&a.indexOf("mystery_")==-1&&m.push({name:e[a].name.replace("item_",""),components:null,cost:e[a].itemcost});for(var a=0;a<l.length;a++){var u=l[a].allComponents.sort().reduce(function(e,n){return e+n},"");g[u]=l[a].name}n()})})},{bootstrap:1,jquery:25,"jquery-ui/ui/data":14,"jquery-ui/ui/ie":15,"jquery-ui/ui/plugin":16,"jquery-ui/ui/safe-active-element":17,"jquery-ui/ui/safe-blur":18,"jquery-ui/ui/scroll-parent":19,"jquery-ui/ui/version":20,"jquery-ui/ui/widget":21,"jquery-ui/ui/widgets/draggable":22,"jquery-ui/ui/widgets/mouse":24,underscore:29}]},{},[33]);