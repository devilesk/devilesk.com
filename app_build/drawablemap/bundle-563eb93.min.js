!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.DotaDrawableMap=e()}}(function(){var define,module,exports;return function e(t,i,n){function r(o,a){if(!i[o]){if(!t[o]){var l="function"==typeof require&&require;if(!a&&l)return l(o,!0);if(s)return s(o,!0);var h=new Error("Cannot find module '"+o+"'");throw h.code="MODULE_NOT_FOUND",h}var u=i[o]={exports:{}};t[o][0].call(u.exports,function(e){var i=t[o][1][e];return r(i?i:e)},u,u.exports,e,t,i,n)}return i[o].exports}for(var s="function"==typeof require&&require,o=0;o<n.length;o++)r(n[o]);return r}({1:[function(e,t,i){!function(e,n){"object"==typeof i&&"undefined"!=typeof t?n(i):"function"==typeof define&&define.amd?define(["exports"],n):n(e.d3=e.d3||{})}(this,function(e){"use strict";function t(e){return function(t,i){return r(e(t),i)}}function i(e,t,i){var n=Math.abs(t-e)/Math.max(0,i),r=Math.pow(10,Math.floor(Math.log(n)/Math.LN10)),s=n/r;return s>=b?r*=10:s>=O?r*=5:s>=w&&(r*=2),t<e?-r:r}function n(e){return e.length}var r=function(e,t){return e<t?-1:e>t?1:e>=t?0:NaN},s=function(e){return 1===e.length&&(e=t(e)),{left:function(t,i,n,r){for(null==n&&(n=0),null==r&&(r=t.length);n<r;){var s=n+r>>>1;e(t[s],i)<0?n=s+1:r=s}return n},right:function(t,i,n,r){for(null==n&&(n=0),null==r&&(r=t.length);n<r;){var s=n+r>>>1;e(t[s],i)>0?r=s:n=s+1}return n}}},o=s(r),a=o.right,l=o.left,h=function(e,t){return t<e?-1:t>e?1:t>=e?0:NaN},u=function(e){return null===e?NaN:+e},c=function(e,t){var i,n,r=e.length,s=0,o=0,a=-1,l=0;if(null==t)for(;++a<r;)isNaN(i=u(e[a]))||(n=i-s,s+=n/++l,o+=n*(i-s));else for(;++a<r;)isNaN(i=u(t(e[a],a,e)))||(n=i-s,s+=n/++l,o+=n*(i-s));if(l>1)return o/(l-1)},p=function(e,t){var i=c(e,t);return i?Math.sqrt(i):i},d=function(e,t){var i,n,r,s=-1,o=e.length;if(null==t){for(;++s<o;)if(null!=(n=e[s])&&n>=n){i=r=n;break}for(;++s<o;)null!=(n=e[s])&&(i>n&&(i=n),r<n&&(r=n))}else{for(;++s<o;)if(null!=(n=t(e[s],s,e))&&n>=n){i=r=n;break}for(;++s<o;)null!=(n=t(e[s],s,e))&&(i>n&&(i=n),r<n&&(r=n))}return[i,r]},f=Array.prototype,y=f.slice,m=f.map,g=function(e){return function(){return e}},v=function(e){return e},L=function(e,t,i){e=+e,t=+t,i=(r=arguments.length)<2?(t=e,e=0,1):r<3?1:+i;for(var n=-1,r=0|Math.max(0,Math.ceil((t-e)/i)),s=new Array(r);++n<r;)s[n]=e+n*i;return s},b=Math.sqrt(50),O=Math.sqrt(10),w=Math.sqrt(2),x=function(e,t,n){var r=i(e,t,n);return L(Math.ceil(e/r)*r,Math.floor(t/r)*r+r/2,r)},_=function(e){return Math.ceil(Math.log(e.length)/Math.LN2)+1},E=function(){function e(e){var r,s,o=e.length,l=new Array(o);for(r=0;r<o;++r)l[r]=t(e[r],r,e);var h=i(l),u=h[0],c=h[1],p=n(l,u,c);Array.isArray(p)||(p=x(u,c,p));for(var d=p.length;p[0]<=u;)p.shift(),--d;for(;p[d-1]>=c;)p.pop(),--d;var f,y=new Array(d+1);for(r=0;r<=d;++r)f=y[r]=[],f.x0=r>0?p[r-1]:u,f.x1=r<d?p[r]:c;for(r=0;r<o;++r)s=l[r],u<=s&&s<=c&&y[a(p,s,0,d)].push(e[r]);return y}var t=v,i=d,n=_;return e.value=function(i){return arguments.length?(t="function"==typeof i?i:g(i),e):t},e.domain=function(t){return arguments.length?(i="function"==typeof t?t:g([t[0],t[1]]),e):i},e.thresholds=function(t){return arguments.length?(n="function"==typeof t?t:g(Array.isArray(t)?y.call(t):t),e):n},e},S=function(e,t,i){if(null==i&&(i=u),n=e.length){if((t=+t)<=0||n<2)return+i(e[0],0,e);if(t>=1)return+i(e[n-1],n-1,e);var n,r=(n-1)*t,s=Math.floor(r),o=+i(e[s],s,e),a=+i(e[s+1],s+1,e);return o+(a-o)*(r-s)}},C=function(e,t,i){return e=m.call(e,u).sort(r),Math.ceil((i-t)/(2*(S(e,.75)-S(e,.25))*Math.pow(e.length,-1/3)))},T=function(e,t,i){return Math.ceil((i-t)/(3.5*p(e)*Math.pow(e.length,-1/3)))},k=function(e,t){var i,n,r=-1,s=e.length;if(null==t){for(;++r<s;)if(null!=(n=e[r])&&n>=n){i=n;break}for(;++r<s;)null!=(n=e[r])&&n>i&&(i=n)}else{for(;++r<s;)if(null!=(n=t(e[r],r,e))&&n>=n){i=n;break}for(;++r<s;)null!=(n=t(e[r],r,e))&&n>i&&(i=n)}return i},M=function(e,t){var i,n=0,r=e.length,s=-1,o=r;if(null==t)for(;++s<r;)isNaN(i=u(e[s]))?--o:n+=i;else for(;++s<r;)isNaN(i=u(t(e[s],s,e)))?--o:n+=i;if(o)return n/o},P=function(e,t){var i,n=[],s=e.length,o=-1;if(null==t)for(;++o<s;)isNaN(i=u(e[o]))||n.push(i);else for(;++o<s;)isNaN(i=u(t(e[o],o,e)))||n.push(i);return S(n.sort(r),.5)},N=function(e){for(var t,i,n,r=e.length,s=-1,o=0;++s<r;)o+=e[s].length;for(i=new Array(o);--r>=0;)for(n=e[r],t=n.length;--t>=0;)i[--o]=n[t];return i},D=function(e,t){var i,n,r=-1,s=e.length;if(null==t){for(;++r<s;)if(null!=(n=e[r])&&n>=n){i=n;break}for(;++r<s;)null!=(n=e[r])&&i>n&&(i=n)}else{for(;++r<s;)if(null!=(n=t(e[r],r,e))&&n>=n){i=n;break}for(;++r<s;)null!=(n=t(e[r],r,e))&&i>n&&(i=n)}return i},I=function(e){for(var t=0,i=e.length-1,n=e[0],r=new Array(i<0?0:i);t<i;)r[t]=[n,n=e[++t]];return r},R=function(e,t){for(var i=t.length,n=new Array(i);i--;)n[i]=e[t[i]];return n},A=function(e,t){if(i=e.length){var i,n,s=0,o=0,a=e[o];for(t||(t=r);++s<i;)(t(n=e[s],a)<0||0!==t(a,a))&&(a=n,o=s);return 0===t(a,a)?o:void 0}},z=function(e,t,i){for(var n,r,s=(null==i?e.length:i)-(t=null==t?0:+t);s;)r=Math.random()*s--|0,n=e[s+t],e[s+t]=e[r+t],e[r+t]=n;return e},F=function(e,t){var i,n=0,r=e.length,s=-1;if(null==t)for(;++s<r;)(i=+e[s])&&(n+=i);else for(;++s<r;)(i=+t(e[s],s,e))&&(n+=i);return n},U=function(e){if(!(s=e.length))return[];for(var t=-1,i=D(e,n),r=new Array(i);++t<i;)for(var s,o=-1,a=r[t]=new Array(s);++o<s;)a[o]=e[o][t];return r},H=function(){return U(arguments)};e.bisect=a,e.bisectRight=a,e.bisectLeft=l,e.ascending=r,e.bisector=s,e.descending=h,e.deviation=p,e.extent=d,e.histogram=E,e.thresholdFreedmanDiaconis=C,e.thresholdScott=T,e.thresholdSturges=_,e.max=k,e.mean=M,e.median=P,e.merge=N,e.min=D,e.pairs=I,e.permute=R,e.quantile=S,e.range=L,e.scan=A,e.shuffle=z,e.sum=F,e.ticks=x,e.tickStep=i,e.transpose=U,e.variance=c,e.zip=H,Object.defineProperty(e,"__esModule",{value:!0})})},{}],2:[function(e,t,i){!function(e,n){"object"==typeof i&&"undefined"!=typeof t?n(i):"function"==typeof define&&define.amd?define(["exports"],n):n(e.d3=e.d3||{})}(this,function(e){"use strict";function t(){}function i(e,i){var n=new t;if(e instanceof t)e.each(function(e,t){n.set(t,e)});else if(Array.isArray(e)){var r,s=-1,o=e.length;if(null==i)for(;++s<o;)n.set(s,e[s]);else for(;++s<o;)n.set(i(r=e[s],s,e),r)}else if(e)for(var a in e)n.set(a,e[a]);return n}function n(){return{}}function r(e,t,i){e[t]=i}function s(){return i()}function o(e,t,i){e.set(t,i)}function a(){}function l(e,t){var i=new a;if(e instanceof a)e.each(function(e){i.add(e)});else if(e){var n=-1,r=e.length;if(null==t)for(;++n<r;)i.add(e[n]);else for(;++n<r;)i.add(t(e[n],n,e))}return i}var h="$";t.prototype=i.prototype={constructor:t,has:function(e){return h+e in this},get:function(e){return this[h+e]},set:function(e,t){return this[h+e]=t,this},remove:function(e){var t=h+e;return t in this&&delete this[t]},clear:function(){for(var e in this)e[0]===h&&delete this[e]},keys:function(){var e=[];for(var t in this)t[0]===h&&e.push(t.slice(1));return e},values:function(){var e=[];for(var t in this)t[0]===h&&e.push(this[t]);return e},entries:function(){var e=[];for(var t in this)t[0]===h&&e.push({key:t.slice(1),value:this[t]});return e},size:function(){var e=0;for(var t in this)t[0]===h&&++e;return e},empty:function(){for(var e in this)if(e[0]===h)return!1;return!0},each:function(e){for(var t in this)t[0]===h&&e(this[t],t.slice(1),this)}};var u=function(){function e(t,n,r,s){if(n>=u.length)return null!=l?l(t):null!=a?t.sort(a):t;for(var o,h,c,p=-1,d=t.length,f=u[n++],y=i(),m=r();++p<d;)(c=y.get(o=f(h=t[p])+""))?c.push(h):y.set(o,[h]);return y.each(function(t,i){s(m,i,e(t,n,r,s))}),m}function t(e,i){if(++i>u.length)return e;var n,r=c[i-1];return null!=l&&i>=u.length?n=e.entries():(n=[],e.each(function(e,r){n.push({key:r,values:t(e,i)})})),null!=r?n.sort(function(e,t){return r(e.key,t.key)}):n}var a,l,h,u=[],c=[];return h={object:function(t){return e(t,0,n,r)},map:function(t){return e(t,0,s,o)},entries:function(i){return t(e(i,0,s,o),0)},key:function(e){return u.push(e),h},sortKeys:function(e){return c[u.length-1]=e,h},sortValues:function(e){return a=e,h},rollup:function(e){return l=e,h}}},c=i.prototype;a.prototype=l.prototype={constructor:a,has:c.has,add:function(e){return e+="",this[h+e]=e,this},remove:c.remove,clear:c.clear,values:c.keys,size:c.size,empty:c.empty,each:c.each};var p=function(e){var t=[];for(var i in e)t.push(i);return t},d=function(e){var t=[];for(var i in e)t.push(e[i]);return t},f=function(e){var t=[];for(var i in e)t.push({key:i,value:e[i]});return t};e.nest=u,e.set=l,e.map=i,e.keys=p,e.values=d,e.entries=f,Object.defineProperty(e,"__esModule",{value:!0})})},{}],3:[function(e,t,i){!function(e,n){"object"==typeof i&&"undefined"!=typeof t?n(i):"function"==typeof define&&define.amd?define(["exports"],n):n(e.d3=e.d3||{})}(this,function(e){"use strict";function t(e,t){var i=Object.create(e.prototype);for(var n in t)i[n]=t[n];return i}function i(){}function n(e){var t;return e=(e+"").trim().toLowerCase(),(t=D.exec(e))?(t=parseInt(t[1],16),new l(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1)):(t=I.exec(e))?r(parseInt(t[1],16)):(t=R.exec(e))?new l(t[1],t[2],t[3],1):(t=A.exec(e))?new l(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=z.exec(e))?s(t[1],t[2],t[3],t[4]):(t=F.exec(e))?s(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=U.exec(e))?h(t[1],t[2]/100,t[3]/100,1):(t=H.exec(e))?h(t[1],t[2]/100,t[3]/100,t[4]):B.hasOwnProperty(e)?r(B[e]):"transparent"===e?new l(NaN,NaN,NaN,0):null}function r(e){return new l(e>>16&255,e>>8&255,255&e,1)}function s(e,t,i,n){return n<=0&&(e=t=i=NaN),new l(e,t,i,n)}function o(e){return e instanceof i||(e=n(e)),e?(e=e.rgb(),new l(e.r,e.g,e.b,e.opacity)):new l}function a(e,t,i,n){return 1===arguments.length?o(e):new l(e,t,i,null==n?1:n)}function l(e,t,i,n){this.r=+e,this.g=+t,this.b=+i,this.opacity=+n}function h(e,t,i,n){return n<=0?e=t=i=NaN:i<=0||i>=1?e=t=NaN:t<=0&&(e=NaN),new p(e,t,i,n)}function u(e){if(e instanceof p)return new p(e.h,e.s,e.l,e.opacity);if(e instanceof i||(e=n(e)),!e)return new p;if(e instanceof p)return e;e=e.rgb();var t=e.r/255,r=e.g/255,s=e.b/255,o=Math.min(t,r,s),a=Math.max(t,r,s),l=NaN,h=a-o,u=(a+o)/2;return h?(l=t===a?(r-s)/h+6*(r<s):r===a?(s-t)/h+2:(t-r)/h+4,h/=u<.5?a+o:2-a-o,l*=60):h=u>0&&u<1?0:l,new p(l,h,u,e.opacity)}function c(e,t,i,n){return 1===arguments.length?u(e):new p(e,t,i,null==n?1:n)}function p(e,t,i,n){this.h=+e,this.s=+t,this.l=+i,this.opacity=+n}function d(e,t,i){return 255*(e<60?t+(i-t)*e/60:e<180?i:e<240?t+(i-t)*(240-e)/60:t)}function f(e){if(e instanceof m)return new m(e.l,e.a,e.b,e.opacity);if(e instanceof x){var t=e.h*j;return new m(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}e instanceof l||(e=o(e));var i=b(e.r),n=b(e.g),r=b(e.b),s=g((.4124564*i+.3575761*n+.1804375*r)/q),a=g((.2126729*i+.7151522*n+.072175*r)/V),h=g((.0193339*i+.119192*n+.9503041*r)/X);return new m(116*a-16,500*(s-a),200*(a-h),e.opacity)}function y(e,t,i,n){return 1===arguments.length?f(e):new m(e,t,i,null==n?1:n)}function m(e,t,i,n){this.l=+e,this.a=+t,this.b=+i,this.opacity=+n}function g(e){return e>K?Math.pow(e,1/3):e/$+Y}function v(e){return e>Z?e*e*e:$*(e-Y)}function L(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function b(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function O(e){if(e instanceof x)return new x(e.h,e.c,e.l,e.opacity);e instanceof m||(e=f(e));var t=Math.atan2(e.b,e.a)*G;return new x(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function w(e,t,i,n){return 1===arguments.length?O(e):new x(e,t,i,null==n?1:n)}function x(e,t,i,n){this.h=+e,this.c=+t,this.l=+i,this.opacity=+n}function _(e){if(e instanceof S)return new S(e.h,e.s,e.l,e.opacity);e instanceof l||(e=o(e));var t=e.r/255,i=e.g/255,n=e.b/255,r=(se*n+ne*t-re*i)/(se+ne-re),s=n-r,a=(ie*(i-r)-ee*s)/te,h=Math.sqrt(a*a+s*s)/(ie*r*(1-r)),u=h?Math.atan2(a,s)*G-120:NaN;return new S(u<0?u+360:u,h,r,e.opacity)}function E(e,t,i,n){return 1===arguments.length?_(e):new S(e,t,i,null==n?1:n)}function S(e,t,i,n){this.h=+e,this.s=+t,this.l=+i,this.opacity=+n}var C=function(e,t,i){e.prototype=t.prototype=i,i.constructor=e},T=.7,k=1/T,M="\\s*([+-]?\\d+)\\s*",P="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",N="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",D=/^#([0-9a-f]{3})$/,I=/^#([0-9a-f]{6})$/,R=new RegExp("^rgb\\("+[M,M,M]+"\\)$"),A=new RegExp("^rgb\\("+[N,N,N]+"\\)$"),z=new RegExp("^rgba\\("+[M,M,M,P]+"\\)$"),F=new RegExp("^rgba\\("+[N,N,N,P]+"\\)$"),U=new RegExp("^hsl\\("+[P,N,N]+"\\)$"),H=new RegExp("^hsla\\("+[P,N,N,P]+"\\)$"),B={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};C(i,n,{displayable:function(){return this.rgb().displayable()},toString:function(){return this.rgb()+""}}),C(l,a,t(i,{brighter:function(e){return e=null==e?k:Math.pow(k,e),new l(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=null==e?T:Math.pow(T,e),new l(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return 0<=this.r&&this.r<=255&&0<=this.g&&this.g<=255&&0<=this.b&&this.b<=255&&0<=this.opacity&&this.opacity<=1},toString:function(){var e=this.opacity;return e=isNaN(e)?1:Math.max(0,Math.min(1,e)),(1===e?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===e?")":", "+e+")")}})),C(p,c,t(i,{brighter:function(e){return e=null==e?k:Math.pow(k,e),new p(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?T:Math.pow(T,e),new p(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,i=this.l,n=i+(i<.5?i:1-i)*t,r=2*i-n;return new l(d(e>=240?e-240:e+120,r,n),d(e,r,n),d(e<120?e+240:e-120,r,n),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1}}));var j=Math.PI/180,G=180/Math.PI,W=18,q=.95047,V=1,X=1.08883,Y=4/29,Z=6/29,$=3*Z*Z,K=Z*Z*Z;C(m,y,t(i,{brighter:function(e){return new m(this.l+W*(null==e?1:e),this.a,this.b,this.opacity)},darker:function(e){return new m(this.l-W*(null==e?1:e),this.a,this.b,this.opacity)},rgb:function(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,i=isNaN(this.b)?e:e-this.b/200;return e=V*v(e),t=q*v(t),i=X*v(i),new l(L(3.2404542*t-1.5371385*e-.4985314*i),L(-.969266*t+1.8760108*e+.041556*i),L(.0556434*t-.2040259*e+1.0572252*i),this.opacity)}})),C(x,w,t(i,{brighter:function(e){return new x(this.h,this.c,this.l+W*(null==e?1:e),this.opacity)},darker:function(e){return new x(this.h,this.c,this.l-W*(null==e?1:e),this.opacity)},rgb:function(){return f(this).rgb()}}));var Q=-.14861,J=1.78277,ee=-.29227,te=-.90649,ie=1.97294,ne=ie*te,re=ie*J,se=J*ee-te*Q;C(S,E,t(i,{brighter:function(e){return e=null==e?k:Math.pow(k,e),new S(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?T:Math.pow(T,e),new S(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=isNaN(this.h)?0:(this.h+120)*j,t=+this.l,i=isNaN(this.s)?0:this.s*t*(1-t),n=Math.cos(e),r=Math.sin(e);return new l(255*(t+i*(Q*n+J*r)),255*(t+i*(ee*n+te*r)),255*(t+i*(ie*n)),this.opacity)}})),e.color=n,e.rgb=a,e.hsl=c,e.lab=y,e.hcl=w,e.cubehelix=E,Object.defineProperty(e,"__esModule",{value:!0})})},{}],4:[function(e,t,i){!function(e,n){"object"==typeof i&&"undefined"!=typeof t?n(i):"function"==typeof define&&define.amd?define(["exports"],n):n(e.d3=e.d3||{})}(this,function(e){"use strict";function t(e,t){if((i=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var i,n=e.slice(0,i);return[n.length>1?n[0]+n.slice(2):n,+e.slice(i+1)]}function i(e){return e=t(Math.abs(e)),e?e[1]:NaN}function n(e,t){return function(i,n){for(var r=i.length,s=[],o=0,a=e[0],l=0;r>0&&a>0&&(l+a+1>n&&(a=Math.max(1,n-l)),s.push(i.substring(r-=a,r+a)),!((l+=a+1)>n));)a=e[o=(o+1)%e.length];return s.reverse().join(t)}}function r(e,t){e=e.toPrecision(t);e:for(var i,n=e.length,r=1,s=-1;r<n;++r)switch(e[r]){case".":s=i=r;break;case"0":0===s&&(s=r),i=r;break;case"e":break e;default:s>0&&(s=0)}return s>0?e.slice(0,s)+e.slice(i+1):e}function s(e,i){var n=t(e,i);if(!n)return e+"";var r=n[0],s=n[1],o=s-(y=3*Math.max(-8,Math.min(8,Math.floor(s/3))))+1,a=r.length;return o===a?r:o>a?r+new Array(o-a+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+t(e,Math.max(0,i+o-1))[0]}function o(e,i){var n=t(e,i);if(!n)return e+"";var r=n[0],s=n[1];return s<0?"0."+new Array(-s).join("0")+r:r.length>s+1?r.slice(0,s+1)+"."+r.slice(s+1):r+new Array(s-r.length+2).join("0")}function a(e){return new l(e)}function l(e){if(!(t=g.exec(e)))throw new Error("invalid format: "+e);var t,i=t[1]||" ",n=t[2]||">",r=t[3]||"-",s=t[4]||"",o=!!t[5],a=t[6]&&+t[6],l=!!t[7],h=t[8]&&+t[8].slice(1),u=t[9]||"";"n"===u?(l=!0,u="g"):m[u]||(u=""),(o||"0"===i&&"="===n)&&(o=!0,i="0",n="="),this.fill=i,this.align=n,this.sign=r,this.symbol=s,this.zero=o,this.width=a,this.comma=l,this.precision=h,this.type=u}function h(e){return e}function u(e){function t(e){function t(e){var t,o,a,h=g,m=v;if("c"===f)m=b(e)+m,e="";else{e=+e;var w=(e<0||1/e<0)&&(e*=-1,!0);if(e=b(e,d),w)for(t=-1,o=e.length,w=!1;++t<o;)if(a=e.charCodeAt(t),48<a&&a<58||"x"===f&&96<a&&a<103||"X"===f&&64<a&&a<71){w=!0;break}if(h=(w?"("===r?r:"-":"-"===r||"("===r?"":r)+h,m=m+("s"===f?L[8+y/3]:"")+(w&&"("===r?")":""),O)for(t=-1,o=e.length;++t<o;)if(a=e.charCodeAt(t),48>a||a>57){m=(46===a?l+e.slice(t+1):e.slice(t))+m,e=e.slice(0,t);break}}p&&!u&&(e=s(e,1/0));var x=h.length+e.length+m.length,_=x<c?new Array(c-x+1).join(i):"";switch(p&&u&&(e=s(_+e,_.length?c-m.length:1/0),_=""),n){case"<":return h+e+m+_;case"=":return h+_+e+m;case"^":return _.slice(0,x=_.length>>1)+h+e+m+_.slice(x)}return _+h+e+m}e=a(e);var i=e.fill,n=e.align,r=e.sign,h=e.symbol,u=e.zero,c=e.width,p=e.comma,d=e.precision,f=e.type,g="$"===h?o[0]:"#"===h&&/[boxX]/.test(f)?"0"+f.toLowerCase():"",v="$"===h?o[1]:/[%p]/.test(f)?"%":"",b=m[f],O=!f||/[defgprs%]/.test(f);return d=null==d?f?6:12:/[gprs]/.test(f)?Math.max(1,Math.min(21,d)):Math.max(0,Math.min(20,d)),t.toString=function(){return e+""},t}function r(e,n){var r=t((e=a(e),e.type="f",e)),s=3*Math.max(-8,Math.min(8,Math.floor(i(n)/3))),o=Math.pow(10,-s),l=L[8+s/3];return function(e){return r(o*e)+l}}var s=e.grouping&&e.thousands?n(e.grouping,e.thousands):h,o=e.currency,l=e.decimal;return{format:t,formatPrefix:r}}function c(t){return v=u(t),e.format=v.format,e.formatPrefix=v.formatPrefix,v}function p(e){return Math.max(0,-i(Math.abs(e)))}function d(e,t){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(i(t)/3)))-i(Math.abs(e)))}function f(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,i(t)-i(e))+1}var y,m={"":r,"%":function(e,t){return(100*e).toFixed(t)},b:function(e){return Math.round(e).toString(2)},c:function(e){return e+""},d:function(e){return Math.round(e).toString(10)},e:function(e,t){return e.toExponential(t)},f:function(e,t){return e.toFixed(t)},g:function(e,t){return e.toPrecision(t)},o:function(e){return Math.round(e).toString(8)},p:function(e,t){return o(100*e,t)},r:o,s:s,X:function(e){return Math.round(e).toString(16).toUpperCase()},x:function(e){return Math.round(e).toString(16)}},g=/^(?:(.)?([<>=^]))?([+\-\( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?([a-z%])?$/i;l.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(null==this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(null==this.precision?"":"."+Math.max(0,0|this.precision))+this.type};var v,L=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];c({decimal:".",thousands:",",grouping:[3],currency:["$",""]}),e.formatDefaultLocale=c,e.formatLocale=u,e.formatSpecifier=a,e.precisionFixed=p,e.precisionPrefix=d,e.precisionRound=f,Object.defineProperty(e,"__esModule",{value:!0})})},{}],5:[function(e,t,i){!function(n,r){"object"==typeof i&&"undefined"!=typeof t?r(i,e("d3-array")):"function"==typeof define&&define.amd?define(["exports","d3-array"],r):r(n.d3=n.d3||{},n.d3)}(this,function(e,t){"use strict";function i(){this.reset()}function n(e,t,i){var n=e.s=t+i,r=n-t,s=n-r;e.t=t-s+(i-r)}function r(e){return e>1?0:e<-1?It:Math.acos(e)}function s(e){return e>1?Rt:e<-1?-Rt:Math.asin(e)}function o(e){return(e=Yt(e/2))*e}function a(){}function l(e,t){e&&Jt.hasOwnProperty(e.type)&&Jt[e.type](e,t)}function h(e,t,i){var n,r=-1,s=e.length-i;for(t.lineStart();++r<s;)n=e[r],t.point(n[0],n[1],n[2]);t.lineEnd()}function u(e,t){var i=-1,n=e.length;for(t.polygonStart();++i<n;)h(e[i],t,1);t.polygonEnd()}function c(){ni.point=d}function p(){f(et,tt)}function d(e,t){ni.point=f,et=e,tt=t,e*=Ut,t*=Ut,it=e,nt=Gt(t=t/2+At),rt=Yt(t)}function f(e,t){e*=Ut,t*=Ut,t=t/2+At;var i=e-it,n=i>=0?1:-1,r=n*i,s=Gt(t),o=Yt(t),a=rt*o,l=nt*s+a*Gt(r),h=a*n*Yt(r);ti.add(jt(h,l)),it=e,nt=s,rt=o}function y(e){return[jt(e[1],e[0]),s(e[2])]}function m(e){var t=e[0],i=e[1],n=Gt(i);return[n*Gt(t),n*Yt(t),Yt(i)]}function g(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function v(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function L(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function b(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function O(e){var t=$t(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}function w(e,t){dt.push(ft=[st=e,at=e]),t<ot&&(ot=t),t>lt&&(lt=t)}function x(e,t){var i=m([e*Ut,t*Ut]);if(pt){var n=v(pt,i),r=[n[1],-n[0],0],s=v(r,n);O(s),s=y(s);var o,a=e-ht,l=a>0?1:-1,h=s[0]*Ft*l,u=Ht(a)>180;u^(l*ht<h&&h<l*e)?(o=s[1]*Ft,o>lt&&(lt=o)):(h=(h+360)%360-180,u^(l*ht<h&&h<l*e)?(o=-s[1]*Ft,o<ot&&(ot=o)):(t<ot&&(ot=t),t>lt&&(lt=t))),u?e<ht?k(st,e)>k(st,at)&&(at=e):k(e,at)>k(st,at)&&(st=e):at>=st?(e<st&&(st=e),e>at&&(at=e)):e>ht?k(st,e)>k(st,at)&&(at=e):k(e,at)>k(st,at)&&(st=e)}else w(e,t);pt=i,ht=e}function _(){oi.point=x}function E(){ft[0]=st,ft[1]=at,oi.point=w,pt=null}function S(e,t){if(pt){var i=e-ht;si.add(Ht(i)>180?i+(i>0?360:-360):i)}else ut=e,ct=t;ni.point(e,t),x(e,t)}function C(){ni.lineStart()}function T(){S(ut,ct),ni.lineEnd(),Ht(si)>Nt&&(st=-(at=180)),ft[0]=st,ft[1]=at,pt=null}function k(e,t){return(t-=e)<0?t+360:t}function M(e,t){return e[0]-t[0]}function P(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}function N(e,t){e*=Ut,t*=Ut;var i=Gt(t);D(i*Gt(e),i*Yt(e),Yt(t))}function D(e,t,i){++yt,gt+=(e-gt)/yt,vt+=(t-vt)/yt,Lt+=(i-Lt)/yt}function I(){li.point=R}function R(e,t){e*=Ut,t*=Ut;var i=Gt(t);Tt=i*Gt(e),kt=i*Yt(e),Mt=Yt(t),li.point=A,D(Tt,kt,Mt)}function A(e,t){e*=Ut,t*=Ut;var i=Gt(t),n=i*Gt(e),r=i*Yt(e),s=Yt(t),o=jt($t((o=kt*s-Mt*r)*o+(o=Mt*n-Tt*s)*o+(o=Tt*r-kt*n)*o),Tt*n+kt*r+Mt*s);mt+=o,bt+=o*(Tt+(Tt=n)),Ot+=o*(kt+(kt=r)),wt+=o*(Mt+(Mt=s)),D(Tt,kt,Mt)}function z(){li.point=N}function F(){li.point=H}function U(){B(St,Ct),li.point=N}function H(e,t){St=e,Ct=t,e*=Ut,t*=Ut,li.point=B;var i=Gt(t);Tt=i*Gt(e),kt=i*Yt(e),Mt=Yt(t),D(Tt,kt,Mt)}function B(e,t){e*=Ut,t*=Ut;var i=Gt(t),n=i*Gt(e),s=i*Yt(e),o=Yt(t),a=kt*o-Mt*s,l=Mt*n-Tt*o,h=Tt*s-kt*n,u=$t(a*a+l*l+h*h),c=Tt*n+kt*s+Mt*o,p=u&&-r(c)/u,d=jt(u,c);xt+=p*a,_t+=p*l,Et+=p*h,mt+=d,bt+=d*(Tt+(Tt=n)),Ot+=d*(kt+(kt=s)),wt+=d*(Mt+(Mt=o)),D(Tt,kt,Mt)}function j(e,t){return[e>It?e-zt:e<-It?e+zt:e,t]}function G(e,t,i){return(e%=zt)?t||i?ci(q(e),V(t,i)):q(e):t||i?V(t,i):j}function W(e){return function(t,i){return t+=e,[t>It?t-zt:t<-It?t+zt:t,i]}}function q(e){var t=W(e);return t.invert=W(-e),t}function V(e,t){function i(e,t){var i=Gt(t),l=Gt(e)*i,h=Yt(e)*i,u=Yt(t),c=u*n+l*r;return[jt(h*o-c*a,l*n-u*r),s(c*o+h*a)]}var n=Gt(e),r=Yt(e),o=Gt(t),a=Yt(t);return i.invert=function(e,t){var i=Gt(t),l=Gt(e)*i,h=Yt(e)*i,u=Yt(t),c=u*o-h*a;return[jt(h*o+u*a,l*n+c*r),s(c*n-l*r)]},i}function X(e,t,i,n,r,s){if(i){var o=Gt(t),a=Yt(t),l=n*i;null==r?(r=t+n*zt,s=t-l/2):(r=Y(o,r),s=Y(o,s),(n>0?r<s:r>s)&&(r+=n*zt));for(var h,u=r;n>0?u>s:u<s;u-=l)h=y([o,-a*Gt(u),-a*Yt(u)]),e.point(h[0],h[1])}}function Y(e,t){t=m(t),t[0]-=e,O(t);var i=r(-t[1]);return((-t[2]<0?-i:i)+zt-Nt)%zt}function Z(e,t,i,n){this.x=e,this.z=t,this.o=i,this.e=n,this.v=!1,this.n=this.p=null}function $(e){if(t=e.length){for(var t,i,n=0,r=e[0];++n<t;)r.n=i=e[n],i.p=r,r=i;r.n=i=e[0],i.p=r}}function K(e,i,n,r){function s(t,s){return e<=t&&t<=n&&i<=s&&s<=r}function o(t,s,o,l){var u=0,c=0;if(null==t||(u=a(t,o))!==(c=a(s,o))||h(t,s)<0^o>0){do l.point(0===u||3===u?e:n,u>1?r:i);while((u=(u+o+4)%4)!==c)}else l.point(s[0],s[1])}function a(t,r){return Ht(t[0]-e)<Nt?r>0?0:3:Ht(t[0]-n)<Nt?r>0?2:1:Ht(t[1]-i)<Nt?r>0?1:0:r>0?3:2}function l(e,t){return h(e.x,t.x)}function h(e,t){var i=a(e,1),n=a(t,1);return i!==n?i-n:0===i?t[1]-e[1]:1===i?e[0]-t[0]:2===i?e[1]-t[1]:t[0]-e[0]}return function(a){function h(e,t){s(e,t)&&C.point(e,t)}function u(){for(var t=0,i=0,n=g.length;i<n;++i)for(var s,o,a=g[i],l=1,h=a.length,u=a[0],c=u[0],p=u[1];l<h;++l)s=c,o=p,u=a[l],c=u[0],p=u[1],o<=r?p>r&&(c-s)*(r-o)>(p-o)*(e-s)&&++t:p<=r&&(c-s)*(r-o)<(p-o)*(e-s)&&--t;return t}function c(){C=T,m=[],g=[],S=!0}function p(){var e=u(),i=S&&e,n=(m=t.merge(m)).length;(i||n)&&(a.polygonStart(),i&&(a.lineStart(),o(null,null,1,a),a.lineEnd()),n&&Ti(m,l,e,o,a),a.polygonEnd()),C=a,m=g=v=null}function d(){k.point=y,g&&g.push(v=[]),E=!0,_=!1,w=x=NaN}function f(){m&&(y(L,b),O&&_&&T.rejoin(),m.push(T.result())),k.point=h,_&&C.lineEnd()}function y(t,o){var a=s(t,o);if(g&&v.push([t,o]),E)L=t,b=o,O=a,E=!1,a&&(C.lineStart(),C.point(t,o));else if(a&&_)C.point(t,o);else{var l=[w=Math.max(Mi,Math.min(ki,w)),x=Math.max(Mi,Math.min(ki,x))],h=[t=Math.max(Mi,Math.min(ki,t)),o=Math.max(Mi,Math.min(ki,o))];Si(l,h,e,i,n,r)?(_||(C.lineStart(),C.point(l[0],l[1])),C.point(h[0],h[1]),a||C.lineEnd(),S=!1):a&&(C.lineStart(),C.point(t,o),S=!1)}w=t,x=o,_=a}var m,g,v,L,b,O,w,x,_,E,S,C=a,T=Ei(),k={point:h,lineStart:d,lineEnd:f,polygonStart:c,polygonEnd:p};return k}}function Q(){Di.point=ee,Di.lineEnd=J}function J(){Di.point=Di.lineEnd=a}function ee(e,t){e*=Ut,t*=Ut,pi=e,di=Yt(t),fi=Gt(t),Di.point=te}function te(e,t){e*=Ut,t*=Ut;var i=Yt(t),n=Gt(t),r=Ht(e-pi),s=Gt(r),o=Yt(r),a=n*o,l=fi*i-di*n*s,h=di*i+fi*n*s;Ni.add(jt($t(a*a+l*l),h)),pi=e,di=i,fi=n}function ie(e,i,n){var r=t.range(e,i-Nt,n).concat(i);return function(e){return r.map(function(t){return[e,t]})}}function ne(e,i,n){var r=t.range(e,i-Nt,n).concat(i);return function(e){return r.map(function(t){return[t,e]})}}function re(){function e(){return{type:"MultiLineString",coordinates:i()}}function i(){return t.range(Wt(o/g)*g,s,g).map(d).concat(t.range(Wt(u/v)*v,h,v).map(f)).concat(t.range(Wt(r/y)*y,n,y).filter(function(e){return Ht(e%g)>Nt}).map(c)).concat(t.range(Wt(l/m)*m,a,m).filter(function(e){return Ht(e%v)>Nt}).map(p))}var n,r,s,o,a,l,h,u,c,p,d,f,y=10,m=y,g=90,v=360,L=2.5;return e.lines=function(){return i().map(function(e){return{type:"LineString",coordinates:e}})},e.outline=function(){return{type:"Polygon",coordinates:[d(o).concat(f(h).slice(1),d(s).reverse().slice(1),f(u).reverse().slice(1))]}},e.extent=function(t){return arguments.length?e.extentMajor(t).extentMinor(t):e.extentMinor()},e.extentMajor=function(t){return arguments.length?(o=+t[0][0],s=+t[1][0],u=+t[0][1],h=+t[1][1],o>s&&(t=o,o=s,s=t),u>h&&(t=u,u=h,h=t),e.precision(L)):[[o,u],[s,h]]},e.extentMinor=function(t){return arguments.length?(r=+t[0][0],n=+t[1][0],l=+t[0][1],a=+t[1][1],r>n&&(t=r,r=n,n=t),l>a&&(t=l,l=a,a=t),e.precision(L)):[[r,l],[n,a]]},e.step=function(t){return arguments.length?e.stepMajor(t).stepMinor(t):e.stepMinor()},e.stepMajor=function(t){return arguments.length?(g=+t[0],v=+t[1],e):[g,v]},e.stepMinor=function(t){return arguments.length?(y=+t[0],m=+t[1],e):[y,m]},e.precision=function(t){return arguments.length?(L=+t,c=ie(l,a,90),p=ne(r,n,L),d=ie(u,h,90),f=ne(o,s,L),e):L},e.extentMajor([[-180,-90+Nt],[180,90-Nt]]).extentMinor([[-180,-80-Nt],[180,80+Nt]])}function se(){return re()()}function oe(){ji.point=ae}function ae(e,t){ji.point=le,yi=gi=e,mi=vi=t}function le(e,t){Bi.add(vi*e-gi*t),gi=e,vi=t}function he(){le(yi,mi)}function ue(e,t){e<Gi&&(Gi=e),e>qi&&(qi=e),t<Wi&&(Wi=t),t>Vi&&(Vi=t)}function ce(e,t){Yi+=e,Zi+=t,++$i}function pe(){rn.point=de}function de(e,t){rn.point=fe,ce(Oi=e,wi=t)}function fe(e,t){var i=e-Oi,n=t-wi,r=$t(i*i+n*n);Ki+=r*(Oi+e)/2,Qi+=r*(wi+t)/2,Ji+=r,ce(Oi=e,wi=t)}function ye(){rn.point=ce}function me(){rn.point=ve}function ge(){Le(Li,bi)}function ve(e,t){rn.point=Le,ce(Li=Oi=e,bi=wi=t)}function Le(e,t){var i=e-Oi,n=t-wi,r=$t(i*i+n*n);Ki+=r*(Oi+e)/2,Qi+=r*(wi+t)/2,Ji+=r,r=wi*e-Oi*t,en+=r*(Oi+e),tn+=r*(wi+t),nn+=3*r,ce(Oi=e,wi=t)}function be(e){this._context=e}function Oe(){this._string=[]}function we(e){return"m0,"+e+"a"+e+","+e+" 0 1,1 0,"+-2*e+"a"+e+","+e+" 0 1,1 0,"+2*e+"z"}function xe(e){return e.length>1}function _e(e,t){return((e=e.x)[0]<0?e[1]-Rt-Nt:Rt-e[1])-((t=t.x)[0]<0?t[1]-Rt-Nt:Rt-t[1])}function Ee(e){var t,i=NaN,n=NaN,r=NaN;return{lineStart:function(){e.lineStart(),t=1},point:function(s,o){var a=s>0?It:-It,l=Ht(s-i);Ht(l-It)<Nt?(e.point(i,n=(n+o)/2>0?Rt:-Rt),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(a,n),e.point(s,n),t=0):r!==a&&l>=It&&(Ht(i-r)<Nt&&(i-=r*Nt),Ht(s-a)<Nt&&(s-=a*Nt),n=Se(i,n,s,o),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(a,n),t=0),e.point(i=s,n=o),r=a},lineEnd:function(){e.lineEnd(),i=n=NaN},clean:function(){return 2-t}}}function Se(e,t,i,n){var r,s,o=Yt(e-i);return Ht(o)>Nt?Bt((Yt(t)*(s=Gt(n))*Yt(i)-Yt(n)*(r=Gt(t))*Yt(e))/(r*s*o)):(t+n)/2}function Ce(e,t,i,n){var r;if(null==e)r=i*Rt,n.point(-It,r),
n.point(0,r),n.point(It,r),n.point(It,0),n.point(It,-r),n.point(0,-r),n.point(-It,-r),n.point(-It,0),n.point(-It,r);else if(Ht(e[0]-t[0])>Nt){var s=e[0]<t[0]?It:-It;r=i*s/2,n.point(-s,r),n.point(0,r),n.point(s,r)}else n.point(t[0],t[1])}function Te(e){return function(t){var i=new ke;for(var n in e)i[n]=e[n];return i.stream=t,i}}function ke(){}function Me(e,t,i){var n=t[1][0]-t[0][0],r=t[1][1]-t[0][1],s=e.clipExtent&&e.clipExtent();e.scale(150).translate([0,0]),null!=s&&e.clipExtent(null),ei(i,e.stream(Xi));var o=Xi.result(),a=Math.min(n/(o[1][0]-o[0][0]),r/(o[1][1]-o[0][1])),l=+t[0][0]+(n-a*(o[1][0]+o[0][0]))/2,h=+t[0][1]+(r-a*(o[1][1]+o[0][1]))/2;return null!=s&&e.clipExtent(s),e.scale(150*a).translate([l,h])}function Pe(e,t,i){return Me(e,[[0,0],t],i)}function Ne(e){return Te({point:function(t,i){t=e(t,i),this.stream.point(t[0],t[1])}})}function De(e,t){function i(n,r,o,a,l,h,u,c,p,d,f,y,m,g){var v=u-n,L=c-r,b=v*v+L*L;if(b>4*t&&m--){var O=a+d,w=l+f,x=h+y,_=$t(O*O+w*w+x*x),E=s(x/=_),S=Ht(Ht(x)-1)<Nt||Ht(o-p)<Nt?(o+p)/2:jt(w,O),C=e(S,E),T=C[0],k=C[1],M=T-n,P=k-r,N=L*M-v*P;(N*N/b>t||Ht((v*M+L*P)/b-.5)>.3||a*d+l*f+h*y<dn)&&(i(n,r,o,a,l,h,T,k,S,O/=_,w/=_,x,m,g),g.point(T,k),i(T,k,S,O,w,x,u,c,p,d,f,y,m,g))}}return function(t){function n(i,n){i=e(i,n),t.point(i[0],i[1])}function r(){v=NaN,x.point=s,t.lineStart()}function s(n,r){var s=m([n,r]),o=e(n,r);i(v,L,g,b,O,w,v=o[0],L=o[1],g=n,b=s[0],O=s[1],w=s[2],pn,t),t.point(v,L)}function o(){x.point=n,t.lineEnd()}function a(){r(),x.point=l,x.lineEnd=h}function l(e,t){s(u=e,t),c=v,p=L,d=b,f=O,y=w,x.point=s}function h(){i(v,L,g,b,O,w,c,p,u,d,f,y,pn,t),x.lineEnd=o,o()}var u,c,p,d,f,y,g,v,L,b,O,w,x={point:n,lineStart:r,lineEnd:o,polygonStart:function(){t.polygonStart(),x.lineStart=a},polygonEnd:function(){t.polygonEnd(),x.lineStart=r}};return x}}function Ie(e){return Re(function(){return e})()}function Re(e){function t(e){return e=u(e[0]*Ut,e[1]*Ut),[e[0]*m+a,l-e[1]*m]}function i(e){return e=u.invert((e[0]-a)/m,(l-e[1])/m),e&&[e[0]*Ft,e[1]*Ft]}function n(e,t){return e=o(e,t),[e[0]*m+a,l-e[1]*m]}function r(){u=ci(h=G(O,w,x),o);var e=o(L,b);return a=g-e[0]*m,l=v+e[1]*m,s()}function s(){return f=y=null,t}var o,a,l,h,u,c,p,d,f,y,m=150,g=480,v=250,L=0,b=0,O=0,w=0,x=0,_=null,E=hn,S=null,C=Ui,T=.5,k=fn(n,T);return t.stream=function(e){return f&&y===e?f:f=yn(E(h,k(C(y=e))))},t.clipAngle=function(e){return arguments.length?(E=+e?un(_=e*Ut,6*Ut):(_=null,hn),s()):_*Ft},t.clipExtent=function(e){return arguments.length?(C=null==e?(S=c=p=d=null,Ui):K(S=+e[0][0],c=+e[0][1],p=+e[1][0],d=+e[1][1]),s()):null==S?null:[[S,c],[p,d]]},t.scale=function(e){return arguments.length?(m=+e,r()):m},t.translate=function(e){return arguments.length?(g=+e[0],v=+e[1],r()):[g,v]},t.center=function(e){return arguments.length?(L=e[0]%360*Ut,b=e[1]%360*Ut,r()):[L*Ft,b*Ft]},t.rotate=function(e){return arguments.length?(O=e[0]%360*Ut,w=e[1]%360*Ut,x=e.length>2?e[2]%360*Ut:0,r()):[O*Ft,w*Ft,x*Ft]},t.precision=function(e){return arguments.length?(k=fn(n,T=e*e),s()):$t(T)},t.fitExtent=function(e,i){return Me(t,e,i)},t.fitSize=function(e,i){return Pe(t,e,i)},function(){return o=e.apply(this,arguments),t.invert=o.invert&&i,r()}}function Ae(e){var t=0,i=It/3,n=Re(e),r=n(t,i);return r.parallels=function(e){return arguments.length?n(t=e[0]*Ut,i=e[1]*Ut):[t*Ft,i*Ft]},r}function ze(e){function t(e,t){return[e*i,Yt(t)/i]}var i=Gt(e);return t.invert=function(e,t){return[e/i,s(t*i)]},t}function Fe(e,t){function i(e,t){var i=$t(o-2*r*Yt(t))/r;return[i*Yt(e*=r),a-i*Gt(e)]}var n=Yt(e),r=(n+Yt(t))/2;if(Ht(r)<Nt)return ze(e);var o=1+n*(2*r-n),a=$t(o)/r;return i.invert=function(e,t){var i=a-t;return[jt(e,Ht(i))/r*Zt(i),s((o-(e*e+i*i)*r*r)/(2*r))]},i}function Ue(e){var t=e.length;return{point:function(i,n){for(var r=-1;++r<t;)e[r].point(i,n)},sphere:function(){for(var i=-1;++i<t;)e[i].sphere()},lineStart:function(){for(var i=-1;++i<t;)e[i].lineStart()},lineEnd:function(){for(var i=-1;++i<t;)e[i].lineEnd()},polygonStart:function(){for(var i=-1;++i<t;)e[i].polygonStart()},polygonEnd:function(){for(var i=-1;++i<t;)e[i].polygonEnd()}}}function He(e){return function(t,i){var n=Gt(t),r=Gt(i),s=e(n*r);return[s*r*Yt(t),s*Yt(i)]}}function Be(e){return function(t,i){var n=$t(t*t+i*i),r=e(n),o=Yt(r),a=Gt(r);return[jt(t*o,n*a),s(n&&i*o/n)]}}function je(e,t){return[e,Vt(Kt((Rt+t)/2))]}function Ge(e){var t,i=Ie(e),n=i.scale,r=i.translate,s=i.clipExtent;return i.scale=function(e){return arguments.length?(n(e),t&&i.clipExtent(null),i):n()},i.translate=function(e){return arguments.length?(r(e),t&&i.clipExtent(null),i):r()},i.clipExtent=function(e){if(!arguments.length)return t?null:s();if(t=null==e){var o=It*n(),a=r();e=[[a[0]-o,a[1]-o],[a[0]+o,a[1]+o]]}return s(e),i},i.clipExtent(null)}function We(e){return Kt((Rt+e)/2)}function qe(e,t){function i(e,t){s>0?t<-Rt+Nt&&(t=-Rt+Nt):t>Rt-Nt&&(t=Rt-Nt);var i=s/Xt(We(t),r);return[i*Yt(r*e),s-i*Gt(r*e)]}var n=Gt(e),r=e===t?Yt(e):Vt(n/Gt(t))/Vt(We(t)/We(e)),s=n*Xt(We(e),r)/r;return r?(i.invert=function(e,t){var i=s-t,n=Zt(r)*$t(e*e+i*i);return[jt(e,Ht(i))/r*Zt(i),2*Bt(Xt(s/n,1/r))-Rt]},i):je}function Ve(e,t){return[e,t]}function Xe(e,t){function i(e,t){var i=s-t,n=r*e;return[i*Yt(n),s-i*Gt(n)]}var n=Gt(e),r=e===t?Yt(e):(n-Gt(t))/(t-e),s=n/r+e;return Ht(r)<Nt?Ve:(i.invert=function(e,t){var i=s-t;return[jt(e,Ht(i))/r*Zt(i),s-Zt(r)*$t(e*e+i*i)]},i)}function Ye(e,t){var i=Gt(t),n=Gt(e)*i;return[i*Yt(e)/n,Yt(t)/n]}function Ze(e,t,i,n){return 1===e&&1===t&&0===i&&0===n?Ui:Te({point:function(r,s){this.stream.point(r*e+i,s*t+n)}})}function $e(e,t){return[Gt(t)*Yt(e),Yt(t)]}function Ke(e,t){var i=Gt(t),n=1+Gt(e)*i;return[i*Yt(e)/n,Yt(t)/n]}function Qe(e,t){return[Vt(Kt((Rt+t)/2)),-e]}var Je=function(){return new i};i.prototype={constructor:i,reset:function(){this.s=this.t=0},add:function(e){n(Pt,e,this.t),n(this,Pt.s,this.s),this.s?this.t+=Pt.t:this.s=Pt.t},valueOf:function(){return this.s}};var et,tt,it,nt,rt,st,ot,at,lt,ht,ut,ct,pt,dt,ft,yt,mt,gt,vt,Lt,bt,Ot,wt,xt,_t,Et,St,Ct,Tt,kt,Mt,Pt=new i,Nt=1e-6,Dt=1e-12,It=Math.PI,Rt=It/2,At=It/4,zt=2*It,Ft=180/It,Ut=It/180,Ht=Math.abs,Bt=Math.atan,jt=Math.atan2,Gt=Math.cos,Wt=Math.ceil,qt=Math.exp,Vt=Math.log,Xt=Math.pow,Yt=Math.sin,Zt=Math.sign||function(e){return e>0?1:e<0?-1:0},$t=Math.sqrt,Kt=Math.tan,Qt={Feature:function(e,t){l(e.geometry,t)},FeatureCollection:function(e,t){for(var i=e.features,n=-1,r=i.length;++n<r;)l(i[n].geometry,t)}},Jt={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var i=e.coordinates,n=-1,r=i.length;++n<r;)e=i[n],t.point(e[0],e[1],e[2])},LineString:function(e,t){h(e.coordinates,t,0)},MultiLineString:function(e,t){for(var i=e.coordinates,n=-1,r=i.length;++n<r;)h(i[n],t,0)},Polygon:function(e,t){u(e.coordinates,t)},MultiPolygon:function(e,t){for(var i=e.coordinates,n=-1,r=i.length;++n<r;)u(i[n],t)},GeometryCollection:function(e,t){for(var i=e.geometries,n=-1,r=i.length;++n<r;)l(i[n],t)}},ei=function(e,t){e&&Qt.hasOwnProperty(e.type)?Qt[e.type](e,t):l(e,t)},ti=Je(),ii=Je(),ni={point:a,lineStart:a,lineEnd:a,polygonStart:function(){ti.reset(),ni.lineStart=c,ni.lineEnd=p},polygonEnd:function(){var e=+ti;ii.add(e<0?zt+e:e),this.lineStart=this.lineEnd=this.point=a},sphere:function(){ii.add(zt)}},ri=function(e){return ii.reset(),ei(e,ni),2*ii},si=Je(),oi={point:w,lineStart:_,lineEnd:E,polygonStart:function(){oi.point=S,oi.lineStart=C,oi.lineEnd=T,si.reset(),ni.polygonStart()},polygonEnd:function(){ni.polygonEnd(),oi.point=w,oi.lineStart=_,oi.lineEnd=E,ti<0?(st=-(at=180),ot=-(lt=90)):si>Nt?lt=90:si<-Nt&&(ot=-90),ft[0]=st,ft[1]=at}},ai=function(e){var t,i,n,r,s,o,a;if(lt=at=-(st=ot=1/0),dt=[],ei(e,oi),i=dt.length){for(dt.sort(M),t=1,n=dt[0],s=[n];t<i;++t)r=dt[t],P(n,r[0])||P(n,r[1])?(k(n[0],r[1])>k(n[0],n[1])&&(n[1]=r[1]),k(r[0],n[1])>k(n[0],n[1])&&(n[0]=r[0])):s.push(n=r);for(o=-(1/0),i=s.length-1,t=0,n=s[i];t<=i;n=r,++t)r=s[t],(a=k(n[1],r[0]))>o&&(o=a,st=r[0],at=n[1])}return dt=ft=null,st===1/0||ot===1/0?[[NaN,NaN],[NaN,NaN]]:[[st,ot],[at,lt]]},li={sphere:a,point:N,lineStart:I,lineEnd:z,polygonStart:function(){li.lineStart=F,li.lineEnd=U},polygonEnd:function(){li.lineStart=I,li.lineEnd=z}},hi=function(e){yt=mt=gt=vt=Lt=bt=Ot=wt=xt=_t=Et=0,ei(e,li);var t=xt,i=_t,n=Et,r=t*t+i*i+n*n;return r<Dt&&(t=bt,i=Ot,n=wt,mt<Nt&&(t=gt,i=vt,n=Lt),r=t*t+i*i+n*n,r<Dt)?[NaN,NaN]:[jt(i,t)*Ft,s(n/$t(r))*Ft]},ui=function(e){return function(){return e}},ci=function(e,t){function i(i,n){return i=e(i,n),t(i[0],i[1])}return e.invert&&t.invert&&(i.invert=function(i,n){return i=t.invert(i,n),i&&e.invert(i[0],i[1])}),i};j.invert=j;var pi,di,fi,yi,mi,gi,vi,Li,bi,Oi,wi,xi=function(e){function t(t){return t=e(t[0]*Ut,t[1]*Ut),t[0]*=Ft,t[1]*=Ft,t}return e=G(e[0]*Ut,e[1]*Ut,e.length>2?e[2]*Ut:0),t.invert=function(t){return t=e.invert(t[0]*Ut,t[1]*Ut),t[0]*=Ft,t[1]*=Ft,t},t},_i=function(){function e(e,t){i.push(e=n(e,t)),e[0]*=Ft,e[1]*=Ft}function t(){var e=r.apply(this,arguments),t=s.apply(this,arguments)*Ut,l=o.apply(this,arguments)*Ut;return i=[],n=G(-e[0]*Ut,-e[1]*Ut,0).invert,X(a,t,l,1),e={type:"Polygon",coordinates:[i]},i=n=null,e}var i,n,r=ui([0,0]),s=ui(90),o=ui(6),a={point:e};return t.center=function(e){return arguments.length?(r="function"==typeof e?e:ui([+e[0],+e[1]]),t):r},t.radius=function(e){return arguments.length?(s="function"==typeof e?e:ui(+e),t):s},t.precision=function(e){return arguments.length?(o="function"==typeof e?e:ui(+e),t):o},t},Ei=function(){var e,t=[];return{point:function(t,i){e.push([t,i])},lineStart:function(){t.push(e=[])},lineEnd:a,rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))},result:function(){var i=t;return t=[],e=null,i}}},Si=function(e,t,i,n,r,s){var o,a=e[0],l=e[1],h=t[0],u=t[1],c=0,p=1,d=h-a,f=u-l;if(o=i-a,d||!(o>0)){if(o/=d,d<0){if(o<c)return;o<p&&(p=o)}else if(d>0){if(o>p)return;o>c&&(c=o)}if(o=r-a,d||!(o<0)){if(o/=d,d<0){if(o>p)return;o>c&&(c=o)}else if(d>0){if(o<c)return;o<p&&(p=o)}if(o=n-l,f||!(o>0)){if(o/=f,f<0){if(o<c)return;o<p&&(p=o)}else if(f>0){if(o>p)return;o>c&&(c=o)}if(o=s-l,f||!(o<0)){if(o/=f,f<0){if(o>p)return;o>c&&(c=o)}else if(f>0){if(o<c)return;o<p&&(p=o)}return c>0&&(e[0]=a+c*d,e[1]=l+c*f),p<1&&(t[0]=a+p*d,t[1]=l+p*f),!0}}}}},Ci=function(e,t){return Ht(e[0]-t[0])<Nt&&Ht(e[1]-t[1])<Nt},Ti=function(e,t,i,n,r){var s,o,a=[],l=[];if(e.forEach(function(e){if(!((t=e.length-1)<=0)){var t,i,n=e[0],o=e[t];if(Ci(n,o)){for(r.lineStart(),s=0;s<t;++s)r.point((n=e[s])[0],n[1]);return void r.lineEnd()}a.push(i=new Z(n,e,null,!0)),l.push(i.o=new Z(n,null,i,!1)),a.push(i=new Z(o,e,null,!1)),l.push(i.o=new Z(o,null,i,!0))}}),a.length){for(l.sort(t),$(a),$(l),s=0,o=l.length;s<o;++s)l[s].e=i=!i;for(var h,u,c=a[0];;){for(var p=c,d=!0;p.v;)if((p=p.n)===c)return;h=p.z,r.lineStart();do{if(p.v=p.o.v=!0,p.e){if(d)for(s=0,o=h.length;s<o;++s)r.point((u=h[s])[0],u[1]);else n(p.x,p.n.x,1,r);p=p.n}else{if(d)for(h=p.p.z,s=h.length-1;s>=0;--s)r.point((u=h[s])[0],u[1]);else n(p.x,p.p.x,-1,r);p=p.p}p=p.o,h=p.z,d=!d}while(!p.v);r.lineEnd()}}},ki=1e9,Mi=-ki,Pi=function(){var e,t,i,n=0,r=0,s=960,o=500;return i={stream:function(i){return e&&t===i?e:e=K(n,r,s,o)(t=i)},extent:function(a){return arguments.length?(n=+a[0][0],r=+a[0][1],s=+a[1][0],o=+a[1][1],e=t=null,i):[[n,r],[s,o]]}}},Ni=Je(),Di={sphere:a,point:a,lineStart:Q,lineEnd:a,polygonStart:a,polygonEnd:a},Ii=function(e){return Ni.reset(),ei(e,Di),+Ni},Ri=[null,null],Ai={type:"LineString",coordinates:Ri},zi=function(e,t){return Ri[0]=e,Ri[1]=t,Ii(Ai)},Fi=function(e,t){var i=e[0]*Ut,n=e[1]*Ut,r=t[0]*Ut,a=t[1]*Ut,l=Gt(n),h=Yt(n),u=Gt(a),c=Yt(a),p=l*Gt(i),d=l*Yt(i),f=u*Gt(r),y=u*Yt(r),m=2*s($t(o(a-n)+l*u*o(r-i))),g=Yt(m),v=m?function(e){var t=Yt(e*=m)/g,i=Yt(m-e)/g,n=i*p+t*f,r=i*d+t*y,s=i*h+t*c;return[jt(r,n)*Ft,jt(s,$t(n*n+r*r))*Ft]}:function(){return[i*Ft,n*Ft]};return v.distance=m,v},Ui=function(e){return e},Hi=Je(),Bi=Je(),ji={point:a,lineStart:a,lineEnd:a,polygonStart:function(){ji.lineStart=oe,ji.lineEnd=he},polygonEnd:function(){ji.lineStart=ji.lineEnd=ji.point=a,Hi.add(Ht(Bi)),Bi.reset()},result:function(){var e=Hi/2;return Hi.reset(),e}},Gi=1/0,Wi=Gi,qi=-Gi,Vi=qi,Xi={point:ue,lineStart:a,lineEnd:a,polygonStart:a,polygonEnd:a,result:function(){var e=[[Gi,Wi],[qi,Vi]];return qi=Vi=-(Wi=Gi=1/0),e}},Yi=0,Zi=0,$i=0,Ki=0,Qi=0,Ji=0,en=0,tn=0,nn=0,rn={point:ce,lineStart:pe,lineEnd:ye,polygonStart:function(){rn.lineStart=me,rn.lineEnd=ge},polygonEnd:function(){rn.point=ce,rn.lineStart=pe,rn.lineEnd=ye},result:function(){var e=nn?[en/nn,tn/nn]:Ji?[Ki/Ji,Qi/Ji]:$i?[Yi/$i,Zi/$i]:[NaN,NaN];return Yi=Zi=$i=Ki=Qi=Ji=en=tn=nn=0,e}};be.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:this._context.moveTo(e,t),this._point=1;break;case 1:this._context.lineTo(e,t);break;default:this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,zt)}},result:a},Oe.prototype={_circle:we(4.5),pointRadius:function(e){return this._circle=we(e),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(e,t){switch(this._point){case 0:this._string.push("M",e,",",t),this._point=1;break;case 1:this._string.push("L",e,",",t);break;default:this._string.push("M",e,",",t,this._circle)}},result:function(){if(this._string.length){var e=this._string.join("");return this._string=[],e}}};var sn=function(e,t){function i(e){return e&&("function"==typeof s&&r.pointRadius(+s.apply(this,arguments)),ei(e,n(r))),r.result()}var n,r,s=4.5;return i.area=function(e){return ei(e,n(ji)),ji.result()},i.bounds=function(e){return ei(e,n(Xi)),Xi.result()},i.centroid=function(e){return ei(e,n(rn)),rn.result()},i.projection=function(t){return arguments.length?(n=null==t?(e=null,Ui):(e=t).stream,i):e},i.context=function(e){return arguments.length?(r=null==e?(t=null,new Oe):new be(t=e),"function"!=typeof s&&r.pointRadius(s),i):t},i.pointRadius=function(e){return arguments.length?(s="function"==typeof e?e:(r.pointRadius(+e),+e),i):s},i.projection(e).context(t)},on=Je(),an=function(e,t){var i=t[0],n=t[1],r=[Yt(i),-Gt(i),0],o=0,a=0;on.reset();for(var l=0,h=e.length;l<h;++l)if(c=(u=e[l]).length)for(var u,c,p=u[c-1],d=p[0],f=p[1]/2+At,y=Yt(f),g=Gt(f),L=0;L<c;++L,d=w,y=_,g=E,p=b){var b=u[L],w=b[0],x=b[1]/2+At,_=Yt(x),E=Gt(x),S=w-d,C=S>=0?1:-1,T=C*S,k=T>It,M=y*_;if(on.add(jt(M*C*Yt(T),g*E+M*Gt(T))),o+=k?S+C*zt:S,k^d>=i^w>=i){var P=v(m(p),m(b));O(P);var N=v(r,P);O(N);var D=(k^S>=0?-1:1)*s(N[2]);(n>D||n===D&&(P[0]||P[1]))&&(a+=k^S>=0?1:-1)}}return(o<-Nt||o<Nt&&on<-Nt)^1&a},ln=function(e,i,n,r){return function(s,o){function a(t,i){var n=s(t,i);e(t=n[0],i=n[1])&&o.point(t,i)}function l(e,t){var i=s(e,t);g.point(i[0],i[1])}function h(){w.point=l,g.lineStart()}function u(){w.point=a,g.lineEnd()}function c(e,t){m.push([e,t]);var i=s(e,t);b.point(i[0],i[1])}function p(){b.lineStart(),m=[]}function d(){c(m[0][0],m[0][1]),b.lineEnd();var e,t,i,n,r=b.clean(),s=L.result(),a=s.length;if(m.pop(),f.push(m),m=null,a)if(1&r){if(i=s[0],(t=i.length-1)>0){for(O||(o.polygonStart(),O=!0),o.lineStart(),e=0;e<t;++e)o.point((n=i[e])[0],n[1]);o.lineEnd()}}else a>1&&2&r&&s.push(s.pop().concat(s.shift())),y.push(s.filter(xe))}var f,y,m,g=i(o),v=s.invert(r[0],r[1]),L=Ei(),b=i(L),O=!1,w={point:a,lineStart:h,lineEnd:u,polygonStart:function(){w.point=c,w.lineStart=p,w.lineEnd=d,y=[],f=[]},polygonEnd:function(){w.point=a,w.lineStart=h,w.lineEnd=u,y=t.merge(y);var e=an(f,v);y.length?(O||(o.polygonStart(),O=!0),Ti(y,_e,e,n,o)):e&&(O||(o.polygonStart(),O=!0),o.lineStart(),n(null,null,1,o),o.lineEnd()),O&&(o.polygonEnd(),O=!1),y=f=null},sphere:function(){o.polygonStart(),o.lineStart(),n(null,null,1,o),o.lineEnd(),o.polygonEnd()}};return w}},hn=ln(function(){return!0},Ee,Ce,[-It,-Rt]),un=function(e,t){function i(i,n,r,s){X(s,e,t,r,i,n)}function n(e,t){return Gt(e)*Gt(t)>a}function r(e){var t,i,r,a,u;return{lineStart:function(){a=r=!1,u=1},point:function(c,p){var d,f=[c,p],y=n(c,p),m=l?y?0:o(c,p):y?o(c+(c<0?It:-It),p):0;if(!t&&(a=r=y)&&e.lineStart(),y!==r&&(d=s(t,f),(Ci(t,d)||Ci(f,d))&&(f[0]+=Nt,f[1]+=Nt,y=n(f[0],f[1]))),y!==r)u=0,y?(e.lineStart(),d=s(f,t),e.point(d[0],d[1])):(d=s(t,f),e.point(d[0],d[1]),e.lineEnd()),t=d;else if(h&&t&&l^y){var g;m&i||!(g=s(f,t,!0))||(u=0,l?(e.lineStart(),e.point(g[0][0],g[0][1]),e.point(g[1][0],g[1][1]),e.lineEnd()):(e.point(g[1][0],g[1][1]),e.lineEnd(),e.lineStart(),e.point(g[0][0],g[0][1])))}!y||t&&Ci(t,f)||e.point(f[0],f[1]),t=f,r=y,i=m},lineEnd:function(){r&&e.lineEnd(),t=null},clean:function(){return u|(a&&r)<<1}}}function s(e,t,i){var n=m(e),r=m(t),s=[1,0,0],o=v(n,r),l=g(o,o),h=o[0],u=l-h*h;if(!u)return!i&&e;var c=a*l/u,p=-a*h/u,d=v(s,o),f=b(s,c),O=b(o,p);L(f,O);var w=d,x=g(f,w),_=g(w,w),E=x*x-_*(g(f,f)-1);if(!(E<0)){var S=$t(E),C=b(w,(-x-S)/_);if(L(C,f),C=y(C),!i)return C;var T,k=e[0],M=t[0],P=e[1],N=t[1];M<k&&(T=k,k=M,M=T);var D=M-k,I=Ht(D-It)<Nt,R=I||D<Nt;if(!I&&N<P&&(T=P,P=N,N=T),R?I?P+N>0^C[1]<(Ht(C[0]-k)<Nt?P:N):P<=C[1]&&C[1]<=N:D>It^(k<=C[0]&&C[0]<=M)){var A=b(w,(-x+S)/_);return L(A,f),[C,y(A)]}}}function o(t,i){var n=l?e:It-e,r=0;return t<-n?r|=1:t>n&&(r|=2),i<-n?r|=4:i>n&&(r|=8),r}var a=Gt(e),l=a>0,h=Ht(a)>Nt;return ln(n,r,i,l?[0,-e]:[-It,e-It])},cn=function(e){return{stream:Te(e)}};ke.prototype={constructor:ke,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var pn=16,dn=Gt(30*Ut),fn=function(e,t){return+t?De(e,t):Ne(e)},yn=Te({point:function(e,t){this.stream.point(e*Ut,t*Ut)}}),mn=function(){return Ae(Fe).scale(155.424).center([0,33.6442])},gn=function(){return mn().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])},vn=function(){function e(e){var t=e[0],i=e[1];return a=null,r.point(t,i),a||(s.point(t,i),a)||(o.point(t,i),a)}function t(){return i=n=null,e}var i,n,r,s,o,a,l=gn(),h=mn().rotate([154,0]).center([-2,58.5]).parallels([55,65]),u=mn().rotate([157,0]).center([-3,19.9]).parallels([8,18]),c={point:function(e,t){a=[e,t]}};return e.invert=function(e){var t=l.scale(),i=l.translate(),n=(e[0]-i[0])/t,r=(e[1]-i[1])/t;return(r>=.12&&r<.234&&n>=-.425&&n<-.214?h:r>=.166&&r<.234&&n>=-.214&&n<-.115?u:l).invert(e)},e.stream=function(e){return i&&n===e?i:i=Ue([l.stream(n=e),h.stream(e),u.stream(e)])},e.precision=function(e){return arguments.length?(l.precision(e),h.precision(e),u.precision(e),t()):l.precision()},e.scale=function(t){return arguments.length?(l.scale(t),h.scale(.35*t),u.scale(t),e.translate(l.translate())):l.scale()},e.translate=function(e){if(!arguments.length)return l.translate();var i=l.scale(),n=+e[0],a=+e[1];return r=l.translate(e).clipExtent([[n-.455*i,a-.238*i],[n+.455*i,a+.238*i]]).stream(c),s=h.translate([n-.307*i,a+.201*i]).clipExtent([[n-.425*i+Nt,a+.12*i+Nt],[n-.214*i-Nt,a+.234*i-Nt]]).stream(c),o=u.translate([n-.205*i,a+.212*i]).clipExtent([[n-.214*i+Nt,a+.166*i+Nt],[n-.115*i-Nt,a+.234*i-Nt]]).stream(c),t()},e.fitExtent=function(t,i){return Me(e,t,i)},e.fitSize=function(t,i){return Pe(e,t,i)},e.scale(1070)},Ln=He(function(e){return $t(2/(1+e))});Ln.invert=Be(function(e){return 2*s(e/2)});var bn=function(){return Ie(Ln).scale(124.75).clipAngle(179.999)},On=He(function(e){return(e=r(e))&&e/Yt(e)});On.invert=Be(function(e){return e});var wn=function(){return Ie(On).scale(79.4188).clipAngle(179.999)};je.invert=function(e,t){return[e,2*Bt(qt(t))-Rt]};var xn=function(){return Ge(je).scale(961/zt)},_n=function(){return Ae(qe).scale(109.5).parallels([30,30])};Ve.invert=Ve;var En=function(){return Ie(Ve).scale(152.63)},Sn=function(){return Ae(Xe).scale(131.154).center([0,13.9389])};Ye.invert=Be(Bt);var Cn=function(){return Ie(Ye).scale(144.049).clipAngle(60)},Tn=function(){function e(){return r=s=null,o}var t,i,n,r,s,o,a=1,l=0,h=0,u=1,c=1,p=Ui,d=null,f=Ui;return o={stream:function(e){return r&&s===e?r:r=p(f(s=e))},clipExtent:function(r){return arguments.length?(f=null==r?(d=t=i=n=null,Ui):K(d=+r[0][0],t=+r[0][1],i=+r[1][0],n=+r[1][1]),e()):null==d?null:[[d,t],[i,n]]},scale:function(t){return arguments.length?(p=Ze((a=+t)*u,a*c,l,h),e()):a},translate:function(t){return arguments.length?(p=Ze(a*u,a*c,l=+t[0],h=+t[1]),e()):[l,h]},reflectX:function(t){return arguments.length?(p=Ze(a*(u=t?-1:1),a*c,l,h),e()):u<0},reflectY:function(t){return arguments.length?(p=Ze(a*u,a*(c=t?-1:1),l,h),e()):c<0},fitExtent:function(e,t){return Me(o,e,t)},fitSize:function(e,t){return Pe(o,e,t)}}};$e.invert=Be(s);var kn=function(){return Ie($e).scale(249.5).clipAngle(90+Nt)};Ke.invert=Be(function(e){return 2*Bt(e)});var Mn=function(){return Ie(Ke).scale(250).clipAngle(142)};Qe.invert=function(e,t){return[-t,2*Bt(qt(e))-Rt]};var Pn=function(){var e=Ge(Qe),t=e.center,i=e.rotate;return e.center=function(e){return arguments.length?t([-e[1],e[0]]):(e=t(),[e[1],-e[0]])},e.rotate=function(e){return arguments.length?i([e[0],e[1],e.length>2?e[2]+90:90]):(e=i(),[e[0],e[1],e[2]-90])},i([0,0,90]).scale(159.155)};e.geoArea=ri,e.geoBounds=ai,e.geoCentroid=hi,e.geoCircle=_i,e.geoClipExtent=Pi,e.geoDistance=zi,e.geoGraticule=re,e.geoGraticule10=se,e.geoInterpolate=Fi,e.geoLength=Ii,e.geoPath=sn,e.geoAlbers=gn,e.geoAlbersUsa=vn,e.geoAzimuthalEqualArea=bn,e.geoAzimuthalEqualAreaRaw=Ln,e.geoAzimuthalEquidistant=wn,e.geoAzimuthalEquidistantRaw=On,e.geoConicConformal=_n,e.geoConicConformalRaw=qe,e.geoConicEqualArea=mn,e.geoConicEqualAreaRaw=Fe,e.geoConicEquidistant=Sn,e.geoConicEquidistantRaw=Xe,e.geoEquirectangular=En,e.geoEquirectangularRaw=Ve,e.geoGnomonic=Cn,e.geoGnomonicRaw=Ye,e.geoIdentity=Tn,e.geoProjection=Ie,e.geoProjectionMutator=Re,e.geoMercator=xn,e.geoMercatorRaw=je,e.geoOrthographic=kn,e.geoOrthographicRaw=$e,e.geoStereographic=Mn,e.geoStereographicRaw=Ke,e.geoTransverseMercator=Pn,e.geoTransverseMercatorRaw=Qe,e.geoRotation=xi,e.geoStream=ei,e.geoTransform=cn,Object.defineProperty(e,"__esModule",{value:!0})})},{"d3-array":1}],6:[function(e,t,i){!function(n,r){"object"==typeof i&&"undefined"!=typeof t?r(i,e("d3-color")):"function"==typeof define&&define.amd?define(["exports","d3-color"],r):r(n.d3=n.d3||{},n.d3)}(this,function(e,t){"use strict";function i(e,t,i,n,r){var s=e*e,o=s*e;return((1-3*e+3*s-o)*t+(4-6*s+3*o)*i+(1+3*e+3*s-3*o)*n+o*r)/6}function n(e,t){return function(i){return e+i*t}}function r(e,t,i){return e=Math.pow(e,i),t=Math.pow(t,i)-e,i=1/i,function(n){return Math.pow(e+n*t,i)}}function s(e,t){var i=t-e;return i?n(e,i>180||i<-180?i-360*Math.round(i/360):i):C(isNaN(e)?t:e)}function o(e){return 1===(e=+e)?a:function(t,i){return i-t?r(t,i,e):C(isNaN(t)?i:t)}}function a(e,t){var i=t-e;return i?n(e,i):C(isNaN(e)?t:e)}function l(e){return function(i){var n,r,s=i.length,o=new Array(s),a=new Array(s),l=new Array(s);for(n=0;n<s;++n)r=t.rgb(i[n]),o[n]=r.r||0,a[n]=r.g||0,l[n]=r.b||0;return o=e(o),a=e(a),l=e(l),r.opacity=1,function(e){return r.r=o(e),r.g=a(e),r.b=l(e),r+""}}}function h(e){return function(){return e}}function u(e){return function(t){return e(t)+""}}function c(e){return"none"===e?B:(O||(O=document.createElement("DIV"),w=document.documentElement,x=document.defaultView),O.style.transform=e,e=x.getComputedStyle(w.appendChild(O),null).getPropertyValue("transform"),w.removeChild(O),e=e.slice(7,-1).split(","),j(+e[0],+e[1],+e[2],+e[3],+e[4],+e[5]))}function p(e){return null==e?B:(_||(_=document.createElementNS("http://www.w3.org/2000/svg","g")),_.setAttribute("transform",e),(e=_.transform.baseVal.consolidate())?(e=e.matrix,j(e.a,e.b,e.c,e.d,e.e,e.f)):B)}function d(e,t,i,n){function r(e){return e.length?e.pop()+" ":""}function s(e,n,r,s,o,a){if(e!==r||n!==s){var l=o.push("translate(",null,t,null,i);a.push({i:l-4,x:D(e,r)},{i:l-2,x:D(n,s)})}else(r||s)&&o.push("translate("+r+t+s+i)}function o(e,t,i,s){e!==t?(e-t>180?t+=360:t-e>180&&(e+=360),s.push({i:i.push(r(i)+"rotate(",null,n)-2,x:D(e,t)})):t&&i.push(r(i)+"rotate("+t+n)}function a(e,t,i,s){e!==t?s.push({i:i.push(r(i)+"skewX(",null,n)-2,x:D(e,t)}):t&&i.push(r(i)+"skewX("+t+n)}function l(e,t,i,n,s,o){if(e!==i||t!==n){var a=s.push(r(s)+"scale(",null,",",null,")");o.push({i:a-4,x:D(e,i)},{i:a-2,x:D(t,n)})}else 1===i&&1===n||s.push(r(s)+"scale("+i+","+n+")")}return function(t,i){var n=[],r=[];return t=e(t),i=e(i),s(t.translateX,t.translateY,i.translateX,i.translateY,n,r),o(t.rotate,i.rotate,n,r),a(t.skewX,i.skewX,n,r),l(t.scaleX,t.scaleY,i.scaleX,i.scaleY,n,r),t=i=null,function(e){for(var t,i=-1,s=r.length;++i<s;)n[(t=r[i]).i]=t.x(e);return n.join("")}}}function f(e){return((e=Math.exp(e))+1/e)/2}function y(e){return((e=Math.exp(e))-1/e)/2}function m(e){return((e=Math.exp(2*e))-1)/(e+1)}function g(e){return function(i,n){var r=e((i=t.hsl(i)).h,(n=t.hsl(n)).h),s=a(i.s,n.s),o=a(i.l,n.l),l=a(i.opacity,n.opacity);return function(e){return i.h=r(e),i.s=s(e),i.l=o(e),i.opacity=l(e),i+""}}}function v(e,i){var n=a((e=t.lab(e)).l,(i=t.lab(i)).l),r=a(e.a,i.a),s=a(e.b,i.b),o=a(e.opacity,i.opacity);return function(t){return e.l=n(t),e.a=r(t),e.b=s(t),e.opacity=o(t),e+""}}function L(e){return function(i,n){var r=e((i=t.hcl(i)).h,(n=t.hcl(n)).h),s=a(i.c,n.c),o=a(i.l,n.l),l=a(i.opacity,n.opacity);return function(e){return i.h=r(e),i.c=s(e),i.l=o(e),i.opacity=l(e),i+""}}}function b(e){return function i(n){function r(i,r){var s=e((i=t.cubehelix(i)).h,(r=t.cubehelix(r)).h),o=a(i.s,r.s),l=a(i.l,r.l),h=a(i.opacity,r.opacity);return function(e){return i.h=s(e),i.s=o(e),i.l=l(Math.pow(e,n)),i.opacity=h(e),i+""}}return n=+n,r.gamma=i,r}(1)}var O,w,x,_,E=function(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),s=e[r],o=e[r+1],a=r>0?e[r-1]:2*s-o,l=r<t-1?e[r+2]:2*o-s;return i((n-r/t)*t,a,s,o,l)}},S=function(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),s=e[(r+t-1)%t],o=e[r%t],a=e[(r+1)%t],l=e[(r+2)%t];return i((n-r/t)*t,s,o,a,l)}},C=function(e){return function(){return e}},T=function e(i){function n(e,i){var n=r((e=t.rgb(e)).r,(i=t.rgb(i)).r),s=r(e.g,i.g),o=r(e.b,i.b),l=a(e.opacity,i.opacity);return function(t){return e.r=n(t),e.g=s(t),e.b=o(t),e.opacity=l(t),e+""}}var r=o(i);return n.gamma=e,n}(1),k=l(E),M=l(S),P=function(e,t){var i,n=t?t.length:0,r=e?Math.min(n,e.length):0,s=new Array(n),o=new Array(n);for(i=0;i<r;++i)s[i]=F(e[i],t[i]);for(;i<n;++i)o[i]=t[i];return function(e){for(i=0;i<r;++i)o[i]=s[i](e);return o}},N=function(e,t){var i=new Date;return e=+e,t-=e,function(n){return i.setTime(e+t*n),i}},D=function(e,t){return e=+e,t-=e,function(i){return e+t*i}},I=function(e,t){var i,n={},r={};null!==e&&"object"==typeof e||(e={}),null!==t&&"object"==typeof t||(t={});for(i in t)i in e?n[i]=F(e[i],t[i]):r[i]=t[i];return function(e){for(i in n)r[i]=n[i](e);return r}},R=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,A=new RegExp(R.source,"g"),z=function(e,t){var i,n,r,s=R.lastIndex=A.lastIndex=0,o=-1,a=[],l=[];for(e+="",t+="";(i=R.exec(e))&&(n=A.exec(t));)(r=n.index)>s&&(r=t.slice(s,r),a[o]?a[o]+=r:a[++o]=r),(i=i[0])===(n=n[0])?a[o]?a[o]+=n:a[++o]=n:(a[++o]=null,l.push({i:o,x:D(i,n)})),s=A.lastIndex;return s<t.length&&(r=t.slice(s),a[o]?a[o]+=r:a[++o]=r),a.length<2?l[0]?u(l[0].x):h(t):(t=l.length,function(e){for(var i,n=0;n<t;++n)a[(i=l[n]).i]=i.x(e);return a.join("")})},F=function(e,i){var n,r=typeof i;return null==i||"boolean"===r?C(i):("number"===r?D:"string"===r?(n=t.color(i))?(i=n,T):z:i instanceof t.color?T:i instanceof Date?N:Array.isArray(i)?P:isNaN(i)?I:D)(e,i)},U=function(e,t){return e=+e,t-=e,function(i){return Math.round(e+t*i)}},H=180/Math.PI,B={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1},j=function(e,t,i,n,r,s){var o,a,l;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(l=e*i+t*n)&&(i-=e*l,n-=t*l),(a=Math.sqrt(i*i+n*n))&&(i/=a,n/=a,l/=a),e*n<t*i&&(e=-e,t=-t,l=-l,o=-o),{translateX:r,translateY:s,rotate:Math.atan2(t,e)*H,skewX:Math.atan(l)*H,scaleX:o,scaleY:a}},G=d(c,"px, ","px)","deg)"),W=d(p,", ",")",")"),q=Math.SQRT2,V=2,X=4,Y=1e-12,Z=function(e,t){var i,n,r=e[0],s=e[1],o=e[2],a=t[0],l=t[1],h=t[2],u=a-r,c=l-s,p=u*u+c*c;if(p<Y)n=Math.log(h/o)/q,i=function(e){return[r+e*u,s+e*c,o*Math.exp(q*e*n)]};else{var d=Math.sqrt(p),g=(h*h-o*o+X*p)/(2*o*V*d),v=(h*h-o*o-X*p)/(2*h*V*d),L=Math.log(Math.sqrt(g*g+1)-g),b=Math.log(Math.sqrt(v*v+1)-v);n=(b-L)/q,i=function(e){var t=e*n,i=f(L),a=o/(V*d)*(i*m(q*t+L)-y(L));return[r+a*u,s+a*c,o*i/f(q*t+L)]}}return i.duration=1e3*n,i},$=g(s),K=g(a),Q=L(s),J=L(a),ee=b(s),te=b(a),ie=function(e,t){for(var i=new Array(t),n=0;n<t;++n)i[n]=e(n/(t-1));return i};e.interpolate=F,e.interpolateArray=P,e.interpolateBasis=E,e.interpolateBasisClosed=S,e.interpolateDate=N,e.interpolateNumber=D,e.interpolateObject=I,e.interpolateRound=U,e.interpolateString=z,e.interpolateTransformCss=G,e.interpolateTransformSvg=W,e.interpolateZoom=Z,e.interpolateRgb=T,e.interpolateRgbBasis=k,e.interpolateRgbBasisClosed=M,e.interpolateHsl=$,e.interpolateHslLong=K,e.interpolateLab=v,e.interpolateHcl=Q,e.interpolateHclLong=J,e.interpolateCubehelix=ee,e.interpolateCubehelixLong=te,e.quantize=ie,Object.defineProperty(e,"__esModule",{value:!0})})},{"d3-color":3}],7:[function(e,t,i){!function(n,r){"object"==typeof i&&"undefined"!=typeof t?r(i,e("d3-array"),e("d3-collection"),e("d3-interpolate"),e("d3-format"),e("d3-time"),e("d3-time-format"),e("d3-color")):"function"==typeof define&&define.amd?define(["exports","d3-array","d3-collection","d3-interpolate","d3-format","d3-time","d3-time-format","d3-color"],r):r(n.d3=n.d3||{},n.d3,n.d3,n.d3,n.d3,n.d3,n.d3,n.d3)}(this,function(e,t,i,n,r,s,o,a){"use strict";function l(e){function t(t){var i=t+"",o=n.get(i);if(!o){if(s!==G)return s;n.set(i,o=r.push(t))}return e[(o-1)%e.length]}var n=i.map(),r=[],s=G;return e=null==e?[]:j.call(e),t.domain=function(e){if(!arguments.length)return r.slice();r=[],n=i.map();for(var s,o,a=-1,l=e.length;++a<l;)n.has(o=(s=e[a])+"")||n.set(o,r.push(s));return t},t.range=function(i){return arguments.length?(e=j.call(i),t):e.slice()},t.unknown=function(e){return arguments.length?(s=e,t):s},t.copy=function(){return l().domain(r).range(e).unknown(s)},t}function h(){function e(){var e=s().length,r=a[1]<a[0],l=a[r-0],h=a[1-r];i=(h-l)/Math.max(1,e-c+2*p),u&&(i=Math.floor(i)),l+=(h-l-i*(e-c))*d,n=i*(1-c),u&&(l=Math.round(l),n=Math.round(n));var f=t.range(e).map(function(e){return l+i*e});return o(r?f.reverse():f)}var i,n,r=l().unknown(void 0),s=r.domain,o=r.range,a=[0,1],u=!1,c=0,p=0,d=.5;return delete r.unknown,r.domain=function(t){return arguments.length?(s(t),e()):s()},r.range=function(t){return arguments.length?(a=[+t[0],+t[1]],e()):a.slice()},r.rangeRound=function(t){return a=[+t[0],+t[1]],u=!0,e()},r.bandwidth=function(){return n},r.step=function(){return i},r.round=function(t){return arguments.length?(u=!!t,e()):u},r.padding=function(t){return arguments.length?(c=p=Math.max(0,Math.min(1,t)),e()):c},r.paddingInner=function(t){return arguments.length?(c=Math.max(0,Math.min(1,t)),e()):c},r.paddingOuter=function(t){return arguments.length?(p=Math.max(0,Math.min(1,t)),e()):p},r.align=function(t){return arguments.length?(d=Math.max(0,Math.min(1,t)),e()):d},r.copy=function(){return h().domain(s()).range(a).round(u).paddingInner(c).paddingOuter(p).align(d)},e()}function u(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return u(t())},e}function c(){return u(h().paddingInner(1))}function p(e,t){return(t-=e=+e)?function(i){return(i-e)/t}:W(t)}function d(e){return function(t,i){var n=e(t=+t,i=+i);return function(e){return e<=t?0:e>=i?1:n(e)}}}function f(e){return function(t,i){var n=e(t=+t,i=+i);return function(e){return e<=0?t:e>=1?i:n(e)}}}function y(e,t,i,n){var r=e[0],s=e[1],o=t[0],a=t[1];return s<r?(r=i(s,r),o=n(a,o)):(r=i(r,s),o=n(o,a)),function(e){return o(r(e))}}function m(e,i,n,r){
var s=Math.min(e.length,i.length)-1,o=new Array(s),a=new Array(s),l=-1;for(e[s]<e[0]&&(e=e.slice().reverse(),i=i.slice().reverse());++l<s;)o[l]=n(e[l],e[l+1]),a[l]=r(i[l],i[l+1]);return function(i){var n=t.bisect(e,i,1,s)-1;return a[n](o[n](i))}}function g(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp())}function v(e,t){function i(){return s=Math.min(l.length,h.length)>2?m:y,o=a=null,r}function r(t){return(o||(o=s(l,h,c?d(e):e,u)))(+t)}var s,o,a,l=V,h=V,u=n.interpolate,c=!1;return r.invert=function(e){return(a||(a=s(h,l,p,c?f(t):t)))(+e)},r.domain=function(e){return arguments.length?(l=B.call(e,q),i()):l.slice()},r.range=function(e){return arguments.length?(h=j.call(e),i()):h.slice()},r.rangeRound=function(e){return h=j.call(e),u=n.interpolateRound,i()},r.clamp=function(e){return arguments.length?(c=!!e,i()):c},r.interpolate=function(e){return arguments.length?(u=e,i()):u},i()}function L(e){var i=e.domain;return e.ticks=function(e){var n=i();return t.ticks(n[0],n[n.length-1],null==e?10:e)},e.tickFormat=function(e,t){return X(i(),e,t)},e.nice=function(n){var r=i(),s=r.length-1,o=null==n?10:n,a=r[0],l=r[s],h=t.tickStep(a,l,o);return h&&(h=t.tickStep(Math.floor(a/h)*h,Math.ceil(l/h)*h,o),r[0]=Math.floor(a/h)*h,r[s]=Math.ceil(l/h)*h,i(r)),e},e}function b(){var e=v(p,n.interpolateNumber);return e.copy=function(){return g(e,b())},L(e)}function O(){function e(e){return+e}var t=[0,1];return e.invert=e,e.domain=e.range=function(i){return arguments.length?(t=B.call(i,q),e):t.slice()},e.copy=function(){return O().domain(t)},L(e)}function w(e,t){return(t=Math.log(t/e))?function(i){return Math.log(i/e)/t}:W(t)}function x(e,t){return e<0?function(i){return-Math.pow(-t,i)*Math.pow(-e,1-i)}:function(i){return Math.pow(t,i)*Math.pow(e,1-i)}}function _(e){return isFinite(e)?+("1e"+e):e<0?0:e}function E(e){return 10===e?_:e===Math.E?Math.exp:function(t){return Math.pow(e,t)}}function S(e){return e===Math.E?Math.log:10===e&&Math.log10||2===e&&Math.log2||(e=Math.log(e),function(t){return Math.log(t)/e})}function C(e){return function(t){return-e(-t)}}function T(){function e(){return o=S(s),a=E(s),n()[0]<0&&(o=C(o),a=C(a)),i}var i=v(w,x).domain([1,10]),n=i.domain,s=10,o=S(10),a=E(10);return i.base=function(t){return arguments.length?(s=+t,e()):s},i.domain=function(t){return arguments.length?(n(t),e()):n()},i.ticks=function(e){var i,r=n(),l=r[0],h=r[r.length-1];(i=h<l)&&(d=l,l=h,h=d);var u,c,p,d=o(l),f=o(h),y=null==e?10:+e,m=[];if(!(s%1)&&f-d<y){if(d=Math.round(d)-1,f=Math.round(f)+1,l>0){for(;d<f;++d)for(c=1,u=a(d);c<s;++c)if(p=u*c,!(p<l)){if(p>h)break;m.push(p)}}else for(;d<f;++d)for(c=s-1,u=a(d);c>=1;--c)if(p=u*c,!(p<l)){if(p>h)break;m.push(p)}}else m=t.ticks(d,f,Math.min(f-d,y)).map(a);return i?m.reverse():m},i.tickFormat=function(e,t){if(null==t&&(t=10===s?".0e":","),"function"!=typeof t&&(t=r.format(t)),e===1/0)return t;null==e&&(e=10);var n=Math.max(1,s*e/i.ticks().length);return function(e){var i=e/a(Math.round(o(e)));return i*s<s-.5&&(i*=s),i<=n?t(e):""}},i.nice=function(){return n(Y(n(),{floor:function(e){return a(Math.floor(o(e)))},ceil:function(e){return a(Math.ceil(o(e)))}}))},i.copy=function(){return g(i,T().base(s))},i}function k(e,t){return e<0?-Math.pow(-e,t):Math.pow(e,t)}function M(){function e(e,t){return(t=k(t,i)-(e=k(e,i)))?function(n){return(k(n,i)-e)/t}:W(t)}function t(e,t){return t=k(t,i)-(e=k(e,i)),function(n){return k(e+t*n,1/i)}}var i=1,n=v(e,t),r=n.domain;return n.exponent=function(e){return arguments.length?(i=+e,r(r())):i},n.copy=function(){return g(n,M().exponent(i))},L(n)}function P(){return M().exponent(.5)}function N(){function e(){var e=0,o=Math.max(1,r.length);for(s=new Array(o-1);++e<o;)s[e-1]=t.quantile(n,e/o);return i}function i(e){if(!isNaN(e=+e))return r[t.bisect(s,e)]}var n=[],r=[],s=[];return i.invertExtent=function(e){var t=r.indexOf(e);return t<0?[NaN,NaN]:[t>0?s[t-1]:n[0],t<s.length?s[t]:n[n.length-1]]},i.domain=function(i){if(!arguments.length)return n.slice();n=[];for(var r,s=0,o=i.length;s<o;++s)r=i[s],null==r||isNaN(r=+r)||n.push(r);return n.sort(t.ascending),e()},i.range=function(t){return arguments.length?(r=j.call(t),e()):r.slice()},i.quantiles=function(){return s.slice()},i.copy=function(){return N().domain(n).range(r)},i}function D(){function e(e){if(e<=e)return a[t.bisect(o,e,0,s)]}function i(){var t=-1;for(o=new Array(s);++t<s;)o[t]=((t+1)*r-(t-s)*n)/(s+1);return e}var n=0,r=1,s=1,o=[.5],a=[0,1];return e.domain=function(e){return arguments.length?(n=+e[0],r=+e[1],i()):[n,r]},e.range=function(e){return arguments.length?(s=(a=j.call(e)).length-1,i()):a.slice()},e.invertExtent=function(e){var t=a.indexOf(e);return t<0?[NaN,NaN]:t<1?[n,o[0]]:t>=s?[o[s-1],r]:[o[t-1],o[t]]},e.copy=function(){return D().domain([n,r]).range(a)},L(e)}function I(){function e(e){if(e<=e)return n[t.bisect(i,e,0,r)]}var i=[.5],n=[0,1],r=1;return e.domain=function(t){return arguments.length?(i=j.call(t),r=Math.min(i.length,n.length-1),e):i.slice()},e.range=function(t){return arguments.length?(n=j.call(t),r=Math.min(i.length,n.length-1),e):n.slice()},e.invertExtent=function(e){var t=n.indexOf(e);return[i[t-1],i[t]]},e.copy=function(){return I().domain(i).range(n)},e}function R(e){return new Date(e)}function A(e){return e instanceof Date?+e:+new Date(+e)}function z(e,i,r,s,o,a,l,h,u){function c(t){return(l(t)<t?L:a(t)<t?b:o(t)<t?O:s(t)<t?w:i(t)<t?r(t)<t?x:_:e(t)<t?E:S)(t)}function d(i,n,r,s){if(null==i&&(i=10),"number"==typeof i){var o=Math.abs(r-n)/i,a=t.bisector(function(e){return e[2]}).right(C,o);a===C.length?(s=t.tickStep(n/te,r/te,i),i=e):a?(a=C[o/C[a-1][2]<C[a][2]/o?a-1:a],s=a[1],i=a[0]):(s=t.tickStep(n,r,i),i=h)}return null==s?i:i.every(s)}var f=v(p,n.interpolateNumber),y=f.invert,m=f.domain,L=u(".%L"),b=u(":%S"),O=u("%I:%M"),w=u("%I %p"),x=u("%a %d"),_=u("%b %d"),E=u("%B"),S=u("%Y"),C=[[l,1,Z],[l,5,5*Z],[l,15,15*Z],[l,30,30*Z],[a,1,$],[a,5,5*$],[a,15,15*$],[a,30,30*$],[o,1,K],[o,3,3*K],[o,6,6*K],[o,12,12*K],[s,1,Q],[s,2,2*Q],[r,1,J],[i,1,ee],[i,3,3*ee],[e,1,te]];return f.invert=function(e){return new Date(y(e))},f.domain=function(e){return arguments.length?m(B.call(e,A)):m().map(R)},f.ticks=function(e,t){var i,n=m(),r=n[0],s=n[n.length-1],o=s<r;return o&&(i=r,r=s,s=i),i=d(e,r,s,t),i=i?i.range(r,s+1):[],o?i.reverse():i},f.tickFormat=function(e,t){return null==t?c:u(t)},f.nice=function(e,t){var i=m();return(e=d(e,i[0],i[i.length-1],t))?m(Y(i,e)):f},f.copy=function(){return g(f,z(e,i,r,s,o,a,l,h,u))},f}function F(e){var t=e.length;return function(i){return e[Math.max(0,Math.min(t-1,Math.floor(i*t)))]}}function U(e){function t(t){var s=(t-i)/(n-i);return e(r?Math.max(0,Math.min(1,s)):s)}var i=0,n=1,r=!1;return t.domain=function(e){return arguments.length?(i=+e[0],n=+e[1],t):[i,n]},t.clamp=function(e){return arguments.length?(r=!!e,t):r},t.interpolator=function(i){return arguments.length?(e=i,t):e},t.copy=function(){return U(e).domain([i,n]).clamp(r)},L(t)}var H=Array.prototype,B=H.map,j=H.slice,G={name:"implicit"},W=function(e){return function(){return e}},q=function(e){return+e},V=[0,1],X=function(e,i,n){var s,o=e[0],a=e[e.length-1],l=t.tickStep(o,a,null==i?10:i);switch(n=r.formatSpecifier(null==n?",f":n),n.type){case"s":var h=Math.max(Math.abs(o),Math.abs(a));return null!=n.precision||isNaN(s=r.precisionPrefix(l,h))||(n.precision=s),r.formatPrefix(n,h);case"":case"e":case"g":case"p":case"r":null!=n.precision||isNaN(s=r.precisionRound(l,Math.max(Math.abs(o),Math.abs(a))))||(n.precision=s-("e"===n.type));break;case"f":case"%":null!=n.precision||isNaN(s=r.precisionFixed(l))||(n.precision=s-2*("%"===n.type))}return r.format(n)},Y=function(e,t){e=e.slice();var i,n=0,r=e.length-1,s=e[n],o=e[r];return o<s&&(i=n,n=r,r=i,i=s,s=o,o=i),e[n]=t.floor(s),e[r]=t.ceil(o),e},Z=1e3,$=60*Z,K=60*$,Q=24*K,J=7*Q,ee=30*Q,te=365*Q,ie=function(){return z(s.timeYear,s.timeMonth,s.timeWeek,s.timeDay,s.timeHour,s.timeMinute,s.timeSecond,s.timeMillisecond,o.timeFormat).domain([new Date(2e3,0,1),new Date(2e3,0,2)])},ne=function(){return z(s.utcYear,s.utcMonth,s.utcWeek,s.utcDay,s.utcHour,s.utcMinute,s.utcSecond,s.utcMillisecond,o.utcFormat).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)])},re=function(e){return e.match(/.{6}/g).map(function(e){return"#"+e})},se=re("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),oe=re("393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6"),ae=re("3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9"),le=re("1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5"),he=n.interpolateCubehelixLong(a.cubehelix(300,.5,0),a.cubehelix(-240,.5,1)),ue=n.interpolateCubehelixLong(a.cubehelix(-100,.75,.35),a.cubehelix(80,1.5,.8)),ce=n.interpolateCubehelixLong(a.cubehelix(260,.75,.35),a.cubehelix(80,1.5,.8)),pe=a.cubehelix(),de=function(e){(e<0||e>1)&&(e-=Math.floor(e));var t=Math.abs(e-.5);return pe.h=360*e-100,pe.s=1.5-1.5*t,pe.l=.8-.9*t,pe+""},fe=F(re("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725")),ye=F(re("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),me=F(re("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),ge=F(re("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));e.scaleBand=h,e.scalePoint=c,e.scaleIdentity=O,e.scaleLinear=b,e.scaleLog=T,e.scaleOrdinal=l,e.scaleImplicit=G,e.scalePow=M,e.scaleSqrt=P,e.scaleQuantile=N,e.scaleQuantize=D,e.scaleThreshold=I,e.scaleTime=ie,e.scaleUtc=ne,e.schemeCategory10=se,e.schemeCategory20b=oe,e.schemeCategory20c=ae,e.schemeCategory20=le,e.interpolateCubehelixDefault=he,e.interpolateRainbow=de,e.interpolateWarm=ue,e.interpolateCool=ce,e.interpolateViridis=fe,e.interpolateMagma=ye,e.interpolateInferno=me,e.interpolatePlasma=ge,e.scaleSequential=U,Object.defineProperty(e,"__esModule",{value:!0})})},{"d3-array":1,"d3-collection":2,"d3-color":3,"d3-format":4,"d3-interpolate":6,"d3-time":10,"d3-time-format":9}],8:[function(e,t,i){!function(e,n){"object"==typeof i&&"undefined"!=typeof t?n(i):"function"==typeof define&&define.amd?define(["exports"],n):n(e.d3=e.d3||{})}(this,function(e){"use strict";function t(e){return function(){var t=this.ownerDocument,i=this.namespaceURI;return i===Q&&t.documentElement.namespaceURI===Q?t.createElement(e):t.createElementNS(i,e)}}function i(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function n(){return new r}function r(){this._="@"+(++ie).toString(36)}function s(e,t,i){return e=o(e,t,i),function(t){var i=t.relatedTarget;i&&(i===this||8&i.compareDocumentPosition(this))||e.call(this,t)}}function o(t,i,n){return function(r){var s=e.event;e.event=r;try{t.call(this,this.__data__,i,n)}finally{e.event=s}}}function a(e){return e.trim().split(/^|\s+/).map(function(e){var t="",i=e.indexOf(".");return i>=0&&(t=e.slice(i+1),e=e.slice(0,i)),{type:e,name:t}})}function l(e){return function(){var t=this.__on;if(t){for(var i,n=0,r=-1,s=t.length;n<s;++n)i=t[n],e.type&&i.type!==e.type||i.name!==e.name?t[++r]=i:this.removeEventListener(i.type,i.listener,i.capture);++r?t.length=r:delete this.__on}}}function h(e,t,i){var n=ae.hasOwnProperty(e.type)?s:o;return function(r,s,o){var a,l=this.__on,h=n(t,s,o);if(l)for(var u=0,c=l.length;u<c;++u)if((a=l[u]).type===e.type&&a.name===e.name)return this.removeEventListener(a.type,a.listener,a.capture),this.addEventListener(a.type,a.listener=h,a.capture=i),void(a.value=t);this.addEventListener(e.type,h,i),a={type:e.type,name:e.name,value:t,listener:h,capture:i},l?l.push(a):this.__on=[a]}}function u(t,i,n,r){var s=e.event;t.sourceEvent=e.event,e.event=t;try{return i.apply(n,r)}finally{e.event=s}}function c(){}function p(){return[]}function d(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}function f(e,t,i,n,r,s){for(var o,a=0,l=t.length,h=s.length;a<h;++a)(o=t[a])?(o.__data__=s[a],n[a]=o):i[a]=new d(e,s[a]);for(;a<l;++a)(o=t[a])&&(r[a]=o)}function y(e,t,i,n,r,s,o){var a,l,h,u={},c=t.length,p=s.length,f=new Array(c);for(a=0;a<c;++a)(l=t[a])&&(f[a]=h=Oe+o.call(l,l.__data__,a,t),h in u?r[a]=l:u[h]=l);for(a=0;a<p;++a)h=Oe+o.call(e,s[a],a,s),(l=u[h])?(n[a]=l,l.__data__=s[a],u[h]=null):i[a]=new d(e,s[a]);for(a=0;a<c;++a)(l=t[a])&&u[f[a]]===l&&(r[a]=l)}function m(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function g(e){return function(){this.removeAttribute(e)}}function v(e){return function(){this.removeAttributeNS(e.space,e.local)}}function L(e,t){return function(){this.setAttribute(e,t)}}function b(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function O(e,t){return function(){var i=t.apply(this,arguments);null==i?this.removeAttribute(e):this.setAttribute(e,i)}}function w(e,t){return function(){var i=t.apply(this,arguments);null==i?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,i)}}function x(e){return function(){this.style.removeProperty(e)}}function _(e,t,i){return function(){this.style.setProperty(e,t,i)}}function E(e,t,i){return function(){var n=t.apply(this,arguments);null==n?this.style.removeProperty(e):this.style.setProperty(e,n,i)}}function S(e){return function(){delete this[e]}}function C(e,t){return function(){this[e]=t}}function T(e,t){return function(){var i=t.apply(this,arguments);null==i?delete this[e]:this[e]=i}}function k(e){return e.trim().split(/^|\s+/)}function M(e){return e.classList||new P(e)}function P(e){this._node=e,this._names=k(e.getAttribute("class")||"")}function N(e,t){for(var i=M(e),n=-1,r=t.length;++n<r;)i.add(t[n])}function D(e,t){for(var i=M(e),n=-1,r=t.length;++n<r;)i.remove(t[n])}function I(e){return function(){N(this,e)}}function R(e){return function(){D(this,e)}}function A(e,t){return function(){(t.apply(this,arguments)?N:D)(this,e)}}function z(){this.textContent=""}function F(e){return function(){this.textContent=e}}function U(e){return function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}}function H(){this.innerHTML=""}function B(e){return function(){this.innerHTML=e}}function j(e){return function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}}function G(){this.nextSibling&&this.parentNode.appendChild(this)}function W(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function q(){return null}function V(){var e=this.parentNode;e&&e.removeChild(this)}function X(e,t,i){var n=Ie(e),r=n.CustomEvent;r?r=new r(t,i):(r=n.document.createEvent("Event"),i?(r.initEvent(t,i.bubbles,i.cancelable),r.detail=i.detail):r.initEvent(t,!1,!1)),e.dispatchEvent(r)}function Y(e,t){return function(){return X(this,e,t)}}function Z(e,t){return function(){return X(this,e,t.apply(this,arguments))}}function $(e,t){this._groups=e,this._parents=t}function K(){return new $([[document.documentElement]],Xe)}var Q="http://www.w3.org/1999/xhtml",J={svg:"http://www.w3.org/2000/svg",xhtml:Q,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},ee=function(e){var t=e+="",i=t.indexOf(":");return i>=0&&"xmlns"!==(t=e.slice(0,i))&&(e=e.slice(i+1)),J.hasOwnProperty(t)?{space:J[t],local:e}:e},te=function(e){var n=ee(e);return(n.local?i:t)(n)},ie=0;r.prototype=n.prototype={constructor:r,get:function(e){for(var t=this._;!(t in e);)if(!(e=e.parentNode))return;return e[t]},set:function(e,t){return e[this._]=t},remove:function(e){return this._ in e&&delete e[this._]},toString:function(){return this._}};var ne=function(e){return function(){return this.matches(e)}};if("undefined"!=typeof document){var re=document.documentElement;if(!re.matches){var se=re.webkitMatchesSelector||re.msMatchesSelector||re.mozMatchesSelector||re.oMatchesSelector;ne=function(e){return function(){return se.call(this,e)}}}}var oe=ne,ae={};if(e.event=null,"undefined"!=typeof document){var le=document.documentElement;"onmouseenter"in le||(ae={mouseenter:"mouseover",mouseleave:"mouseout"})}var he=function(e,t,i){var n,r,s=a(e+""),o=s.length;{if(!(arguments.length<2)){for(u=t?h:l,null==i&&(i=!1),n=0;n<o;++n)this.each(u(s[n],t,i));return this}var u=this.node().__on;if(u)for(var c,p=0,d=u.length;p<d;++p)for(n=0,c=u[p];n<o;++n)if((r=s[n]).type===c.type&&r.name===c.name)return c.value}},ue=function(){for(var t,i=e.event;t=i.sourceEvent;)i=t;return i},ce=function(e,t){var i=e.ownerSVGElement||e;if(i.createSVGPoint){var n=i.createSVGPoint();return n.x=t.clientX,n.y=t.clientY,n=n.matrixTransform(e.getScreenCTM().inverse()),[n.x,n.y]}var r=e.getBoundingClientRect();return[t.clientX-r.left-e.clientLeft,t.clientY-r.top-e.clientTop]},pe=function(e){var t=ue();return t.changedTouches&&(t=t.changedTouches[0]),ce(e,t)},de=function(e){return null==e?c:function(){return this.querySelector(e)}},fe=function(e){"function"!=typeof e&&(e=de(e));for(var t=this._groups,i=t.length,n=new Array(i),r=0;r<i;++r)for(var s,o,a=t[r],l=a.length,h=n[r]=new Array(l),u=0;u<l;++u)(s=a[u])&&(o=e.call(s,s.__data__,u,a))&&("__data__"in s&&(o.__data__=s.__data__),h[u]=o);return new $(n,this._parents)},ye=function(e){return null==e?p:function(){return this.querySelectorAll(e)}},me=function(e){"function"!=typeof e&&(e=ye(e));for(var t=this._groups,i=t.length,n=[],r=[],s=0;s<i;++s)for(var o,a=t[s],l=a.length,h=0;h<l;++h)(o=a[h])&&(n.push(e.call(o,o.__data__,h,a)),r.push(o));return new $(n,r)},ge=function(e){"function"!=typeof e&&(e=oe(e));for(var t=this._groups,i=t.length,n=new Array(i),r=0;r<i;++r)for(var s,o=t[r],a=o.length,l=n[r]=[],h=0;h<a;++h)(s=o[h])&&e.call(s,s.__data__,h,o)&&l.push(s);return new $(n,this._parents)},ve=function(e){return new Array(e.length)},Le=function(){return new $(this._enter||this._groups.map(ve),this._parents)};d.prototype={constructor:d,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};var be=function(e){return function(){return e}},Oe="$",we=function(e,t){if(!e)return d=new Array(this.size()),h=-1,this.each(function(e){d[++h]=e}),d;var i=t?y:f,n=this._parents,r=this._groups;"function"!=typeof e&&(e=be(e));for(var s=r.length,o=new Array(s),a=new Array(s),l=new Array(s),h=0;h<s;++h){var u=n[h],c=r[h],p=c.length,d=e.call(u,u&&u.__data__,h,n),m=d.length,g=a[h]=new Array(m),v=o[h]=new Array(m),L=l[h]=new Array(p);i(u,c,g,v,L,d,t);for(var b,O,w=0,x=0;w<m;++w)if(b=g[w]){for(w>=x&&(x=w+1);!(O=v[x])&&++x<m;);b._next=O||null}}return o=new $(o,n),o._enter=a,o._exit=l,o},xe=function(){return new $(this._exit||this._groups.map(ve),this._parents)},_e=function(e){for(var t=this._groups,i=e._groups,n=t.length,r=i.length,s=Math.min(n,r),o=new Array(n),a=0;a<s;++a)for(var l,h=t[a],u=i[a],c=h.length,p=o[a]=new Array(c),d=0;d<c;++d)(l=h[d]||u[d])&&(p[d]=l);for(;a<n;++a)o[a]=t[a];return new $(o,this._parents)},Ee=function(){for(var e=this._groups,t=-1,i=e.length;++t<i;)for(var n,r=e[t],s=r.length-1,o=r[s];--s>=0;)(n=r[s])&&(o&&o!==n.nextSibling&&o.parentNode.insertBefore(n,o),o=n);return this},Se=function(e){function t(t,i){return t&&i?e(t.__data__,i.__data__):!t-!i}e||(e=m);for(var i=this._groups,n=i.length,r=new Array(n),s=0;s<n;++s){for(var o,a=i[s],l=a.length,h=r[s]=new Array(l),u=0;u<l;++u)(o=a[u])&&(h[u]=o);h.sort(t)}return new $(r,this._parents).order()},Ce=function(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this},Te=function(){var e=new Array(this.size()),t=-1;return this.each(function(){e[++t]=this}),e},ke=function(){for(var e=this._groups,t=0,i=e.length;t<i;++t)for(var n=e[t],r=0,s=n.length;r<s;++r){var o=n[r];if(o)return o}return null},Me=function(){var e=0;return this.each(function(){++e}),e},Pe=function(){return!this.node()},Ne=function(e){for(var t=this._groups,i=0,n=t.length;i<n;++i)for(var r,s=t[i],o=0,a=s.length;o<a;++o)(r=s[o])&&e.call(r,r.__data__,o,s);return this},De=function(e,t){var i=ee(e);if(arguments.length<2){var n=this.node();return i.local?n.getAttributeNS(i.space,i.local):n.getAttribute(i)}return this.each((null==t?i.local?v:g:"function"==typeof t?i.local?w:O:i.local?b:L)(i,t))},Ie=function(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView},Re=function(e,t,i){var n;return arguments.length>1?this.each((null==t?x:"function"==typeof t?E:_)(e,t,null==i?"":i)):Ie(n=this.node()).getComputedStyle(n,null).getPropertyValue(e)},Ae=function(e,t){return arguments.length>1?this.each((null==t?S:"function"==typeof t?T:C)(e,t)):this.node()[e]};P.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};var ze=function(e,t){var i=k(e+"");if(arguments.length<2){for(var n=M(this.node()),r=-1,s=i.length;++r<s;)if(!n.contains(i[r]))return!1;return!0}return this.each(("function"==typeof t?A:t?I:R)(i,t))},Fe=function(e){return arguments.length?this.each(null==e?z:("function"==typeof e?U:F)(e)):this.node().textContent},Ue=function(e){return arguments.length?this.each(null==e?H:("function"==typeof e?j:B)(e)):this.node().innerHTML},He=function(){return this.each(G)},Be=function(){return this.each(W)},je=function(e){var t="function"==typeof e?e:te(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})},Ge=function(e,t){var i="function"==typeof e?e:te(e),n=null==t?q:"function"==typeof t?t:de(t);return this.select(function(){return this.insertBefore(i.apply(this,arguments),n.apply(this,arguments)||null)})},We=function(){return this.each(V)},qe=function(e){return arguments.length?this.property("__data__",e):this.node().__data__},Ve=function(e,t){return this.each(("function"==typeof t?Z:Y)(e,t))},Xe=[null];$.prototype=K.prototype={constructor:$,select:fe,selectAll:me,filter:ge,data:we,enter:Le,exit:xe,merge:_e,order:Ee,sort:Se,call:Ce,nodes:Te,node:ke,size:Me,empty:Pe,each:Ne,attr:De,style:Re,property:Ae,classed:ze,text:Fe,html:Ue,raise:He,lower:Be,append:je,insert:Ge,remove:We,datum:qe,on:he,dispatch:Ve};var Ye=function(e){return"string"==typeof e?new $([[document.querySelector(e)]],[document.documentElement]):new $([[e]],Xe)},Ze=function(e){return"string"==typeof e?new $([document.querySelectorAll(e)],[document.documentElement]):new $([null==e?[]:e],Xe)},$e=function(e,t,i){arguments.length<3&&(i=t,t=ue().changedTouches);for(var n,r=0,s=t?t.length:0;r<s;++r)if((n=t[r]).identifier===i)return ce(e,n);return null},Ke=function(e,t){null==t&&(t=ue().touches);for(var i=0,n=t?t.length:0,r=new Array(n);i<n;++i)r[i]=ce(e,t[i]);return r};e.creator=te,e.local=n,e.matcher=oe,e.mouse=pe,e.namespace=ee,e.namespaces=J,e.select=Ye,e.selectAll=Ze,e.selection=K,e.selector=de,e.selectorAll=ye,e.touch=$e,e.touches=Ke,e.window=Ie,e.customEvent=u,Object.defineProperty(e,"__esModule",{value:!0})})},{}],9:[function(e,t,i){!function(n,r){"object"==typeof i&&"undefined"!=typeof t?r(i,e("d3-time")):"function"==typeof define&&define.amd?define(["exports","d3-time"],r):r(n.d3=n.d3||{},n.d3)}(this,function(e,t){"use strict";function i(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function n(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function r(e){return{y:e,m:0,d:1,H:0,M:0,S:0,L:0}}function s(e){function t(e,t){return function(i){var n,r,s,o=[],a=-1,l=0,h=e.length;for(i instanceof Date||(i=new Date(+i));++a<h;)37===e.charCodeAt(a)&&(o.push(e.slice(l,a)),null!=(r=ne[n=e.charAt(++a)])?n=e.charAt(++a):r="e"===n?" ":"0",(s=t[n])&&(n=s(i,r)),o.push(n),l=a+1);return o.push(e.slice(l,a)),o.join("")}}function s(e,t){return function(i){var s=r(1900),a=o(s,e,i+="",0);if(a!=i.length)return null;if("p"in s&&(s.H=s.H%12+12*s.p),"W"in s||"U"in s){"w"in s||(s.w="W"in s?1:0);var l="Z"in s?n(r(s.y)).getUTCDay():t(r(s.y)).getDay();s.m=0,s.d="W"in s?(s.w+6)%7+7*s.W-(l+5)%7:s.w+7*s.U-(l+6)%7}return"Z"in s?(s.H+=s.Z/100|0,s.M+=s.Z%100,n(s)):t(s)}}function o(e,t,i,n){for(var r,s,o=0,a=t.length,l=i.length;o<a;){if(n>=l)return-1;if(r=t.charCodeAt(o++),37===r){if(r=t.charAt(o++),s=ze[r in ne?t.charAt(o++):r],!s||(n=s(e,i,n))<0)return-1}else if(r!=i.charCodeAt(n++))return-1}return n}function a(e,t,i){var n=Ee.exec(t.slice(i));return n?(e.p=Se[n[0].toLowerCase()],i+n[0].length):-1}function J(e,t,i){var n=ke.exec(t.slice(i));return n?(e.w=Me[n[0].toLowerCase()],i+n[0].length):-1}function ee(e,t,i){var n=Ce.exec(t.slice(i));return n?(e.w=Te[n[0].toLowerCase()],i+n[0].length):-1}function te(e,t,i){var n=De.exec(t.slice(i));return n?(e.m=Ie[n[0].toLowerCase()],i+n[0].length):-1}function ie(e,t,i){var n=Pe.exec(t.slice(i));return n?(e.m=Ne[n[0].toLowerCase()],i+n[0].length):-1}function re(e,t,i){return o(e,ge,t,i)}function se(e,t,i){return o(e,ve,t,i)}function oe(e,t,i){return o(e,Le,t,i)}function ae(e){return we[e.getDay()]}function le(e){return Oe[e.getDay()]}function he(e){return _e[e.getMonth()]}function ue(e){return xe[e.getMonth()]}function ce(e){return be[+(e.getHours()>=12)]}function pe(e){return we[e.getUTCDay()]}function de(e){return Oe[e.getUTCDay()]}function fe(e){return _e[e.getUTCMonth()]}function ye(e){return xe[e.getUTCMonth()]}function me(e){return be[+(e.getUTCHours()>=12)]}var ge=e.dateTime,ve=e.date,Le=e.time,be=e.periods,Oe=e.days,we=e.shortDays,xe=e.months,_e=e.shortMonths,Ee=l(be),Se=h(be),Ce=l(Oe),Te=h(Oe),ke=l(we),Me=h(we),Pe=l(xe),Ne=h(xe),De=l(_e),Ie=h(_e),Re={a:ae,A:le,b:he,B:ue,c:null,d:_,e:_,H:E,I:S,j:C,L:T,m:k,M:M,p:ce,S:P,U:N,w:D,W:I,x:null,X:null,y:R,Y:A,Z:z,"%":Q},Ae={a:pe,A:de,b:fe,B:ye,c:null,d:F,e:F,H:U,I:H,j:B,L:j,m:G,M:W,p:me,S:q,U:V,w:X,W:Y,x:null,X:null,y:Z,Y:$,Z:K,"%":Q},ze={a:J,A:ee,b:te,B:ie,c:re,d:g,e:g,H:L,I:L,j:v,L:w,m:m,M:b,p:a,
S:O,U:c,w:u,W:p,x:se,X:oe,y:f,Y:d,Z:y,"%":x};return Re.x=t(ve,Re),Re.X=t(Le,Re),Re.c=t(ge,Re),Ae.x=t(ve,Ae),Ae.X=t(Le,Ae),Ae.c=t(ge,Ae),{format:function(e){var i=t(e+="",Re);return i.toString=function(){return e},i},parse:function(e){var t=s(e+="",i);return t.toString=function(){return e},t},utcFormat:function(e){var i=t(e+="",Ae);return i.toString=function(){return e},i},utcParse:function(e){var t=s(e,n);return t.toString=function(){return e},t}}}function o(e,t,i){var n=e<0?"-":"",r=(n?-e:e)+"",s=r.length;return n+(s<i?new Array(i-s+1).join(t)+r:r)}function a(e){return e.replace(oe,"\\$&")}function l(e){return new RegExp("^(?:"+e.map(a).join("|")+")","i")}function h(e){for(var t={},i=-1,n=e.length;++i<n;)t[e[i].toLowerCase()]=i;return t}function u(e,t,i){var n=re.exec(t.slice(i,i+1));return n?(e.w=+n[0],i+n[0].length):-1}function c(e,t,i){var n=re.exec(t.slice(i));return n?(e.U=+n[0],i+n[0].length):-1}function p(e,t,i){var n=re.exec(t.slice(i));return n?(e.W=+n[0],i+n[0].length):-1}function d(e,t,i){var n=re.exec(t.slice(i,i+4));return n?(e.y=+n[0],i+n[0].length):-1}function f(e,t,i){var n=re.exec(t.slice(i,i+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),i+n[0].length):-1}function y(e,t,i){var n=/^(Z)|([+-]\d\d)(?:\:?(\d\d))?/.exec(t.slice(i,i+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),i+n[0].length):-1}function m(e,t,i){var n=re.exec(t.slice(i,i+2));return n?(e.m=n[0]-1,i+n[0].length):-1}function g(e,t,i){var n=re.exec(t.slice(i,i+2));return n?(e.d=+n[0],i+n[0].length):-1}function v(e,t,i){var n=re.exec(t.slice(i,i+3));return n?(e.m=0,e.d=+n[0],i+n[0].length):-1}function L(e,t,i){var n=re.exec(t.slice(i,i+2));return n?(e.H=+n[0],i+n[0].length):-1}function b(e,t,i){var n=re.exec(t.slice(i,i+2));return n?(e.M=+n[0],i+n[0].length):-1}function O(e,t,i){var n=re.exec(t.slice(i,i+2));return n?(e.S=+n[0],i+n[0].length):-1}function w(e,t,i){var n=re.exec(t.slice(i,i+3));return n?(e.L=+n[0],i+n[0].length):-1}function x(e,t,i){var n=se.exec(t.slice(i,i+1));return n?i+n[0].length:-1}function _(e,t){return o(e.getDate(),t,2)}function E(e,t){return o(e.getHours(),t,2)}function S(e,t){return o(e.getHours()%12||12,t,2)}function C(e,i){return o(1+t.timeDay.count(t.timeYear(e),e),i,3)}function T(e,t){return o(e.getMilliseconds(),t,3)}function k(e,t){return o(e.getMonth()+1,t,2)}function M(e,t){return o(e.getMinutes(),t,2)}function P(e,t){return o(e.getSeconds(),t,2)}function N(e,i){return o(t.timeSunday.count(t.timeYear(e),e),i,2)}function D(e){return e.getDay()}function I(e,i){return o(t.timeMonday.count(t.timeYear(e),e),i,2)}function R(e,t){return o(e.getFullYear()%100,t,2)}function A(e,t){return o(e.getFullYear()%1e4,t,4)}function z(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+o(t/60|0,"0",2)+o(t%60,"0",2)}function F(e,t){return o(e.getUTCDate(),t,2)}function U(e,t){return o(e.getUTCHours(),t,2)}function H(e,t){return o(e.getUTCHours()%12||12,t,2)}function B(e,i){return o(1+t.utcDay.count(t.utcYear(e),e),i,3)}function j(e,t){return o(e.getUTCMilliseconds(),t,3)}function G(e,t){return o(e.getUTCMonth()+1,t,2)}function W(e,t){return o(e.getUTCMinutes(),t,2)}function q(e,t){return o(e.getUTCSeconds(),t,2)}function V(e,i){return o(t.utcSunday.count(t.utcYear(e),e),i,2)}function X(e){return e.getUTCDay()}function Y(e,i){return o(t.utcMonday.count(t.utcYear(e),e),i,2)}function Z(e,t){return o(e.getUTCFullYear()%100,t,2)}function $(e,t){return o(e.getUTCFullYear()%1e4,t,4)}function K(){return"+0000"}function Q(){return"%"}function J(t){return ie=s(t),e.timeFormat=ie.format,e.timeParse=ie.parse,e.utcFormat=ie.utcFormat,e.utcParse=ie.utcParse,ie}function ee(e){return e.toISOString()}function te(e){var t=new Date(e);return isNaN(t)?null:t}var ie,ne={"-":"",_:" ",0:"0"},re=/^\s*\d+/,se=/^%/,oe=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g;J({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var ae="%Y-%m-%dT%H:%M:%S.%LZ",le=Date.prototype.toISOString?ee:e.utcFormat(ae),he=+new Date("2000-01-01T00:00:00.000Z")?te:e.utcParse(ae);e.timeFormatDefaultLocale=J,e.timeFormatLocale=s,e.isoFormat=le,e.isoParse=he,Object.defineProperty(e,"__esModule",{value:!0})})},{"d3-time":10}],10:[function(e,t,i){!function(e,n){"object"==typeof i&&"undefined"!=typeof t?n(i):"function"==typeof define&&define.amd?define(["exports"],n):n(e.d3=e.d3||{})}(this,function(e){"use strict";function t(e,i,n,o){function a(t){return e(t=new Date(+t)),t}return a.floor=a,a.ceil=function(t){return e(t=new Date(t-1)),i(t,1),e(t),t},a.round=function(e){var t=a(e),i=a.ceil(e);return e-t<i-e?t:i},a.offset=function(e,t){return i(e=new Date(+e),null==t?1:Math.floor(t)),e},a.range=function(t,n,r){var s=[];if(t=a.ceil(t),r=null==r?1:Math.floor(r),!(t<n&&r>0))return s;do s.push(new Date(+t));while(i(t,r),e(t),t<n);return s},a.filter=function(n){return t(function(t){if(t>=t)for(;e(t),!n(t);)t.setTime(t-1)},function(e,t){if(e>=e)for(;--t>=0;)for(;i(e,1),!n(e););})},n&&(a.count=function(t,i){return r.setTime(+t),s.setTime(+i),e(r),e(s),Math.floor(n(r,s))},a.every=function(e){return e=Math.floor(e),isFinite(e)&&e>0?e>1?a.filter(o?function(t){return o(t)%e===0}:function(t){return a.count(0,t)%e===0}):a:null}),a}function i(e){return t(function(t){t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},function(e,t){e.setDate(e.getDate()+7*t)},function(e,t){return(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*h)/p})}function n(e){return t(function(t){t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},function(e,t){e.setUTCDate(e.getUTCDate()+7*t)},function(e,t){return(t-e)/p})}var r=new Date,s=new Date,o=t(function(){},function(e,t){e.setTime(+e+t)},function(e,t){return t-e});o.every=function(e){return e=Math.floor(e),isFinite(e)&&e>0?e>1?t(function(t){t.setTime(Math.floor(t/e)*e)},function(t,i){t.setTime(+t+i*e)},function(t,i){return(i-t)/e}):o:null};var a=o.range,l=1e3,h=6e4,u=36e5,c=864e5,p=6048e5,d=t(function(e){e.setTime(Math.floor(e/l)*l)},function(e,t){e.setTime(+e+t*l)},function(e,t){return(t-e)/l},function(e){return e.getUTCSeconds()}),f=d.range,y=t(function(e){e.setTime(Math.floor(e/h)*h)},function(e,t){e.setTime(+e+t*h)},function(e,t){return(t-e)/h},function(e){return e.getMinutes()}),m=y.range,g=t(function(e){var t=e.getTimezoneOffset()*h%u;t<0&&(t+=u),e.setTime(Math.floor((+e-t)/u)*u+t)},function(e,t){e.setTime(+e+t*u)},function(e,t){return(t-e)/u},function(e){return e.getHours()}),v=g.range,L=t(function(e){e.setHours(0,0,0,0)},function(e,t){e.setDate(e.getDate()+t)},function(e,t){return(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*h)/c},function(e){return e.getDate()-1}),b=L.range,O=i(0),w=i(1),x=i(2),_=i(3),E=i(4),S=i(5),C=i(6),T=O.range,k=w.range,M=x.range,P=_.range,N=E.range,D=S.range,I=C.range,R=t(function(e){e.setDate(1),e.setHours(0,0,0,0)},function(e,t){e.setMonth(e.getMonth()+t)},function(e,t){return t.getMonth()-e.getMonth()+12*(t.getFullYear()-e.getFullYear())},function(e){return e.getMonth()}),A=R.range,z=t(function(e){e.setMonth(0,1),e.setHours(0,0,0,0)},function(e,t){e.setFullYear(e.getFullYear()+t)},function(e,t){return t.getFullYear()-e.getFullYear()},function(e){return e.getFullYear()});z.every=function(e){return isFinite(e=Math.floor(e))&&e>0?t(function(t){t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,i){t.setFullYear(t.getFullYear()+i*e)}):null};var F=z.range,U=t(function(e){e.setUTCSeconds(0,0)},function(e,t){e.setTime(+e+t*h)},function(e,t){return(t-e)/h},function(e){return e.getUTCMinutes()}),H=U.range,B=t(function(e){e.setUTCMinutes(0,0,0)},function(e,t){e.setTime(+e+t*u)},function(e,t){return(t-e)/u},function(e){return e.getUTCHours()}),j=B.range,G=t(function(e){e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCDate(e.getUTCDate()+t)},function(e,t){return(t-e)/c},function(e){return e.getUTCDate()-1}),W=G.range,q=n(0),V=n(1),X=n(2),Y=n(3),Z=n(4),$=n(5),K=n(6),Q=q.range,J=V.range,ee=X.range,te=Y.range,ie=Z.range,ne=$.range,re=K.range,se=t(function(e){e.setUTCDate(1),e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCMonth(e.getUTCMonth()+t)},function(e,t){return t.getUTCMonth()-e.getUTCMonth()+12*(t.getUTCFullYear()-e.getUTCFullYear())},function(e){return e.getUTCMonth()}),oe=se.range,ae=t(function(e){e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCFullYear(e.getUTCFullYear()+t)},function(e,t){return t.getUTCFullYear()-e.getUTCFullYear()},function(e){return e.getUTCFullYear()});ae.every=function(e){return isFinite(e=Math.floor(e))&&e>0?t(function(t){t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,i){t.setUTCFullYear(t.getUTCFullYear()+i*e)}):null};var le=ae.range;e.timeInterval=t,e.timeMillisecond=o,e.timeMilliseconds=a,e.utcMillisecond=o,e.utcMilliseconds=a,e.timeSecond=d,e.timeSeconds=f,e.utcSecond=d,e.utcSeconds=f,e.timeMinute=y,e.timeMinutes=m,e.timeHour=g,e.timeHours=v,e.timeDay=L,e.timeDays=b,e.timeWeek=O,e.timeWeeks=T,e.timeSunday=O,e.timeSundays=T,e.timeMonday=w,e.timeMondays=k,e.timeTuesday=x,e.timeTuesdays=M,e.timeWednesday=_,e.timeWednesdays=P,e.timeThursday=E,e.timeThursdays=N,e.timeFriday=S,e.timeFridays=D,e.timeSaturday=C,e.timeSaturdays=I,e.timeMonth=R,e.timeMonths=A,e.timeYear=z,e.timeYears=F,e.utcMinute=U,e.utcMinutes=H,e.utcHour=B,e.utcHours=j,e.utcDay=G,e.utcDays=W,e.utcWeek=q,e.utcWeeks=Q,e.utcSunday=q,e.utcSundays=Q,e.utcMonday=V,e.utcMondays=J,e.utcTuesday=X,e.utcTuesdays=ee,e.utcWednesday=Y,e.utcWednesdays=te,e.utcThursday=Z,e.utcThursdays=ie,e.utcFriday=$,e.utcFridays=ne,e.utcSaturday=K,e.utcSaturdays=re,e.utcMonth=se,e.utcMonths=oe,e.utcYear=ae,e.utcYears=le,Object.defineProperty(e,"__esModule",{value:!0})})},{}],11:[function(e,t,i){!function(e){"function"==typeof define&&define.amd?define(["jquery","./version"],e):e(jQuery)}(function(e){return e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(i){return!!e.data(i,t)}}):function(t,i,n){return!!e.data(t,n[3])}})})},{}],12:[function(e,t,i){!function(e){"function"==typeof define&&define.amd?define(["jquery","./version"],e):e(jQuery)}(function(e){return e.fn.extend({disableSelection:function(){var e="onselectstart"in document.createElement("div")?"selectstart":"mousedown";return function(){return this.on(e+".ui-disableSelection",function(e){e.preventDefault()})}}(),enableSelection:function(){return this.off(".ui-disableSelection")}})})},{}],13:[function(e,t,i){!function(e){"function"==typeof define&&define.amd?define(["jquery","./version"],e):e(jQuery)}(function(e){return e.ui.escapeSelector=function(){var e=/([!"#$%&'()*+,.\/:;<=>?@[\]^`{|}~])/g;return function(t){return t.replace(e,"\\$1")}}()})},{}],14:[function(e,t,i){!function(e){"function"==typeof define&&define.amd?define(["jquery","./version"],e):e(jQuery)}(function(e){function t(e){for(var t=e.css("visibility");"inherit"===t;)e=e.parent(),t=e.css("visibility");return"hidden"!==t}return e.ui.focusable=function(i,n){var r,s,o,a,l,h=i.nodeName.toLowerCase();return"area"===h?(r=i.parentNode,s=r.name,!(!i.href||!s||"map"!==r.nodeName.toLowerCase())&&(o=e("img[usemap='#"+s+"']"),o.length>0&&o.is(":visible"))):(/^(input|select|textarea|button|object)$/.test(h)?(a=!i.disabled,a&&(l=e(i).closest("fieldset")[0],l&&(a=!l.disabled))):a="a"===h?i.href||n:n,a&&e(i).is(":visible")&&t(e(i)))},e.extend(e.expr[":"],{focusable:function(t){return e.ui.focusable(t,null!=e.attr(t,"tabindex"))}}),e.ui.focusable})},{}],15:[function(e,t,i){!function(e){"function"==typeof define&&define.amd?define(["jquery","./form","./version"],e):e(jQuery)}(function(e){return e.ui.formResetMixin={_formResetHandler:function(){var t=e(this);setTimeout(function(){var i=t.data("ui-form-reset-instances");e.each(i,function(){this.refresh()})})},_bindFormResetHandler:function(){if(this.form=this.element.form(),this.form.length){var e=this.form.data("ui-form-reset-instances")||[];e.length||this.form.on("reset.ui-form-reset",this._formResetHandler),e.push(this),this.form.data("ui-form-reset-instances",e)}},_unbindFormResetHandler:function(){if(this.form.length){var t=this.form.data("ui-form-reset-instances");t.splice(e.inArray(this,t),1),t.length?this.form.data("ui-form-reset-instances",t):this.form.removeData("ui-form-reset-instances").off("reset.ui-form-reset")}}}})},{}],16:[function(e,t,i){!function(e){"function"==typeof define&&define.amd?define(["jquery","./version"],e):e(jQuery)}(function(e){return e.fn.form=function(){return"string"==typeof this[0].form?this.closest("form"):e(this[0].form)}})},{}],17:[function(e,t,i){!function(e){"function"==typeof define&&define.amd?define(["jquery","./version"],e):e(jQuery)}(function(e){return e.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase())})},{}],18:[function(e,t,i){!function(e){"function"==typeof define&&define.amd?define(["jquery","./version"],e):e(jQuery)}(function(e){return e.ui.keyCode={BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}})},{}],19:[function(e,t,i){!function(e){"function"==typeof define&&define.amd?define(["jquery","./version","./escape-selector"],e):e(jQuery)}(function(e){return e.fn.labels=function(){var t,i,n,r,s;return this[0].labels&&this[0].labels.length?this.pushStack(this[0].labels):(r=this.eq(0).parents("label"),n=this.attr("id"),n&&(t=this.eq(0).parents().last(),s=t.add(t.length?t.siblings():this.siblings()),i="label[for='"+e.ui.escapeSelector(n)+"']",r=r.add(s.find(i).addBack(i))),this.pushStack(r))}})},{}],20:[function(e,t,i){!function(e){"function"==typeof define&&define.amd?define(["jquery","./version"],e):e(jQuery)}(function(e){return e.ui.plugin={add:function(t,i,n){var r,s=e.ui[t].prototype;for(r in n)s.plugins[r]=s.plugins[r]||[],s.plugins[r].push([i,n[r]])},call:function(e,t,i,n){var r,s=e.plugins[t];if(s&&(n||e.element[0].parentNode&&11!==e.element[0].parentNode.nodeType))for(r=0;r<s.length;r++)e.options[s[r][0]]&&s[r][1].apply(e.element,i)}}})},{}],21:[function(e,t,i){!function(e){"function"==typeof define&&define.amd?define(["jquery","./version"],e):e(jQuery)}(function(e){return function(){function t(e,t,i){return[parseFloat(e[0])*(c.test(e[0])?t/100:1),parseFloat(e[1])*(c.test(e[1])?i/100:1)]}function i(t,i){return parseInt(e.css(t,i),10)||0}function n(t){var i=t[0];return 9===i.nodeType?{width:t.width(),height:t.height(),offset:{top:0,left:0}}:e.isWindow(i)?{width:t.width(),height:t.height(),offset:{top:t.scrollTop(),left:t.scrollLeft()}}:i.preventDefault?{width:0,height:0,offset:{top:i.pageY,left:i.pageX}}:{width:t.outerWidth(),height:t.outerHeight(),offset:t.offset()}}var r,s=Math.max,o=Math.abs,a=/left|center|right/,l=/top|center|bottom/,h=/[\+\-]\d+(\.[\d]+)?%?/,u=/^\w+/,c=/%$/,p=e.fn.position;e.position={scrollbarWidth:function(){if(void 0!==r)return r;var t,i,n=e("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),s=n.children()[0];return e("body").append(n),t=s.offsetWidth,n.css("overflow","scroll"),i=s.offsetWidth,t===i&&(i=n[0].clientWidth),n.remove(),r=t-i},getScrollInfo:function(t){var i=t.isWindow||t.isDocument?"":t.element.css("overflow-x"),n=t.isWindow||t.isDocument?"":t.element.css("overflow-y"),r="scroll"===i||"auto"===i&&t.width<t.element[0].scrollWidth,s="scroll"===n||"auto"===n&&t.height<t.element[0].scrollHeight;return{width:s?e.position.scrollbarWidth():0,height:r?e.position.scrollbarWidth():0}},getWithinInfo:function(t){var i=e(t||window),n=e.isWindow(i[0]),r=!!i[0]&&9===i[0].nodeType,s=!n&&!r;return{element:i,isWindow:n,isDocument:r,offset:s?e(t).offset():{left:0,top:0},scrollLeft:i.scrollLeft(),scrollTop:i.scrollTop(),width:i.outerWidth(),height:i.outerHeight()}}},e.fn.position=function(r){if(!r||!r.of)return p.apply(this,arguments);r=e.extend({},r);var c,d,f,y,m,g,v=e(r.of),L=e.position.getWithinInfo(r.within),b=e.position.getScrollInfo(L),O=(r.collision||"flip").split(" "),w={};return g=n(v),v[0].preventDefault&&(r.at="left top"),d=g.width,f=g.height,y=g.offset,m=e.extend({},y),e.each(["my","at"],function(){var e,t,i=(r[this]||"").split(" ");1===i.length&&(i=a.test(i[0])?i.concat(["center"]):l.test(i[0])?["center"].concat(i):["center","center"]),i[0]=a.test(i[0])?i[0]:"center",i[1]=l.test(i[1])?i[1]:"center",e=h.exec(i[0]),t=h.exec(i[1]),w[this]=[e?e[0]:0,t?t[0]:0],r[this]=[u.exec(i[0])[0],u.exec(i[1])[0]]}),1===O.length&&(O[1]=O[0]),"right"===r.at[0]?m.left+=d:"center"===r.at[0]&&(m.left+=d/2),"bottom"===r.at[1]?m.top+=f:"center"===r.at[1]&&(m.top+=f/2),c=t(w.at,d,f),m.left+=c[0],m.top+=c[1],this.each(function(){var n,a,l=e(this),h=l.outerWidth(),u=l.outerHeight(),p=i(this,"marginLeft"),g=i(this,"marginTop"),x=h+p+i(this,"marginRight")+b.width,_=u+g+i(this,"marginBottom")+b.height,E=e.extend({},m),S=t(w.my,l.outerWidth(),l.outerHeight());"right"===r.my[0]?E.left-=h:"center"===r.my[0]&&(E.left-=h/2),"bottom"===r.my[1]?E.top-=u:"center"===r.my[1]&&(E.top-=u/2),E.left+=S[0],E.top+=S[1],n={marginLeft:p,marginTop:g},e.each(["left","top"],function(t,i){e.ui.position[O[t]]&&e.ui.position[O[t]][i](E,{targetWidth:d,targetHeight:f,elemWidth:h,elemHeight:u,collisionPosition:n,collisionWidth:x,collisionHeight:_,offset:[c[0]+S[0],c[1]+S[1]],my:r.my,at:r.at,within:L,elem:l})}),r.using&&(a=function(e){var t=y.left-E.left,i=t+d-h,n=y.top-E.top,a=n+f-u,c={target:{element:v,left:y.left,top:y.top,width:d,height:f},element:{element:l,left:E.left,top:E.top,width:h,height:u},horizontal:i<0?"left":t>0?"right":"center",vertical:a<0?"top":n>0?"bottom":"middle"};d<h&&o(t+i)<d&&(c.horizontal="center"),f<u&&o(n+a)<f&&(c.vertical="middle"),s(o(t),o(i))>s(o(n),o(a))?c.important="horizontal":c.important="vertical",r.using.call(this,e,c)}),l.offset(e.extend(E,{using:a}))})},e.ui.position={fit:{left:function(e,t){var i,n=t.within,r=n.isWindow?n.scrollLeft:n.offset.left,o=n.width,a=e.left-t.collisionPosition.marginLeft,l=r-a,h=a+t.collisionWidth-o-r;t.collisionWidth>o?l>0&&h<=0?(i=e.left+l+t.collisionWidth-o-r,e.left+=l-i):h>0&&l<=0?e.left=r:l>h?e.left=r+o-t.collisionWidth:e.left=r:l>0?e.left+=l:h>0?e.left-=h:e.left=s(e.left-a,e.left)},top:function(e,t){var i,n=t.within,r=n.isWindow?n.scrollTop:n.offset.top,o=t.within.height,a=e.top-t.collisionPosition.marginTop,l=r-a,h=a+t.collisionHeight-o-r;t.collisionHeight>o?l>0&&h<=0?(i=e.top+l+t.collisionHeight-o-r,e.top+=l-i):h>0&&l<=0?e.top=r:l>h?e.top=r+o-t.collisionHeight:e.top=r:l>0?e.top+=l:h>0?e.top-=h:e.top=s(e.top-a,e.top)}},flip:{left:function(e,t){var i,n,r=t.within,s=r.offset.left+r.scrollLeft,a=r.width,l=r.isWindow?r.scrollLeft:r.offset.left,h=e.left-t.collisionPosition.marginLeft,u=h-l,c=h+t.collisionWidth-a-l,p="left"===t.my[0]?-t.elemWidth:"right"===t.my[0]?t.elemWidth:0,d="left"===t.at[0]?t.targetWidth:"right"===t.at[0]?-t.targetWidth:0,f=-2*t.offset[0];u<0?(i=e.left+p+d+f+t.collisionWidth-a-s,(i<0||i<o(u))&&(e.left+=p+d+f)):c>0&&(n=e.left-t.collisionPosition.marginLeft+p+d+f-l,(n>0||o(n)<c)&&(e.left+=p+d+f))},top:function(e,t){var i,n,r=t.within,s=r.offset.top+r.scrollTop,a=r.height,l=r.isWindow?r.scrollTop:r.offset.top,h=e.top-t.collisionPosition.marginTop,u=h-l,c=h+t.collisionHeight-a-l,p="top"===t.my[1],d=p?-t.elemHeight:"bottom"===t.my[1]?t.elemHeight:0,f="top"===t.at[1]?t.targetHeight:"bottom"===t.at[1]?-t.targetHeight:0,y=-2*t.offset[1];u<0?(n=e.top+d+f+y+t.collisionHeight-a-s,(n<0||n<o(u))&&(e.top+=d+f+y)):c>0&&(i=e.top-t.collisionPosition.marginTop+d+f+y-l,(i>0||o(i)<c)&&(e.top+=d+f+y))}},flipfit:{left:function(){e.ui.position.flip.left.apply(this,arguments),e.ui.position.fit.left.apply(this,arguments)},top:function(){e.ui.position.flip.top.apply(this,arguments),e.ui.position.fit.top.apply(this,arguments)}}}}(),e.ui.position})},{}],22:[function(e,t,i){!function(e){"function"==typeof define&&define.amd?define(["jquery","./version"],e):e(jQuery)}(function(e){return e.ui.safeActiveElement=function(e){var t;try{t=e.activeElement}catch(i){t=e.body}return t||(t=e.body),t.nodeName||(t=e.body),t}})},{}],23:[function(e,t,i){!function(e){"function"==typeof define&&define.amd?define(["jquery","./version"],e):e(jQuery)}(function(e){return e.ui.safeBlur=function(t){t&&"body"!==t.nodeName.toLowerCase()&&e(t).trigger("blur")}})},{}],24:[function(e,t,i){!function(e){"function"==typeof define&&define.amd?define(["jquery","./version"],e):e(jQuery)}(function(e){return e.fn.scrollParent=function(t){var i=this.css("position"),n="absolute"===i,r=t?/(auto|scroll|hidden)/:/(auto|scroll)/,s=this.parents().filter(function(){var t=e(this);return(!n||"static"!==t.css("position"))&&r.test(t.css("overflow")+t.css("overflow-y")+t.css("overflow-x"))}).eq(0);return"fixed"!==i&&s.length?s:e(this[0].ownerDocument||document)}})},{}],25:[function(e,t,i){!function(e){"function"==typeof define&&define.amd?define(["jquery","./version","./focusable"],e):e(jQuery)}(function(e){return e.extend(e.expr[":"],{tabbable:function(t){var i=e.attr(t,"tabindex"),n=null!=i;return(!n||i>=0)&&e.ui.focusable(t,n)}})})},{}],26:[function(e,t,i){!function(e){"function"==typeof define&&define.amd?define(["jquery","./version"],e):e(jQuery)}(function(e){return e.fn.extend({uniqueId:function(){var e=0;return function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++e)})}}(),removeUniqueId:function(){return this.each(function(){/^ui-id-\d+$/.test(this.id)&&e(this).removeAttr("id")})}})})},{}],27:[function(e,t,i){!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e(jQuery)}(function(e){return e.ui=e.ui||{},e.ui.version="1.12.1"})},{}],28:[function(e,t,i){!function(e){"function"==typeof define&&define.amd?define(["jquery","./version"],e):e(jQuery)}(function(e){var t=0,i=Array.prototype.slice;return e.cleanData=function(t){return function(i){var n,r,s;for(s=0;null!=(r=i[s]);s++)try{n=e._data(r,"events"),n&&n.remove&&e(r).triggerHandler("remove")}catch(e){}t(i)}}(e.cleanData),e.widget=function(t,i,n){var r,s,o,a={},l=t.split(".")[0];t=t.split(".")[1];var h=l+"-"+t;return n||(n=i,i=e.Widget),e.isArray(n)&&(n=e.extend.apply(null,[{}].concat(n))),e.expr[":"][h.toLowerCase()]=function(t){return!!e.data(t,h)},e[l]=e[l]||{},r=e[l][t],s=e[l][t]=function(e,t){return this._createWidget?void(arguments.length&&this._createWidget(e,t)):new s(e,t)},e.extend(s,r,{version:n.version,_proto:e.extend({},n),_childConstructors:[]}),o=new i,o.options=e.widget.extend({},o.options),e.each(n,function(t,n){return e.isFunction(n)?void(a[t]=function(){function e(){return i.prototype[t].apply(this,arguments)}function r(e){return i.prototype[t].apply(this,e)}return function(){var t,i=this._super,s=this._superApply;return this._super=e,this._superApply=r,t=n.apply(this,arguments),this._super=i,this._superApply=s,t}}()):void(a[t]=n)}),s.prototype=e.widget.extend(o,{widgetEventPrefix:r?o.widgetEventPrefix||t:t},a,{constructor:s,namespace:l,widgetName:t,widgetFullName:h}),r?(e.each(r._childConstructors,function(t,i){var n=i.prototype;e.widget(n.namespace+"."+n.widgetName,s,i._proto)}),delete r._childConstructors):i._childConstructors.push(s),e.widget.bridge(t,s),s},e.widget.extend=function(t){for(var n,r,s=i.call(arguments,1),o=0,a=s.length;o<a;o++)for(n in s[o])r=s[o][n],s[o].hasOwnProperty(n)&&void 0!==r&&(e.isPlainObject(r)?t[n]=e.isPlainObject(t[n])?e.widget.extend({},t[n],r):e.widget.extend({},r):t[n]=r);return t},e.widget.bridge=function(t,n){var r=n.prototype.widgetFullName||t;e.fn[t]=function(s){var o="string"==typeof s,a=i.call(arguments,1),l=this;return o?this.length||"instance"!==s?this.each(function(){var i,n=e.data(this,r);return"instance"===s?(l=n,!1):n?e.isFunction(n[s])&&"_"!==s.charAt(0)?(i=n[s].apply(n,a),i!==n&&void 0!==i?(l=i&&i.jquery?l.pushStack(i.get()):i,!1):void 0):e.error("no such method '"+s+"' for "+t+" widget instance"):e.error("cannot call methods on "+t+" prior to initialization; attempted to call method '"+s+"'")}):l=void 0:(a.length&&(s=e.widget.extend.apply(null,[s].concat(a))),this.each(function(){var t=e.data(this,r);t?(t.option(s||{}),t._init&&t._init()):e.data(this,r,new n(s,this))})),l}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{classes:{},disabled:!1,create:null},_createWidget:function(i,n){n=e(n||this.defaultElement||this)[0],this.element=e(n),this.uuid=t++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=e(),this.hoverable=e(),this.focusable=e(),this.classesElementLookup={},n!==this&&(e.data(n,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===n&&this.destroy()}}),this.document=e(n.style?n.ownerDocument:n.document||n),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this.options=e.widget.extend({},this.options,this._getCreateOptions(),i),this._create(),this.options.disabled&&this._setOptionDisabled(this.options.disabled),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:function(){return{}},_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){var t=this;this._destroy(),e.each(this.classesElementLookup,function(e,i){t._removeClass(i,e)}),this.element.off(this.eventNamespace).removeData(this.widgetFullName),this.widget().off(this.eventNamespace).removeAttr("aria-disabled"),this.bindings.off(this.eventNamespace)},_destroy:e.noop,widget:function(){return this.element},option:function(t,i){var n,r,s,o=t;if(0===arguments.length)return e.widget.extend({},this.options);if("string"==typeof t)if(o={},n=t.split("."),t=n.shift(),n.length){for(r=o[t]=e.widget.extend({},this.options[t]),s=0;s<n.length-1;s++)r[n[s]]=r[n[s]]||{},r=r[n[s]];if(t=n.pop(),1===arguments.length)return void 0===r[t]?null:r[t];r[t]=i}else{if(1===arguments.length)return void 0===this.options[t]?null:this.options[t];o[t]=i}return this._setOptions(o),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return"classes"===e&&this._setOptionClasses(t),this.options[e]=t,"disabled"===e&&this._setOptionDisabled(t),this},_setOptionClasses:function(t){var i,n,r;for(i in t)r=this.classesElementLookup[i],t[i]!==this.options.classes[i]&&r&&r.length&&(n=e(r.get()),this._removeClass(r,i),n.addClass(this._classes({element:n,keys:i,classes:t,add:!0})))},_setOptionDisabled:function(e){this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,!!e),e&&(this._removeClass(this.hoverable,null,"ui-state-hover"),this._removeClass(this.focusable,null,"ui-state-focus"))},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_classes:function(t){function i(i,s){var o,a;for(a=0;a<i.length;a++)o=r.classesElementLookup[i[a]]||e(),o=e(t.add?e.unique(o.get().concat(t.element.get())):o.not(t.element).get()),r.classesElementLookup[i[a]]=o,n.push(i[a]),s&&t.classes[i[a]]&&n.push(t.classes[i[a]])}var n=[],r=this;return t=e.extend({element:this.element,classes:this.options.classes||{}},t),this._on(t.element,{remove:"_untrackClassesElement"}),t.keys&&i(t.keys.match(/\S+/g)||[],!0),t.extra&&i(t.extra.match(/\S+/g)||[]),n.join(" ")},_untrackClassesElement:function(t){var i=this;e.each(i.classesElementLookup,function(n,r){e.inArray(t.target,r)!==-1&&(i.classesElementLookup[n]=e(r.not(t.target).get()))})},_removeClass:function(e,t,i){return this._toggleClass(e,t,i,!1)},_addClass:function(e,t,i){return this._toggleClass(e,t,i,!0)},_toggleClass:function(e,t,i,n){n="boolean"==typeof n?n:i;var r="string"==typeof e||null===e,s={extra:r?t:i,keys:r?e:t,element:r?this.element:e,add:n};return s.element.toggleClass(this._classes(s),n),this},_on:function(t,i,n){var r,s=this;"boolean"!=typeof t&&(n=i,i=t,t=!1),n?(i=r=e(i),this.bindings=this.bindings.add(i)):(n=i,i=this.element,r=this.widget()),e.each(n,function(n,o){function a(){if(t||s.options.disabled!==!0&&!e(this).hasClass("ui-state-disabled"))return("string"==typeof o?s[o]:o).apply(s,arguments)}"string"!=typeof o&&(a.guid=o.guid=o.guid||a.guid||e.guid++);var l=n.match(/^([\w:-]*)\s*(.*)$/),h=l[1]+s.eventNamespace,u=l[2];u?r.on(h,u,a):i.on(h,a)})},_off:function(t,i){i=(i||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,t.off(i).off(i),this.bindings=e(this.bindings.not(t).get()),this.focusable=e(this.focusable.not(t).get()),this.hoverable=e(this.hoverable.not(t).get())},_delay:function(e,t){function i(){return("string"==typeof e?n[e]:e).apply(n,arguments)}var n=this;return setTimeout(i,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){this._addClass(e(t.currentTarget),null,"ui-state-hover")},mouseleave:function(t){this._removeClass(e(t.currentTarget),null,"ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){this._addClass(e(t.currentTarget),null,"ui-state-focus")},focusout:function(t){this._removeClass(e(t.currentTarget),null,"ui-state-focus")}})},_trigger:function(t,i,n){var r,s,o=this.options[t];if(n=n||{},i=e.Event(i),i.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),i.target=this.element[0],s=i.originalEvent)for(r in s)r in i||(i[r]=s[r]);return this.element.trigger(i,n),!(e.isFunction(o)&&o.apply(this.element[0],[i].concat(n))===!1||i.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,i){e.Widget.prototype["_"+t]=function(n,r,s){"string"==typeof r&&(r={effect:r});var o,a=r?r===!0||"number"==typeof r?i:r.effect||i:t;r=r||{},"number"==typeof r&&(r={duration:r}),o=!e.isEmptyObject(r),r.complete=s,r.delay&&n.delay(r.delay),o&&e.effects&&e.effects.effect[a]?n[t](r):a!==t&&n[a]?n[a](r.duration,r.easing,s):n.queue(function(i){e(this)[t](),s&&s.call(n[0]),i()})}}),e.widget})},{}],29:[function(e,t,i){!function(e){"function"==typeof define&&define.amd?define(["jquery","./controlgroup","./checkboxradio","../keycode","../widget"],e):e(jQuery)}(function(e){return e.widget("ui.button",{version:"1.12.1",defaultElement:"<button>",options:{classes:{"ui-button":"ui-corner-all"},disabled:null,icon:null,iconPosition:"beginning",label:null,showLabel:!0},_getCreateOptions:function(){var e,t=this._super()||{};return this.isInput=this.element.is("input"),e=this.element[0].disabled,null!=e&&(t.disabled=e),this.originalLabel=this.isInput?this.element.val():this.element.html(),this.originalLabel&&(t.label=this.originalLabel),t},_create:function(){!this.option.showLabel&!this.options.icon&&(this.options.showLabel=!0),null==this.options.disabled&&(this.options.disabled=this.element[0].disabled||!1),this.hasTitle=!!this.element.attr("title"),this.options.label&&this.options.label!==this.originalLabel&&(this.isInput?this.element.val(this.options.label):this.element.html(this.options.label)),this._addClass("ui-button","ui-widget"),this._setOption("disabled",this.options.disabled),this._enhance(),this.element.is("a")&&this._on({keyup:function(t){t.keyCode===e.ui.keyCode.SPACE&&(t.preventDefault(),this.element[0].click?this.element[0].click():this.element.trigger("click"))}})},_enhance:function(){this.element.is("button")||this.element.attr("role","button"),this.options.icon&&(this._updateIcon("icon",this.options.icon),this._updateTooltip())},_updateTooltip:function(){this.title=this.element.attr("title"),this.options.showLabel||this.title||this.element.attr("title",this.options.label)},_updateIcon:function(t,i){var n="iconPosition"!==t,r=n?this.options.iconPosition:i,s="top"===r||"bottom"===r;this.icon?n&&this._removeClass(this.icon,null,this.options.icon):(this.icon=e("<span>"),this._addClass(this.icon,"ui-button-icon","ui-icon"),this.options.showLabel||this._addClass("ui-button-icon-only")),n&&this._addClass(this.icon,null,i),
this._attachIcon(r),s?(this._addClass(this.icon,null,"ui-widget-icon-block"),this.iconSpace&&this.iconSpace.remove()):(this.iconSpace||(this.iconSpace=e("<span> </span>"),this._addClass(this.iconSpace,"ui-button-icon-space")),this._removeClass(this.icon,null,"ui-wiget-icon-block"),this._attachIconSpace(r))},_destroy:function(){this.element.removeAttr("role"),this.icon&&this.icon.remove(),this.iconSpace&&this.iconSpace.remove(),this.hasTitle||this.element.removeAttr("title")},_attachIconSpace:function(e){this.icon[/^(?:end|bottom)/.test(e)?"before":"after"](this.iconSpace)},_attachIcon:function(e){this.element[/^(?:end|bottom)/.test(e)?"append":"prepend"](this.icon)},_setOptions:function(e){var t=void 0===e.showLabel?this.options.showLabel:e.showLabel,i=void 0===e.icon?this.options.icon:e.icon;t||i||(e.showLabel=!0),this._super(e)},_setOption:function(e,t){"icon"===e&&(t?this._updateIcon(e,t):this.icon&&(this.icon.remove(),this.iconSpace&&this.iconSpace.remove())),"iconPosition"===e&&this._updateIcon(e,t),"showLabel"===e&&(this._toggleClass("ui-button-icon-only",null,!t),this._updateTooltip()),"label"===e&&(this.isInput?this.element.val(t):(this.element.html(t),this.icon&&(this._attachIcon(this.options.iconPosition),this._attachIconSpace(this.options.iconPosition)))),this._super(e,t),"disabled"===e&&(this._toggleClass(null,"ui-state-disabled",t),this.element[0].disabled=t,t&&this.element.blur())},refresh:function(){var e=this.element.is("input, button")?this.element[0].disabled:this.element.hasClass("ui-button-disabled");e!==this.options.disabled&&this._setOptions({disabled:e}),this._updateTooltip()}}),e.uiBackCompat!==!1&&(e.widget("ui.button",e.ui.button,{options:{text:!0,icons:{primary:null,secondary:null}},_create:function(){this.options.showLabel&&!this.options.text&&(this.options.showLabel=this.options.text),!this.options.showLabel&&this.options.text&&(this.options.text=this.options.showLabel),this.options.icon||!this.options.icons.primary&&!this.options.icons.secondary?this.options.icon&&(this.options.icons.primary=this.options.icon):this.options.icons.primary?this.options.icon=this.options.icons.primary:(this.options.icon=this.options.icons.secondary,this.options.iconPosition="end"),this._super()},_setOption:function(e,t){return"text"===e?void this._super("showLabel",t):("showLabel"===e&&(this.options.text=t),"icon"===e&&(this.options.icons.primary=t),"icons"===e&&(t.primary?(this._super("icon",t.primary),this._super("iconPosition","beginning")):t.secondary&&(this._super("icon",t.secondary),this._super("iconPosition","end"))),void this._superApply(arguments))}}),e.fn.button=function(t){return function(){return!this.length||this.length&&"INPUT"!==this[0].tagName||this.length&&"INPUT"===this[0].tagName&&"checkbox"!==this.attr("type")&&"radio"!==this.attr("type")?t.apply(this,arguments):(e.ui.checkboxradio||e.error("Checkboxradio widget missing"),0===arguments.length?this.checkboxradio({icon:!1}):this.checkboxradio.apply(this,arguments))}}(e.fn.button),e.fn.buttonset=function(){return e.ui.controlgroup||e.error("Controlgroup widget missing"),"option"===arguments[0]&&"items"===arguments[1]&&arguments[2]?this.controlgroup.apply(this,[arguments[0],"items.button",arguments[2]]):"option"===arguments[0]&&"items"===arguments[1]?this.controlgroup.apply(this,[arguments[0],"items.button"]):("object"==typeof arguments[0]&&arguments[0].items&&(arguments[0].items={button:arguments[0].items}),this.controlgroup.apply(this,arguments))}),e.ui.button})},{}],30:[function(e,t,i){!function(e){"function"==typeof define&&define.amd?define(["jquery","../escape-selector","../form-reset-mixin","../labels","../widget"],e):e(jQuery)}(function(e){return e.widget("ui.checkboxradio",[e.ui.formResetMixin,{version:"1.12.1",options:{disabled:null,label:null,icon:!0,classes:{"ui-checkboxradio-label":"ui-corner-all","ui-checkboxradio-icon":"ui-corner-all"}},_getCreateOptions:function(){var t,i,n=this,r=this._super()||{};return this._readType(),i=this.element.labels(),this.label=e(i[i.length-1]),this.label.length||e.error("No label found for checkboxradio widget"),this.originalLabel="",this.label.contents().not(this.element[0]).each(function(){n.originalLabel+=3===this.nodeType?e(this).text():this.outerHTML}),this.originalLabel&&(r.label=this.originalLabel),t=this.element[0].disabled,null!=t&&(r.disabled=t),r},_create:function(){var e=this.element[0].checked;this._bindFormResetHandler(),null==this.options.disabled&&(this.options.disabled=this.element[0].disabled),this._setOption("disabled",this.options.disabled),this._addClass("ui-checkboxradio","ui-helper-hidden-accessible"),this._addClass(this.label,"ui-checkboxradio-label","ui-button ui-widget"),"radio"===this.type&&this._addClass(this.label,"ui-checkboxradio-radio-label"),this.options.label&&this.options.label!==this.originalLabel?this._updateLabel():this.originalLabel&&(this.options.label=this.originalLabel),this._enhance(),e&&(this._addClass(this.label,"ui-checkboxradio-checked","ui-state-active"),this.icon&&this._addClass(this.icon,null,"ui-state-hover")),this._on({change:"_toggleClasses",focus:function(){this._addClass(this.label,null,"ui-state-focus ui-visual-focus")},blur:function(){this._removeClass(this.label,null,"ui-state-focus ui-visual-focus")}})},_readType:function(){var t=this.element[0].nodeName.toLowerCase();this.type=this.element[0].type,"input"===t&&/radio|checkbox/.test(this.type)||e.error("Can't create checkboxradio on element.nodeName="+t+" and element.type="+this.type)},_enhance:function(){this._updateIcon(this.element[0].checked)},widget:function(){return this.label},_getRadioGroup:function(){var t,i=this.element[0].name,n="input[name='"+e.ui.escapeSelector(i)+"']";return i?(t=this.form.length?e(this.form[0].elements).filter(n):e(n).filter(function(){return 0===e(this).form().length}),t.not(this.element)):e([])},_toggleClasses:function(){var t=this.element[0].checked;this._toggleClass(this.label,"ui-checkboxradio-checked","ui-state-active",t),this.options.icon&&"checkbox"===this.type&&this._toggleClass(this.icon,null,"ui-icon-check ui-state-checked",t)._toggleClass(this.icon,null,"ui-icon-blank",!t),"radio"===this.type&&this._getRadioGroup().each(function(){var t=e(this).checkboxradio("instance");t&&t._removeClass(t.label,"ui-checkboxradio-checked","ui-state-active")})},_destroy:function(){this._unbindFormResetHandler(),this.icon&&(this.icon.remove(),this.iconSpace.remove())},_setOption:function(e,t){if("label"!==e||t)return this._super(e,t),"disabled"===e?(this._toggleClass(this.label,null,"ui-state-disabled",t),void(this.element[0].disabled=t)):void this.refresh()},_updateIcon:function(t){var i="ui-icon ui-icon-background ";this.options.icon?(this.icon||(this.icon=e("<span>"),this.iconSpace=e("<span> </span>"),this._addClass(this.iconSpace,"ui-checkboxradio-icon-space")),"checkbox"===this.type?(i+=t?"ui-icon-check ui-state-checked":"ui-icon-blank",this._removeClass(this.icon,null,t?"ui-icon-blank":"ui-icon-check")):i+="ui-icon-blank",this._addClass(this.icon,"ui-checkboxradio-icon",i),t||this._removeClass(this.icon,null,"ui-icon-check ui-state-checked"),this.icon.prependTo(this.label).after(this.iconSpace)):void 0!==this.icon&&(this.icon.remove(),this.iconSpace.remove(),delete this.icon)},_updateLabel:function(){var e=this.label.contents().not(this.element[0]);this.icon&&(e=e.not(this.icon[0])),this.iconSpace&&(e=e.not(this.iconSpace[0])),e.remove(),this.label.append(this.options.label)},refresh:function(){var e=this.element[0].checked,t=this.element[0].disabled;this._updateIcon(e),this._toggleClass(this.label,"ui-checkboxradio-checked","ui-state-active",e),null!==this.options.label&&this._updateLabel(),t!==this.options.disabled&&this._setOptions({disabled:t})}}]),e.ui.checkboxradio})},{}],31:[function(e,t,i){!function(e){"function"==typeof define&&define.amd?define(["jquery","../widget"],e):e(jQuery)}(function(e){var t=/ui-corner-([a-z]){2,6}/g;return e.widget("ui.controlgroup",{version:"1.12.1",defaultElement:"<div>",options:{direction:"horizontal",disabled:null,onlyVisible:!0,items:{button:"input[type=button], input[type=submit], input[type=reset], button, a",controlgroupLabel:".ui-controlgroup-label",checkboxradio:"input[type='checkbox'], input[type='radio']",selectmenu:"select",spinner:".ui-spinner-input"}},_create:function(){this._enhance()},_enhance:function(){this.element.attr("role","toolbar"),this.refresh()},_destroy:function(){this._callChildMethod("destroy"),this.childWidgets.removeData("ui-controlgroup-data"),this.element.removeAttr("role"),this.options.items.controlgroupLabel&&this.element.find(this.options.items.controlgroupLabel).find(".ui-controlgroup-label-contents").contents().unwrap()},_initWidgets:function(){var t=this,i=[];e.each(this.options.items,function(n,r){var s,o={};if(r)return"controlgroupLabel"===n?(s=t.element.find(r),s.each(function(){var t=e(this);t.children(".ui-controlgroup-label-contents").length||t.contents().wrapAll("<span class='ui-controlgroup-label-contents'></span>")}),t._addClass(s,null,"ui-widget ui-widget-content ui-state-default"),void(i=i.concat(s.get()))):void(e.fn[n]&&(o=t["_"+n+"Options"]?t["_"+n+"Options"]("middle"):{classes:{}},t.element.find(r).each(function(){var r=e(this),s=r[n]("instance"),a=e.widget.extend({},o);if("button"!==n||!r.parent(".ui-spinner").length){s||(s=r[n]()[n]("instance")),s&&(a.classes=t._resolveClassesValues(a.classes,s)),r[n](a);var l=r[n]("widget");e.data(l[0],"ui-controlgroup-data",s?s:r[n]("instance")),i.push(l[0])}})))}),this.childWidgets=e(e.unique(i)),this._addClass(this.childWidgets,"ui-controlgroup-item")},_callChildMethod:function(t){this.childWidgets.each(function(){var i=e(this),n=i.data("ui-controlgroup-data");n&&n[t]&&n[t]()})},_updateCornerClass:function(e,t){var i="ui-corner-top ui-corner-bottom ui-corner-left ui-corner-right ui-corner-all",n=this._buildSimpleOptions(t,"label").classes.label;this._removeClass(e,null,i),this._addClass(e,null,n)},_buildSimpleOptions:function(e,t){var i="vertical"===this.options.direction,n={classes:{}};return n.classes[t]={middle:"",first:"ui-corner-"+(i?"top":"left"),last:"ui-corner-"+(i?"bottom":"right"),only:"ui-corner-all"}[e],n},_spinnerOptions:function(e){var t=this._buildSimpleOptions(e,"ui-spinner");return t.classes["ui-spinner-up"]="",t.classes["ui-spinner-down"]="",t},_buttonOptions:function(e){return this._buildSimpleOptions(e,"ui-button")},_checkboxradioOptions:function(e){return this._buildSimpleOptions(e,"ui-checkboxradio-label")},_selectmenuOptions:function(e){var t="vertical"===this.options.direction;return{width:!!t&&"auto",classes:{middle:{"ui-selectmenu-button-open":"","ui-selectmenu-button-closed":""},first:{"ui-selectmenu-button-open":"ui-corner-"+(t?"top":"tl"),"ui-selectmenu-button-closed":"ui-corner-"+(t?"top":"left")},last:{"ui-selectmenu-button-open":t?"":"ui-corner-tr","ui-selectmenu-button-closed":"ui-corner-"+(t?"bottom":"right")},only:{"ui-selectmenu-button-open":"ui-corner-top","ui-selectmenu-button-closed":"ui-corner-all"}}[e]}},_resolveClassesValues:function(i,n){var r={};return e.each(i,function(s){var o=n.options.classes[s]||"";o=e.trim(o.replace(t,"")),r[s]=(o+" "+i[s]).replace(/\s+/g," ")}),r},_setOption:function(e,t){return"direction"===e&&this._removeClass("ui-controlgroup-"+this.options.direction),this._super(e,t),"disabled"===e?void this._callChildMethod(t?"disable":"enable"):void this.refresh()},refresh:function(){var t,i=this;this._addClass("ui-controlgroup ui-controlgroup-"+this.options.direction),"horizontal"===this.options.direction&&this._addClass(null,"ui-helper-clearfix"),this._initWidgets(),t=this.childWidgets,this.options.onlyVisible&&(t=t.filter(":visible")),t.length&&(e.each(["first","last"],function(e,n){var r=t[n]().data("ui-controlgroup-data");if(r&&i["_"+r.widgetName+"Options"]){var s=i["_"+r.widgetName+"Options"](1===t.length?"only":n);s.classes=i._resolveClassesValues(s.classes,r),r.element[r.widgetName](s)}else i._updateCornerClass(t[n](),n)}),this._callChildMethod("refresh"))}})})},{}],32:[function(e,t,i){!function(e){"function"==typeof define&&define.amd?define(["jquery","./button","./draggable","./mouse","./resizable","../focusable","../keycode","../position","../safe-active-element","../safe-blur","../tabbable","../unique-id","../version","../widget"],e):e(jQuery)}(function(e){return e.widget("ui.dialog",{version:"1.12.1",options:{appendTo:"body",autoOpen:!0,buttons:[],classes:{"ui-dialog":"ui-corner-all","ui-dialog-titlebar":"ui-corner-all"},closeOnEscape:!0,closeText:"Close",draggable:!0,hide:null,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(t){var i=e(this).css(t).offset().top;i<0&&e(this).css("top",t.top-i)}},resizable:!0,show:null,title:null,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},sizeRelatedOptions:{buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},resizableRelatedOptions:{maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height},this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)},this.originalTitle=this.element.attr("title"),null==this.options.title&&null!=this.originalTitle&&(this.options.title=this.originalTitle),this.options.disabled&&(this.options.disabled=!1),this._createWrapper(),this.element.show().removeAttr("title").appendTo(this.uiDialog),this._addClass("ui-dialog-content","ui-widget-content"),this._createTitlebar(),this._createButtonPane(),this.options.draggable&&e.fn.draggable&&this._makeDraggable(),this.options.resizable&&e.fn.resizable&&this._makeResizable(),this._isOpen=!1,this._trackFocus()},_init:function(){this.options.autoOpen&&this.open()},_appendTo:function(){var t=this.options.appendTo;return t&&(t.jquery||t.nodeType)?e(t):this.document.find(t||"body").eq(0)},_destroy:function(){var e,t=this.originalPosition;this._untrackInstance(),this._destroyOverlay(),this.element.removeUniqueId().css(this.originalCss).detach(),this.uiDialog.remove(),this.originalTitle&&this.element.attr("title",this.originalTitle),e=t.parent.children().eq(t.index),e.length&&e[0]!==this.element[0]?e.before(this.element):t.parent.append(this.element)},widget:function(){return this.uiDialog},disable:e.noop,enable:e.noop,close:function(t){var i=this;this._isOpen&&this._trigger("beforeClose",t)!==!1&&(this._isOpen=!1,this._focusedElement=null,this._destroyOverlay(),this._untrackInstance(),this.opener.filter(":focusable").trigger("focus").length||e.ui.safeBlur(e.ui.safeActiveElement(this.document[0])),this._hide(this.uiDialog,this.options.hide,function(){i._trigger("close",t)}))},isOpen:function(){return this._isOpen},moveToTop:function(){this._moveToTop()},_moveToTop:function(t,i){var n=!1,r=this.uiDialog.siblings(".ui-front:visible").map(function(){return+e(this).css("z-index")}).get(),s=Math.max.apply(null,r);return s>=+this.uiDialog.css("z-index")&&(this.uiDialog.css("z-index",s+1),n=!0),n&&!i&&this._trigger("focus",t),n},open:function(){var t=this;return this._isOpen?void(this._moveToTop()&&this._focusTabbable()):(this._isOpen=!0,this.opener=e(e.ui.safeActiveElement(this.document[0])),this._size(),this._position(),this._createOverlay(),this._moveToTop(null,!0),this.overlay&&this.overlay.css("z-index",this.uiDialog.css("z-index")-1),this._show(this.uiDialog,this.options.show,function(){t._focusTabbable(),t._trigger("focus")}),this._makeFocusTarget(),void this._trigger("open"))},_focusTabbable:function(){var e=this._focusedElement;e||(e=this.element.find("[autofocus]")),e.length||(e=this.element.find(":tabbable")),e.length||(e=this.uiDialogButtonPane.find(":tabbable")),e.length||(e=this.uiDialogTitlebarClose.filter(":tabbable")),e.length||(e=this.uiDialog),e.eq(0).trigger("focus")},_keepFocus:function(t){function i(){var t=e.ui.safeActiveElement(this.document[0]),i=this.uiDialog[0]===t||e.contains(this.uiDialog[0],t);i||this._focusTabbable()}t.preventDefault(),i.call(this),this._delay(i)},_createWrapper:function(){this.uiDialog=e("<div>").hide().attr({tabIndex:-1,role:"dialog"}).appendTo(this._appendTo()),this._addClass(this.uiDialog,"ui-dialog","ui-widget ui-widget-content ui-front"),this._on(this.uiDialog,{keydown:function(t){if(this.options.closeOnEscape&&!t.isDefaultPrevented()&&t.keyCode&&t.keyCode===e.ui.keyCode.ESCAPE)return t.preventDefault(),void this.close(t);if(t.keyCode===e.ui.keyCode.TAB&&!t.isDefaultPrevented()){var i=this.uiDialog.find(":tabbable"),n=i.filter(":first"),r=i.filter(":last");t.target!==r[0]&&t.target!==this.uiDialog[0]||t.shiftKey?t.target!==n[0]&&t.target!==this.uiDialog[0]||!t.shiftKey||(this._delay(function(){r.trigger("focus")}),t.preventDefault()):(this._delay(function(){n.trigger("focus")}),t.preventDefault())}},mousedown:function(e){this._moveToTop(e)&&this._focusTabbable()}}),this.element.find("[aria-describedby]").length||this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")})},_createTitlebar:function(){var t;this.uiDialogTitlebar=e("<div>"),this._addClass(this.uiDialogTitlebar,"ui-dialog-titlebar","ui-widget-header ui-helper-clearfix"),this._on(this.uiDialogTitlebar,{mousedown:function(t){e(t.target).closest(".ui-dialog-titlebar-close")||this.uiDialog.trigger("focus")}}),this.uiDialogTitlebarClose=e("<button type='button'></button>").button({label:e("<a>").text(this.options.closeText).html(),icon:"ui-icon-closethick",showLabel:!1}).appendTo(this.uiDialogTitlebar),this._addClass(this.uiDialogTitlebarClose,"ui-dialog-titlebar-close"),this._on(this.uiDialogTitlebarClose,{click:function(e){e.preventDefault(),this.close(e)}}),t=e("<span>").uniqueId().prependTo(this.uiDialogTitlebar),this._addClass(t,"ui-dialog-title"),this._title(t),this.uiDialogTitlebar.prependTo(this.uiDialog),this.uiDialog.attr({"aria-labelledby":t.attr("id")})},_title:function(e){this.options.title?e.text(this.options.title):e.html("&#160;")},_createButtonPane:function(){this.uiDialogButtonPane=e("<div>"),this._addClass(this.uiDialogButtonPane,"ui-dialog-buttonpane","ui-widget-content ui-helper-clearfix"),this.uiButtonSet=e("<div>").appendTo(this.uiDialogButtonPane),this._addClass(this.uiButtonSet,"ui-dialog-buttonset"),this._createButtons()},_createButtons:function(){var t=this,i=this.options.buttons;return this.uiDialogButtonPane.remove(),this.uiButtonSet.empty(),e.isEmptyObject(i)||e.isArray(i)&&!i.length?void this._removeClass(this.uiDialog,"ui-dialog-buttons"):(e.each(i,function(i,n){var r,s;n=e.isFunction(n)?{click:n,text:i}:n,n=e.extend({type:"button"},n),r=n.click,s={icon:n.icon,iconPosition:n.iconPosition,showLabel:n.showLabel,icons:n.icons,text:n.text},delete n.click,delete n.icon,delete n.iconPosition,delete n.showLabel,delete n.icons,"boolean"==typeof n.text&&delete n.text,e("<button></button>",n).button(s).appendTo(t.uiButtonSet).on("click",function(){r.apply(t.element[0],arguments)})}),this._addClass(this.uiDialog,"ui-dialog-buttons"),void this.uiDialogButtonPane.appendTo(this.uiDialog))},_makeDraggable:function(){function t(e){return{position:e.position,offset:e.offset}}var i=this,n=this.options;this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(n,r){i._addClass(e(this),"ui-dialog-dragging"),i._blockFrames(),i._trigger("dragStart",n,t(r))},drag:function(e,n){i._trigger("drag",e,t(n))},stop:function(r,s){var o=s.offset.left-i.document.scrollLeft(),a=s.offset.top-i.document.scrollTop();n.position={my:"left top",at:"left"+(o>=0?"+":"")+o+" top"+(a>=0?"+":"")+a,of:i.window},i._removeClass(e(this),"ui-dialog-dragging"),i._unblockFrames(),i._trigger("dragStop",r,t(s))}})},_makeResizable:function(){function t(e){return{originalPosition:e.originalPosition,originalSize:e.originalSize,position:e.position,size:e.size}}var i=this,n=this.options,r=n.resizable,s=this.uiDialog.css("position"),o="string"==typeof r?r:"n,e,s,w,se,sw,ne,nw";this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:n.maxWidth,maxHeight:n.maxHeight,minWidth:n.minWidth,minHeight:this._minHeight(),handles:o,start:function(n,r){i._addClass(e(this),"ui-dialog-resizing"),i._blockFrames(),i._trigger("resizeStart",n,t(r))},resize:function(e,n){i._trigger("resize",e,t(n))},stop:function(r,s){var o=i.uiDialog.offset(),a=o.left-i.document.scrollLeft(),l=o.top-i.document.scrollTop();n.height=i.uiDialog.height(),n.width=i.uiDialog.width(),n.position={my:"left top",at:"left"+(a>=0?"+":"")+a+" top"+(l>=0?"+":"")+l,of:i.window},i._removeClass(e(this),"ui-dialog-resizing"),i._unblockFrames(),i._trigger("resizeStop",r,t(s))}}).css("position",s)},_trackFocus:function(){this._on(this.widget(),{focusin:function(t){this._makeFocusTarget(),this._focusedElement=e(t.target)}})},_makeFocusTarget:function(){this._untrackInstance(),this._trackingInstances().unshift(this)},_untrackInstance:function(){var t=this._trackingInstances(),i=e.inArray(this,t);i!==-1&&t.splice(i,1)},_trackingInstances:function(){var e=this.document.data("ui-dialog-instances");return e||(e=[],this.document.data("ui-dialog-instances",e)),e},_minHeight:function(){var e=this.options;return"auto"===e.height?e.minHeight:Math.min(e.minHeight,e.height)},_position:function(){var e=this.uiDialog.is(":visible");e||this.uiDialog.show(),this.uiDialog.position(this.options.position),e||this.uiDialog.hide()},_setOptions:function(t){var i=this,n=!1,r={};e.each(t,function(e,t){i._setOption(e,t),e in i.sizeRelatedOptions&&(n=!0),e in i.resizableRelatedOptions&&(r[e]=t)}),n&&(this._size(),this._position()),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option",r)},_setOption:function(t,i){var n,r,s=this.uiDialog;"disabled"!==t&&(this._super(t,i),"appendTo"===t&&this.uiDialog.appendTo(this._appendTo()),"buttons"===t&&this._createButtons(),"closeText"===t&&this.uiDialogTitlebarClose.button({label:e("<a>").text(""+this.options.closeText).html()}),"draggable"===t&&(n=s.is(":data(ui-draggable)"),n&&!i&&s.draggable("destroy"),!n&&i&&this._makeDraggable()),"position"===t&&this._position(),"resizable"===t&&(r=s.is(":data(ui-resizable)"),r&&!i&&s.resizable("destroy"),r&&"string"==typeof i&&s.resizable("option","handles",i),r||i===!1||this._makeResizable()),"title"===t&&this._title(this.uiDialogTitlebar.find(".ui-dialog-title")))},_size:function(){var e,t,i,n=this.options;this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0}),n.minWidth>n.width&&(n.width=n.minWidth),e=this.uiDialog.css({height:"auto",width:n.width}).outerHeight(),t=Math.max(0,n.minHeight-e),i="number"==typeof n.maxHeight?Math.max(0,n.maxHeight-e):"none","auto"===n.height?this.element.css({minHeight:t,maxHeight:i,height:"auto"}):this.element.height(Math.max(0,n.height-e)),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())},_blockFrames:function(){this.iframeBlocks=this.document.find("iframe").map(function(){var t=e(this);return e("<div>").css({position:"absolute",width:t.outerWidth(),height:t.outerHeight()}).appendTo(t.parent()).offset(t.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_allowInteraction:function(t){return!!e(t.target).closest(".ui-dialog").length||!!e(t.target).closest(".ui-datepicker").length},_createOverlay:function(){if(this.options.modal){var t=!0;this._delay(function(){t=!1}),this.document.data("ui-dialog-overlays")||this._on(this.document,{focusin:function(e){t||this._allowInteraction(e)||(e.preventDefault(),this._trackingInstances()[0]._focusTabbable())}}),this.overlay=e("<div>").appendTo(this._appendTo()),this._addClass(this.overlay,null,"ui-widget-overlay ui-front"),this._on(this.overlay,{mousedown:"_keepFocus"}),this.document.data("ui-dialog-overlays",(this.document.data("ui-dialog-overlays")||0)+1)}},_destroyOverlay:function(){if(this.options.modal&&this.overlay){var e=this.document.data("ui-dialog-overlays")-1;e?this.document.data("ui-dialog-overlays",e):(this._off(this.document,"focusin"),this.document.removeData("ui-dialog-overlays")),this.overlay.remove(),this.overlay=null}}}),e.uiBackCompat!==!1&&e.widget("ui.dialog",e.ui.dialog,{options:{dialogClass:""},_createWrapper:function(){this._super(),this.uiDialog.addClass(this.options.dialogClass)},_setOption:function(e,t){"dialogClass"===e&&this.uiDialog.removeClass(this.options.dialogClass).addClass(t),this._superApply(arguments)}}),e.ui.dialog})},{}],33:[function(e,t,i){!function(e){"function"==typeof define&&define.amd?define(["jquery","./mouse","../data","../plugin","../safe-active-element","../safe-blur","../scroll-parent","../version","../widget"],e):e(jQuery)}(function(e){return e.widget("ui.draggable",e.ui.mouse,{version:"1.12.1",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"===this.options.helper&&this._setPositionRelative(),this.options.addClasses&&this._addClass("ui-draggable"),this._setHandleClassName(),this._mouseInit()},_setOption:function(e,t){this._super(e,t),"handle"===e&&(this._removeHandleClassName(),this._setHandleClassName())},_destroy:function(){return(this.helper||this.element).is(".ui-draggable-dragging")?void(this.destroyOnClear=!0):(this._removeHandleClassName(),void this._mouseDestroy())},_mouseCapture:function(t){var i=this.options;return!(this.helper||i.disabled||e(t.target).closest(".ui-resizable-handle").length>0)&&(this.handle=this._getHandle(t),!!this.handle&&(this._blurActiveElement(t),this._blockFrames(i.iframeFix===!0?"iframe":i.iframeFix),!0))},_blockFrames:function(t){this.iframeBlocks=this.document.find(t).map(function(){var t=e(this);return e("<div>").css("position","absolute").appendTo(t.parent()).outerWidth(t.outerWidth()).outerHeight(t.outerHeight()).offset(t.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_blurActiveElement:function(t){var i=e.ui.safeActiveElement(this.document[0]),n=e(t.target);n.closest(i).length||e.ui.safeBlur(i)},_mouseStart:function(t){var i=this.options;return this.helper=this._createHelper(t),this._addClass(this.helper,"ui-draggable-dragging"),this._cacheHelperProportions(),e.ui.ddmanager&&(e.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(!0),this.offsetParent=this.helper.offsetParent(),this.hasFixedAncestor=this.helper.parents().filter(function(){return"fixed"===e(this).css("position")}).length>0,this.positionAbs=this.element.offset(),this._refreshOffsets(t),this.originalPosition=this.position=this._generatePosition(t,!1),this.originalPageX=t.pageX,this.originalPageY=t.pageY,i.cursorAt&&this._adjustOffsetFromHelper(i.cursorAt),this._setContainment(),this._trigger("start",t)===!1?(this._clear(),!1):(this._cacheHelperProportions(),e.ui.ddmanager&&!i.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this._mouseDrag(t,!0),e.ui.ddmanager&&e.ui.ddmanager.dragStart(this,t),!0)},_refreshOffsets:function(e){this.offset={top:this.positionAbs.top-this.margins.top,left:this.positionAbs.left-this.margins.left,scroll:!1,parent:this._getParentOffset(),relative:this._getRelativeOffset()},this.offset.click={left:e.pageX-this.offset.left,top:e.pageY-this.offset.top}},_mouseDrag:function(t,i){if(this.hasFixedAncestor&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(t,!0),this.positionAbs=this._convertPositionTo("absolute"),!i){var n=this._uiHash();if(this._trigger("drag",t,n)===!1)return this._mouseUp(new e.Event("mouseup",t)),!1;this.position=n.position}return this.helper[0].style.left=this.position.left+"px",this.helper[0].style.top=this.position.top+"px",e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),!1},_mouseStop:function(t){var i=this,n=!1;return e.ui.ddmanager&&!this.options.dropBehaviour&&(n=e.ui.ddmanager.drop(this,t)),this.dropped&&(n=this.dropped,this.dropped=!1),"invalid"===this.options.revert&&!n||"valid"===this.options.revert&&n||this.options.revert===!0||e.isFunction(this.options.revert)&&this.options.revert.call(this.element,n)?e(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){i._trigger("stop",t)!==!1&&i._clear()}):this._trigger("stop",t)!==!1&&this._clear(),!1},_mouseUp:function(t){return this._unblockFrames(),e.ui.ddmanager&&e.ui.ddmanager.dragStop(this,t),this.handleElement.is(t.target)&&this.element.trigger("focus"),e.ui.mouse.prototype._mouseUp.call(this,t)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp(new e.Event("mouseup",{target:this.element[0]})):this._clear(),this},_getHandle:function(t){return!this.options.handle||!!e(t.target).closest(this.element.find(this.options.handle)).length},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element,this._addClass(this.handleElement,"ui-draggable-handle")},_removeHandleClassName:function(){this._removeClass(this.handleElement,"ui-draggable-handle")},_createHelper:function(t){var i=this.options,n=e.isFunction(i.helper),r=n?e(i.helper.apply(this.element[0],[t])):"clone"===i.helper?this.element.clone().removeAttr("id"):this.element;return r.parents("body").length||r.appendTo("parent"===i.appendTo?this.element[0].parentNode:i.appendTo),n&&r[0]===this.element[0]&&this._setPositionRelative(),r[0]===this.element[0]||/(fixed|absolute)/.test(r.css("position"))||r.css("position","absolute"),r},_setPositionRelative:function(){/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative")},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_isRootNode:function(e){return/(html|body)/i.test(e.tagName)||e===this.document[0]},_getParentOffset:function(){var t=this.offsetParent.offset(),i=this.document[0];return"absolute"===this.cssPosition&&this.scrollParent[0]!==i&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),this._isRootNode(this.offsetParent[0])&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"!==this.cssPosition)return{top:0,left:0};var e=this.element.position(),t=this._isRootNode(this.scrollParent[0]);return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+(t?0:this.scrollParent.scrollTop()),left:e.left-(parseInt(this.helper.css("left"),10)||0)+(t?0:this.scrollParent.scrollLeft())}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),
height:this.helper.outerHeight()}},_setContainment:function(){var t,i,n,r=this.options,s=this.document[0];return this.relativeContainer=null,r.containment?"window"===r.containment?void(this.containment=[e(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,e(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,e(window).scrollLeft()+e(window).width()-this.helperProportions.width-this.margins.left,e(window).scrollTop()+(e(window).height()||s.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):"document"===r.containment?void(this.containment=[0,0,e(s).width()-this.helperProportions.width-this.margins.left,(e(s).height()||s.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):r.containment.constructor===Array?void(this.containment=r.containment):("parent"===r.containment&&(r.containment=this.helper[0].parentNode),i=e(r.containment),n=i[0],void(n&&(t=/(scroll|auto)/.test(i.css("overflow")),this.containment=[(parseInt(i.css("borderLeftWidth"),10)||0)+(parseInt(i.css("paddingLeft"),10)||0),(parseInt(i.css("borderTopWidth"),10)||0)+(parseInt(i.css("paddingTop"),10)||0),(t?Math.max(n.scrollWidth,n.offsetWidth):n.offsetWidth)-(parseInt(i.css("borderRightWidth"),10)||0)-(parseInt(i.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(t?Math.max(n.scrollHeight,n.offsetHeight):n.offsetHeight)-(parseInt(i.css("borderBottomWidth"),10)||0)-(parseInt(i.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relativeContainer=i))):void(this.containment=null)},_convertPositionTo:function(e,t){t||(t=this.position);var i="absolute"===e?1:-1,n=this._isRootNode(this.scrollParent[0]);return{top:t.top+this.offset.relative.top*i+this.offset.parent.top*i-("fixed"===this.cssPosition?-this.offset.scroll.top:n?0:this.offset.scroll.top)*i,left:t.left+this.offset.relative.left*i+this.offset.parent.left*i-("fixed"===this.cssPosition?-this.offset.scroll.left:n?0:this.offset.scroll.left)*i}},_generatePosition:function(e,t){var i,n,r,s,o=this.options,a=this._isRootNode(this.scrollParent[0]),l=e.pageX,h=e.pageY;return a&&this.offset.scroll||(this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()}),t&&(this.containment&&(this.relativeContainer?(n=this.relativeContainer.offset(),i=[this.containment[0]+n.left,this.containment[1]+n.top,this.containment[2]+n.left,this.containment[3]+n.top]):i=this.containment,e.pageX-this.offset.click.left<i[0]&&(l=i[0]+this.offset.click.left),e.pageY-this.offset.click.top<i[1]&&(h=i[1]+this.offset.click.top),e.pageX-this.offset.click.left>i[2]&&(l=i[2]+this.offset.click.left),e.pageY-this.offset.click.top>i[3]&&(h=i[3]+this.offset.click.top)),o.grid&&(r=o.grid[1]?this.originalPageY+Math.round((h-this.originalPageY)/o.grid[1])*o.grid[1]:this.originalPageY,h=i?r-this.offset.click.top>=i[1]||r-this.offset.click.top>i[3]?r:r-this.offset.click.top>=i[1]?r-o.grid[1]:r+o.grid[1]:r,s=o.grid[0]?this.originalPageX+Math.round((l-this.originalPageX)/o.grid[0])*o.grid[0]:this.originalPageX,l=i?s-this.offset.click.left>=i[0]||s-this.offset.click.left>i[2]?s:s-this.offset.click.left>=i[0]?s-o.grid[0]:s+o.grid[0]:s),"y"===o.axis&&(l=this.originalPageX),"x"===o.axis&&(h=this.originalPageY)),{top:h-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.offset.scroll.top:a?0:this.offset.scroll.top),left:l-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.offset.scroll.left:a?0:this.offset.scroll.left)}},_clear:function(){this._removeClass(this.helper,"ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1,this.destroyOnClear&&this.destroy()},_trigger:function(t,i,n){return n=n||this._uiHash(),e.ui.plugin.call(this,t,[i,n,this],!0),/^(drag|start|stop)/.test(t)&&(this.positionAbs=this._convertPositionTo("absolute"),n.offset=this.positionAbs),e.Widget.prototype._trigger.call(this,t,i,n)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),e.ui.plugin.add("draggable","connectToSortable",{start:function(t,i,n){var r=e.extend({},i,{item:n.element});n.sortables=[],e(n.options.connectToSortable).each(function(){var i=e(this).sortable("instance");i&&!i.options.disabled&&(n.sortables.push(i),i.refreshPositions(),i._trigger("activate",t,r))})},stop:function(t,i,n){var r=e.extend({},i,{item:n.element});n.cancelHelperRemoval=!1,e.each(n.sortables,function(){var e=this;e.isOver?(e.isOver=0,n.cancelHelperRemoval=!0,e.cancelHelperRemoval=!1,e._storedCSS={position:e.placeholder.css("position"),top:e.placeholder.css("top"),left:e.placeholder.css("left")},e._mouseStop(t),e.options.helper=e.options._helper):(e.cancelHelperRemoval=!0,e._trigger("deactivate",t,r))})},drag:function(t,i,n){e.each(n.sortables,function(){var r=!1,s=this;s.positionAbs=n.positionAbs,s.helperProportions=n.helperProportions,s.offset.click=n.offset.click,s._intersectsWith(s.containerCache)&&(r=!0,e.each(n.sortables,function(){return this.positionAbs=n.positionAbs,this.helperProportions=n.helperProportions,this.offset.click=n.offset.click,this!==s&&this._intersectsWith(this.containerCache)&&e.contains(s.element[0],this.element[0])&&(r=!1),r})),r?(s.isOver||(s.isOver=1,n._parent=i.helper.parent(),s.currentItem=i.helper.appendTo(s.element).data("ui-sortable-item",!0),s.options._helper=s.options.helper,s.options.helper=function(){return i.helper[0]},t.target=s.currentItem[0],s._mouseCapture(t,!0),s._mouseStart(t,!0,!0),s.offset.click.top=n.offset.click.top,s.offset.click.left=n.offset.click.left,s.offset.parent.left-=n.offset.parent.left-s.offset.parent.left,s.offset.parent.top-=n.offset.parent.top-s.offset.parent.top,n._trigger("toSortable",t),n.dropped=s.element,e.each(n.sortables,function(){this.refreshPositions()}),n.currentItem=n.element,s.fromOutside=n),s.currentItem&&(s._mouseDrag(t),i.position=s.position)):s.isOver&&(s.isOver=0,s.cancelHelperRemoval=!0,s.options._revert=s.options.revert,s.options.revert=!1,s._trigger("out",t,s._uiHash(s)),s._mouseStop(t,!0),s.options.revert=s.options._revert,s.options.helper=s.options._helper,s.placeholder&&s.placeholder.remove(),i.helper.appendTo(n._parent),n._refreshOffsets(t),i.position=n._generatePosition(t,!0),n._trigger("fromSortable",t),n.dropped=!1,e.each(n.sortables,function(){this.refreshPositions()}))})}}),e.ui.plugin.add("draggable","cursor",{start:function(t,i,n){var r=e("body"),s=n.options;r.css("cursor")&&(s._cursor=r.css("cursor")),r.css("cursor",s.cursor)},stop:function(t,i,n){var r=n.options;r._cursor&&e("body").css("cursor",r._cursor)}}),e.ui.plugin.add("draggable","opacity",{start:function(t,i,n){var r=e(i.helper),s=n.options;r.css("opacity")&&(s._opacity=r.css("opacity")),r.css("opacity",s.opacity)},stop:function(t,i,n){var r=n.options;r._opacity&&e(i.helper).css("opacity",r._opacity)}}),e.ui.plugin.add("draggable","scroll",{start:function(e,t,i){i.scrollParentNotHidden||(i.scrollParentNotHidden=i.helper.scrollParent(!1)),i.scrollParentNotHidden[0]!==i.document[0]&&"HTML"!==i.scrollParentNotHidden[0].tagName&&(i.overflowOffset=i.scrollParentNotHidden.offset())},drag:function(t,i,n){var r=n.options,s=!1,o=n.scrollParentNotHidden[0],a=n.document[0];o!==a&&"HTML"!==o.tagName?(r.axis&&"x"===r.axis||(n.overflowOffset.top+o.offsetHeight-t.pageY<r.scrollSensitivity?o.scrollTop=s=o.scrollTop+r.scrollSpeed:t.pageY-n.overflowOffset.top<r.scrollSensitivity&&(o.scrollTop=s=o.scrollTop-r.scrollSpeed)),r.axis&&"y"===r.axis||(n.overflowOffset.left+o.offsetWidth-t.pageX<r.scrollSensitivity?o.scrollLeft=s=o.scrollLeft+r.scrollSpeed:t.pageX-n.overflowOffset.left<r.scrollSensitivity&&(o.scrollLeft=s=o.scrollLeft-r.scrollSpeed))):(r.axis&&"x"===r.axis||(t.pageY-e(a).scrollTop()<r.scrollSensitivity?s=e(a).scrollTop(e(a).scrollTop()-r.scrollSpeed):e(window).height()-(t.pageY-e(a).scrollTop())<r.scrollSensitivity&&(s=e(a).scrollTop(e(a).scrollTop()+r.scrollSpeed))),r.axis&&"y"===r.axis||(t.pageX-e(a).scrollLeft()<r.scrollSensitivity?s=e(a).scrollLeft(e(a).scrollLeft()-r.scrollSpeed):e(window).width()-(t.pageX-e(a).scrollLeft())<r.scrollSensitivity&&(s=e(a).scrollLeft(e(a).scrollLeft()+r.scrollSpeed)))),s!==!1&&e.ui.ddmanager&&!r.dropBehaviour&&e.ui.ddmanager.prepareOffsets(n,t)}}),e.ui.plugin.add("draggable","snap",{start:function(t,i,n){var r=n.options;n.snapElements=[],e(r.snap.constructor!==String?r.snap.items||":data(ui-draggable)":r.snap).each(function(){var t=e(this),i=t.offset();this!==n.element[0]&&n.snapElements.push({item:this,width:t.outerWidth(),height:t.outerHeight(),top:i.top,left:i.left})})},drag:function(t,i,n){var r,s,o,a,l,h,u,c,p,d,f=n.options,y=f.snapTolerance,m=i.offset.left,g=m+n.helperProportions.width,v=i.offset.top,L=v+n.helperProportions.height;for(p=n.snapElements.length-1;p>=0;p--)l=n.snapElements[p].left-n.margins.left,h=l+n.snapElements[p].width,u=n.snapElements[p].top-n.margins.top,c=u+n.snapElements[p].height,g<l-y||m>h+y||L<u-y||v>c+y||!e.contains(n.snapElements[p].item.ownerDocument,n.snapElements[p].item)?(n.snapElements[p].snapping&&n.options.snap.release&&n.options.snap.release.call(n.element,t,e.extend(n._uiHash(),{snapItem:n.snapElements[p].item})),n.snapElements[p].snapping=!1):("inner"!==f.snapMode&&(r=Math.abs(u-L)<=y,s=Math.abs(c-v)<=y,o=Math.abs(l-g)<=y,a=Math.abs(h-m)<=y,r&&(i.position.top=n._convertPositionTo("relative",{top:u-n.helperProportions.height,left:0}).top),s&&(i.position.top=n._convertPositionTo("relative",{top:c,left:0}).top),o&&(i.position.left=n._convertPositionTo("relative",{top:0,left:l-n.helperProportions.width}).left),a&&(i.position.left=n._convertPositionTo("relative",{top:0,left:h}).left)),d=r||s||o||a,"outer"!==f.snapMode&&(r=Math.abs(u-v)<=y,s=Math.abs(c-L)<=y,o=Math.abs(l-m)<=y,a=Math.abs(h-g)<=y,r&&(i.position.top=n._convertPositionTo("relative",{top:u,left:0}).top),s&&(i.position.top=n._convertPositionTo("relative",{top:c-n.helperProportions.height,left:0}).top),o&&(i.position.left=n._convertPositionTo("relative",{top:0,left:l}).left),a&&(i.position.left=n._convertPositionTo("relative",{top:0,left:h-n.helperProportions.width}).left)),!n.snapElements[p].snapping&&(r||s||o||a||d)&&n.options.snap.snap&&n.options.snap.snap.call(n.element,t,e.extend(n._uiHash(),{snapItem:n.snapElements[p].item})),n.snapElements[p].snapping=r||s||o||a||d)}}),e.ui.plugin.add("draggable","stack",{start:function(t,i,n){var r,s=n.options,o=e.makeArray(e(s.stack)).sort(function(t,i){return(parseInt(e(t).css("zIndex"),10)||0)-(parseInt(e(i).css("zIndex"),10)||0)});o.length&&(r=parseInt(e(o[0]).css("zIndex"),10)||0,e(o).each(function(t){e(this).css("zIndex",r+t)}),this.css("zIndex",r+o.length))}}),e.ui.plugin.add("draggable","zIndex",{start:function(t,i,n){var r=e(i.helper),s=n.options;r.css("zIndex")&&(s._zIndex=r.css("zIndex")),r.css("zIndex",s.zIndex)},stop:function(t,i,n){var r=n.options;r._zIndex&&e(i.helper).css("zIndex",r._zIndex)}}),e.ui.draggable})},{}],34:[function(e,t,i){!function(e){"function"==typeof define&&define.amd?define(["jquery","../keycode","../position","../safe-active-element","../unique-id","../version","../widget"],e):e(jQuery)}(function(e){return e.widget("ui.menu",{version:"1.12.1",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-caret-1-e"},items:"> *",menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.mouseHandled=!1,this.element.uniqueId().attr({role:this.options.role,tabIndex:0}),this._addClass("ui-menu","ui-widget ui-widget-content"),this._on({"mousedown .ui-menu-item":function(e){e.preventDefault()},"click .ui-menu-item":function(t){var i=e(t.target),n=e(e.ui.safeActiveElement(this.document[0]));!this.mouseHandled&&i.not(".ui-state-disabled").length&&(this.select(t),t.isPropagationStopped()||(this.mouseHandled=!0),i.has(".ui-menu").length?this.expand(t):!this.element.is(":focus")&&n.closest(".ui-menu").length&&(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(t){if(!this.previousFilter){var i=e(t.target).closest(".ui-menu-item"),n=e(t.currentTarget);i[0]===n[0]&&(this._removeClass(n.siblings().children(".ui-state-active"),null,"ui-state-active"),this.focus(t,n))}},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(e,t){var i=this.active||this.element.find(this.options.items).eq(0);t||this.focus(e,i)},blur:function(t){this._delay(function(){var i=!e.contains(this.element[0],e.ui.safeActiveElement(this.document[0]));i&&this.collapseAll(t)})},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(e){this._closeOnDocumentClick(e)&&this.collapseAll(e),this.mouseHandled=!1}})},_destroy:function(){var t=this.element.find(".ui-menu-item").removeAttr("role aria-disabled"),i=t.children(".ui-menu-item-wrapper").removeUniqueId().removeAttr("tabIndex role aria-haspopup");this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeAttr("role aria-labelledby aria-expanded aria-hidden aria-disabled tabIndex").removeUniqueId().show(),i.children().each(function(){var t=e(this);t.data("ui-menu-submenu-caret")&&t.remove()})},_keydown:function(t){var i,n,r,s,o=!0;switch(t.keyCode){case e.ui.keyCode.PAGE_UP:this.previousPage(t);break;case e.ui.keyCode.PAGE_DOWN:this.nextPage(t);break;case e.ui.keyCode.HOME:this._move("first","first",t);break;case e.ui.keyCode.END:this._move("last","last",t);break;case e.ui.keyCode.UP:this.previous(t);break;case e.ui.keyCode.DOWN:this.next(t);break;case e.ui.keyCode.LEFT:this.collapse(t);break;case e.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(t);break;case e.ui.keyCode.ENTER:case e.ui.keyCode.SPACE:this._activate(t);break;case e.ui.keyCode.ESCAPE:this.collapse(t);break;default:o=!1,n=this.previousFilter||"",s=!1,r=t.keyCode>=96&&t.keyCode<=105?(t.keyCode-96).toString():String.fromCharCode(t.keyCode),clearTimeout(this.filterTimer),r===n?s=!0:r=n+r,i=this._filterMenuItems(r),i=s&&i.index(this.active.next())!==-1?this.active.nextAll(".ui-menu-item"):i,i.length||(r=String.fromCharCode(t.keyCode),i=this._filterMenuItems(r)),i.length?(this.focus(t,i),this.previousFilter=r,this.filterTimer=this._delay(function(){delete this.previousFilter},1e3)):delete this.previousFilter}o&&t.preventDefault()},_activate:function(e){this.active&&!this.active.is(".ui-state-disabled")&&(this.active.children("[aria-haspopup='true']").length?this.expand(e):this.select(e))},refresh:function(){var t,i,n,r,s,o=this,a=this.options.icons.submenu,l=this.element.find(this.options.menus);this._toggleClass("ui-menu-icons",null,!!this.element.find(".ui-icon").length),n=l.filter(":not(.ui-menu)").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var t=e(this),i=t.prev(),n=e("<span>").data("ui-menu-submenu-caret",!0);o._addClass(n,"ui-menu-icon","ui-icon "+a),i.attr("aria-haspopup","true").prepend(n),t.attr("aria-labelledby",i.attr("id"))}),this._addClass(n,"ui-menu","ui-widget ui-widget-content ui-front"),t=l.add(this.element),i=t.find(this.options.items),i.not(".ui-menu-item").each(function(){var t=e(this);o._isDivider(t)&&o._addClass(t,"ui-menu-divider","ui-widget-content")}),r=i.not(".ui-menu-item, .ui-menu-divider"),s=r.children().not(".ui-menu").uniqueId().attr({tabIndex:-1,role:this._itemRole()}),this._addClass(r,"ui-menu-item")._addClass(s,"ui-menu-item-wrapper"),i.filter(".ui-state-disabled").attr("aria-disabled","true"),this.active&&!e.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(e,t){if("icons"===e){var i=this.element.find(".ui-menu-icon");this._removeClass(i,null,this.options.icons.submenu)._addClass(i,null,t.submenu)}this._super(e,t)},_setOptionDisabled:function(e){this._super(e),this.element.attr("aria-disabled",String(e)),this._toggleClass(null,"ui-state-disabled",!!e)},focus:function(e,t){var i,n,r;this.blur(e,e&&"focus"===e.type),this._scrollIntoView(t),this.active=t.first(),n=this.active.children(".ui-menu-item-wrapper"),this._addClass(n,null,"ui-state-active"),this.options.role&&this.element.attr("aria-activedescendant",n.attr("id")),r=this.active.parent().closest(".ui-menu-item").children(".ui-menu-item-wrapper"),this._addClass(r,null,"ui-state-active"),e&&"keydown"===e.type?this._close():this.timer=this._delay(function(){this._close()},this.delay),i=t.children(".ui-menu"),i.length&&e&&/^mouse/.test(e.type)&&this._startOpening(i),this.activeMenu=t.parent(),this._trigger("focus",e,{item:t})},_scrollIntoView:function(t){var i,n,r,s,o,a;this._hasScroll()&&(i=parseFloat(e.css(this.activeMenu[0],"borderTopWidth"))||0,n=parseFloat(e.css(this.activeMenu[0],"paddingTop"))||0,r=t.offset().top-this.activeMenu.offset().top-i-n,s=this.activeMenu.scrollTop(),o=this.activeMenu.height(),a=t.outerHeight(),r<0?this.activeMenu.scrollTop(s+r):r+a>o&&this.activeMenu.scrollTop(s+r-o+a))},blur:function(e,t){t||clearTimeout(this.timer),this.active&&(this._removeClass(this.active.children(".ui-menu-item-wrapper"),null,"ui-state-active"),this._trigger("blur",e,{item:this.active}),this.active=null)},_startOpening:function(e){clearTimeout(this.timer),"true"===e.attr("aria-hidden")&&(this.timer=this._delay(function(){this._close(),this._open(e)},this.delay))},_open:function(t){var i=e.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(t.parents(".ui-menu")).hide().attr("aria-hidden","true"),t.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(i)},collapseAll:function(t,i){clearTimeout(this.timer),this.timer=this._delay(function(){var n=i?this.element:e(t&&t.target).closest(this.element.find(".ui-menu"));n.length||(n=this.element),this._close(n),this.blur(t),this._removeClass(n.find(".ui-state-active"),null,"ui-state-active"),this.activeMenu=n},this.delay)},_close:function(e){e||(e=this.active?this.active.parent():this.element),e.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false")},_closeOnDocumentClick:function(t){return!e(t.target).closest(".ui-menu").length},_isDivider:function(e){return!/[^\-\u2014\u2013\s]/.test(e.text())},collapse:function(e){var t=this.active&&this.active.parent().closest(".ui-menu-item",this.element);t&&t.length&&(this._close(),this.focus(e,t))},expand:function(e){var t=this.active&&this.active.children(".ui-menu ").find(this.options.items).first();t&&t.length&&(this._open(t.parent()),this._delay(function(){this.focus(e,t)}))},next:function(e){this._move("next","first",e)},previous:function(e){this._move("prev","last",e)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(e,t,i){var n;this.active&&(n="first"===e||"last"===e?this.active["first"===e?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[e+"All"](".ui-menu-item").eq(0)),n&&n.length&&this.active||(n=this.activeMenu.find(this.options.items)[t]()),this.focus(i,n)},nextPage:function(t){var i,n,r;return this.active?void(this.isLastItem()||(this._hasScroll()?(n=this.active.offset().top,r=this.element.height(),this.active.nextAll(".ui-menu-item").each(function(){return i=e(this),i.offset().top-n-r<0}),this.focus(t,i)):this.focus(t,this.activeMenu.find(this.options.items)[this.active?"last":"first"]()))):void this.next(t)},previousPage:function(t){var i,n,r;return this.active?void(this.isFirstItem()||(this._hasScroll()?(n=this.active.offset().top,r=this.element.height(),this.active.prevAll(".ui-menu-item").each(function(){return i=e(this),i.offset().top-n+r>0}),this.focus(t,i)):this.focus(t,this.activeMenu.find(this.options.items).first()))):void this.next(t)},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(t){this.active=this.active||e(t.target).closest(".ui-menu-item");var i={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(t,!0),this._trigger("select",t,i)},_filterMenuItems:function(t){var i=t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&"),n=new RegExp("^"+i,"i");return this.activeMenu.find(this.options.items).filter(".ui-menu-item").filter(function(){return n.test(e.trim(e(this).children(".ui-menu-item-wrapper").text()))})}})})},{}],35:[function(e,t,i){!function(e){"function"==typeof define&&define.amd?define(["jquery","../ie","../version","../widget"],e):e(jQuery)}(function(e){var t=!1;return e(document).on("mouseup",function(){t=!1}),e.widget("ui.mouse",{version:"1.12.1",options:{cancel:"input, textarea, button, select, option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.on("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).on("click."+this.widgetName,function(i){if(!0===e.data(i.target,t.widgetName+".preventClickEvent"))return e.removeData(i.target,t.widgetName+".preventClickEvent"),i.stopImmediatePropagation(),!1}),this.started=!1},_mouseDestroy:function(){this.element.off("."+this.widgetName),this._mouseMoveDelegate&&this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(i){if(!t){this._mouseMoved=!1,this._mouseStarted&&this._mouseUp(i),this._mouseDownEvent=i;var n=this,r=1===i.which,s=!("string"!=typeof this.options.cancel||!i.target.nodeName)&&e(i.target).closest(this.options.cancel).length;return!(r&&!s&&this._mouseCapture(i))||(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){n.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(i)&&this._mouseDelayMet(i)&&(this._mouseStarted=this._mouseStart(i)!==!1,!this._mouseStarted)?(i.preventDefault(),!0):(!0===e.data(i.target,this.widgetName+".preventClickEvent")&&e.removeData(i.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return n._mouseMove(e)},this._mouseUpDelegate=function(e){return n._mouseUp(e)},this.document.on("mousemove."+this.widgetName,this._mouseMoveDelegate).on("mouseup."+this.widgetName,this._mouseUpDelegate),i.preventDefault(),t=!0,!0))}},_mouseMove:function(t){if(this._mouseMoved){if(e.ui.ie&&(!document.documentMode||document.documentMode<9)&&!t.button)return this._mouseUp(t);if(!t.which)if(t.originalEvent.altKey||t.originalEvent.ctrlKey||t.originalEvent.metaKey||t.originalEvent.shiftKey)this.ignoreMissingWhich=!0;else if(!this.ignoreMissingWhich)return this._mouseUp(t)}return(t.which||t.button)&&(this._mouseMoved=!0),this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,t)!==!1,this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted)},_mouseUp:function(i){this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,i.target===this._mouseDownEvent.target&&e.data(i.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(i)),this._mouseDelayTimer&&(clearTimeout(this._mouseDelayTimer),delete this._mouseDelayTimer),this.ignoreMissingWhich=!1,t=!1,i.preventDefault()},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})})},{}],36:[function(e,t,i){!function(e){"function"==typeof define&&define.amd?define(["jquery","./mouse","../disable-selection","../plugin","../version","../widget"],e):e(jQuery)}(function(e){return e.widget("ui.resizable",e.ui.mouse,{version:"1.12.1",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,classes:{"ui-resizable-se":"ui-icon ui-icon-gripsmall-diagonal-se"},containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_num:function(e){return parseFloat(e)||0},_isNumber:function(e){return!isNaN(parseFloat(e))},_hasScroll:function(t,i){if("hidden"===e(t).css("overflow"))return!1;var n=i&&"left"===i?"scrollLeft":"scrollTop",r=!1;return t[n]>0||(t[n]=1,r=t[n]>0,t[n]=0,r)},_create:function(){var t,i=this.options,n=this;this._addClass("ui-resizable"),e.extend(this,{_aspectRatio:!!i.aspectRatio,aspectRatio:i.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:i.helper||i.ghost||i.animate?i.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/^(canvas|textarea|input|select|button|img)$/i)&&(this.element.wrap(e("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.resizable("instance")),this.elementIsWrapper=!0,t={marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom"),marginLeft:this.originalElement.css("marginLeft")},this.element.css(t),this.originalElement.css("margin",0),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css(t),this._proportionallyResize()),this._setupHandles(),i.autoHide&&e(this.element).on("mouseenter",function(){i.disabled||(n._removeClass("ui-resizable-autohide"),n._handles.show())}).on("mouseleave",function(){i.disabled||n.resizing||(n._addClass("ui-resizable-autohide"),n._handles.hide())}),this._mouseInit()},_destroy:function(){this._mouseDestroy();var t,i=function(t){e(t).removeData("resizable").removeData("ui-resizable").off(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(i(this.element),t=this.element,this.originalElement.css({position:t.css("position"),width:t.outerWidth(),height:t.outerHeight(),top:t.css("top"),left:t.css("left")}).insertAfter(t),t.remove()),this.originalElement.css("resize",this.originalResizeStyle),i(this.originalElement),this},_setOption:function(e,t){switch(this._super(e,t),e){case"handles":this._removeHandles(),this._setupHandles()}},_setupHandles:function(){var t,i,n,r,s,o=this.options,a=this;if(this.handles=o.handles||(e(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this._handles=e(),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),n=this.handles.split(","),this.handles={},i=0;i<n.length;i++)t=e.trim(n[i]),r="ui-resizable-"+t,s=e("<div>"),this._addClass(s,"ui-resizable-handle "+r),s.css({zIndex:o.zIndex}),this.handles[t]=".ui-resizable-"+t,this.element.append(s);this._renderAxis=function(t){var i,n,r,s;t=t||this.element;for(i in this.handles)this.handles[i].constructor===String?this.handles[i]=this.element.children(this.handles[i]).first().show():(this.handles[i].jquery||this.handles[i].nodeType)&&(this.handles[i]=e(this.handles[i]),this._on(this.handles[i],{mousedown:a._mouseDown})),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/^(textarea|input|select|button)$/i)&&(n=e(this.handles[i],this.element),s=/sw|ne|nw|se|n|s/.test(i)?n.outerHeight():n.outerWidth(),r=["padding",/ne|nw|n/.test(i)?"Top":/se|sw|s/.test(i)?"Bottom":/^e$/.test(i)?"Right":"Left"].join(""),t.css(r,s),this._proportionallyResize()),this._handles=this._handles.add(this.handles[i])},this._renderAxis(this.element),this._handles=this._handles.add(this.element.find(".ui-resizable-handle")),this._handles.disableSelection(),this._handles.on("mouseover",function(){a.resizing||(this.className&&(s=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),a.axis=s&&s[1]?s[1]:"se")}),o.autoHide&&(this._handles.hide(),this._addClass("ui-resizable-autohide"))},_removeHandles:function(){this._handles.remove()},_mouseCapture:function(t){var i,n,r=!1;for(i in this.handles)n=e(this.handles[i])[0],(n===t.target||e.contains(n,t.target))&&(r=!0);return!this.options.disabled&&r},_mouseStart:function(t){var i,n,r,s=this.options,o=this.element;return this.resizing=!0,this._renderProxy(),i=this._num(this.helper.css("left")),n=this._num(this.helper.css("top")),s.containment&&(i+=e(s.containment).scrollLeft()||0,n+=e(s.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:i,top:n},this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:o.width(),height:o.height()},this.originalSize=this._helper?{width:o.outerWidth(),height:o.outerHeight()}:{width:o.width(),height:o.height()},this.sizeDiff={width:o.outerWidth()-o.width(),height:o.outerHeight()-o.height()},this.originalPosition={left:i,top:n},this.originalMousePosition={left:t.pageX,top:t.pageY},this.aspectRatio="number"==typeof s.aspectRatio?s.aspectRatio:this.originalSize.width/this.originalSize.height||1,r=e(".ui-resizable-"+this.axis).css("cursor"),e("body").css("cursor","auto"===r?this.axis+"-resize":r),this._addClass("ui-resizable-resizing"),this._propagate("start",t),!0},_mouseDrag:function(t){var i,n,r=this.originalMousePosition,s=this.axis,o=t.pageX-r.left||0,a=t.pageY-r.top||0,l=this._change[s];return this._updatePrevProperties(),!!l&&(i=l.apply(this,[t,o,a]),this._updateVirtualBoundaries(t.shiftKey),(this._aspectRatio||t.shiftKey)&&(i=this._updateRatio(i,t)),i=this._respectSize(i,t),this._updateCache(i),this._propagate("resize",t),n=this._applyChanges(),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),e.isEmptyObject(n)||(this._updatePrevProperties(),this._trigger("resize",t,this.ui()),this._applyChanges()),!1)},_mouseStop:function(t){this.resizing=!1;var i,n,r,s,o,a,l,h=this.options,u=this;return this._helper&&(i=this._proportionallyResizeElements,n=i.length&&/textarea/i.test(i[0].nodeName),r=n&&this._hasScroll(i[0],"left")?0:u.sizeDiff.height,s=n?0:u.sizeDiff.width,o={width:u.helper.width()-s,height:u.helper.height()-r},a=parseFloat(u.element.css("left"))+(u.position.left-u.originalPosition.left)||null,l=parseFloat(u.element.css("top"))+(u.position.top-u.originalPosition.top)||null,h.animate||this.element.css(e.extend(o,{top:l,left:a})),u.helper.height(u.size.height),u.helper.width(u.size.width),this._helper&&!h.animate&&this._proportionallyResize()),e("body").css("cursor","auto"),this._removeClass("ui-resizable-resizing"),this._propagate("stop",t),this._helper&&this.helper.remove(),!1},_updatePrevProperties:function(){this.prevPosition={top:this.position.top,left:this.position.left},this.prevSize={width:this.size.width,height:this.size.height}},_applyChanges:function(){var e={};return this.position.top!==this.prevPosition.top&&(e.top=this.position.top+"px"),this.position.left!==this.prevPosition.left&&(e.left=this.position.left+"px"),this.size.width!==this.prevSize.width&&(e.width=this.size.width+"px"),this.size.height!==this.prevSize.height&&(e.height=this.size.height+"px"),this.helper.css(e),e},_updateVirtualBoundaries:function(e){var t,i,n,r,s,o=this.options;s={minWidth:this._isNumber(o.minWidth)?o.minWidth:0,maxWidth:this._isNumber(o.maxWidth)?o.maxWidth:1/0,
minHeight:this._isNumber(o.minHeight)?o.minHeight:0,maxHeight:this._isNumber(o.maxHeight)?o.maxHeight:1/0},(this._aspectRatio||e)&&(t=s.minHeight*this.aspectRatio,n=s.minWidth/this.aspectRatio,i=s.maxHeight*this.aspectRatio,r=s.maxWidth/this.aspectRatio,t>s.minWidth&&(s.minWidth=t),n>s.minHeight&&(s.minHeight=n),i<s.maxWidth&&(s.maxWidth=i),r<s.maxHeight&&(s.maxHeight=r)),this._vBoundaries=s},_updateCache:function(e){this.offset=this.helper.offset(),this._isNumber(e.left)&&(this.position.left=e.left),this._isNumber(e.top)&&(this.position.top=e.top),this._isNumber(e.height)&&(this.size.height=e.height),this._isNumber(e.width)&&(this.size.width=e.width)},_updateRatio:function(e){var t=this.position,i=this.size,n=this.axis;return this._isNumber(e.height)?e.width=e.height*this.aspectRatio:this._isNumber(e.width)&&(e.height=e.width/this.aspectRatio),"sw"===n&&(e.left=t.left+(i.width-e.width),e.top=null),"nw"===n&&(e.top=t.top+(i.height-e.height),e.left=t.left+(i.width-e.width)),e},_respectSize:function(e){var t=this._vBoundaries,i=this.axis,n=this._isNumber(e.width)&&t.maxWidth&&t.maxWidth<e.width,r=this._isNumber(e.height)&&t.maxHeight&&t.maxHeight<e.height,s=this._isNumber(e.width)&&t.minWidth&&t.minWidth>e.width,o=this._isNumber(e.height)&&t.minHeight&&t.minHeight>e.height,a=this.originalPosition.left+this.originalSize.width,l=this.originalPosition.top+this.originalSize.height,h=/sw|nw|w/.test(i),u=/nw|ne|n/.test(i);return s&&(e.width=t.minWidth),o&&(e.height=t.minHeight),n&&(e.width=t.maxWidth),r&&(e.height=t.maxHeight),s&&h&&(e.left=a-t.minWidth),n&&h&&(e.left=a-t.maxWidth),o&&u&&(e.top=l-t.minHeight),r&&u&&(e.top=l-t.maxHeight),e.width||e.height||e.left||!e.top?e.width||e.height||e.top||!e.left||(e.left=null):e.top=null,e},_getPaddingPlusBorderDimensions:function(e){for(var t=0,i=[],n=[e.css("borderTopWidth"),e.css("borderRightWidth"),e.css("borderBottomWidth"),e.css("borderLeftWidth")],r=[e.css("paddingTop"),e.css("paddingRight"),e.css("paddingBottom"),e.css("paddingLeft")];t<4;t++)i[t]=parseFloat(n[t])||0,i[t]+=parseFloat(r[t])||0;return{height:i[0]+i[2],width:i[1]+i[3]}},_proportionallyResize:function(){if(this._proportionallyResizeElements.length)for(var e,t=0,i=this.helper||this.element;t<this._proportionallyResizeElements.length;t++)e=this._proportionallyResizeElements[t],this.outerDimensions||(this.outerDimensions=this._getPaddingPlusBorderDimensions(e)),e.css({height:i.height()-this.outerDimensions.height||0,width:i.width()-this.outerDimensions.width||0})},_renderProxy:function(){var t=this.element,i=this.options;this.elementOffset=t.offset(),this._helper?(this.helper=this.helper||e("<div style='overflow:hidden;'></div>"),this._addClass(this.helper,this._helper),this.helper.css({width:this.element.outerWidth(),height:this.element.outerHeight(),position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++i.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(e,t){return{width:this.originalSize.width+t}},w:function(e,t){var i=this.originalSize,n=this.originalPosition;return{left:n.left+t,width:i.width-t}},n:function(e,t,i){var n=this.originalSize,r=this.originalPosition;return{top:r.top+i,height:n.height-i}},s:function(e,t,i){return{height:this.originalSize.height+i}},se:function(t,i,n){return e.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[t,i,n]))},sw:function(t,i,n){return e.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[t,i,n]))},ne:function(t,i,n){return e.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[t,i,n]))},nw:function(t,i,n){return e.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[t,i,n]))}},_propagate:function(t,i){e.ui.plugin.call(this,t,[i,this.ui()]),"resize"!==t&&this._trigger(t,i,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),e.ui.plugin.add("resizable","animate",{stop:function(t){var i=e(this).resizable("instance"),n=i.options,r=i._proportionallyResizeElements,s=r.length&&/textarea/i.test(r[0].nodeName),o=s&&i._hasScroll(r[0],"left")?0:i.sizeDiff.height,a=s?0:i.sizeDiff.width,l={width:i.size.width-a,height:i.size.height-o},h=parseFloat(i.element.css("left"))+(i.position.left-i.originalPosition.left)||null,u=parseFloat(i.element.css("top"))+(i.position.top-i.originalPosition.top)||null;i.element.animate(e.extend(l,u&&h?{top:u,left:h}:{}),{duration:n.animateDuration,easing:n.animateEasing,step:function(){var n={width:parseFloat(i.element.css("width")),height:parseFloat(i.element.css("height")),top:parseFloat(i.element.css("top")),left:parseFloat(i.element.css("left"))};r&&r.length&&e(r[0]).css({width:n.width,height:n.height}),i._updateCache(n),i._propagate("resize",t)}})}}),e.ui.plugin.add("resizable","containment",{start:function(){var t,i,n,r,s,o,a,l=e(this).resizable("instance"),h=l.options,u=l.element,c=h.containment,p=c instanceof e?c.get(0):/parent/.test(c)?u.parent().get(0):c;p&&(l.containerElement=e(p),/document/.test(c)||c===document?(l.containerOffset={left:0,top:0},l.containerPosition={left:0,top:0},l.parentData={element:e(document),left:0,top:0,width:e(document).width(),height:e(document).height()||document.body.parentNode.scrollHeight}):(t=e(p),i=[],e(["Top","Right","Left","Bottom"]).each(function(e,n){i[e]=l._num(t.css("padding"+n))}),l.containerOffset=t.offset(),l.containerPosition=t.position(),l.containerSize={height:t.innerHeight()-i[3],width:t.innerWidth()-i[1]},n=l.containerOffset,r=l.containerSize.height,s=l.containerSize.width,o=l._hasScroll(p,"left")?p.scrollWidth:s,a=l._hasScroll(p)?p.scrollHeight:r,l.parentData={element:p,left:n.left,top:n.top,width:o,height:a}))},resize:function(t){var i,n,r,s,o=e(this).resizable("instance"),a=o.options,l=o.containerOffset,h=o.position,u=o._aspectRatio||t.shiftKey,c={top:0,left:0},p=o.containerElement,d=!0;p[0]!==document&&/static/.test(p.css("position"))&&(c=l),h.left<(o._helper?l.left:0)&&(o.size.width=o.size.width+(o._helper?o.position.left-l.left:o.position.left-c.left),u&&(o.size.height=o.size.width/o.aspectRatio,d=!1),o.position.left=a.helper?l.left:0),h.top<(o._helper?l.top:0)&&(o.size.height=o.size.height+(o._helper?o.position.top-l.top:o.position.top),u&&(o.size.width=o.size.height*o.aspectRatio,d=!1),o.position.top=o._helper?l.top:0),r=o.containerElement.get(0)===o.element.parent().get(0),s=/relative|absolute/.test(o.containerElement.css("position")),r&&s?(o.offset.left=o.parentData.left+o.position.left,o.offset.top=o.parentData.top+o.position.top):(o.offset.left=o.element.offset().left,o.offset.top=o.element.offset().top),i=Math.abs(o.sizeDiff.width+(o._helper?o.offset.left-c.left:o.offset.left-l.left)),n=Math.abs(o.sizeDiff.height+(o._helper?o.offset.top-c.top:o.offset.top-l.top)),i+o.size.width>=o.parentData.width&&(o.size.width=o.parentData.width-i,u&&(o.size.height=o.size.width/o.aspectRatio,d=!1)),n+o.size.height>=o.parentData.height&&(o.size.height=o.parentData.height-n,u&&(o.size.width=o.size.height*o.aspectRatio,d=!1)),d||(o.position.left=o.prevPosition.left,o.position.top=o.prevPosition.top,o.size.width=o.prevSize.width,o.size.height=o.prevSize.height)},stop:function(){var t=e(this).resizable("instance"),i=t.options,n=t.containerOffset,r=t.containerPosition,s=t.containerElement,o=e(t.helper),a=o.offset(),l=o.outerWidth()-t.sizeDiff.width,h=o.outerHeight()-t.sizeDiff.height;t._helper&&!i.animate&&/relative/.test(s.css("position"))&&e(this).css({left:a.left-r.left-n.left,width:l,height:h}),t._helper&&!i.animate&&/static/.test(s.css("position"))&&e(this).css({left:a.left-r.left-n.left,width:l,height:h})}}),e.ui.plugin.add("resizable","alsoResize",{start:function(){var t=e(this).resizable("instance"),i=t.options;e(i.alsoResize).each(function(){var t=e(this);t.data("ui-resizable-alsoresize",{width:parseFloat(t.width()),height:parseFloat(t.height()),left:parseFloat(t.css("left")),top:parseFloat(t.css("top"))})})},resize:function(t,i){var n=e(this).resizable("instance"),r=n.options,s=n.originalSize,o=n.originalPosition,a={height:n.size.height-s.height||0,width:n.size.width-s.width||0,top:n.position.top-o.top||0,left:n.position.left-o.left||0};e(r.alsoResize).each(function(){var t=e(this),n=e(this).data("ui-resizable-alsoresize"),r={},s=t.parents(i.originalElement[0]).length?["width","height"]:["width","height","top","left"];e.each(s,function(e,t){var i=(n[t]||0)+(a[t]||0);i&&i>=0&&(r[t]=i||null)}),t.css(r)})},stop:function(){e(this).removeData("ui-resizable-alsoresize")}}),e.ui.plugin.add("resizable","ghost",{start:function(){var t=e(this).resizable("instance"),i=t.size;t.ghost=t.originalElement.clone(),t.ghost.css({opacity:.25,display:"block",position:"relative",height:i.height,width:i.width,margin:0,left:0,top:0}),t._addClass(t.ghost,"ui-resizable-ghost"),e.uiBackCompat!==!1&&"string"==typeof t.options.ghost&&t.ghost.addClass(this.options.ghost),t.ghost.appendTo(t.helper)},resize:function(){var t=e(this).resizable("instance");t.ghost&&t.ghost.css({position:"relative",height:t.size.height,width:t.size.width})},stop:function(){var t=e(this).resizable("instance");t.ghost&&t.helper&&t.helper.get(0).removeChild(t.ghost.get(0))}}),e.ui.plugin.add("resizable","grid",{resize:function(){var t,i=e(this).resizable("instance"),n=i.options,r=i.size,s=i.originalSize,o=i.originalPosition,a=i.axis,l="number"==typeof n.grid?[n.grid,n.grid]:n.grid,h=l[0]||1,u=l[1]||1,c=Math.round((r.width-s.width)/h)*h,p=Math.round((r.height-s.height)/u)*u,d=s.width+c,f=s.height+p,y=n.maxWidth&&n.maxWidth<d,m=n.maxHeight&&n.maxHeight<f,g=n.minWidth&&n.minWidth>d,v=n.minHeight&&n.minHeight>f;n.grid=l,g&&(d+=h),v&&(f+=u),y&&(d-=h),m&&(f-=u),/^(se|s|e)$/.test(a)?(i.size.width=d,i.size.height=f):/^(ne)$/.test(a)?(i.size.width=d,i.size.height=f,i.position.top=o.top-p):/^(sw)$/.test(a)?(i.size.width=d,i.size.height=f,i.position.left=o.left-c):((f-u<=0||d-h<=0)&&(t=i._getPaddingPlusBorderDimensions(this)),f-u>0?(i.size.height=f,i.position.top=o.top-p):(f=u-t.height,i.size.height=f,i.position.top=o.top+s.height-f),d-h>0?(i.size.width=d,i.position.left=o.left-c):(d=h-t.width,i.size.width=d,i.position.left=o.left+s.width-d))}}),e.ui.resizable})},{}],37:[function(e,t,i){!function(e){"function"==typeof define&&define.amd?define(["jquery","./menu","../escape-selector","../form-reset-mixin","../keycode","../labels","../position","../unique-id","../version","../widget"],e):e(jQuery)}(function(e){return e.widget("ui.selectmenu",[e.ui.formResetMixin,{version:"1.12.1",defaultElement:"<select>",options:{appendTo:null,classes:{"ui-selectmenu-button-open":"ui-corner-top","ui-selectmenu-button-closed":"ui-corner-all"},disabled:null,icons:{button:"ui-icon-triangle-1-s"},position:{my:"left top",at:"left bottom",collision:"none"},width:!1,change:null,close:null,focus:null,open:null,select:null},_create:function(){var t=this.element.uniqueId().attr("id");this.ids={element:t,button:t+"-button",menu:t+"-menu"},this._drawButton(),this._drawMenu(),this._bindFormResetHandler(),this._rendered=!1,this.menuItems=e()},_drawButton:function(){var t,i=this,n=this._parseOption(this.element.find("option:selected"),this.element[0].selectedIndex);this.labels=this.element.labels().attr("for",this.ids.button),this._on(this.labels,{click:function(e){this.button.focus(),e.preventDefault()}}),this.element.hide(),this.button=e("<span>",{tabindex:this.options.disabled?-1:0,id:this.ids.button,role:"combobox","aria-expanded":"false","aria-autocomplete":"list","aria-owns":this.ids.menu,"aria-haspopup":"true",title:this.element.attr("title")}).insertAfter(this.element),this._addClass(this.button,"ui-selectmenu-button ui-selectmenu-button-closed","ui-button ui-widget"),t=e("<span>").appendTo(this.button),this._addClass(t,"ui-selectmenu-icon","ui-icon "+this.options.icons.button),this.buttonItem=this._renderButtonItem(n).appendTo(this.button),this.options.width!==!1&&this._resizeButton(),this._on(this.button,this._buttonEvents),this.button.one("focusin",function(){i._rendered||i._refreshMenu()})},_drawMenu:function(){var t=this;this.menu=e("<ul>",{"aria-hidden":"true","aria-labelledby":this.ids.button,id:this.ids.menu}),this.menuWrap=e("<div>").append(this.menu),this._addClass(this.menuWrap,"ui-selectmenu-menu","ui-front"),this.menuWrap.appendTo(this._appendTo()),this.menuInstance=this.menu.menu({classes:{"ui-menu":"ui-corner-bottom"},role:"listbox",select:function(e,i){e.preventDefault(),t._setSelection(),t._select(i.item.data("ui-selectmenu-item"),e)},focus:function(e,i){var n=i.item.data("ui-selectmenu-item");null!=t.focusIndex&&n.index!==t.focusIndex&&(t._trigger("focus",e,{item:n}),t.isOpen||t._select(n,e)),t.focusIndex=n.index,t.button.attr("aria-activedescendant",t.menuItems.eq(n.index).attr("id"))}}).menu("instance"),this.menuInstance._off(this.menu,"mouseleave"),this.menuInstance._closeOnDocumentClick=function(){return!1},this.menuInstance._isDivider=function(){return!1}},refresh:function(){this._refreshMenu(),this.buttonItem.replaceWith(this.buttonItem=this._renderButtonItem(this._getSelectedItem().data("ui-selectmenu-item")||{})),null===this.options.width&&this._resizeButton()},_refreshMenu:function(){var e,t=this.element.find("option");this.menu.empty(),this._parseOptions(t),this._renderMenu(this.menu,this.items),this.menuInstance.refresh(),this.menuItems=this.menu.find("li").not(".ui-selectmenu-optgroup").find(".ui-menu-item-wrapper"),this._rendered=!0,t.length&&(e=this._getSelectedItem(),this.menuInstance.focus(null,e),this._setAria(e.data("ui-selectmenu-item")),this._setOption("disabled",this.element.prop("disabled")))},open:function(e){this.options.disabled||(this._rendered?(this._removeClass(this.menu.find(".ui-state-active"),null,"ui-state-active"),this.menuInstance.focus(null,this._getSelectedItem())):this._refreshMenu(),this.menuItems.length&&(this.isOpen=!0,this._toggleAttr(),this._resizeMenu(),this._position(),this._on(this.document,this._documentClick),this._trigger("open",e)))},_position:function(){this.menuWrap.position(e.extend({of:this.button},this.options.position))},close:function(e){this.isOpen&&(this.isOpen=!1,this._toggleAttr(),this.range=null,this._off(this.document),this._trigger("close",e))},widget:function(){return this.button},menuWidget:function(){return this.menu},_renderButtonItem:function(t){var i=e("<span>");return this._setText(i,t.label),this._addClass(i,"ui-selectmenu-text"),i},_renderMenu:function(t,i){var n=this,r="";e.each(i,function(i,s){var o;s.optgroup!==r&&(o=e("<li>",{text:s.optgroup}),n._addClass(o,"ui-selectmenu-optgroup","ui-menu-divider"+(s.element.parent("optgroup").prop("disabled")?" ui-state-disabled":"")),o.appendTo(t),r=s.optgroup),n._renderItemData(t,s)})},_renderItemData:function(e,t){return this._renderItem(e,t).data("ui-selectmenu-item",t)},_renderItem:function(t,i){var n=e("<li>"),r=e("<div>",{title:i.element.attr("title")});return i.disabled&&this._addClass(n,null,"ui-state-disabled"),this._setText(r,i.label),n.append(r).appendTo(t)},_setText:function(e,t){t?e.text(t):e.html("&#160;")},_move:function(e,t){var i,n,r=".ui-menu-item";this.isOpen?i=this.menuItems.eq(this.focusIndex).parent("li"):(i=this.menuItems.eq(this.element[0].selectedIndex).parent("li"),r+=":not(.ui-state-disabled)"),n="first"===e||"last"===e?i["first"===e?"prevAll":"nextAll"](r).eq(-1):i[e+"All"](r).eq(0),n.length&&this.menuInstance.focus(t,n)},_getSelectedItem:function(){return this.menuItems.eq(this.element[0].selectedIndex).parent("li")},_toggle:function(e){this[this.isOpen?"close":"open"](e)},_setSelection:function(){var e;this.range&&(window.getSelection?(e=window.getSelection(),e.removeAllRanges(),e.addRange(this.range)):this.range.select(),this.button.focus())},_documentClick:{mousedown:function(t){this.isOpen&&(e(t.target).closest(".ui-selectmenu-menu, #"+e.ui.escapeSelector(this.ids.button)).length||this.close(t))}},_buttonEvents:{mousedown:function(){var e;window.getSelection?(e=window.getSelection(),e.rangeCount&&(this.range=e.getRangeAt(0))):this.range=document.selection.createRange()},click:function(e){this._setSelection(),this._toggle(e)},keydown:function(t){var i=!0;switch(t.keyCode){case e.ui.keyCode.TAB:case e.ui.keyCode.ESCAPE:this.close(t),i=!1;break;case e.ui.keyCode.ENTER:this.isOpen&&this._selectFocusedItem(t);break;case e.ui.keyCode.UP:t.altKey?this._toggle(t):this._move("prev",t);break;case e.ui.keyCode.DOWN:t.altKey?this._toggle(t):this._move("next",t);break;case e.ui.keyCode.SPACE:this.isOpen?this._selectFocusedItem(t):this._toggle(t);break;case e.ui.keyCode.LEFT:this._move("prev",t);break;case e.ui.keyCode.RIGHT:this._move("next",t);break;case e.ui.keyCode.HOME:case e.ui.keyCode.PAGE_UP:this._move("first",t);break;case e.ui.keyCode.END:case e.ui.keyCode.PAGE_DOWN:this._move("last",t);break;default:this.menu.trigger(t),i=!1}i&&t.preventDefault()}},_selectFocusedItem:function(e){var t=this.menuItems.eq(this.focusIndex).parent("li");t.hasClass("ui-state-disabled")||this._select(t.data("ui-selectmenu-item"),e)},_select:function(e,t){var i=this.element[0].selectedIndex;this.element[0].selectedIndex=e.index,this.buttonItem.replaceWith(this.buttonItem=this._renderButtonItem(e)),this._setAria(e),this._trigger("select",t,{item:e}),e.index!==i&&this._trigger("change",t,{item:e}),this.close(t)},_setAria:function(e){var t=this.menuItems.eq(e.index).attr("id");this.button.attr({"aria-labelledby":t,"aria-activedescendant":t}),this.menu.attr("aria-activedescendant",t)},_setOption:function(e,t){if("icons"===e){var i=this.button.find("span.ui-icon");this._removeClass(i,null,this.options.icons.button)._addClass(i,null,t.button)}this._super(e,t),"appendTo"===e&&this.menuWrap.appendTo(this._appendTo()),"width"===e&&this._resizeButton()},_setOptionDisabled:function(e){this._super(e),this.menuInstance.option("disabled",e),this.button.attr("aria-disabled",e),this._toggleClass(this.button,null,"ui-state-disabled",e),this.element.prop("disabled",e),e?(this.button.attr("tabindex",-1),this.close()):this.button.attr("tabindex",0)},_appendTo:function(){var t=this.options.appendTo;return t&&(t=t.jquery||t.nodeType?e(t):this.document.find(t).eq(0)),t&&t[0]||(t=this.element.closest(".ui-front, dialog")),t.length||(t=this.document[0].body),t},_toggleAttr:function(){this.button.attr("aria-expanded",this.isOpen),this._removeClass(this.button,"ui-selectmenu-button-"+(this.isOpen?"closed":"open"))._addClass(this.button,"ui-selectmenu-button-"+(this.isOpen?"open":"closed"))._toggleClass(this.menuWrap,"ui-selectmenu-open",null,this.isOpen),this.menu.attr("aria-hidden",!this.isOpen)},_resizeButton:function(){var e=this.options.width;return e===!1?void this.button.css("width",""):(null===e&&(e=this.element.show().outerWidth(),this.element.hide()),void this.button.outerWidth(e))},_resizeMenu:function(){this.menu.outerWidth(Math.max(this.button.outerWidth(),this.menu.width("").outerWidth()+1))},_getCreateOptions:function(){var e=this._super();return e.disabled=this.element.prop("disabled"),e},_parseOptions:function(t){var i=this,n=[];t.each(function(t,r){n.push(i._parseOption(e(r),t))}),this.items=n},_parseOption:function(e,t){var i=e.parent("optgroup");return{element:e,index:t,value:e.val(),label:e.text(),optgroup:i.attr("label")||"",disabled:i.prop("disabled")||e.prop("disabled")}},_destroy:function(){this._unbindFormResetHandler(),this.menuWrap.remove(),this.button.remove(),this.element.show(),this.element.removeUniqueId(),this.labels.attr("for",this.ids.element)}}])})},{}],38:[function(e,t,i){!function(e){"function"==typeof define&&define.amd?define(["jquery","./button","../version","../keycode","../safe-active-element","../widget"],e):e(jQuery)}(function(e){function t(e){return function(){var t=this.element.val();e.apply(this,arguments),this._refresh(),t!==this.element.val()&&this._trigger("change")}}return e.widget("ui.spinner",{version:"1.12.1",defaultElement:"<input>",widgetEventPrefix:"spin",options:{classes:{"ui-spinner":"ui-corner-all","ui-spinner-down":"ui-corner-br","ui-spinner-up":"ui-corner-tr"},culture:null,icons:{down:"ui-icon-triangle-1-s",up:"ui-icon-triangle-1-n"},incremental:!0,max:null,min:null,numberFormat:null,page:10,step:1,change:null,spin:null,start:null,stop:null},_create:function(){this._setOption("max",this.options.max),this._setOption("min",this.options.min),this._setOption("step",this.options.step),""!==this.value()&&this._value(this.element.val(),!0),this._draw(),this._on(this._events),this._refresh(),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_getCreateOptions:function(){var t=this._super(),i=this.element;return e.each(["min","max","step"],function(e,n){var r=i.attr(n);null!=r&&r.length&&(t[n]=r)}),t},_events:{keydown:function(e){this._start(e)&&this._keydown(e)&&e.preventDefault()},keyup:"_stop",focus:function(){this.previous=this.element.val()},blur:function(e){return this.cancelBlur?void delete this.cancelBlur:(this._stop(),this._refresh(),void(this.previous!==this.element.val()&&this._trigger("change",e)))},mousewheel:function(e,t){if(t){if(!this.spinning&&!this._start(e))return!1;this._spin((t>0?1:-1)*this.options.step,e),clearTimeout(this.mousewheelTimer),this.mousewheelTimer=this._delay(function(){this.spinning&&this._stop(e)},100),e.preventDefault()}},"mousedown .ui-spinner-button":function(t){function i(){var t=this.element[0]===e.ui.safeActiveElement(this.document[0]);t||(this.element.trigger("focus"),this.previous=n,this._delay(function(){this.previous=n}))}var n;n=this.element[0]===e.ui.safeActiveElement(this.document[0])?this.previous:this.element.val(),t.preventDefault(),i.call(this),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur,i.call(this)}),this._start(t)!==!1&&this._repeat(null,e(t.currentTarget).hasClass("ui-spinner-up")?1:-1,t)},"mouseup .ui-spinner-button":"_stop","mouseenter .ui-spinner-button":function(t){if(e(t.currentTarget).hasClass("ui-state-active"))return this._start(t)!==!1&&void this._repeat(null,e(t.currentTarget).hasClass("ui-spinner-up")?1:-1,t)},"mouseleave .ui-spinner-button":"_stop"},_enhance:function(){this.uiSpinner=this.element.attr("autocomplete","off").wrap("<span>").parent().append("<a></a><a></a>")},_draw:function(){this._enhance(),this._addClass(this.uiSpinner,"ui-spinner","ui-widget ui-widget-content"),this._addClass("ui-spinner-input"),this.element.attr("role","spinbutton"),this.buttons=this.uiSpinner.children("a").attr("tabIndex",-1).attr("aria-hidden",!0).button({classes:{"ui-button":""}}),this._removeClass(this.buttons,"ui-corner-all"),this._addClass(this.buttons.first(),"ui-spinner-button ui-spinner-up"),this._addClass(this.buttons.last(),"ui-spinner-button ui-spinner-down"),this.buttons.first().button({icon:this.options.icons.up,showLabel:!1}),this.buttons.last().button({icon:this.options.icons.down,showLabel:!1}),this.buttons.height()>Math.ceil(.5*this.uiSpinner.height())&&this.uiSpinner.height()>0&&this.uiSpinner.height(this.uiSpinner.height())},_keydown:function(t){var i=this.options,n=e.ui.keyCode;switch(t.keyCode){case n.UP:return this._repeat(null,1,t),!0;case n.DOWN:return this._repeat(null,-1,t),!0;case n.PAGE_UP:return this._repeat(null,i.page,t),!0;case n.PAGE_DOWN:return this._repeat(null,-i.page,t),!0}return!1},_start:function(e){return!(!this.spinning&&this._trigger("start",e)===!1)&&(this.counter||(this.counter=1),this.spinning=!0,!0)},_repeat:function(e,t,i){e=e||500,clearTimeout(this.timer),this.timer=this._delay(function(){this._repeat(40,t,i)},e),this._spin(t*this.options.step,i)},_spin:function(e,t){var i=this.value()||0;this.counter||(this.counter=1),i=this._adjustValue(i+e*this._increment(this.counter)),this.spinning&&this._trigger("spin",t,{value:i})===!1||(this._value(i),this.counter++)},_increment:function(t){var i=this.options.incremental;return i?e.isFunction(i)?i(t):Math.floor(t*t*t/5e4-t*t/500+17*t/200+1):1},_precision:function(){var e=this._precisionOf(this.options.step);return null!==this.options.min&&(e=Math.max(e,this._precisionOf(this.options.min))),e},_precisionOf:function(e){var t=e.toString(),i=t.indexOf(".");return i===-1?0:t.length-i-1},_adjustValue:function(e){var t,i,n=this.options;return t=null!==n.min?n.min:0,i=e-t,i=Math.round(i/n.step)*n.step,e=t+i,e=parseFloat(e.toFixed(this._precision())),null!==n.max&&e>n.max?n.max:null!==n.min&&e<n.min?n.min:e},_stop:function(e){this.spinning&&(clearTimeout(this.timer),clearTimeout(this.mousewheelTimer),this.counter=0,this.spinning=!1,this._trigger("stop",e))},_setOption:function(e,t){var i,n,r;return"culture"===e||"numberFormat"===e?(i=this._parse(this.element.val()),this.options[e]=t,void this.element.val(this._format(i))):("max"!==e&&"min"!==e&&"step"!==e||"string"==typeof t&&(t=this._parse(t)),"icons"===e&&(n=this.buttons.first().find(".ui-icon"),this._removeClass(n,null,this.options.icons.up),this._addClass(n,null,t.up),r=this.buttons.last().find(".ui-icon"),this._removeClass(r,null,this.options.icons.down),this._addClass(r,null,t.down)),void this._super(e,t))},_setOptionDisabled:function(e){this._super(e),this._toggleClass(this.uiSpinner,null,"ui-state-disabled",!!e),this.element.prop("disabled",!!e),this.buttons.button(e?"disable":"enable")},_setOptions:t(function(e){this._super(e)}),_parse:function(e){return"string"==typeof e&&""!==e&&(e=window.Globalize&&this.options.numberFormat?Globalize.parseFloat(e,10,this.options.culture):+e),""===e||isNaN(e)?null:e},_format:function(e){return""===e?"":window.Globalize&&this.options.numberFormat?Globalize.format(e,this.options.numberFormat,this.options.culture):e},_refresh:function(){this.element.attr({"aria-valuemin":this.options.min,"aria-valuemax":this.options.max,"aria-valuenow":this._parse(this.element.val())})},isValid:function(){var e=this.value();return null!==e&&e===this._adjustValue(e)},_value:function(e,t){var i;""!==e&&(i=this._parse(e),null!==i&&(t||(i=this._adjustValue(i)),e=this._format(i))),this.element.val(e),this._refresh()},_destroy:function(){this.element.prop("disabled",!1).removeAttr("autocomplete role aria-valuemin aria-valuemax aria-valuenow"),this.uiSpinner.replaceWith(this.element)},stepUp:t(function(e){this._stepUp(e)}),_stepUp:function(e){this._start()&&(this._spin((e||1)*this.options.step),this._stop())},stepDown:t(function(e){this._stepDown(e)}),_stepDown:function(e){this._start()&&(this._spin((e||1)*-this.options.step),this._stop())},pageUp:t(function(e){this._stepUp((e||1)*this.options.page)}),pageDown:t(function(e){this._stepDown((e||1)*this.options.page)}),value:function(e){return arguments.length?void t(this._value).call(this,e):this._parse(this.element.val())},widget:function(){return this.uiSpinner}}),e.uiBackCompat!==!1&&e.widget("ui.spinner",e.ui.spinner,{_enhance:function(){this.uiSpinner=this.element.attr("autocomplete","off").wrap(this._uiSpinnerHtml()).parent().append(this._buttonHtml())},_uiSpinnerHtml:function(){return"<span>"},_buttonHtml:function(){return"<a></a><a></a>"}}),e.ui.spinner})},{}],39:[function(e,t,i){!function(e){"function"==typeof define&&define.amd?define(["jquery","../keycode","../position","../unique-id","../version","../widget"],e):e(jQuery)}(function(e){return e.widget("ui.tooltip",{version:"1.12.1",options:{classes:{"ui-tooltip":"ui-corner-all ui-widget-shadow"},content:function(){var t=e(this).attr("title")||"";return e("<a>").text(t).html()},hide:!0,items:"[title]:not([disabled])",position:{my:"left top+15",at:"left bottom",collision:"flipfit flip"},show:!0,track:!1,close:null,open:null},_addDescribedBy:function(t,i){var n=(t.attr("aria-describedby")||"").split(/\s+/);n.push(i),t.data("ui-tooltip-id",i).attr("aria-describedby",e.trim(n.join(" ")))},_removeDescribedBy:function(t){var i=t.data("ui-tooltip-id"),n=(t.attr("aria-describedby")||"").split(/\s+/),r=e.inArray(i,n);r!==-1&&n.splice(r,1),t.removeData("ui-tooltip-id"),n=e.trim(n.join(" ")),n?t.attr("aria-describedby",n):t.removeAttr("aria-describedby")},_create:function(){this._on({mouseover:"open",focusin:"open"}),this.tooltips={},this.parents={},this.liveRegion=e("<div>").attr({role:"log","aria-live":"assertive","aria-relevant":"additions"}).appendTo(this.document[0].body),this._addClass(this.liveRegion,null,"ui-helper-hidden-accessible"),this.disabledTitles=e([])},_setOption:function(t,i){var n=this;this._super(t,i),"content"===t&&e.each(this.tooltips,function(e,t){n._updateContent(t.element)})},_setOptionDisabled:function(e){this[e?"_disable":"_enable"]()},_disable:function(){var t=this;e.each(this.tooltips,function(i,n){var r=e.Event("blur");r.target=r.currentTarget=n.element[0],t.close(r,!0)}),this.disabledTitles=this.disabledTitles.add(this.element.find(this.options.items).addBack().filter(function(){var t=e(this);if(t.is("[title]"))return t.data("ui-tooltip-title",t.attr("title")).removeAttr("title")}))},_enable:function(){this.disabledTitles.each(function(){var t=e(this);t.data("ui-tooltip-title")&&t.attr("title",t.data("ui-tooltip-title"))}),this.disabledTitles=e([])},open:function(t){var i=this,n=e(t?t.target:this.element).closest(this.options.items);n.length&&!n.data("ui-tooltip-id")&&(n.attr("title")&&n.data("ui-tooltip-title",n.attr("title")),n.data("ui-tooltip-open",!0),t&&"mouseover"===t.type&&n.parents().each(function(){var t,n=e(this);n.data("ui-tooltip-open")&&(t=e.Event("blur"),t.target=t.currentTarget=this,i.close(t,!0)),n.attr("title")&&(n.uniqueId(),i.parents[this.id]={element:this,title:n.attr("title")},n.attr("title",""))}),this._registerCloseHandlers(t,n),this._updateContent(n,t))},_updateContent:function(e,t){var i,n=this.options.content,r=this,s=t?t.type:null;return"string"==typeof n||n.nodeType||n.jquery?this._open(t,e,n):(i=n.call(e[0],function(i){r._delay(function(){e.data("ui-tooltip-open")&&(t&&(t.type=s),this._open(t,e,i))})}),void(i&&this._open(t,e,i)))},_open:function(t,i,n){function r(e){h.of=e,o.is(":hidden")||o.position(h)}var s,o,a,l,h=e.extend({},this.options.position);if(n){if(s=this._find(i))return void s.tooltip.find(".ui-tooltip-content").html(n);i.is("[title]")&&(t&&"mouseover"===t.type?i.attr("title",""):i.removeAttr("title")),s=this._tooltip(i),o=s.tooltip,this._addDescribedBy(i,o.attr("id")),o.find(".ui-tooltip-content").html(n),this.liveRegion.children().hide(),l=e("<div>").html(o.find(".ui-tooltip-content").html()),l.removeAttr("name").find("[name]").removeAttr("name"),l.removeAttr("id").find("[id]").removeAttr("id"),l.appendTo(this.liveRegion),this.options.track&&t&&/^mouse/.test(t.type)?(this._on(this.document,{mousemove:r}),r(t)):o.position(e.extend({of:i},this.options.position)),o.hide(),this._show(o,this.options.show),this.options.track&&this.options.show&&this.options.show.delay&&(a=this.delayedShow=setInterval(function(){o.is(":visible")&&(r(h.of),clearInterval(a))},e.fx.interval)),this._trigger("open",t,{tooltip:o})}},_registerCloseHandlers:function(t,i){var n={keyup:function(t){if(t.keyCode===e.ui.keyCode.ESCAPE){var n=e.Event(t);n.currentTarget=i[0],this.close(n,!0)}}};i[0]!==this.element[0]&&(n.remove=function(){this._removeTooltip(this._find(i).tooltip)}),t&&"mouseover"!==t.type||(n.mouseleave="close"),t&&"focusin"!==t.type||(n.focusout="close"),this._on(!0,i,n)},close:function(t){var i,n=this,r=e(t?t.currentTarget:this.element),s=this._find(r);return s?(i=s.tooltip,void(s.closing||(clearInterval(this.delayedShow),r.data("ui-tooltip-title")&&!r.attr("title")&&r.attr("title",r.data("ui-tooltip-title")),this._removeDescribedBy(r),s.hiding=!0,i.stop(!0),this._hide(i,this.options.hide,function(){n._removeTooltip(e(this))}),r.removeData("ui-tooltip-open"),this._off(r,"mouseleave focusout keyup"),r[0]!==this.element[0]&&this._off(r,"remove"),this._off(this.document,"mousemove"),t&&"mouseleave"===t.type&&e.each(this.parents,function(t,i){e(i.element).attr("title",i.title),delete n.parents[t]}),s.closing=!0,this._trigger("close",t,{tooltip:i
}),s.hiding||(s.closing=!1)))):void r.removeData("ui-tooltip-open")},_tooltip:function(t){var i=e("<div>").attr("role","tooltip"),n=e("<div>").appendTo(i),r=i.uniqueId().attr("id");return this._addClass(n,"ui-tooltip-content"),this._addClass(i,"ui-tooltip","ui-widget ui-widget-content"),i.appendTo(this._appendTo(t)),this.tooltips[r]={element:t,tooltip:i}},_find:function(e){var t=e.data("ui-tooltip-id");return t?this.tooltips[t]:null},_removeTooltip:function(e){e.remove(),delete this.tooltips[e.attr("id")]},_appendTo:function(e){var t=e.closest(".ui-front, dialog");return t.length||(t=this.document[0].body),t},_destroy:function(){var t=this;e.each(this.tooltips,function(i,n){var r=e.Event("blur"),s=n.element;r.target=r.currentTarget=s[0],t.close(r,!0),e("#"+i).remove(),s.data("ui-tooltip-title")&&(s.attr("title")||s.attr("title",s.data("ui-tooltip-title")),s.removeData("ui-tooltip-title"))}),this.liveRegion.remove()}}),e.uiBackCompat!==!1&&e.widget("ui.tooltip",e.ui.tooltip,{options:{tooltipClass:null},_tooltip:function(){var e=this._superApply(arguments);return this.options.tooltipClass&&e.tooltip.addClass(this.options.tooltipClass),e}}),e.ui.tooltip})},{}],40:[function(e,t,i){!function(e,n){if("object"==typeof i&&"object"==typeof t)t.exports=n();else if("function"==typeof define&&define.amd)define([],n);else{var r=n();for(var s in r)("object"==typeof i?i:e)[s]=r[s]}}(this,function(){return function(e){function t(n){if(i[n])return i[n].exports;var r=i[n]={exports:{},id:n,loaded:!1};return e[n].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var i={};return t.m=e,t.c=i,t.p="",t(0)}([function(e,t,i){e.exports=i(1)},function(e,t,i){"use strict";function n(){var e="undefined"==typeof JSON?{}:JSON;r.setupJSON(e)}var r=i(2),s=i(3);n();var o=window._rollbarConfig,a=o&&o.globalAlias||"Rollbar",l=window[a]&&"undefined"!=typeof window[a].shimId;!l&&o?r.wrapper.init(o):(window.Rollbar=r.wrapper,window.RollbarNotifier=s.Notifier),e.exports=r.wrapper},function(e,t,i){"use strict";function n(e,t,i){!i[4]&&window._rollbarWrappedError&&(i[4]=window._rollbarWrappedError,window._rollbarWrappedError=null),e.uncaughtError.apply(e,i),t&&t.apply(window,i)}function r(e,t){if(t.hasOwnProperty&&t.hasOwnProperty("addEventListener")){var i=t.addEventListener;t.addEventListener=function(t,n,r){i.call(this,t,e.wrap(n),r)};var n=t.removeEventListener;t.removeEventListener=function(e,t,i){n.call(this,e,t&&t._wrapped||t,i)}}}var s=i(3),o=i(8),a=s.Notifier;window._rollbarWrappedError=null;var l={};l.init=function(e,t){var i=new a(t);if(i.configure(e),e.captureUncaught){var s;t&&o.isType(t._rollbarOldOnError,"function")?s=t._rollbarOldOnError:window.onerror&&!window.onerror.belongsToShim&&(s=window.onerror),window.onerror=function(){var e=Array.prototype.slice.call(arguments,0);n(i,s,e)};var l,h,u=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"];for(l=0;l<u.length;++l)h=u[l],window[h]&&window[h].prototype&&r(i,window[h].prototype)}return e.captureUnhandledRejections&&(t&&o.isType(t._unhandledRejectionHandler,"function")&&window.removeEventListener("unhandledrejection",t._unhandledRejectionHandler),i._unhandledRejectionHandler=function(e){var t=e.reason,n=e.promise,r=e.detail;!t&&r&&(t=r.reason,n=r.promise),i.unhandledRejection(t,n)},window.addEventListener("unhandledrejection",i._unhandledRejectionHandler)),window.Rollbar=i,a.processPayloads(),i},e.exports={wrapper:l,setupJSON:s.setupJSON}},function(e,t,i){"use strict";function n(e){O=e,v.setupJSON(e)}function r(e,t){return function(){var i=t||this;try{return e.apply(i,arguments)}catch(e){}}}function s(){f||(f=setTimeout(p,1e3))}function o(){return w}function a(e){w=w||this;var t="https://"+a.DEFAULT_ENDPOINT;this.options={enabled:!0,endpoint:t,environment:"production",scrubFields:y([],a.DEFAULT_SCRUB_FIELDS),checkIgnore:null,logLevel:a.DEFAULT_LOG_LEVEL,reportLevel:a.DEFAULT_REPORT_LEVEL,uncaughtErrorLevel:a.DEFAULT_UNCAUGHT_ERROR_LEVEL,payload:{}},this.lastError=null,this.plugins={},this.parentNotifier=e,e&&(e.hasOwnProperty("shimId")?e.notifier=this:this.configure(e.options))}function l(e){window._rollbarPayloadQueue.push(e),s()}function h(e){return r(function(){var t=this._getLogArgs(arguments);return this._log(e||t.level||this.options.logLevel||a.DEFAULT_LOG_LEVEL,t.message,t.err,t.custom,t.callback)})}function u(e,t){e||(e=t?O.stringify(t):"");var i={body:e};return t&&(i.extra=y(!0,{},t)),{message:i}}function c(e,t,i){var n=m.guessErrorClass(t.message),r=t.name||n[0],s=n[1],o={exception:{class:r,message:s}};if(e&&(o.exception.description=e||"uncaught exception"),t.stack){var a,l,h,c,p,d,f,v;for(o.frames=[],f=0;f<t.stack.length;++f)a=t.stack[f],l={filename:a.url?g.sanitizeUrl(a.url):"(unknown)",lineno:a.line||null,method:a.func&&"?"!==a.func?a.func:"[anonymous]",colno:a.column},h=c=p=null,d=a.context?a.context.length:0,d&&(v=Math.floor(d/2),c=a.context.slice(0,v),h=a.context[v],p=a.context.slice(v)),h&&(l.code=h),(c||p)&&(l.context={},c&&c.length&&(l.context.pre=c),p&&p.length&&(l.context.post=p)),a.args&&(l.args=a.args),o.frames.push(l);return o.frames.reverse(),i&&(o.extra=y(!0,{},i)),{trace:o}}return u(r+": "+s,i)}function p(){var e;try{for(;e=window._rollbarPayloadQueue.shift();)d(e)}finally{f=void 0}}function d(e){var t=e.endpointUrl,i=e.accessToken,n=e.payload,r=e.callback||function(){},s=(new Date).getTime();s-_>=6e4&&(_=s,S=0);var o=window._globalRollbarOptions.maxItems,h=window._globalRollbarOptions.itemsPerMinute,u=function(){return!n.ignoreRateLimit&&o>=1&&E>=o},c=function(){return!n.ignoreRateLimit&&h>=1&&S>=h};return u()?void r(new Error(o+" max items reached")):c()?void r(new Error(h+" items per minute reached")):(E++,S++,u()&&w._log(w.options.uncaughtErrorLevel,"maxItems has been hit. Ignoring errors for the remainder of the current page load.",null,{maxItems:o},null,!1,!0),n.ignoreRateLimit&&delete n.ignoreRateLimit,void L.post(t,i,n,function(t,i){return t?(t instanceof b&&(e.callback=function(){},setTimeout(function(){l(e)},a.RETRY_DELAY)),r(t)):r(null,i)}))}var f,y=i(4),m=i(5),g=i(8),v=i(10),L=v.XHR,b=v.ConnectionError,O=null;a.NOTIFIER_VERSION="1.9.2",a.DEFAULT_ENDPOINT="api.rollbar.com/api/1/",a.DEFAULT_SCRUB_FIELDS=["pw","pass","passwd","password","secret","confirm_password","confirmPassword","password_confirmation","passwordConfirmation","access_token","accessToken","secret_key","secretKey","secretToken"],a.DEFAULT_LOG_LEVEL="debug",a.DEFAULT_REPORT_LEVEL="debug",a.DEFAULT_UNCAUGHT_ERROR_LEVEL="error",a.DEFAULT_ITEMS_PER_MIN=60,a.DEFAULT_MAX_ITEMS=0,a.LEVELS={debug:0,info:1,warning:2,error:3,critical:4},a.RETRY_DELAY=1e4,window._rollbarPayloadQueue=window._rollbarPayloadQueue||[],window._globalRollbarOptions={startTime:(new Date).getTime(),maxItems:a.DEFAULT_MAX_ITEMS,itemsPerMinute:a.DEFAULT_ITEMS_PER_MIN};var w,x=a.prototype;x._getLogArgs=function(e){for(var t,i,n,s,o,l,h=this.options.logLevel||a.DEFAULT_LOG_LEVEL,u=[],c=0;c<e.length;++c)l=e[c],o=g.typeName(l),"string"===o?t?u.push(l):t=l:"function"===o?s=r(l,this):"date"===o?u.push(l):"error"===o||l instanceof Error||"undefined"!=typeof DOMException&&l instanceof DOMException?i?u.push(l):i=l:"object"!==o&&"array"!==o||(n?u.push(l):n=l);return u.length&&(n=n||{},n.extraArgs=u),{level:h,message:t,err:i,custom:n,callback:s}},x._route=function(e){var t=this.options.endpoint,i=/\/$/.test(t),n=/^\//.test(e);return i&&n?e=e.substring(1):i||n||(e="/"+e),t+e},x._processShimQueue=function(e){for(var t,i,n,r,s,o,l,h={};i=e.shift();)t=i.shim,n=i.method,r=i.args,s=t.parentShim,l=h[t.shimId],l||(s?(o=h[s.shimId],l=new a(o)):l=this,h[t.shimId]=l),l[n]&&g.isType(l[n],"function")&&l[n].apply(l,r)},x._buildPayload=function(e,t,i,n,r){var s=this.options.accessToken,o=this.options.environment,l=y(!0,{},this.options.payload),h=g.uuid4();if(void 0===a.LEVELS[t])throw new Error("Invalid level");if(!i&&!n&&!r)throw new Error("No message, stack info or custom data");var u={environment:o,endpoint:this.options.endpoint,uuid:h,level:t,platform:"browser",framework:"browser-js",language:"javascript",body:this._buildBody(i,n,r),request:{url:window.location.href,query_string:window.location.search,user_ip:"$remote_ip"},client:{runtime_ms:e.getTime()-window._globalRollbarOptions.startTime,timestamp:Math.round(e.getTime()/1e3),javascript:{browser:window.navigator.userAgent,language:window.navigator.language,cookie_enabled:window.navigator.cookieEnabled,screen:{width:window.screen.width,height:window.screen.height},plugins:this._getBrowserPlugins()}},server:{},notifier:{name:"rollbar-browser-js",version:a.NOTIFIER_VERSION}};l.body&&delete l.body;var c={access_token:s,data:y(!0,u,l)};return this._scrub(c.data),c},x._buildBody=function(e,t,i){var n;return n=t?c(e,t,i):u(e,i)},x._getBrowserPlugins=function(){if(!this._browserPlugins){var e,t,i=window.navigator.plugins||[],n=i.length,r=[];for(t=0;t<n;++t)e=i[t],r.push({name:e.name,description:e.description});this._browserPlugins=r}return this._browserPlugins},x._scrub=function(e){function t(e,t,i,n,r,s){return t+g.redact(s)}function i(e){var i;if(g.isType(e,"string"))for(i=0;i<a.length;++i)e=e.replace(a[i],t);return e}function n(e,t){var i;for(i=0;i<o.length;++i)if(o[i].test(e)){t=g.redact(t);break}return t}function r(e,t){var r=n(e,t);return r===t?i(r):r}var s=this.options.scrubFields,o=this._getScrubFieldRegexs(s),a=this._getScrubQueryParamRegexs(s);return g.traverse(e,r),e},x._getScrubFieldRegexs=function(e){for(var t,i=[],n=0;n<e.length;++n)t="\\[?(%5[bB])?"+e[n]+"\\[?(%5[bB])?\\]?(%5[dD])?",i.push(new RegExp(t,"i"));return i},x._getScrubQueryParamRegexs=function(e){for(var t,i=[],n=0;n<e.length;++n)t="\\[?(%5[bB])?"+e[n]+"\\[?(%5[bB])?\\]?(%5[dD])?",i.push(new RegExp("("+t+"=)([^&\\n]+)","igm"));return i},x._urlIsWhitelisted=function(e){var t,i,n,r,s,o,a,l,h,u;try{if(t=this.options.hostWhiteList,i=e&&e.data&&e.data.body&&e.data.body.trace,!t||0===t.length)return!0;if(!i)return!0;for(a=t.length,s=i.frames.length,h=0;h<s;h++){if(n=i.frames[h],r=n.filename,!g.isType(r,"string"))return!0;for(u=0;u<a;u++)if(o=t[u],l=new RegExp(o),l.test(r))return!0}}catch(e){return this.configure({hostWhiteList:null}),!0}return!1},x._messageIsIgnored=function(e){var t,i,n,r,s,o,a,l,h;try{if(s=!1,n=this.options.ignoredMessages,!n||0===n.length)return!1;if(a=e&&e.data&&e.data.body,l=a&&a.trace&&a.trace.exception&&a.trace.exception.message,h=a&&a.message&&a.message.body,t=l||h,!t)return!1;for(r=n.length,i=0;i<r&&(o=new RegExp(n[i],"gi"),!(s=o.test(t)));i++);}catch(e){void this.configure({ignoredMessages:null})}return s},x._enqueuePayload=function(e,t,i,n){var r={callback:n,accessToken:this.options.accessToken,endpointUrl:this._route("item/"),payload:e},s=function(){if(n){var e="This item was not sent to Rollbar because it was ignored. This can happen if a custom checkIgnore() function was used or if the item's level was less than the notifier' reportLevel. See https://rollbar.com/docs/notifier/rollbar.js/configuration for more details.";n(null,{err:0,result:{id:null,uuid:null,message:e}})}};if(this._internalCheckIgnore(t,i,e))return void s();try{if(g.isType(this.options.checkIgnore,"function")&&this.options.checkIgnore(t,i,e))return void s()}catch(e){void this.configure({checkIgnore:null})}if(this._urlIsWhitelisted(e)&&!this._messageIsIgnored(e)){if(this.options.verbose&&e.data&&e.data.body&&e.data.body.trace){var o=e.data.body.trace;o.exception.message}g.isType(this.options.logFunction,"function")&&this.options.logFunction(r);try{g.isType(this.options.transform,"function")&&this.options.transform(e)}catch(e){void this.configure({transform:null})}this.options.enabled&&l(r)}},x._internalCheckIgnore=function(e,t,i){var n=t[0],r=a.LEVELS[n]||0,s=a.LEVELS[this.options.reportLevel]||0;if(r<s)return!0;var o=this.options?this.options.plugins:{};if(o&&o.jquery&&o.jquery.ignoreAjaxErrors)try{return!!i.data.body.message.extra.isAjax}catch(e){return!1}return!1},x._log=function(e,t,i,n,r,s,o){var a=null;if(i)try{if(a=i._savedStackTrace?i._savedStackTrace:m.parse(i),i===this.lastError)return;this.lastError=i}catch(e){t=i.message||i.description||t||String(i),i=null}var l=this._buildPayload(new Date,e,t,a,n);o&&(l.ignoreRateLimit=!0),this._enqueuePayload(l,!!s,[e,t,i,n],r)},x.log=h(),x.debug=h("debug"),x.info=h("info"),x.warn=h("warning"),x.warning=h("warning"),x.error=h("error"),x.critical=h("critical"),x.uncaughtError=r(function(e,t,i,n,r,s){if(s=s||null,r&&g.isType(r,"error"))return void this._log(this.options.uncaughtErrorLevel,e,r,s,null,!0);if(t&&g.isType(t,"error"))return void this._log(this.options.uncaughtErrorLevel,e,t,s,null,!0);var o={url:t||"",line:i};o.func=m.guessFunctionName(o.url,o.line),o.context=m.gatherContext(o.url,o.line);var a={mode:"onerror",message:r?String(r):e||"uncaught exception",url:document.location.href,stack:[o],useragent:navigator.userAgent},l=this._buildPayload(new Date,this.options.uncaughtErrorLevel,e,a,s);this._enqueuePayload(l,!0,[this.options.uncaughtErrorLevel,e,t,i,n,r])}),x.unhandledRejection=r(function(e,t){if(null==e)return void w._log(w.options.uncaughtErrorLevel,"unhandled rejection was null or undefined!",null,{},null,!1,!1);var i=e.message||(e?String(e):"unhandled rejection"),n=e._rollbarContext||t._rollbarContext||null;if(e&&g.isType(e,"error"))return void this._log(this.options.uncaughtErrorLevel,i,e,n,null,!0);var r={url:"",line:0};r.func=m.guessFunctionName(r.url,r.line),r.context=m.gatherContext(r.url,r.line);var s={mode:"unhandledrejection",message:i,url:document.location.href,stack:[r],useragent:navigator.userAgent},o=this._buildPayload(new Date,this.options.uncaughtErrorLevel,i,s,n);this._enqueuePayload(o,!0,[this.options.uncaughtErrorLevel,i,r.url,r.line,0,e,t])}),x.global=r(function(e){e=e||{};var t={startTime:e.startTime,maxItems:e.maxItems,itemsPerMinute:e.itemsPerMinute};y(!0,window._globalRollbarOptions,t),void 0!==e.maxItems&&(E=0),void 0!==e.itemsPerMinute&&(S=0)}),x.configure=r(function(e,t){var i=y(!0,{},e);y(!t,this.options,i),this.global(i)}),x.scope=r(function(e){var t=new a(this);return y(!0,t.options.payload,e),t}),x.wrap=function(e,t){try{var i;if(i=g.isType(t,"function")?t:function(){return t||{}},!g.isType(e,"function"))return e;if(e._isWrap)return e;if(!e._wrapped){e._wrapped=function(){try{return e.apply(this,arguments)}catch(t){throw"string"==typeof t&&(t=new String(t)),t.stack||(t._savedStackTrace=m.parse(t)),t._rollbarContext=i()||{},t._rollbarContext._wrappedSource=e.toString(),window._rollbarWrappedError=t,t}},e._wrapped._isWrap=!0;for(var n in e)e.hasOwnProperty(n)&&(e._wrapped[n]=e[n])}return e._wrapped}catch(t){return e}},x.loadFull=function(){},a.processPayloads=function(e){return e?void p():void s()};var _=(new Date).getTime(),E=0,S=0;e.exports={Notifier:a,setupJSON:n,topLevelNotifier:o}},function(e,t){"use strict";var i=Object.prototype.hasOwnProperty,n=Object.prototype.toString,r=function(e){return"function"==typeof Array.isArray?Array.isArray(e):"[object Array]"===n.call(e)},s=function(e){if(!e||"[object Object]"!==n.call(e))return!1;var t=i.call(e,"constructor"),r=e.constructor&&e.constructor.prototype&&i.call(e.constructor.prototype,"isPrototypeOf");if(e.constructor&&!t&&!r)return!1;var s;for(s in e);return"undefined"==typeof s||i.call(e,s)};e.exports=function e(){var t,i,n,o,a,l,h=arguments[0],u=1,c=arguments.length,p=!1;for("boolean"==typeof h?(p=h,h=arguments[1]||{},u=2):("object"!=typeof h&&"function"!=typeof h||null==h)&&(h={});u<c;++u)if(t=arguments[u],null!=t)for(i in t)n=h[i],o=t[i],h!==o&&(p&&o&&(s(o)||(a=r(o)))?(a?(a=!1,l=n&&r(n)?n:[]):l=n&&s(n)?n:{},h[i]=e(p,l,o)):"undefined"!=typeof o&&(h[i]=o));return h}},function(e,t,i){"use strict";function n(){return u}function r(){return null}function s(e){var t={};return t._stackFrame=e,t.url=e.fileName,t.line=e.lineNumber,t.func=e.functionName,t.column=e.columnNumber,t.args=e.args,t.context=r(t.url,t.line),t}function o(e){function t(){var t=[];try{t=h.parse(e)}catch(e){t=[]}for(var i=[],n=0;n<t.length;n++)i.push(new s(t[n]));return i}return{stack:t(),message:e.message,name:e.name}}function a(e){return new o(e)}function l(e){if(!e)return["Unknown error. There was no error message to display.",""];var t=e.match(c),i="(unknown)";return t&&(i=t[t.length-1],e=e.replace((t[t.length-2]||"")+i+":",""),e=e.replace(/(^[\s]+|[\s]+$)/g,"")),[i,e]}var h=i(6),u="?",c=new RegExp("^(([a-zA-Z0-9-_$ ]*): *)?(Uncaught )?([a-zA-Z0-9-_$ ]*): ");e.exports={guessFunctionName:n,guessErrorClass:l,gatherContext:r,parse:a,Stack:o,Frame:s}},function(e,t,i){var n,r,s;!function(o,a){"use strict";r=[i(7)],n=a,s="function"==typeof n?n.apply(t,r):n,!(void 0!==s&&(e.exports=s))}(this,function(e){"use strict";function t(e,t,i){if("function"==typeof Array.prototype.map)return e.map(t,i);for(var n=new Array(e.length),r=0;r<e.length;r++)n[r]=t.call(i,e[r]);return n}function i(e,t,i){if("function"==typeof Array.prototype.filter)return e.filter(t,i);for(var n=[],r=0;r<e.length;r++)t.call(i,e[r])&&n.push(e[r]);return n}var n=/(^|@)\S+\:\d+/,r=/^\s*at .*(\S+\:\d+|\(native\))/m,s=/^(eval@)?(\[native code\])?$/;return{parse:function(e){if("undefined"!=typeof e.stacktrace||"undefined"!=typeof e["opera#sourceloc"])return this.parseOpera(e);if(e.stack&&e.stack.match(r))return this.parseV8OrIE(e);if(e.stack)return this.parseFFOrSafari(e);throw new Error("Cannot parse given Error object")},extractLocation:function(e){if(e.indexOf(":")===-1)return[e];var t=e.replace(/[\(\)\s]/g,"").split(":"),i=t.pop(),n=t[t.length-1];if(!isNaN(parseFloat(n))&&isFinite(n)){var r=t.pop();return[t.join(":"),r,i]}return[t.join(":"),i,void 0]},parseV8OrIE:function(n){var s=i(n.stack.split("\n"),function(e){return!!e.match(r)},this);return t(s,function(t){t.indexOf("(eval ")>-1&&(t=t.replace(/eval code/g,"eval").replace(/(\(eval at [^\()]*)|(\)\,.*$)/g,""));var i=t.replace(/^\s+/,"").replace(/\(eval code/g,"(").split(/\s+/).slice(1),n=this.extractLocation(i.pop()),r=i.join(" ")||void 0,s="eval"===n[0]?void 0:n[0];return new e(r,void 0,s,n[1],n[2],t)},this)},parseFFOrSafari:function(n){var r=i(n.stack.split("\n"),function(e){return!e.match(s)},this);return t(r,function(t){if(t.indexOf(" > eval")>-1&&(t=t.replace(/ line (\d+)(?: > eval line \d+)* > eval\:\d+\:\d+/g,":$1")),t.indexOf("@")===-1&&t.indexOf(":")===-1)return new e(t);var i=t.split("@"),n=this.extractLocation(i.pop()),r=i.shift()||void 0;return new e(r,void 0,n[0],n[1],n[2],t)},this)},parseOpera:function(e){return!e.stacktrace||e.message.indexOf("\n")>-1&&e.message.split("\n").length>e.stacktrace.split("\n").length?this.parseOpera9(e):e.stack?this.parseOpera11(e):this.parseOpera10(e)},parseOpera9:function(t){for(var i=/Line (\d+).*script (?:in )?(\S+)/i,n=t.message.split("\n"),r=[],s=2,o=n.length;s<o;s+=2){var a=i.exec(n[s]);a&&r.push(new e(void 0,void 0,a[2],a[1],void 0,n[s]))}return r},parseOpera10:function(t){for(var i=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,n=t.stacktrace.split("\n"),r=[],s=0,o=n.length;s<o;s+=2){var a=i.exec(n[s]);a&&r.push(new e(a[3]||void 0,void 0,a[2],a[1],void 0,n[s]))}return r},parseOpera11:function(r){var s=i(r.stack.split("\n"),function(e){return!!e.match(n)&&!e.match(/^Error created at/)},this);return t(s,function(t){var i,n=t.split("@"),r=this.extractLocation(n.pop()),s=n.shift()||"",o=s.replace(/<anonymous function(: (\w+))?>/,"$2").replace(/\([^\)]*\)/g,"")||void 0;s.match(/\(([^\)]*)\)/)&&(i=s.replace(/^[^\(]+\(([^\)]*)\)$/,"$1"));var a=void 0===i||"[arguments not available]"===i?void 0:i.split(",");return new e(o,a,r[0],r[1],r[2],t)},this)}}})},function(e,t,i){var n,r,s;!function(i,o){"use strict";r=[],n=o,s="function"==typeof n?n.apply(t,r):n,!(void 0!==s&&(e.exports=s))}(this,function(){"use strict";function e(e){return!isNaN(parseFloat(e))&&isFinite(e)}function t(e,t,i,n,r,s){void 0!==e&&this.setFunctionName(e),void 0!==t&&this.setArgs(t),void 0!==i&&this.setFileName(i),void 0!==n&&this.setLineNumber(n),void 0!==r&&this.setColumnNumber(r),void 0!==s&&this.setSource(s)}return t.prototype={getFunctionName:function(){return this.functionName},setFunctionName:function(e){this.functionName=String(e)},getArgs:function(){return this.args},setArgs:function(e){if("[object Array]"!==Object.prototype.toString.call(e))throw new TypeError("Args must be an Array");this.args=e},getFileName:function(){return this.fileName},setFileName:function(e){this.fileName=String(e)},getLineNumber:function(){return this.lineNumber},setLineNumber:function(t){if(!e(t))throw new TypeError("Line Number must be a Number");this.lineNumber=Number(t)},getColumnNumber:function(){return this.columnNumber},setColumnNumber:function(t){if(!e(t))throw new TypeError("Column Number must be a Number");this.columnNumber=Number(t)},getSource:function(){return this.source},setSource:function(e){this.source=String(e)},toString:function(){var t=this.getFunctionName()||"{anonymous}",i="("+(this.getArgs()||[]).join(",")+")",n=this.getFileName()?"@"+this.getFileName():"",r=e(this.getLineNumber())?":"+this.getLineNumber():"",s=e(this.getColumnNumber())?":"+this.getColumnNumber():"";return t+i+n+r+s}},t})},function(e,t,i){"use strict";function n(e){return{}.toString.call(e).match(/\s([a-zA-Z]+)/)[1].toLowerCase()}function r(e,t){return n(e)===t}function s(e){if(!r(e,"string"))throw new Error("received invalid input");for(var t=u,i=t.parser[t.strictMode?"strict":"loose"].exec(e),n={},s=14;s--;)n[t.key[s]]=i[s]||"";return n[t.q.name]={},n[t.key[12]].replace(t.q.parser,function(e,i,r){i&&(n[t.q.name][i]=r)}),n}function o(e){var t=s(e);return""===t.anchor&&(t.source=t.source.replace("#","")),e=t.source.replace("?"+t.query,"")}function a(e,t){var i,n,s,o=r(e,"object"),l=r(e,"array"),h=[];if(o)for(i in e)e.hasOwnProperty(i)&&h.push(i);else if(l)for(s=0;s<e.length;++s)h.push(s);for(s=0;s<h.length;++s)i=h[s],n=e[i],o=r(n,"object"),l=r(n,"array"),o||l?e[i]=a(n,t):e[i]=t(i,n);return e}function l(e){return e=String(e),new Array(e.length+1).join("*")}function h(){var e=(new Date).getTime(),t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var i=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"===t?i:7&i|8).toString(16)});return t}i(9);var u={strictMode:!1,key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},c={isType:r,parseUri:s,parseUriOptions:u,redact:l,sanitizeUrl:o,traverse:a,typeName:n,uuid4:h};e.exports=c},function(e,t){!function(e){"use strict";e.console=e.console||{};for(var t,i,n=e.console,r={},s=function(){},o="memory".split(","),a="assert,clear,count,debug,dir,dirxml,error,exception,group,groupCollapsed,groupEnd,info,log,markTimeline,profile,profiles,profileEnd,show,table,time,timeEnd,timeline,timelineEnd,timeStamp,trace,warn".split(",");t=o.pop();)n[t]||(n[t]=r);for(;i=a.pop();)n[i]||(n[i]=s)}("undefined"==typeof window?this:window)},function(e,t,i){"use strict";function n(e){o=e}function r(e){this.name="Connection Error",this.message=e,this.stack=(new Error).stack}var s=i(8),o=null;r.prototype=Object.create(Error.prototype),r.prototype.constructor=r;var a={XMLHttpFactories:[function(){return new XMLHttpRequest},function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new ActiveXObject("Msxml3.XMLHTTP")},function(){return new ActiveXObject("Microsoft.XMLHTTP")}],createXMLHTTPObject:function(){var e,t=!1,i=a.XMLHttpFactories,n=i.length;for(e=0;e<n;e++)try{t=i[e]();break}catch(e){}return t},post:function(e,t,i,n){if(!s.isType(i,"object"))throw new Error("Expected an object to POST");i=o.stringify(i),n=n||function(){};var l=a.createXMLHTTPObject();if(l)try{try{var h=function(){try{if(h&&4===l.readyState){h=void 0;var e=o.parse(l.responseText);200===l.status?n(null,e):s.isType(l.status,"number")&&l.status>=400&&l.status<600?(403==l.status&&void 0,n(new Error(String(l.status)))):n(new r("XHR response had no status code (likely connection failure)"))}}catch(e){var t;t=e&&e.stack?e:new Error(e),n(t)}};l.open("POST",e,!0),l.setRequestHeader&&(l.setRequestHeader("Content-Type","application/json"),l.setRequestHeader("X-Rollbar-Access-Token",t)),l.onreadystatechange=h,l.send(i)}catch(t){if("undefined"!=typeof XDomainRequest){"http:"===window.location.href.substring(0,5)&&"https"===e.substring(0,5)&&(e="http"+e.substring(5));var u=function(){n(new r("Request timed out"))},c=function(){n(new Error("Error during request"))},p=function(){n(null,o.parse(l.responseText))};l=new XDomainRequest,l.onprogress=function(){},l.ontimeout=u,l.onerror=c,l.onload=p,l.open("POST",e,!0),l.send(i)}}}catch(e){n(e)}}};e.exports={XHR:a,setupJSON:n,ConnectionError:r}}])})},{}],41:[function(e,t,i){var n=e("./OpenLayers.js");t.exports=n.Class(n.Control,{currentEditIndex:0,undoFeatures:[],redoFeatures:[],isEditMulty:!1,initialize:function(e){e instanceof Array||(e=[e]);for(var t=0;t<e.length;t++)e[t].events.register("sketchstarted",this,this.onSketchStarted),e[t].events.register("featureadded",this,this.onInsert),e[t].events.register("beforefeatureremoved",this,this.onDelete),e[t].events.register("beforefeaturemodified",this,this.onUpdate),e[t].events.register("afterfeaturemodified",this,this.onUpdateCompleted)},onEdit:function(e,t,i){void 0==i&&(i=e.layer.name),void 0==this.undoFeatures[this.currentEditIndex]&&(this.undoFeatures[this.currentEditIndex]={},this.undoFeatures[this.currentEditIndex][i]={Insert:[],Update:[],Delete:[]}),void 0==e.fid&&(e.fid=e.id),this.undoFeatures[this.currentEditIndex][i][t].push(e),this.redoFeatures.splice(0,this.redoFeatures.length)},onSketchStarted:function(e){return this.increaseEditIndex(),!0},onInsert:function(e){var t=e.feature.clone();return void 0==e.feature.fid&&(e.feature.fid=e.feature.id),t.fid=e.feature.fid,t.state=e.feature.state,t.layer=e.feature.layer,this.onEdit(t,"Insert",t.layer.name),!0},onDelete:function(e){return this.increaseEditIndex(),this.onEdit(e.feature,"Delete",e.feature.layer.name),!0},onUpdate:function(e){this.increaseEditIndex();var t=e.feature.clone();t.fid=e.feature.fid,t.state=e.feature.state,t.layer=e.feature.layer,this.onEdit(t,"Update",t.layer.name)},onUpdateCompleted:function(e){e.modified||this.getUndoData()},increaseEditIndex:function(){this.currentEditIndex<this.undoFeatures.length&&(this.currentEditIndex+=1)},getUndoData:function(){var e=this.undoFeatures.pop();return e&&(this.currentEditIndex-=1),e},getRedoData:function(){var e=this.redoFeatures.pop();return e&&(this.currentEditIndex+=1),e},resetEditIndex:function(){this.currentEditIndex=0,this.undoFeatures.splice(0,this.undoFeatures.length),this.redoFeatures.splice(0,this.redoFeatures.length)},undo:function(){var e=this.getUndoData();if(e){for(var t in e){var i=this.map.getLayersByName(t)[0];for(var r in e[t])for(var s=0;s<e[t][r].length;s++){var o=e[t][r][s];switch(r){case"Insert":var a=i.getFeatureByFid(o.fid);i.eraseFeatures(a),n.Util.removeItem(i.features,a);break;case"Delete":i.addFeatures([o],{silent:!0});break;case"Update":var l=i.getFeatureByFid(o.fid);i.eraseFeatures(l),n.Util.removeItem(i.features,l),i.addFeatures([o],{silent:!0}),e[t][r][s]=l}}}this.redoFeatures.push(e)}},redo:function(){var e=this.getRedoData();if(e){for(var t in e){var i=this.map.getLayersByName(t)[0];for(var r in e[t])for(var s=0;s<e[t][r].length;s++){var o=e[t][r][s];switch(r){case"Insert":i.addFeatures([o],{silent:!0});break;case"Delete":var a=i.getFeatureByFid(o.fid);i.eraseFeatures(a),n.Util.removeItem(i.features,a);break;case"Update":var l=i.getFeatureByFid(o.fid);i.eraseFeatures(l),n.Util.removeItem(i.features,l),i.addFeatures([o],{silent:!0}),e[t][r][s]=l}}}this.undoFeatures.push(e)}},CLASS_NAME:"OpenLayers.Control.UndoRedo"})},{"./OpenLayers.js":42}],42:[function(require,module,exports){(function(global){var $jscomp={scope:{}};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,i){if(i.get||i.set)throw new TypeError("ES3 does not support getters and setters.");e!=Array.prototype&&e!=Object.prototype&&(e[t]=i.value)},$jscomp.getGlobal=function(e){return"undefined"!=typeof window&&window===e?e:"undefined"!=typeof global&&null!=global?global:e},$jscomp.global=$jscomp.getGlobal(this),$jscomp.polyfill=function(e,t,i,n){if(t){for(i=$jscomp.global,e=e.split("."),n=0;n<e.length-1;n++){var r=e[n];r in i||(i[r]={}),i=i[r]}e=e[e.length-1],n=i[e],t=t(n),t!=n&&null!=t&&$jscomp.defineProperty(i,e,{configurable:!0,writable:!0,value:t})}},$jscomp.polyfill("Array.prototype.fill",function(e){return e?e:function(e,t,i){var n=this.length||0;for(0>t&&(t=Math.max(0,n+t)),(null==i||i>n)&&(i=n),i=Number(i),0>i&&(i=Math.max(0,n+i)),t=Number(t||0);t<i;t++)this[t]=e;return this}},"es6-impl","es3"),$jscomp.checkStringArgs=function(e,t,i){if(null==e)throw new TypeError("The 'this' value for String.prototype."+i+" must not be null or undefined");if(t instanceof RegExp)throw new TypeError("First argument to String.prototype."+i+" must not be a regular expression");return e+""},$jscomp.polyfill("String.prototype.startsWith",function(e){return e?e:function(e,t){var i=$jscomp.checkStringArgs(this,e,"startsWith");e+="";for(var n=i.length,r=e.length,s=Math.max(0,Math.min(0|t,i.length)),o=0;o<r&&s<n;)if(i[s++]!=e[o++])return!1;return o>=r}},"es6-impl","es3");var OpenLayers={VERSION_NUMBER:"Release 2.14 dev",singleFile:!0,_getScriptLocation:function(){for(var e,t=/(^|(.*?\/))(OpenLayers[^\/]*?\.js)(\?|$)/,i=document.getElementsByTagName("script"),n="",r=0,s=i.length;r<s;r++)if((e=i[r].getAttribute("src"))&&(e=e.match(t))){n=e[1];break}return function(){return n}}(),ImgPath:""};OpenLayers.Class=function(){var e=arguments.length,t=arguments[0],i=arguments[e-1],n="function"==typeof i.initialize?i.initialize:function(){t.prototype.initialize.apply(this,arguments)};return 1<e?(e=[n,t].concat(Array.prototype.slice.call(arguments).slice(1,e-1),i),OpenLayers.inherit.apply(null,e)):n.prototype=i,n},OpenLayers.inherit=function(e,t){var i=function(){};i.prototype=t.prototype,e.prototype=new i;var n,r,i=2;for(n=arguments.length;i<n;i++)r=arguments[i],"function"==typeof r&&(r=r.prototype),OpenLayers.Util.extend(e.prototype,r)},OpenLayers.Util=OpenLayers.Util||{},OpenLayers.Util.extend=function(e,t){if(e=e||{},t){for(var i in t){var n=t[i];void 0!==n&&(e[i]=n)}"function"==typeof window.Event&&t instanceof window.Event||!t.hasOwnProperty||!t.hasOwnProperty("toString")||(e.toString=t.toString)}return e},OpenLayers.String={startsWith:function(e,t){return 0==e.indexOf(t)},contains:function(e,t){return-1!=e.indexOf(t)},trim:function(e){return e.replace(/^\s\s*/,"").replace(/\s\s*$/,"")},camelize:function(e){e=e.split("-");for(var t=e[0],i=1,n=e.length;i<n;i++)var r=e[i],t=t+(r.charAt(0).toUpperCase()+r.substring(1));return t},format:function(e,t,i){return t||(t=window),e.replace(OpenLayers.String.tokenRegEx,function(e,n){for(var r,s=n.split(/\.+/),o=0;o<s.length&&(0==o&&(r=t),void 0!==r);o++)r=r[s[o]];return"function"==typeof r&&(r=i?r.apply(null,i):r()),"undefined"==typeof r?"undefined":r})},tokenRegEx:/\$\{([\w.]+?)\}/g,numberRegEx:/^([+-]?)(?=\d|\.\d)\d*(\.\d*)?([Ee]([+-]?\d+))?$/,isNumeric:function(e){return OpenLayers.String.numberRegEx.test(e)},numericIf:function(e,t){var i=e;return!0===t&&null!=e&&e.replace&&(e=e.replace(/^\s*|\s*$/g,"")),OpenLayers.String.isNumeric(e)?parseFloat(e):i;
}},OpenLayers.Number={decimalSeparator:".",thousandsSeparator:",",limitSigDigs:function(e,t){var i=0;return 0<t&&(i=parseFloat(e.toPrecision(t))),i},format:function(e,t,i,n){t="undefined"!=typeof t?t:0,i="undefined"!=typeof i?i:OpenLayers.Number.thousandsSeparator,n="undefined"!=typeof n?n:OpenLayers.Number.decimalSeparator,null!=t&&(e=parseFloat(e.toFixed(t)));var r=e.toString().split(".");if(1==r.length&&null==t&&(t=0),e=r[0],i)for(var s=/(-?[0-9]+)([0-9]{3})/;s.test(e);)e=e.replace(s,"$1"+i+"$2");return 0==t?t=e:(i=1<r.length?r[1]:"0",null!=t&&(i+=Array(t-i.length+1).join("0")),t=e+n+i),t},zeroPad:function(e,t,i){for(e=e.toString(i||10);e.length<t;)e="0"+e;return e}},OpenLayers.Function={bind:function(e,t){var i=Array.prototype.slice.call(arguments,2);return function(){var n=i.concat(Array.prototype.slice.call(arguments,0));return e.apply(t,n)}},bindAsEventListener:function(e,t){return function(i){return e.call(t,i||window.event)}},False:function(){return!1},True:function(){return!0},Void:function(){}},OpenLayers.Array={filter:function(e,t,i){var n=[];if(Array.prototype.filter)n=e.filter(t,i);else{var r=e.length;if("function"!=typeof t)throw new TypeError;for(var s=0;s<r;s++)if(s in e){var o=e[s];t.call(i,o,s,e)&&n.push(o)}}return n}},OpenLayers.Bounds=OpenLayers.Class({left:null,bottom:null,right:null,top:null,centerLonLat:null,initialize:function(e,t,i,n){OpenLayers.Util.isArray(e)&&(n=e[3],i=e[2],t=e[1],e=e[0]),null!=e&&(this.left=OpenLayers.Util.toFloat(e)),null!=t&&(this.bottom=OpenLayers.Util.toFloat(t)),null!=i&&(this.right=OpenLayers.Util.toFloat(i)),null!=n&&(this.top=OpenLayers.Util.toFloat(n))},clone:function(){return new OpenLayers.Bounds(this.left,this.bottom,this.right,this.top)},equals:function(e){var t=!1;return null!=e&&(t=this.left==e.left&&this.right==e.right&&this.top==e.top&&this.bottom==e.bottom),t},toString:function(){return[this.left,this.bottom,this.right,this.top].join()},toArray:function(e){return!0===e?[this.bottom,this.left,this.top,this.right]:[this.left,this.bottom,this.right,this.top]},toBBOX:function(e,t){null==e&&(e=6);var i=Math.pow(10,e),n=Math.round(this.left*i)/i,r=Math.round(this.bottom*i)/i,s=Math.round(this.right*i)/i,i=Math.round(this.top*i)/i;return!0===t?r+","+n+","+i+","+s:n+","+r+","+s+","+i},toGeometry:function(){return new OpenLayers.Geometry.Polygon([new OpenLayers.Geometry.LinearRing([new OpenLayers.Geometry.Point(this.left,this.bottom),new OpenLayers.Geometry.Point(this.right,this.bottom),new OpenLayers.Geometry.Point(this.right,this.top),new OpenLayers.Geometry.Point(this.left,this.top)])])},getWidth:function(){return this.right-this.left},getHeight:function(){return this.top-this.bottom},getSize:function(){return new OpenLayers.Size(this.getWidth(),this.getHeight())},getCenterPixel:function(){return new OpenLayers.Pixel((this.left+this.right)/2,(this.bottom+this.top)/2)},getCenterLonLat:function(){return this.centerLonLat||(this.centerLonLat=new OpenLayers.LonLat((this.left+this.right)/2,(this.bottom+this.top)/2)),this.centerLonLat},scale:function(e,t){null==t&&(t=this.getCenterLonLat());var i,n;return"OpenLayers.LonLat"==t.CLASS_NAME?(i=t.lon,n=t.lat):(i=t.x,n=t.y),new OpenLayers.Bounds((this.left-i)*e+i,(this.bottom-n)*e+n,(this.right-i)*e+i,(this.top-n)*e+n)},add:function(e,t){if(null==e||null==t)throw new TypeError("Bounds.add cannot receive null values");return new OpenLayers.Bounds(this.left+e,this.bottom+t,this.right+e,this.top+t)},extend:function(e){if(e)switch(e.CLASS_NAME){case"OpenLayers.LonLat":this.extendXY(e.lon,e.lat);break;case"OpenLayers.Geometry.Point":this.extendXY(e.x,e.y);break;case"OpenLayers.Bounds":this.centerLonLat=null,(null==this.left||e.left<this.left)&&(this.left=e.left),(null==this.bottom||e.bottom<this.bottom)&&(this.bottom=e.bottom),(null==this.right||e.right>this.right)&&(this.right=e.right),(null==this.top||e.top>this.top)&&(this.top=e.top)}},extendXY:function(e,t){this.centerLonLat=null,(null==this.left||e<this.left)&&(this.left=e),(null==this.bottom||t<this.bottom)&&(this.bottom=t),(null==this.right||e>this.right)&&(this.right=e),(null==this.top||t>this.top)&&(this.top=t)},containsLonLat:function(e,t){"boolean"==typeof t&&(t={inclusive:t}),t=t||{};var i=this.contains(e.lon,e.lat,t.inclusive),n=t.worldBounds;return n&&!i&&(i=n.getWidth(),i=this.containsLonLat({lon:e.lon-Math.round((e.lon-(n.left+n.right)/2)/i)*i,lat:e.lat},{inclusive:t.inclusive})),i},containsPixel:function(e,t){return this.contains(e.x,e.y,t)},contains:function(e,t,i){return null==i&&(i=!0),null!=e&&null!=t&&(e=OpenLayers.Util.toFloat(e),t=OpenLayers.Util.toFloat(t),i?e>=this.left&&e<=this.right&&t>=this.bottom&&t<=this.top:e>this.left&&e<this.right&&t>this.bottom&&t<this.top)},intersectsBounds:function(e,t){if("boolean"==typeof t&&(t={inclusive:t}),t=t||{},t.worldBounds){var i=this.wrapDateLine(t.worldBounds);e=e.wrapDateLine(t.worldBounds)}else i=this;null==t.inclusive&&(t.inclusive=!0);var n=!1,r=i.left==e.right||i.right==e.left||i.top==e.bottom||i.bottom==e.top;if(t.inclusive||!r)var n=e.top>=i.bottom&&e.top<=i.top||i.top>e.bottom&&i.top<e.top,r=e.left>=i.left&&e.left<=i.right||i.left>=e.left&&i.left<=e.right,s=e.right>=i.left&&e.right<=i.right||i.right>=e.left&&i.right<=e.right,n=(e.bottom>=i.bottom&&e.bottom<=i.top||i.bottom>=e.bottom&&i.bottom<=e.top||n)&&(r||s);if(t.worldBounds&&!n){var o=t.worldBounds,r=o.getWidth(),s=!o.containsBounds(i),o=!o.containsBounds(e);s&&!o?(e=e.add(-r,0),n=i.intersectsBounds(e,{inclusive:t.inclusive})):o&&!s&&(i=i.add(-r,0),n=e.intersectsBounds(i,{inclusive:t.inclusive}))}return n},containsBounds:function(e,t,i){null==t&&(t=!1),null==i&&(i=!0);var n=this.contains(e.left,e.bottom,i),r=this.contains(e.right,e.bottom,i),s=this.contains(e.left,e.top,i);return e=this.contains(e.right,e.top,i),t?n||r||s||e:n&&r&&s&&e},determineQuadrant:function(e){var t="",i=this.getCenterLonLat(),t=t+(e.lat<i.lat?"b":"t");return t+=e.lon<i.lon?"l":"r"},transform:function(e,t){this.centerLonLat=null;var i=OpenLayers.Projection.transform({x:this.left,y:this.bottom},e,t),n=OpenLayers.Projection.transform({x:this.right,y:this.bottom},e,t),r=OpenLayers.Projection.transform({x:this.left,y:this.top},e,t),s=OpenLayers.Projection.transform({x:this.right,y:this.top},e,t);return this.left=Math.min(i.x,r.x),this.bottom=Math.min(i.y,n.y),this.right=Math.max(n.x,s.x),this.top=Math.max(r.y,s.y),this},wrapDateLine:function(e,t){t=t||{};var i=t.leftTolerance||0,n=t.rightTolerance||0,r=this.clone();if(e){for(var s=e.getWidth();r.left<e.left&&r.right-n<=e.left;)r=r.add(s,0);for(;r.left+i>=e.right&&r.right>e.right;)r=r.add(-s,0);i=r.left+i,i<e.right&&i>e.left&&r.right-n>e.right&&(r=r.add(-s,0))}return r},CLASS_NAME:"OpenLayers.Bounds"}),OpenLayers.Bounds.fromString=function(e,t){var i=e.split(",");return OpenLayers.Bounds.fromArray(i,t)},OpenLayers.Bounds.fromArray=function(e,t){return!0===t?new OpenLayers.Bounds(e[1],e[0],e[3],e[2]):new OpenLayers.Bounds(e[0],e[1],e[2],e[3])},OpenLayers.Bounds.fromSize=function(e){return new OpenLayers.Bounds(0,e.h,e.w,0)},OpenLayers.Bounds.oppositeQuadrant=function(e){var t;return t=""+("t"==e.charAt(0)?"b":"t"),t+="l"==e.charAt(1)?"r":"l"},OpenLayers.Element={visible:function(e){return"none"!=OpenLayers.Util.getElement(e).style.display},toggle:function(){for(var e=0,t=arguments.length;e<t;e++){var i=OpenLayers.Util.getElement(arguments[e]),n=OpenLayers.Element.visible(i)?"none":"";i.style.display=n}},remove:function(e){e=OpenLayers.Util.getElement(e),e.parentNode.removeChild(e)},getHeight:function(e){return e=OpenLayers.Util.getElement(e),e.offsetHeight},hasClass:function(e,t){var i=e.className;return!!i&&new RegExp("(^|\\s)"+t+"(\\s|$)").test(i)},addClass:function(e,t){return OpenLayers.Element.hasClass(e,t)||(e.className+=(e.className?" ":"")+t),e},removeClass:function(e,t){var i=e.className;return i&&(e.className=OpenLayers.String.trim(i.replace(new RegExp("(^|\\s+)"+t+"(\\s+|$)")," "))),e},toggleClass:function(e,t){return OpenLayers.Element.hasClass(e,t)?OpenLayers.Element.removeClass(e,t):OpenLayers.Element.addClass(e,t),e},getStyle:function(e,t){e=OpenLayers.Util.getElement(e);var i=null;if(e&&e.style){i=e.style[OpenLayers.String.camelize(t)],i||(document.defaultView&&document.defaultView.getComputedStyle?i=(i=document.defaultView.getComputedStyle(e,null))?i.getPropertyValue(t):null:e.currentStyle&&(i=e.currentStyle[OpenLayers.String.camelize(t)]));var n=["left","top","right","bottom"];window.opera&&-1!=OpenLayers.Util.indexOf(n,t)&&"static"==OpenLayers.Element.getStyle(e,"position")&&(i="auto")}return"auto"==i?null:i}},OpenLayers.LonLat=OpenLayers.Class({lon:0,lat:0,initialize:function(e,t){OpenLayers.Util.isArray(e)&&(t=e[1],e=e[0]),this.lon=OpenLayers.Util.toFloat(e),this.lat=OpenLayers.Util.toFloat(t)},toString:function(){return"lon="+this.lon+",lat="+this.lat},toShortString:function(){return this.lon+", "+this.lat},clone:function(){return new OpenLayers.LonLat(this.lon,this.lat)},add:function(e,t){if(null==e||null==t)throw new TypeError("LonLat.add cannot receive null values");return new OpenLayers.LonLat(this.lon+OpenLayers.Util.toFloat(e),this.lat+OpenLayers.Util.toFloat(t))},equals:function(e){var t=!1;return null!=e&&(t=this.lon==e.lon&&this.lat==e.lat||isNaN(this.lon)&&isNaN(this.lat)&&isNaN(e.lon)&&isNaN(e.lat)),t},transform:function(e,t){var i=OpenLayers.Projection.transform({x:this.lon,y:this.lat},e,t);return this.lon=i.x,this.lat=i.y,this},wrapDateLine:function(e){var t=this.clone();if(e){for(;t.lon<e.left;)t.lon+=e.getWidth();for(;t.lon>e.right;)t.lon-=e.getWidth()}return t},CLASS_NAME:"OpenLayers.LonLat"}),OpenLayers.LonLat.fromString=function(e){return e=e.split(","),new OpenLayers.LonLat(e[0],e[1])},OpenLayers.LonLat.fromArray=function(e){var t=OpenLayers.Util.isArray(e);return new OpenLayers.LonLat(t&&e[0],t&&e[1])},OpenLayers.Pixel=OpenLayers.Class({x:0,y:0,initialize:function(e,t){this.x=parseFloat(e),this.y=parseFloat(t)},toString:function(){return"x="+this.x+",y="+this.y},clone:function(){return new OpenLayers.Pixel(this.x,this.y)},equals:function(e){var t=!1;return null!=e&&(t=this.x==e.x&&this.y==e.y||isNaN(this.x)&&isNaN(this.y)&&isNaN(e.x)&&isNaN(e.y)),t},distanceTo:function(e){return Math.sqrt(Math.pow(this.x-e.x,2)+Math.pow(this.y-e.y,2))},add:function(e,t){if(null==e||null==t)throw new TypeError("Pixel.add cannot receive null values");return new OpenLayers.Pixel(this.x+e,this.y+t)},offset:function(e){var t=this.clone();return e&&(t=this.add(e.x,e.y)),t},CLASS_NAME:"OpenLayers.Pixel"}),OpenLayers.Size=OpenLayers.Class({w:0,h:0,initialize:function(e,t){this.w=parseFloat(e),this.h=parseFloat(t)},toString:function(){return"w="+this.w+",h="+this.h},clone:function(){return new OpenLayers.Size(this.w,this.h)},equals:function(e){var t=!1;return null!=e&&(t=this.w==e.w&&this.h==e.h||isNaN(this.w)&&isNaN(this.h)&&isNaN(e.w)&&isNaN(e.h)),t},CLASS_NAME:"OpenLayers.Size"}),OpenLayers.Console={log:function(){},debug:function(){},info:function(){},warn:function(){},error:function(){},userError:function(e){alert(e)},assert:function(){},dir:function(){},dirxml:function(){},trace:function(){},group:function(){},groupEnd:function(){},time:function(){},timeEnd:function(){},profile:function(){},profileEnd:function(){},count:function(){},CLASS_NAME:"OpenLayers.Console"},function(){for(var e=document.getElementsByTagName("script"),t=0,i=e.length;t<i;++t)if(-1!=e[t].src.indexOf("firebug.js")&&console){OpenLayers.Util.extend(OpenLayers.Console,console);break}}(),OpenLayers.Lang={code:null,defaultCode:"en",getCode:function(){return OpenLayers.Lang.code||OpenLayers.Lang.setCode(),OpenLayers.Lang.code},setCode:function(e){var t;if(e||(e="msie"==OpenLayers.BROWSER_NAME?navigator.userLanguage:navigator.language),e=e.split("-"),e[0]=e[0].toLowerCase(),"object"==typeof OpenLayers.Lang[e[0]]&&(t=e[0]),e[1]){var i=e[0]+"-"+e[1].toUpperCase();"object"==typeof OpenLayers.Lang[i]&&(t=i)}t||(OpenLayers.Console.warn("Failed to find OpenLayers.Lang."+e.join("-")+" dictionary, falling back to default language"),t=OpenLayers.Lang.defaultCode),OpenLayers.Lang.code=t},translate:function(e,t){var i=OpenLayers.Lang[OpenLayers.Lang.getCode()];return(i=i&&i[e])||(i=e),t&&(i=OpenLayers.String.format(i,t)),i}},OpenLayers.i18n=OpenLayers.Lang.translate,OpenLayers.Util=OpenLayers.Util||{},OpenLayers.Util.getElement=function(){for(var e=[],t=0,i=arguments.length;t<i;t++){var n=arguments[t];if("string"==typeof n&&(n=document.getElementById(n)),1==arguments.length)return n;e.push(n)}return e},OpenLayers.Util.isElement=function(e){return!(!e||1!==e.nodeType)},OpenLayers.Util.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)},OpenLayers.Util.removeItem=function(e,t){for(var i=e.length-1;0<=i;i--)e[i]==t&&e.splice(i,1);return e},OpenLayers.Util.indexOf=function(e,t){if("function"==typeof e.indexOf)return e.indexOf(t);for(var i=0,n=e.length;i<n;i++)if(e[i]==t)return i;return-1},OpenLayers.Util.dotless=/\./g,OpenLayers.Util.modifyDOMElement=function(e,t,i,n,r,s,o,a){t&&(e.id=t.replace(OpenLayers.Util.dotless,"_")),i&&(e.style.left=i.x+"px",e.style.top=i.y+"px"),n&&(e.style.width=n.w+"px",e.style.height=n.h+"px"),r&&(e.style.position=r),s&&(e.style.border=s),o&&(e.style.overflow=o),0<=parseFloat(a)&&1>parseFloat(a)?(e.style.filter="alpha(opacity="+100*a+")",e.style.opacity=a):1==parseFloat(a)&&(e.style.filter="",e.style.opacity="")},OpenLayers.Util.createDiv=function(e,t,i,n,r,s,o,a){var l=document.createElement("div");return n&&(l.style.backgroundImage="url("+n+")"),e||(e=OpenLayers.Util.createUniqueID("OpenLayersDiv")),r||(r="absolute"),OpenLayers.Util.modifyDOMElement(l,e,t,i,r,s,o,a),l},OpenLayers.Util.createImage=function(e,t,i,n,r,s,o,a){var l=document.createElement("img");return e||(e=OpenLayers.Util.createUniqueID("OpenLayersDiv")),r||(r="relative"),OpenLayers.Util.modifyDOMElement(l,e,t,i,r,s,null,o),a&&(t=function(){l.style.display="",OpenLayers.Event.stopObservingElement(l)},l.style.display="none",OpenLayers.Event.observe(l,"load",t),OpenLayers.Event.observe(l,"error",t)),l.style.alt=e,l.galleryImg="no",n&&(l.src=n),l},OpenLayers.IMAGE_RELOAD_ATTEMPTS=0,OpenLayers.Util.alphaHackNeeded=null,OpenLayers.Util.alphaHack=function(){if(null==OpenLayers.Util.alphaHackNeeded){var e=navigator.appVersion.split("MSIE"),e=parseFloat(e[1]),t=!1;try{t=!!document.body.filters}catch(e){}OpenLayers.Util.alphaHackNeeded=t&&5.5<=e&&7>e}return OpenLayers.Util.alphaHackNeeded},OpenLayers.Util.modifyAlphaImageDiv=function(e,t,i,n,r,s,o,a,l){OpenLayers.Util.modifyDOMElement(e,t,i,n,s,null,null,l),t=e.childNodes[0],r&&(t.src=r),OpenLayers.Util.modifyDOMElement(t,e.id+"_innerImage",null,n,"relative",o),OpenLayers.Util.alphaHack()&&("none"!=e.style.display&&(e.style.display="inline-block"),null==a&&(a="scale"),e.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+t.src+"', sizingMethod='"+a+"')",0<=parseFloat(e.style.opacity)&&1>parseFloat(e.style.opacity)&&(e.style.filter+=" alpha(opacity="+100*e.style.opacity+")"),t.style.filter="alpha(opacity=0)")},OpenLayers.Util.createAlphaImageDiv=function(e,t,i,n,r,s,o,a,l){var h=OpenLayers.Util.createDiv();return l=OpenLayers.Util.createImage(null,null,null,null,null,null,null,l),l.className="olAlphaImg",h.appendChild(l),OpenLayers.Util.modifyAlphaImageDiv(h,e,t,i,n,r,s,o,a),h},OpenLayers.Util.upperCaseObject=function(e){var t,i={};for(t in e)i[t.toUpperCase()]=e[t];return i},OpenLayers.Util.applyDefaults=function(e,t){e=e||{};var i,n="function"==typeof window.Event&&t instanceof window.Event;for(i in t)(void 0===e[i]||!n&&t.hasOwnProperty&&t.hasOwnProperty(i)&&!e.hasOwnProperty(i))&&(e[i]=t[i]);return!n&&t&&t.hasOwnProperty&&t.hasOwnProperty("toString")&&!e.hasOwnProperty("toString")&&(e.toString=t.toString),e},OpenLayers.Util.getParameterString=function(e){var t,i=[];for(t in e){var n=e[t];if(null!=n&&"function"!=typeof n){if("object"==typeof n&&n.constructor==Array){for(var r,s=[],o=0,a=n.length;o<a;o++)r=n[o],s.push(encodeURIComponent(null===r||void 0===r?"":r));n=s.join(",")}else n=encodeURIComponent(n);i.push(encodeURIComponent(t)+"="+n)}}return i.join("&")},OpenLayers.Util.urlAppend=function(e,t){var i=e;if(t)var n=(e+" ").split(/[?&]/),i=i+(" "===n.pop()?t:n.length?"&"+t:"?"+t);return i},OpenLayers.Util.getImagesLocation=function(){return OpenLayers.ImgPath||OpenLayers._getScriptLocation()+"img/"},OpenLayers.Util.getImageLocation=function(e){return OpenLayers.Util.getImagesLocation()+e},OpenLayers.Util.Try=function(){for(var e=null,t=0,i=arguments.length;t<i;t++){var n=arguments[t];try{e=n();break}catch(e){}}return e},OpenLayers.Util.getXmlNodeValue=function(e){var t=null;return OpenLayers.Util.Try(function(){t=e.text,t||(t=e.textContent),t||(t=e.firstChild.nodeValue)},function(){t=e.textContent}),t},OpenLayers.Util.mouseLeft=function(e,t){for(var i=e.relatedTarget?e.relatedTarget:e.toElement;i!=t&&null!=i;)i=i.parentNode;return i!=t},OpenLayers.Util.DEFAULT_PRECISION=14,OpenLayers.Util.toFloat=function(e,t){return null==t&&(t=OpenLayers.Util.DEFAULT_PRECISION),"number"!=typeof e&&(e=parseFloat(e)),0===t?e:parseFloat(e.toPrecision(t))},OpenLayers.Util.rad=function(e){return e*Math.PI/180},OpenLayers.Util.deg=function(e){return 180*e/Math.PI},OpenLayers.Util.VincentyConstants={a:6378137,b:6356752.3142,f:1/298.257223563},OpenLayers.Util.distVincenty=function(e,t){for(var i=OpenLayers.Util.VincentyConstants,n=i.a,r=i.b,i=i.f,s=OpenLayers.Util.rad(t.lon-e.lon),o=Math.atan((1-i)*Math.tan(OpenLayers.Util.rad(e.lat))),a=Math.atan((1-i)*Math.tan(OpenLayers.Util.rad(t.lat))),l=Math.sin(o),o=Math.cos(o),h=Math.sin(a),a=Math.cos(a),u=s,c=2*Math.PI,p=20;1e-12<Math.abs(u-c)&&0<--p;){var d=Math.sin(u),f=Math.cos(u),y=Math.sqrt(a*d*a*d+(o*h-l*a*f)*(o*h-l*a*f));if(0==y)return 0;var f=l*h+o*a*f,m=Math.atan2(y,f),g=Math.asin(o*a*d/y),v=Math.cos(g)*Math.cos(g),d=f-2*l*h/v,L=i/16*v*(4+i*(4-3*v)),c=u,u=s+(1-L)*i*Math.sin(g)*(m+L*y*(d+L*f*(-1+2*d*d)))}return 0==p?NaN:(n=v*(n*n-r*r)/(r*r),i=n/1024*(256+n*(-128+n*(74-47*n))),(r*(1+n/16384*(4096+n*(-768+n*(320-175*n))))*(m-i*y*(d+i/4*(f*(-1+2*d*d)-i/6*d*(-3+4*y*y)*(-3+4*d*d))))).toFixed(3)/1e3)},OpenLayers.Util.destinationVincenty=function(e,t,i){var n=OpenLayers.Util,r=n.VincentyConstants,s=r.a,o=r.b,r=r.f,a=e.lon,l=e.lat;e=n.rad(t),t=Math.sin(e),e=Math.cos(e);for(var h=(1-r)*Math.tan(n.rad(l)),l=1/Math.sqrt(1+h*h),u=h*l,c=Math.atan2(h,e),h=l*t,p=1-h*h,s=p*(s*s-o*o)/(o*o),d=1+s/16384*(4096+s*(-768+s*(320-175*s))),f=s/1024*(256+s*(-128+s*(74-47*s))),s=i/(o*d),y=2*Math.PI;1e-12<Math.abs(s-y);)var m=Math.cos(2*c+s),g=Math.sin(s),v=Math.cos(s),L=f*g*(m+f/4*(v*(-1+2*m*m)-f/6*m*(-3+4*g*g)*(-3+4*m*m))),y=s,s=i/(o*d)+L;return i=u*g-l*v*e,i=Math.atan2(u*v+l*g*e,(1-r)*Math.sqrt(h*h+i*i)),o=r/16*p*(4+r*(4-3*p)),new OpenLayers.LonLat(a+n.deg(Math.atan2(g*t,l*v-u*g*e)-(1-o)*r*h*(s+o*g*(m+o*v*(-1+2*m*m)))),n.deg(i))},OpenLayers.Util.getParameters=function(e,t){t=t||{},e=null===e||void 0===e?window.location.href:e;var i="";if(OpenLayers.String.contains(e,"?"))var n=e.indexOf("?")+1,i=OpenLayers.String.contains(e,"#")?e.indexOf("#"):e.length,i=e.substring(n,i);for(var n={},i=i.split(/[&;]/),r=0,s=i.length;r<s;++r){var o=i[r].split("=");if(o[0]){var a=o[0];try{a=decodeURIComponent(a)}catch(e){a=unescape(a)}o=(o[1]||"").replace(/\+/g," ");try{o=decodeURIComponent(o)}catch(e){o=unescape(o)}!1!==t.splitArgs&&(o=o.split(",")),1==o.length&&(o=o[0]),n[a]=o}}return n},OpenLayers.Util.lastSeqID=0,OpenLayers.Util.createUniqueID=function(e){return e=null==e?"id_":e.replace(OpenLayers.Util.dotless,"_"),OpenLayers.Util.lastSeqID+=1,e+OpenLayers.Util.lastSeqID},OpenLayers.INCHES_PER_UNIT={inches:1,ft:12,mi:63360,m:39.37,km:39370,dd:4374754,yd:36},OpenLayers.INCHES_PER_UNIT.in=OpenLayers.INCHES_PER_UNIT.inches,OpenLayers.INCHES_PER_UNIT.degrees=OpenLayers.INCHES_PER_UNIT.dd,OpenLayers.INCHES_PER_UNIT.nmi=1852*OpenLayers.INCHES_PER_UNIT.m,OpenLayers.METERS_PER_INCH=.0254000508001016,OpenLayers.Util.extend(OpenLayers.INCHES_PER_UNIT,{Inch:OpenLayers.INCHES_PER_UNIT.inches,Meter:1/OpenLayers.METERS_PER_INCH,Foot:.3048006096012192/OpenLayers.METERS_PER_INCH,IFoot:.3048/OpenLayers.METERS_PER_INCH,ClarkeFoot:.3047972651151/OpenLayers.METERS_PER_INCH,SearsFoot:.30479947153867626/OpenLayers.METERS_PER_INCH,GoldCoastFoot:.3047997101815088/OpenLayers.METERS_PER_INCH,IInch:.0254/OpenLayers.METERS_PER_INCH,MicroInch:254e-7/OpenLayers.METERS_PER_INCH,Mil:2.54e-8/OpenLayers.METERS_PER_INCH,Centimeter:.01/OpenLayers.METERS_PER_INCH,Kilometer:1e3/OpenLayers.METERS_PER_INCH,Yard:.9144018288036576/OpenLayers.METERS_PER_INCH,SearsYard:.914398414616029/OpenLayers.METERS_PER_INCH,IndianYard:.9143985307444408/OpenLayers.METERS_PER_INCH,IndianYd37:.91439523/OpenLayers.METERS_PER_INCH,IndianYd62:.9143988/OpenLayers.METERS_PER_INCH,IndianYd75:.9143985/OpenLayers.METERS_PER_INCH,IndianFoot:.30479951/OpenLayers.METERS_PER_INCH,IndianFt37:.30479841/OpenLayers.METERS_PER_INCH,IndianFt62:.3047996/OpenLayers.METERS_PER_INCH,IndianFt75:.3047995/OpenLayers.METERS_PER_INCH,Mile:1609.3472186944373/OpenLayers.METERS_PER_INCH,IYard:.9144/OpenLayers.METERS_PER_INCH,IMile:1609.344/OpenLayers.METERS_PER_INCH,NautM:1852/OpenLayers.METERS_PER_INCH,"Lat-66":110943.31648893273/OpenLayers.METERS_PER_INCH,"Lat-83":110946.25736872235/OpenLayers.METERS_PER_INCH,Decimeter:.1/OpenLayers.METERS_PER_INCH,Millimeter:.001/OpenLayers.METERS_PER_INCH,Dekameter:10/OpenLayers.METERS_PER_INCH,Decameter:10/OpenLayers.METERS_PER_INCH,Hectometer:100/OpenLayers.METERS_PER_INCH,GermanMeter:1.0000135965/OpenLayers.METERS_PER_INCH,CaGrid:.999738/OpenLayers.METERS_PER_INCH,ClarkeChain:20.1166194976/OpenLayers.METERS_PER_INCH,GunterChain:20.11684023368047/OpenLayers.METERS_PER_INCH,BenoitChain:20.116782494375872/OpenLayers.METERS_PER_INCH,SearsChain:20.11676512155/OpenLayers.METERS_PER_INCH,ClarkeLink:.201166194976/OpenLayers.METERS_PER_INCH,GunterLink:.2011684023368047/OpenLayers.METERS_PER_INCH,BenoitLink:.20116782494375873/OpenLayers.METERS_PER_INCH,SearsLink:.2011676512155/OpenLayers.METERS_PER_INCH,Rod:5.02921005842012/OpenLayers.METERS_PER_INCH,IntnlChain:20.1168/OpenLayers.METERS_PER_INCH,IntnlLink:.201168/OpenLayers.METERS_PER_INCH,Perch:5.02921005842012/OpenLayers.METERS_PER_INCH,Pole:5.02921005842012/OpenLayers.METERS_PER_INCH,Furlong:201.1684023368046/OpenLayers.METERS_PER_INCH,Rood:3.778266898/OpenLayers.METERS_PER_INCH,CapeFoot:.3047972615/OpenLayers.METERS_PER_INCH,Brealey:375/OpenLayers.METERS_PER_INCH,ModAmFt:.304812252984506/OpenLayers.METERS_PER_INCH,Fathom:1.8288/OpenLayers.METERS_PER_INCH,"NautM-UK":1853.184/OpenLayers.METERS_PER_INCH,"50kilometers":5e4/OpenLayers.METERS_PER_INCH,"150kilometers":15e4/OpenLayers.METERS_PER_INCH}),OpenLayers.Util.extend(OpenLayers.INCHES_PER_UNIT,{mm:OpenLayers.INCHES_PER_UNIT.Meter/1e3,cm:OpenLayers.INCHES_PER_UNIT.Meter/100,dm:100*OpenLayers.INCHES_PER_UNIT.Meter,km:1e3*OpenLayers.INCHES_PER_UNIT.Meter,kmi:OpenLayers.INCHES_PER_UNIT.nmi,fath:OpenLayers.INCHES_PER_UNIT.Fathom,ch:OpenLayers.INCHES_PER_UNIT.IntnlChain,link:OpenLayers.INCHES_PER_UNIT.IntnlLink,"us-in":OpenLayers.INCHES_PER_UNIT.inches,"us-ft":OpenLayers.INCHES_PER_UNIT.Foot,"us-yd":OpenLayers.INCHES_PER_UNIT.Yard,"us-ch":OpenLayers.INCHES_PER_UNIT.GunterChain,"us-mi":OpenLayers.INCHES_PER_UNIT.Mile,"ind-yd":OpenLayers.INCHES_PER_UNIT.IndianYd37,"ind-ft":OpenLayers.INCHES_PER_UNIT.IndianFt37,"ind-ch":20.11669506/OpenLayers.METERS_PER_INCH}),OpenLayers.DOTS_PER_INCH=72,OpenLayers.Util.normalizeScale=function(e){return 1<e?1/e:e},OpenLayers.Util.getResolutionFromScale=function(e,t){var i;return e&&(null==t&&(t="degrees"),i=1/(OpenLayers.Util.normalizeScale(e)*OpenLayers.INCHES_PER_UNIT[t]*OpenLayers.DOTS_PER_INCH)),i},OpenLayers.Util.getScaleFromResolution=function(e,t){return null==t&&(t="degrees"),e*OpenLayers.INCHES_PER_UNIT[t]*OpenLayers.DOTS_PER_INCH},OpenLayers.Util.pagePosition=function(e){var t=[0,0],i=OpenLayers.Util.getViewportElement();if(!e||e==window||e==i)return t;var n=OpenLayers.IS_GECKO&&document.getBoxObjectFor&&"absolute"==OpenLayers.Element.getStyle(e,"position")&&(""==e.style.top||""==e.style.left);if(e.getBoundingClientRect)e=e.getBoundingClientRect(),n=window.pageYOffset||i.scrollTop,t[0]=e.left+(window.pageXOffset||i.scrollLeft),t[1]=e.top+n;else if(document.getBoxObjectFor&&!n)e=document.getBoxObjectFor(e),i=document.getBoxObjectFor(i),t[0]=e.screenX-i.screenX,t[1]=e.screenY-i.screenY;else{if(t[0]=e.offsetLeft,t[1]=e.offsetTop,i=e.offsetParent,i!=e)for(;i;)t[0]+=i.offsetLeft,t[1]+=i.offsetTop,i=i.offsetParent;for(n=OpenLayers.BROWSER_NAME,("opera"==n||"safari"==n&&"absolute"==OpenLayers.Element.getStyle(e,"position"))&&(t[1]-=document.body.offsetTop),i=e.offsetParent;i&&i!=document.body;)t[0]-=i.scrollLeft,"opera"==n&&"TR"==i.tagName||(t[1]-=i.scrollTop),i=i.offsetParent}return t},OpenLayers.Util.getViewportElement=function(){var e=arguments.callee.viewportElement;return void 0==e&&(e="msie"==OpenLayers.BROWSER_NAME&&"CSS1Compat"!=document.compatMode?document.body:document.documentElement,arguments.callee.viewportElement=e),e},OpenLayers.Util.isEquivalentUrl=function(e,t,i){i=i||{},OpenLayers.Util.applyDefaults(i,{ignoreCase:!0,ignorePort80:!0,ignoreHash:!0,splitArgs:!1}),e=OpenLayers.Util.createUrlObject(e,i),t=OpenLayers.Util.createUrlObject(t,i);for(var n in e)if("args"!==n&&e[n]!=t[n])return!1;for(n in e.args){if(e.args[n]!=t.args[n])return!1;delete t.args[n]}for(n in t.args)return!1;return!0},OpenLayers.Util.createUrlObject=function(e,t){if(t=t||{},!/^\w+:\/\//.test(e)){var i=window.location,n=i.port?":"+i.port:"",n=i.protocol+"//"+i.host.split(":").shift()+n;0===e.indexOf("/")?e=n+e:(i=i.pathname.split("/"),i.pop(),e=n+i.join("/")+"/"+e)}t.ignoreCase&&(e=e.toLowerCase()),i=document.createElement("a"),i.href=e,n={},n.host=i.host.split(":").shift(),n.protocol=i.protocol,n.port=t.ignorePort80?"80"==i.port||"0"==i.port?"":i.port:""==i.port||"0"==i.port?"80":i.port,n.hash=t.ignoreHash||"#"===i.hash?"":i.hash;var r=i.search;return r||(r=e.indexOf("?"),r=-1!=r?e.substr(r):""),n.args=OpenLayers.Util.getParameters(r,{splitArgs:t.splitArgs}),n.pathname="/"==i.pathname.charAt(0)?i.pathname:"/"+i.pathname,n},OpenLayers.Util.removeTail=function(e){var t=e.indexOf("?"),i=e.indexOf("#");return-1==t?-1!=i?e.substr(0,i):e:-1!=i?e.substr(0,Math.min(t,i)):e.substr(0,t)},OpenLayers.IS_GECKO=function(){var e=navigator.userAgent.toLowerCase();return-1==e.indexOf("webkit")&&-1!=e.indexOf("gecko")}(),OpenLayers.CANVAS_SUPPORTED=function(){var e=document.createElement("canvas");return!(!e.getContext||!e.getContext("2d"))}(),OpenLayers.BROWSER_NAME=function(){var e="",t=navigator.userAgent.toLowerCase();return-1!=t.indexOf("opera")?e="opera":-1!=t.indexOf("msie")?e="msie":-1!=t.indexOf("safari")?e="safari":-1!=t.indexOf("mozilla")&&(e=-1!=t.indexOf("firefox")?"firefox":"mozilla"),e}(),OpenLayers.Util.getBrowserName=function(){return OpenLayers.BROWSER_NAME},OpenLayers.Util.getRenderedDimensions=function(e,t,i){var n,r,s=document.createElement("div");s.style.visibility="hidden";for(var o=i&&i.containerElement?i.containerElement:document.body,a=!1,l=null,h=o;h&&"body"!=h.tagName.toLowerCase();){var u=OpenLayers.Element.getStyle(h,"position");if("absolute"==u){a=!0;break}if(u&&"static"!=u)break;h=h.parentNode}if(!a||0!==o.clientHeight&&0!==o.clientWidth||(l=document.createElement("div"),l.style.visibility="hidden",l.style.position="absolute",l.style.overflow="visible",l.style.width=document.body.clientWidth+"px",l.style.height=document.body.clientHeight+"px",l.appendChild(s)),s.style.position="absolute",t&&(t.w?(n=t.w,s.style.width=n+"px"):t.h&&(r=t.h,s.style.height=r+"px")),i&&i.displayClass&&(s.className=i.displayClass),t=document.createElement("div"),t.innerHTML=e,t.style.overflow="visible",t.childNodes)for(e=0,i=t.childNodes.length;e<i;e++)t.childNodes[e].style&&(t.childNodes[e].style.overflow="visible");return s.appendChild(t),l?o.appendChild(l):o.appendChild(s),n||(n=parseInt(t.scrollWidth),s.style.width=n+"px"),r||(r=parseInt(t.scrollHeight)),s.removeChild(t),l?(l.removeChild(s),o.removeChild(l)):o.removeChild(s),new OpenLayers.Size(n,r)},OpenLayers.Util.getScrollbarWidth=function(){var e=OpenLayers.Util._scrollbarWidth;if(null==e){var t,i;t=document.createElement("div"),t.style.position="absolute",t.style.top="-1000px",t.style.left="-1000px",t.style.width="100px",t.style.height="50px",t.style.overflow="hidden",i=document.createElement("div"),i.style.width="100%",i.style.height="200px",t.appendChild(i),document.body.appendChild(t),e=i.offsetWidth,t.style.overflow="scroll",t=i.offsetWidth,document.body.removeChild(document.body.lastChild),OpenLayers.Util._scrollbarWidth=e-t,e=OpenLayers.Util._scrollbarWidth}return e},OpenLayers.Util.getFormattedLonLat=function(e,t,i){i||(i="dms"),e=(e+540)%360-180;var n=Math.abs(e),r=Math.floor(n),s=n=(n-r)/(1/60),n=Math.floor(n),s=Math.round((s-n)/(1/60)*10),s=s/10;return 60<=s&&(s-=60,n+=1,60<=n&&(n-=60,r+=1)),10>r&&(r="0"+r),r+="°",0<=i.indexOf("dm")&&(10>n&&(n="0"+n),r+=n+"'",0<=i.indexOf("dms")&&(10>s&&(s="0"+s),r+=s+'"')),r="lon"==t?r+(0>e?OpenLayers.i18n("W"):OpenLayers.i18n("E")):r+(0>e?OpenLayers.i18n("S"):OpenLayers.i18n("N"))},OpenLayers.Util.getConstructor=function(e){var t=e.split(".");e="OpenLayers"===t[0]?OpenLayers:window[t[0]];for(var i=1,n=t.length;i<n;++i)e=e[t[i]];return e},OpenLayers.Event={observers:!1,KEY_SPACE:32,KEY_BACKSPACE:8,KEY_TAB:9,KEY_RETURN:13,KEY_ESC:27,KEY_LEFT:37,KEY_UP:38,KEY_RIGHT:39,KEY_DOWN:40,KEY_DELETE:46,element:function(e){return e.target||e.srcElement},isSingleTouch:function(e){return e.touches&&1==e.touches.length},isMultiTouch:function(e){return e.touches&&1<e.touches.length},isTouchEvent:function(e){return 0===(""+e.type).indexOf("touch")||"pointerType"in e&&(e.pointerType===e.MSPOINTER_TYPE_TOUCH||"touch"===e.pointerType)},isLeftClick:function(e){return e.which&&1==e.which||e.button&&1==e.button},isRightClick:function(e){return e.which&&3==e.which||e.button&&2==e.button},stop:function(e,t){t||OpenLayers.Event.preventDefault(e),e.stopPropagation?e.stopPropagation():e.cancelBubble=!0},preventDefault:function(e){e.preventDefault?e.preventDefault():e.returnValue=!1},findElement:function(e,t){for(var i=OpenLayers.Event.element(e);i.parentNode&&(!i.tagName||i.tagName.toUpperCase()!=t.toUpperCase());)i=i.parentNode;return i},observe:function(e,t,i,n){if(e=OpenLayers.Util.getElement(e),n=n||!1,"keypress"==t&&(navigator.appVersion.match(/Konqueror|Safari|KHTML/)||e.attachEvent)&&(t="keydown"),this.observers||(this.observers={}),!e._eventCacheID){var r="eventCacheID_";e.id&&(r=e.id+"_"+r),e._eventCacheID=OpenLayers.Util.createUniqueID(r)}r=e._eventCacheID,this.observers[r]||(this.observers[r]=[]),this.observers[r].push({element:e,name:t,observer:i,useCapture:n}),e.addEventListener?e.addEventListener(t,i,n):e.attachEvent&&e.attachEvent("on"+t,i)},stopObservingElement:function(e){e=OpenLayers.Util.getElement(e)._eventCacheID,this._removeElementObservers(OpenLayers.Event.observers[e])},_removeElementObservers:function(e){if(e)for(var t=e.length-1;0<=t;t--){var i=e[t];OpenLayers.Event.stopObserving.apply(this,[i.element,i.name,i.observer,i.useCapture])}},stopObserving:function(e,t,i,n){n=n||!1,e=OpenLayers.Util.getElement(e);var r=e._eventCacheID;"keypress"==t&&(navigator.appVersion.match(/Konqueror|Safari|KHTML/)||e.detachEvent)&&(t="keydown");var s=!1,o=OpenLayers.Event.observers[r];if(o)for(var a=0;!s&&a<o.length;){var l=o[a];if(l.name==t&&l.observer==i&&l.useCapture==n){o.splice(a,1),0==o.length&&delete OpenLayers.Event.observers[r],s=!0;break}a++}return s&&(e.removeEventListener?e.removeEventListener(t,i,n):e&&e.detachEvent&&e.detachEvent("on"+t,i)),s},unloadCache:function(){if(OpenLayers.Event&&OpenLayers.Event.observers){for(var e in OpenLayers.Event.observers)OpenLayers.Event._removeElementObservers.apply(this,[OpenLayers.Event.observers[e]]);OpenLayers.Event.observers=!1}},CLASS_NAME:"OpenLayers.Event"},OpenLayers.Event.observe(window,"unload",OpenLayers.Event.unloadCache,!1),OpenLayers.Events=OpenLayers.Class({
BROWSER_EVENTS:"mouseover mouseout mousedown mouseup mousemove click dblclick rightclick dblrightclick resize focus blur touchstart touchmove touchend keydown".split(" "),TOUCH_MODEL_POINTER:"pointer",TOUCH_MODEL_MSPOINTER:"MSPointer",TOUCH_MODEL_TOUCH:"touch",listeners:null,object:null,element:null,eventHandler:null,fallThrough:null,includeXY:!1,extensions:null,extensionCount:null,clearMouseListener:null,initialize:function(e,t,i,n,r){OpenLayers.Util.extend(this,r),this.object=e,this.fallThrough=n,this.listeners={},this.extensions={},this.extensionCount={},this._pointerTouches=[],null!=t&&this.attachToElement(t)},destroy:function(){for(var e in this.extensions)"boolean"!=typeof this.extensions[e]&&this.extensions[e].destroy();this.extensions=null,this.element&&(OpenLayers.Event.stopObservingElement(this.element),this.element.hasScrollEvent&&OpenLayers.Event.stopObserving(window,"scroll",this.clearMouseListener)),this.eventHandler=this.fallThrough=this.object=this.listeners=this.element=null},addEventType:function(e){},attachToElement:function(e){this.element?OpenLayers.Event.stopObservingElement(this.element):(this.eventHandler=OpenLayers.Function.bindAsEventListener(this.handleBrowserEvent,this),this.clearMouseListener=OpenLayers.Function.bind(this.clearMouseCache,this)),this.element=e;for(var t,i=this.getTouchModel(),n=0,r=this.BROWSER_EVENTS.length;n<r;n++)t=this.BROWSER_EVENTS[n],i!==this.TOUCH_MODEL_POINTER&&i!==this.TOUCH_MODEL_MSPOINTER||0!==t.indexOf("touch")?OpenLayers.Event.observe(e,t,this.eventHandler):this.addPointerTouchListener(e,t,this.eventHandler);OpenLayers.Event.observe(e,"dragstart",OpenLayers.Event.stop)},on:function(e){for(var t in e)"scope"!=t&&e.hasOwnProperty(t)&&this.register(t,e.scope,e[t])},register:function(e,t,i,n){if(e in OpenLayers.Events&&!this.extensions[e]&&(this.extensions[e]=new OpenLayers.Events[e](this)),null!=i){null==t&&(t=this.object);var r=this.listeners[e];r||(r=[],this.listeners[e]=r,this.extensionCount[e]=0),t={obj:t,func:i},n?(r.splice(this.extensionCount[e],0,t),"object"==typeof n&&n.extension&&this.extensionCount[e]++):r.push(t)}},registerPriority:function(e,t,i){this.register(e,t,i,!0)},un:function(e){for(var t in e)"scope"!=t&&e.hasOwnProperty(t)&&this.unregister(t,e.scope,e[t])},unregister:function(e,t,i){if(null==t&&(t=this.object),e=this.listeners[e],null!=e)for(var n=0,r=e.length;n<r;n++)if(e[n].obj==t&&e[n].func==i){e.splice(n,1);break}},remove:function(e){null!=this.listeners[e]&&(this.listeners[e]=[])},triggerEvent:function(e,t){var i=this.listeners[e];if(i&&0!=i.length){null==t&&(t={}),t.object=this.object,t.element=this.element,t.type||(t.type=e);for(var n,i=i.slice(),r=0,s=i.length;r<s&&(n=i[r],n=n.func.apply(n.obj,[t]),void 0==n||0!=n);r++);return this.fallThrough||OpenLayers.Event.stop(t,!0),n}},handleBrowserEvent:function(e){var t=e.type,i=this.listeners[t];if(i&&0!=i.length){if((i=e.touches)&&i[0]){for(var n,r=0,s=0,o=i.length,a=0;a<o;++a)n=this.getTouchClientXY(i[a]),r+=n.clientX,s+=n.clientY;e.clientX=r/o,e.clientY=s/o}this.includeXY&&(e.xy=this.getMousePosition(e)),this.triggerEvent(t,e)}},getTouchClientXY:function(e){var t=window.olMockWin||window,i=t.pageXOffset,t=t.pageYOffset,n=e.clientX,r=e.clientY;return 0===e.pageY&&Math.floor(r)>Math.floor(e.pageY)||0===e.pageX&&Math.floor(n)>Math.floor(e.pageX)?(n-=i,r-=t):(r<e.pageY-t||n<e.pageX-i)&&(n=e.pageX-i,r=e.pageY-t),e.olClientX=n,e.olClientY=r,{clientX:n,clientY:r}},clearMouseCache:function(){this.element.scrolls=null,this.element.lefttop=null,this.element.offsets=null},getMousePosition:function(e){if(this.includeXY?this.element.hasScrollEvent||(OpenLayers.Event.observe(window,"scroll",this.clearMouseListener),this.element.hasScrollEvent=!0):this.clearMouseCache(),!this.element.scrolls){var t=OpenLayers.Util.getViewportElement();this.element.scrolls=[window.pageXOffset||t.scrollLeft,window.pageYOffset||t.scrollTop]}return this.element.lefttop||(this.element.lefttop=[document.documentElement.clientLeft||0,document.documentElement.clientTop||0]),this.element.offsets||(this.element.offsets=OpenLayers.Util.pagePosition(this.element)),new OpenLayers.Pixel(e.clientX+this.element.scrolls[0]-this.element.offsets[0]-this.element.lefttop[0],e.clientY+this.element.scrolls[1]-this.element.offsets[1]-this.element.lefttop[1])},getTouchModel:function(){return"_TOUCH_MODEL"in OpenLayers.Events||(OpenLayers.Events._TOUCH_MODEL=window.PointerEvent&&"pointer"||window.MSPointerEvent&&"MSPointer"||"ontouchdown"in document&&"touch"||null),OpenLayers.Events._TOUCH_MODEL},addPointerTouchListener:function(e,t,i){function n(e){i(OpenLayers.Util.applyDefaults({stopPropagation:function(){for(var e=r.length-1;0<=e;--e)r[e].stopPropagation()},preventDefault:function(){for(var e=r.length-1;0<=e;--e)r[e].preventDefault()},type:t},e))}var r=this._pointerTouches;switch(t){case"touchstart":return this.addPointerTouchListenerStart(e,t,n);case"touchend":return this.addPointerTouchListenerEnd(e,t,n);case"touchmove":return this.addPointerTouchListenerMove(e,t,n);default:throw"Unknown touch event type"}},addPointerTouchListenerStart:function(e,t,i){var n=this._pointerTouches;OpenLayers.Event.observe(e,this.getTouchModel()===this.TOUCH_MODEL_MSPOINTER?"MSPointerDown":"pointerdown",function(e){if(OpenLayers.Event.isTouchEvent(e)){for(var t=!1,r=0,s=n.length;r<s;++r)if(n[r].pointerId==e.pointerId){t=!0;break}t||n.push(e),e.touches=n.slice(),i(e)}}),OpenLayers.Event.observe(e,this.getTouchModel()===this.TOUCH_MODEL_MSPOINTER?"MSPointerOut":"pointerout",function(e){if(OpenLayers.Event.isTouchEvent(e))for(var t=0,i=n.length;t<i;++t)if(n[t].pointerId==e.pointerId){0!=this.clientWidth&&0!=this.clientHeight&&(Math.ceil(e.clientX)>=this.clientWidth||Math.ceil(e.clientY)>=this.clientHeight)&&n.splice(t,1);break}})},addPointerTouchListenerMove:function(e,t,i){var n=this._pointerTouches;OpenLayers.Event.observe(e,this.getTouchModel()===this.TOUCH_MODEL_MSPOINTER?"MSPointerMove":"pointermove",function(e){if(OpenLayers.Event.isTouchEvent(e)&&(1!=n.length||n[0].pageX!=e.pageX||n[0].pageY!=e.pageY)){for(var t=0,r=n.length;t<r;++t)if(n[t].pointerId==e.pointerId){n[t]=e;break}e.touches=n.slice(),i(e)}})},addPointerTouchListenerEnd:function(e,t,i){var n=this._pointerTouches;OpenLayers.Event.observe(e,this.getTouchModel()===this.TOUCH_MODEL_MSPOINTER?"MSPointerUp":"pointerup",function(e){if(OpenLayers.Event.isTouchEvent(e)){for(var t=0,r=n.length;t<r;++t)if(n[t].pointerId==e.pointerId){n.splice(t,1);break}e.touches=n.slice(),i(e)}})},CLASS_NAME:"OpenLayers.Events"}),OpenLayers.Handler=OpenLayers.Class({id:null,control:null,map:null,keyMask:null,active:!1,evt:null,touch:!1,initialize:function(e,t,i){OpenLayers.Util.extend(this,i),this.control=e,this.callbacks=t,(e=this.map||e.map)&&this.setMap(e),this.id=OpenLayers.Util.createUniqueID(this.CLASS_NAME+"_")},setMap:function(e){this.map=e},checkModifiers:function(e){return null==this.keyMask||((e.shiftKey?OpenLayers.Handler.MOD_SHIFT:0)|(e.ctrlKey?OpenLayers.Handler.MOD_CTRL:0)|(e.altKey?OpenLayers.Handler.MOD_ALT:0)|(e.metaKey?OpenLayers.Handler.MOD_META:0))==this.keyMask},activate:function(){if(this.active)return!1;for(var e=OpenLayers.Events.prototype.BROWSER_EVENTS,t=0,i=e.length;t<i;t++)this[e[t]]&&this.register(e[t],this[e[t]]);return this.active=!0},deactivate:function(){if(!this.active)return!1;for(var e=OpenLayers.Events.prototype.BROWSER_EVENTS,t=0,i=e.length;t<i;t++)this[e[t]]&&this.unregister(e[t],this[e[t]]);return this.active=this.touch=!1,!0},startTouch:function(){if(!this.touch){this.touch=!0;for(var e="mousedown mouseup mousemove click dblclick mouseout".split(" "),t=0,i=e.length;t<i;t++)this[e[t]]&&this.unregister(e[t],this[e[t]])}},callback:function(e,t){e&&this.callbacks[e]&&this.callbacks[e].apply(this.control,t)},register:function(e,t){this.map.events.registerPriority(e,this,t),this.map.events.registerPriority(e,this,this.setEvent)},unregister:function(e,t){this.map.events.unregister(e,this,t),this.map.events.unregister(e,this,this.setEvent)},setEvent:function(e){return this.evt=e,!0},destroy:function(){this.deactivate(),this.control=this.map=null},CLASS_NAME:"OpenLayers.Handler"}),OpenLayers.Handler.MOD_NONE=0,OpenLayers.Handler.MOD_SHIFT=1,OpenLayers.Handler.MOD_CTRL=2,OpenLayers.Handler.MOD_ALT=4,OpenLayers.Handler.MOD_META=8,OpenLayers.Util=OpenLayers.Util||{},OpenLayers.Util.vendorPrefix=function(){function e(e){return e?e.replace(/([A-Z])/g,function(e){return"-"+e.toLowerCase()}).replace(/^ms-/,"-ms-"):null}function t(e,t){if(void 0===o[t]){var i,r=0,s=n.length,a="undefined"!=typeof e.cssText;for(o[t]=null;r<s;r++)if((i=n[r])?(a||(i=i.toLowerCase()),i=i+t.charAt(0).toUpperCase()+t.slice(1)):i=t,void 0!==e[i]){o[t]=i;break}}return o[t]}function i(e){return t(r,e)}var n=["","O","ms","Moz","Webkit"],r=document.createElement("div").style,s={},o={};return{css:function(t){if(void 0===s[t]){var n=t.replace(/(-[\s\S])/g,function(e){return e.charAt(1).toUpperCase()}),n=i(n);s[t]=e(n)}return s[t]},js:t,style:i,cssCache:s,jsCache:o}}(),OpenLayers.Animation=function(e){var t=OpenLayers.Util.vendorPrefix.js(e,"requestAnimationFrame"),i=!!t,n=function(){var i=e[t]||function(t,i){e.setTimeout(t,16)};return function(t,n){i.apply(e,[t,n])}}(),r=0,s={};return{isNative:i,requestFrame:n,start:function(e,t,i){t=0<t?t:Number.POSITIVE_INFINITY;var o=++r,a=+new Date;return s[o]=function(){s[o]&&+new Date-a<=t?(e(),s[o]&&n(s[o],i)):delete s[o]},n(s[o],i),o},stop:function(e){delete s[e]}}}(window),OpenLayers.Tween=OpenLayers.Class({easing:null,begin:null,finish:null,duration:null,callbacks:null,time:null,minFrameRate:null,startTime:null,animationId:null,playing:!1,initialize:function(e){this.easing=e?e:OpenLayers.Easing.Expo.easeOut},start:function(e,t,i,n){this.playing=!0,this.begin=e,this.finish=t,this.duration=i,this.callbacks=n.callbacks,this.minFrameRate=n.minFrameRate||30,this.time=0,this.startTime=(new Date).getTime(),OpenLayers.Animation.stop(this.animationId),this.animationId=null,this.callbacks&&this.callbacks.start&&this.callbacks.start.call(this,this.begin),this.animationId=OpenLayers.Animation.start(OpenLayers.Function.bind(this.play,this))},stop:function(){this.playing&&(this.callbacks&&this.callbacks.done&&this.callbacks.done.call(this,this.finish),OpenLayers.Animation.stop(this.animationId),this.animationId=null,this.playing=!1)},play:function(){var e,t={};for(e in this.begin){var i=this.begin[e],n=this.finish[e];if(null==i||null==n||isNaN(i)||isNaN(n))throw new TypeError("invalid value for Tween");t[e]=this.easing.apply(this,[this.time,i,n-i,this.duration])}this.time++,this.callbacks&&this.callbacks.eachStep&&((new Date).getTime()-this.startTime)/this.time<=1e3/this.minFrameRate&&this.callbacks.eachStep.call(this,t),this.time>this.duration&&this.stop()},CLASS_NAME:"OpenLayers.Tween"}),OpenLayers.Easing={CLASS_NAME:"OpenLayers.Easing"},OpenLayers.Easing.Linear={easeIn:function(e,t,i,n){return i*e/n+t},easeOut:function(e,t,i,n){return i*e/n+t},easeInOut:function(e,t,i,n){return i*e/n+t},CLASS_NAME:"OpenLayers.Easing.Linear"},OpenLayers.Easing.Expo={easeIn:function(e,t,i,n){return 0==e?t:i*Math.pow(2,10*(e/n-1))+t},easeOut:function(e,t,i,n){return e==n?t+i:i*(-Math.pow(2,-10*e/n)+1)+t},easeInOut:function(e,t,i,n){return 0==e?t:e==n?t+i:1>(e/=n/2)?i/2*Math.pow(2,10*(e-1))+t:i/2*(-Math.pow(2,-10*--e)+2)+t},CLASS_NAME:"OpenLayers.Easing.Expo"},OpenLayers.Easing.Quad={easeIn:function(e,t,i,n){return i*(e/=n)*e+t},easeOut:function(e,t,i,n){return-i*(e/=n)*(e-2)+t},easeInOut:function(e,t,i,n){return 1>(e/=n/2)?i/2*e*e+t:-i/2*(--e*(e-2)-1)+t},CLASS_NAME:"OpenLayers.Easing.Quad"},OpenLayers.Projection=OpenLayers.Class({proj:null,projCode:null,titleRegEx:/\+title=[^\+]*/,initialize:function(e,t){OpenLayers.Util.extend(this,t),this.projCode=e,"object"==typeof Proj4js&&(this.proj=new Proj4js.Proj(e))},getCode:function(){return this.proj?this.proj.srsCode:this.projCode},getUnits:function(){return this.proj?this.proj.units:null},toString:function(){return this.getCode()},equals:function(e){var t=!1;return e&&(e instanceof OpenLayers.Projection||(e=new OpenLayers.Projection(e)),"object"==typeof Proj4js&&this.proj.defData&&e.proj.defData?t=this.proj.defData.replace(this.titleRegEx,"")==e.proj.defData.replace(this.titleRegEx,""):e.getCode&&(t=this.getCode(),e=e.getCode(),t=t==e||!!OpenLayers.Projection.transforms[t]&&OpenLayers.Projection.transforms[t][e]===OpenLayers.Projection.nullTransform)),t},destroy:function(){delete this.proj,delete this.projCode},CLASS_NAME:"OpenLayers.Projection"}),OpenLayers.Projection.transforms={},OpenLayers.Projection.defaults={"EPSG:4326":{units:"degrees",maxExtent:[-180,-90,180,90],worldExtent:[-180,-90,180,90],yx:!0},"CRS:84":{units:"degrees",maxExtent:[-180,-90,180,90],worldExtent:[-180,-90,180,90]},"EPSG:900913":{units:"m",maxExtent:[-20037508.34,-20037508.34,20037508.34,20037508.34],worldExtent:[-180,-89,180,89]}},OpenLayers.Projection.addTransform=function(e,t,i){if(i===OpenLayers.Projection.nullTransform){var n=OpenLayers.Projection.defaults[e];n&&!OpenLayers.Projection.defaults[t]&&(OpenLayers.Projection.defaults[t]=n)}OpenLayers.Projection.transforms[e]||(OpenLayers.Projection.transforms[e]={}),OpenLayers.Projection.transforms[e][t]=i},OpenLayers.Projection.transform=function(e,t,i){if(t&&i)if(t instanceof OpenLayers.Projection||(t=new OpenLayers.Projection(t)),i instanceof OpenLayers.Projection||(i=new OpenLayers.Projection(i)),t.proj&&i.proj)e=Proj4js.transform(t.proj,i.proj,e);else{t=t.getCode(),i=i.getCode();var n=OpenLayers.Projection.transforms;n[t]&&n[t][i]&&n[t][i](e)}return e},OpenLayers.Projection.nullTransform=function(e){return e},function(){function e(e){return e.x=180*e.x/20037508.34,e.y=180/Math.PI*(2*Math.atan(Math.exp(e.y/20037508.34*Math.PI))-Math.PI/2),e}function t(e){return e.x=20037508.34*e.x/180,e.y=Math.max(-20037508.34,Math.min(Math.log(Math.tan((90+e.y)*Math.PI/360))/Math.PI*20037508.34,20037508.34)),e}function i(i,n){var r,s,o,a,l,h=OpenLayers.Projection.addTransform,u=OpenLayers.Projection.nullTransform;for(r=0,s=n.length;r<s;++r)for(o=n[r],h(i,o,t),h(o,i,e),l=r+1;l<s;++l)a=n[l],h(o,a,u),h(a,o,u)}var n,r=["EPSG:900913","EPSG:3857","EPSG:102113","EPSG:102100","OSGEO:41001"],s=["CRS:84","urn:ogc:def:crs:EPSG:6.6:4326","EPSG:4326"];for(n=r.length-1;0<=n;--n)i(r[n],s);for(n=s.length-1;0<=n;--n)i(s[n],r)}(),OpenLayers.Map=OpenLayers.Class({Z_INDEX_BASE:{BaseLayer:100,Overlay:325,Feature:725,Popup:750,Control:1e3},id:null,fractionalZoom:!1,events:null,allOverlays:!1,div:null,dragging:!1,size:null,viewPortDiv:null,layerContainerOrigin:null,layerContainerDiv:null,layers:null,controls:null,popups:null,baseLayer:null,center:null,resolution:null,zoom:0,panRatio:1.5,options:null,tileSize:null,projection:"EPSG:4326",units:null,resolutions:null,maxResolution:null,minResolution:null,maxScale:null,minScale:null,maxExtent:null,minExtent:null,restrictedExtent:null,numZoomLevels:16,theme:null,displayProjection:null,fallThrough:!1,autoUpdateSize:!0,eventListeners:null,panTween:null,panMethod:OpenLayers.Easing.Expo.easeOut,panDuration:50,zoomTween:null,zoomMethod:OpenLayers.Easing.Quad.easeOut,zoomDuration:20,paddingForPopups:null,layerContainerOriginPx:null,minPx:null,maxPx:null,initialize:function(e,t){var i=OpenLayers.Util.isElement(e);if(1!==arguments.length||"object"!=typeof e||i||(e=(t=e)&&t.div),this.tileSize=new OpenLayers.Size(OpenLayers.Map.TILE_WIDTH,OpenLayers.Map.TILE_HEIGHT),this.paddingForPopups=new OpenLayers.Bounds(15,15,15,15),this.theme=OpenLayers._getScriptLocation()+"theme/default/style.css",this.options=OpenLayers.Util.extend({},t),OpenLayers.Util.extend(this,t),OpenLayers.Util.applyDefaults(this,OpenLayers.Projection.defaults[this.projection instanceof OpenLayers.Projection?this.projection.projCode:this.projection]),!this.maxExtent||this.maxExtent instanceof OpenLayers.Bounds||(this.maxExtent=new OpenLayers.Bounds(this.maxExtent)),!this.minExtent||this.minExtent instanceof OpenLayers.Bounds||(this.minExtent=new OpenLayers.Bounds(this.minExtent)),!this.restrictedExtent||this.restrictedExtent instanceof OpenLayers.Bounds||(this.restrictedExtent=new OpenLayers.Bounds(this.restrictedExtent)),!this.center||this.center instanceof OpenLayers.LonLat||(this.center=new OpenLayers.LonLat(this.center)),this.layers=[],this.id=OpenLayers.Util.createUniqueID("OpenLayers.Map_"),this.div=OpenLayers.Util.getElement(e),this.div||(this.div=document.createElement("div"),this.div.style.height="1px",this.div.style.width="1px"),OpenLayers.Element.addClass(this.div,"olMap"),i=this.id+"_OpenLayers_ViewPort",this.viewPortDiv=OpenLayers.Util.createDiv(i,null,null,null,"relative",null,"hidden"),this.viewPortDiv.style.width="100%",this.viewPortDiv.style.height="100%",this.viewPortDiv.className="olMapViewport",this.div.appendChild(this.viewPortDiv),this.events=new OpenLayers.Events(this,this.viewPortDiv,null,this.fallThrough,{includeXY:!0}),OpenLayers.TileManager&&null!==this.tileManager&&(this.tileManager instanceof OpenLayers.TileManager||(this.tileManager=new OpenLayers.TileManager(this.tileManager)),this.tileManager.addMap(this)),i=this.id+"_OpenLayers_Container",this.layerContainerDiv=OpenLayers.Util.createDiv(i),this.layerContainerDiv.style.zIndex=this.Z_INDEX_BASE.Popup-1,this.layerContainerOriginPx={x:0,y:0},this.applyTransform(),this.viewPortDiv.appendChild(this.layerContainerDiv),this.updateSize(),this.eventListeners instanceof Object&&this.events.on(this.eventListeners),!0===this.autoUpdateSize&&(this.updateSizeDestroy=OpenLayers.Function.bind(this.updateSize,this),OpenLayers.Event.observe(window,"resize",this.updateSizeDestroy)),this.theme){for(var i=!0,n=document.getElementsByTagName("link"),r=0,s=n.length;r<s;++r)if(OpenLayers.Util.isEquivalentUrl(n.item(r).href,this.theme)){i=!1;break}i&&(i=document.createElement("link"),i.setAttribute("rel","stylesheet"),i.setAttribute("type","text/css"),i.setAttribute("href",this.theme),document.getElementsByTagName("head")[0].appendChild(i))}for(null==this.controls&&(this.controls=[],null!=OpenLayers.Control&&(OpenLayers.Control.Navigation?this.controls.push(new OpenLayers.Control.Navigation):OpenLayers.Control.TouchNavigation&&this.controls.push(new OpenLayers.Control.TouchNavigation),OpenLayers.Control.Zoom?this.controls.push(new OpenLayers.Control.Zoom):OpenLayers.Control.PanZoom&&this.controls.push(new OpenLayers.Control.PanZoom),OpenLayers.Control.ArgParser&&this.controls.push(new OpenLayers.Control.ArgParser),OpenLayers.Control.Attribution&&this.controls.push(new OpenLayers.Control.Attribution))),r=0,s=this.controls.length;r<s;r++)this.addControlToMap(this.controls[r]);this.popups=[],this.unloadDestroy=OpenLayers.Function.bind(this.destroy,this),OpenLayers.Event.observe(window,"unload",this.unloadDestroy),t&&t.layers&&(delete this.center,delete this.zoom,this.addLayers(t.layers),t.center&&!this.getCenter()&&this.setCenter(t.center,t.zoom)),this.panMethod&&(this.panTween=new OpenLayers.Tween(this.panMethod)),this.zoomMethod&&this.applyTransform.transform&&(this.zoomTween=new OpenLayers.Tween(this.zoomMethod))},getViewport:function(){return this.viewPortDiv},render:function(e){this.div=OpenLayers.Util.getElement(e),OpenLayers.Element.addClass(this.div,"olMap"),this.viewPortDiv.parentNode.removeChild(this.viewPortDiv),this.div.appendChild(this.viewPortDiv),this.updateSize()},unloadDestroy:null,updateSizeDestroy:null,destroy:function(){if(!this.unloadDestroy)return!1;if(this.panTween&&(this.panTween.stop(),this.panTween=null),this.zoomTween&&(this.zoomTween.stop(),this.zoomTween=null),OpenLayers.Event.stopObserving(window,"unload",this.unloadDestroy),this.unloadDestroy=null,this.updateSizeDestroy&&OpenLayers.Event.stopObserving(window,"resize",this.updateSizeDestroy),this.paddingForPopups=null,null!=this.controls){for(var e=this.controls.length-1;0<=e;--e)this.controls[e].destroy();this.controls=null}if(null!=this.layers){for(e=this.layers.length-1;0<=e;--e)this.layers[e].destroy(!1);this.layers=null}this.viewPortDiv&&this.viewPortDiv.parentNode&&this.viewPortDiv.parentNode.removeChild(this.viewPortDiv),this.viewPortDiv=null,this.tileManager&&(this.tileManager.removeMap(this),this.tileManager=null),this.eventListeners&&(this.events.un(this.eventListeners),this.eventListeners=null),this.events.destroy(),this.options=this.events=null},setOptions:function(e){var t=this.minPx&&e.restrictedExtent!=this.restrictedExtent;OpenLayers.Util.extend(this,e),t&&this.moveTo(this.getCachedCenter(),this.zoom,{forceZoomChange:!0})},getTileSize:function(){return this.tileSize},getBy:function(e,t,i){var n="function"==typeof i.test;return OpenLayers.Array.filter(this[e],function(e){return e[t]==i||n&&i.test(e[t])})},getLayersBy:function(e,t){return this.getBy("layers",e,t)},getLayersByName:function(e){return this.getLayersBy("name",e)},getLayersByClass:function(e){return this.getLayersBy("CLASS_NAME",e)},getControlsBy:function(e,t){return this.getBy("controls",e,t)},getControlsByClass:function(e){return this.getControlsBy("CLASS_NAME",e)},getLayer:function(e){for(var t=null,i=0,n=this.layers.length;i<n;i++){var r=this.layers[i];if(r.id==e){t=r;break}}return t},setLayerZIndex:function(e,t){e.setZIndex(this.Z_INDEX_BASE[e.isBaseLayer?"BaseLayer":"Overlay"]+5*t)},resetLayersZIndex:function(){for(var e=0,t=this.layers.length;e<t;e++)this.setLayerZIndex(this.layers[e],e)},addLayer:function(e){for(var t=0,i=this.layers.length;t<i;t++)if(this.layers[t]==e)return!1;return!1!==this.events.triggerEvent("preaddlayer",{layer:e})&&(this.allOverlays&&(e.isBaseLayer=!1),e.div.className="olLayerDiv",e.div.style.overflow="",this.setLayerZIndex(e,this.layers.length),e.isFixed?this.viewPortDiv.appendChild(e.div):this.layerContainerDiv.appendChild(e.div),this.layers.push(e),e.setMap(this),e.isBaseLayer||this.allOverlays&&!this.baseLayer?null==this.baseLayer?this.setBaseLayer(e):e.setVisibility(!1):e.redraw(),this.events.triggerEvent("addlayer",{layer:e}),e.events.triggerEvent("added",{map:this,layer:e}),e.afterAdd(),!0)},addLayers:function(e){for(var t=0,i=e.length;t<i;t++)this.addLayer(e[t])},removeLayer:function(e,t){if(!1!==this.events.triggerEvent("preremovelayer",{layer:e})){if(null==t&&(t=!0),e.isFixed?this.viewPortDiv.removeChild(e.div):this.layerContainerDiv.removeChild(e.div),OpenLayers.Util.removeItem(this.layers,e),e.removeMap(this),e.map=null,this.baseLayer==e&&(this.baseLayer=null,t))for(var i=0,n=this.layers.length;i<n;i++){var r=this.layers[i];if(r.isBaseLayer||this.allOverlays){this.setBaseLayer(r);break}}this.resetLayersZIndex(),this.events.triggerEvent("removelayer",{layer:e}),e.events.triggerEvent("removed",{map:this,layer:e})}},getNumLayers:function(){return this.layers.length},getLayerIndex:function(e){return OpenLayers.Util.indexOf(this.layers,e)},setLayerIndex:function(e,t){var i=this.getLayerIndex(e);if(0>t?t=0:t>this.layers.length&&(t=this.layers.length),i!=t){this.layers.splice(i,1),this.layers.splice(t,0,e);for(var i=0,n=this.layers.length;i<n;i++)this.setLayerZIndex(this.layers[i],i);this.events.triggerEvent("changelayer",{layer:e,property:"order"}),this.allOverlays&&(0===t?this.setBaseLayer(e):this.baseLayer!==this.layers[0]&&this.setBaseLayer(this.layers[0]))}},raiseLayer:function(e,t){var i=this.getLayerIndex(e)+t;this.setLayerIndex(e,i)},setBaseLayer:function(e){if(e!=this.baseLayer&&-1!=OpenLayers.Util.indexOf(this.layers,e)){var t=this.getCachedCenter(),i=this.getResolution(),n=OpenLayers.Util.getResolutionFromScale(this.getScale(),e.units);null==this.baseLayer||this.allOverlays||this.baseLayer.setVisibility(!1),this.baseLayer=e,this.allOverlays&&!this.baseLayer.visibility||(this.baseLayer.setVisibility(!0),!1===this.baseLayer.inRange&&this.baseLayer.redraw()),null!=t&&(e=this.getZoomForResolution(n||this.resolution,!0),this.setCenter(t,e,!1,i!=n)),this.events.triggerEvent("changebaselayer",{layer:this.baseLayer})}},addControl:function(e,t){this.controls.push(e),this.addControlToMap(e,t)},addControls:function(e,t){for(var i=1===arguments.length?[]:t,n=0,r=e.length;n<r;n++)this.addControl(e[n],i[n]?i[n]:null)},addControlToMap:function(e,t){e.outsideViewport=null!=e.div,this.displayProjection&&!e.displayProjection&&(e.displayProjection=this.displayProjection),e.setMap(this);var i=e.draw(t);i&&!e.outsideViewport&&(i.style.zIndex=this.Z_INDEX_BASE.Control+this.controls.length,this.viewPortDiv.appendChild(i)),e.autoActivate&&e.activate()},getControl:function(e){for(var t=null,i=0,n=this.controls.length;i<n;i++){var r=this.controls[i];if(r.id==e){t=r;break}}return t},removeControl:function(e){e&&e==this.getControl(e.id)&&(e.div&&e.div.parentNode==this.viewPortDiv&&this.viewPortDiv.removeChild(e.div),OpenLayers.Util.removeItem(this.controls,e))},addPopup:function(e,t){if(t)for(var i=this.popups.length-1;0<=i;--i)this.removePopup(this.popups[i]);e.map=this,this.popups.push(e),(i=e.draw())&&(i.style.zIndex=this.Z_INDEX_BASE.Popup+this.popups.length,this.layerContainerDiv.appendChild(i))},removePopup:function(e){if(OpenLayers.Util.removeItem(this.popups,e),e.div)try{this.layerContainerDiv.removeChild(e.div)}catch(e){}e.map=null},getSize:function(){var e=null;return null!=this.size&&(e=this.size.clone()),e},updateSize:function(){var e=this.getCurrentSize();if(e&&!isNaN(e.h)&&!isNaN(e.w)){this.events.clearMouseCache();var t=this.getSize();if(null==t&&(this.size=t=e),!e.equals(t)){for(this.size=e,e=0,t=this.layers.length;e<t;e++)this.layers[e].onMapResize();e=this.getCachedCenter(),null!=this.baseLayer&&null!=e&&(t=this.getZoom(),this.zoom=null,this.setCenter(e,t))}}this.events.triggerEvent("updatesize")},getCurrentSize:function(){var e=new OpenLayers.Size(this.div.clientWidth,this.div.clientHeight);return(0==e.w&&0==e.h||isNaN(e.w)&&isNaN(e.h))&&(e.w=this.div.offsetWidth,e.h=this.div.offsetHeight),(0==e.w&&0==e.h||isNaN(e.w)&&isNaN(e.h))&&(e.w=parseInt(this.div.style.width),e.h=parseInt(this.div.style.height)),e},calculateBounds:function(e,t){var i=null;if(null==e&&(e=this.getCachedCenter()),null==t&&(t=this.getResolution()),null!=e&&null!=t)var i=this.size.w*t/2,n=this.size.h*t/2,i=new OpenLayers.Bounds(e.lon-i,e.lat-n,e.lon+i,e.lat+n);return i},getCenter:function(){var e=null,t=this.getCachedCenter();return t&&(e=t.clone()),e},getCachedCenter:function(){return!this.center&&this.size&&(this.center=this.getLonLatFromViewPortPx({x:this.size.w/2,y:this.size.h/2})),this.center},getZoom:function(){return this.zoom},pan:function(e,t,i){if(i=OpenLayers.Util.applyDefaults(i,{animate:!0,dragging:!1}),i.dragging)0==e&&0==t||this.moveByPx(e,t);else{var n=this.getViewPortPxFromLonLat(this.getCachedCenter());e=n.add(e,t),!this.dragging&&e.equals(n)||(n=this.getLonLatFromViewPortPx(e),i.animate?this.panTo(n):(this.moveTo(n),this.dragging&&(this.dragging=!1,this.events.triggerEvent("moveend"))))}},panTo:function(e){if(this.panTween&&this.getExtent().scale(this.panRatio).containsLonLat(e)){var t=this.getCachedCenter();if(!e.equals(t)){var t=this.getPixelFromLonLat(t),i=this.getPixelFromLonLat(e),n=0,r=0;this.panTween.start({x:0,y:0},{x:i.x-t.x,y:i.y-t.y},this.panDuration,{callbacks:{eachStep:OpenLayers.Function.bind(function(e){this.moveByPx(e.x-n,e.y-r),n=Math.round(e.x),r=Math.round(e.y)},this),done:OpenLayers.Function.bind(function(t){this.moveTo(e),this.dragging=!1,this.events.triggerEvent("moveend")},this)}})}}else this.setCenter(e)},setCenter:function(e,t,i,n){this.panTween&&this.panTween.stop(),this.zoomTween&&this.zoomTween.stop(),this.moveTo(e,t,{dragging:i,forceZoomChange:n})},moveByPx:function(e,t){var i=this.size.w/2,n=this.size.h/2,r=i+e,s=n+t,o=this.baseLayer.wrapDateLine,a=0,l=0;if(this.restrictedExtent&&(a=i,l=n,o=!1),e=o||r<=this.maxPx.x-a&&r>=this.minPx.x+a?Math.round(e):0,t=s<=this.maxPx.y-l&&s>=this.minPx.y+l?Math.round(t):0,e||t){for(this.dragging||(this.dragging=!0,this.events.triggerEvent("movestart")),this.center=null,e&&(this.layerContainerOriginPx.x-=e,this.minPx.x-=e,this.maxPx.x-=e),t&&(this.layerContainerOriginPx.y-=t,this.minPx.y-=t,this.maxPx.y-=t),this.applyTransform(),n=0,r=this.layers.length;n<r;++n)i=this.layers[n],i.visibility&&(i===this.baseLayer||i.inRange)&&(i.moveByPx(e,t),i.events.triggerEvent("move"));this.events.triggerEvent("move")}},adjustZoom:function(e){if(this.baseLayer&&this.baseLayer.wrapDateLine){var t=this.baseLayer.resolutions,i=this.getMaxExtent().getWidth()/this.size.w;if(this.getResolutionForZoom(e)>i)if(this.fractionalZoom)e=this.getZoomForResolution(i);else for(var n=0|e,r=t.length;n<r;++n)if(t[n]<=i){e=n;break}}return e},getMinZoom:function(){return this.adjustZoom(0)},moveTo:function(e,t,i){null==e||e instanceof OpenLayers.LonLat||(e=new OpenLayers.LonLat(e)),i||(i={}),null!=t&&(t=parseFloat(t),this.fractionalZoom||(t=Math.round(t)));var n=t;t=this.adjustZoom(t),t!==n&&(e=this.getCenter());var n=i.dragging||this.dragging,r=i.forceZoomChange;if(this.getCachedCenter()||this.isValidLonLat(e)||(e=this.maxExtent.getCenterLonLat(),this.center=e.clone()),null!=this.restrictedExtent){null==e&&(e=this.center),null==t&&(t=this.getZoom());var s=this.getResolutionForZoom(t),s=this.calculateBounds(e,s);if(!this.restrictedExtent.containsBounds(s)){var o=this.restrictedExtent.getCenterLonLat();s.getWidth()>this.restrictedExtent.getWidth()?e=new OpenLayers.LonLat(o.lon,e.lat):s.left<this.restrictedExtent.left?e=e.add(this.restrictedExtent.left-s.left,0):s.right>this.restrictedExtent.right&&(e=e.add(this.restrictedExtent.right-s.right,0)),s.getHeight()>this.restrictedExtent.getHeight()?e=new OpenLayers.LonLat(e.lon,o.lat):s.bottom<this.restrictedExtent.bottom?e=e.add(0,this.restrictedExtent.bottom-s.bottom):s.top>this.restrictedExtent.top&&(e=e.add(0,this.restrictedExtent.top-s.top))}}if(r=r||this.isValidZoomLevel(t)&&t!=this.getZoom(),s=this.isValidLonLat(e)&&!e.equals(this.center),r||s||n){if(n||this.events.triggerEvent("movestart",{zoomChanged:r}),s&&(!r&&this.center&&this.centerLayerContainer(e),this.center=e.clone()),e=r?this.getResolutionForZoom(t):this.getResolution(),r||null==this.layerContainerOrigin){this.layerContainerOrigin=this.getCachedCenter(),this.layerContainerOriginPx.x=0,this.layerContainerOriginPx.y=0,this.applyTransform();var s=this.getMaxExtent({restricted:!0}),a=s.getCenterLonLat(),o=this.center.lon-a.lon,a=a.lat-this.center.lat,l=Math.round(s.getWidth()/e),h=Math.round(s.getHeight()/e);this.minPx={x:(this.size.w-l)/2-o/e,y:(this.size.h-h)/2-a/e},this.maxPx={x:this.minPx.x+Math.round(s.getWidth()/e),y:this.minPx.y+Math.round(s.getHeight()/e)}}for(r&&(this.zoom=t,this.resolution=e),e=this.getExtent(),this.baseLayer.visibility&&(this.baseLayer.moveTo(e,r,i.dragging),i.dragging||this.baseLayer.events.triggerEvent("moveend",{zoomChanged:r})),e=this.baseLayer.getExtent(),t=this.layers.length-1;0<=t;--t)s=this.layers[t],s===this.baseLayer||s.isBaseLayer||(o=s.calculateInRange(),s.inRange!=o&&((s.inRange=o)||s.display(!1),this.events.triggerEvent("changelayer",{layer:s,property:"visibility"})),o&&s.visibility&&(s.moveTo(e,r,i.dragging),i.dragging||s.events.triggerEvent("moveend",{zoomChanged:r})));if(this.events.triggerEvent("move"),n||this.events.triggerEvent("moveend"),r){for(t=0,i=this.popups.length;t<i;t++)this.popups[t].updatePosition();this.events.triggerEvent("zoomend")}}},centerLayerContainer:function(e){var t=this.getViewPortPxFromLonLat(this.layerContainerOrigin),i=this.getViewPortPxFromLonLat(e);if(null!=t&&null!=i){var n=this.layerContainerOriginPx.x;e=this.layerContainerOriginPx.y;var r=Math.round(t.x-i.x),t=Math.round(t.y-i.y);this.applyTransform(this.layerContainerOriginPx.x=r,this.layerContainerOriginPx.y=t),n-=r,e-=t,this.minPx.x-=n,this.maxPx.x-=n,this.minPx.y-=e,this.maxPx.y-=e}},isValidZoomLevel:function(e){return null!=e&&0<=e&&e<this.getNumZoomLevels()},isValidLonLat:function(e){var t=!1;return null!=e&&(t=this.getMaxExtent(),t=t.containsLonLat(e,{worldBounds:this.baseLayer.wrapDateLine&&t})),t},getProjection:function(){var e=this.getProjectionObject();return e?e.getCode():null},getProjectionObject:function(){var e=null;return null!=this.baseLayer&&(e=this.baseLayer.projection),
e},getMaxResolution:function(){var e=null;return null!=this.baseLayer&&(e=this.baseLayer.maxResolution),e},getMaxExtent:function(e){var t=null;return e&&e.restricted&&this.restrictedExtent?t=this.restrictedExtent:null!=this.baseLayer&&(t=this.baseLayer.maxExtent),t},getNumZoomLevels:function(){var e=null;return null!=this.baseLayer&&(e=this.baseLayer.numZoomLevels),e},getExtent:function(){var e=null;return null!=this.baseLayer&&(e=this.baseLayer.getExtent()),e},getResolution:function(){var e=null;return null!=this.baseLayer?e=this.baseLayer.getResolution():!0===this.allOverlays&&0<this.layers.length&&(e=this.layers[0].getResolution()),e},getUnits:function(){var e=null;return null!=this.baseLayer&&(e=this.baseLayer.units),e},getScale:function(){var e=null;return null!=this.baseLayer&&(e=this.getResolution(),e=OpenLayers.Util.getScaleFromResolution(e,this.baseLayer.units)),e},getZoomForExtent:function(e,t){var i=null;return null!=this.baseLayer&&(i=this.baseLayer.getZoomForExtent(e,t)),i},getResolutionForZoom:function(e){var t=null;return this.baseLayer&&(t=this.baseLayer.getResolutionForZoom(e)),t},getZoomForResolution:function(e,t){var i=null;return null!=this.baseLayer&&(i=this.baseLayer.getZoomForResolution(e,t)),i},zoomTo:function(e,t){var i=this;if(i.isValidZoomLevel(e)){i.baseLayer.wrapDateLine&&(e=i.adjustZoom(e));var n=t?i.getZoomTargetCenter(t,i.getResolutionForZoom(e)):i.getCenter();if(n&&i.events.triggerEvent("zoomstart",{center:n,zoom:e}),i.zoomTween){i.zoomTween.stop();var r=i.getResolution(),s=i.getResolutionForZoom(e),r={scale:r/s};t||(s=i.getSize(),t={x:s.w/2,y:s.h/2}),i.zoomTween.start({scale:1},r,i.zoomDuration,{minFrameRate:50,callbacks:{eachStep:function(e){var n=i.layerContainerOriginPx;e=e.scale,i.applyTransform(n.x+((e-1)*(n.x-t.x)|0),n.y+((e-1)*(n.y-t.y)|0),e)},done:function(e){i.applyTransform();var r=i.getResolution()/e.scale,s=i.getZoomForResolution(r,!0);e=1===e.scale?n:i.getZoomTargetCenter(t,r),i.moveTo(e,s)}}})}else i.setCenter(n,e)}},zoomIn:function(){this.zoomTween&&this.zoomTween.stop(),this.zoomTo(this.getZoom()+1)},zoomOut:function(){this.zoomTween&&this.zoomTween.stop(),this.zoomTo(this.getZoom()-1)},zoomToExtent:function(e,t){e instanceof OpenLayers.Bounds||(e=new OpenLayers.Bounds(e));var i=e.getCenterLonLat();if(this.baseLayer.wrapDateLine){for(i=this.getMaxExtent(),e=e.clone();e.right<e.left;)e.right+=i.getWidth();i=e.getCenterLonLat().wrapDateLine(i)}this.setCenter(i,this.getZoomForExtent(e,t))},zoomToMaxExtent:function(e){e=this.getMaxExtent({restricted:!e||e.restricted}),this.zoomToExtent(e)},zoomToScale:function(e,t){var i=OpenLayers.Util.getResolutionFromScale(e,this.baseLayer.units),n=this.size.w*i/2,i=this.size.h*i/2,r=this.getCachedCenter(),n=new OpenLayers.Bounds(r.lon-n,r.lat-i,r.lon+n,r.lat+i);this.zoomToExtent(n,t)},getLonLatFromViewPortPx:function(e){var t=null;return null!=this.baseLayer&&(t=this.baseLayer.getLonLatFromViewPortPx(e)),t},getViewPortPxFromLonLat:function(e){var t=null;return null!=this.baseLayer&&(t=this.baseLayer.getViewPortPxFromLonLat(e)),t},getZoomTargetCenter:function(e,t){var i=null,n=this.getSize(),r=n.w/2-e.x,n=e.y-n.h/2,s=this.getLonLatFromPixel(e);return s&&(i=new OpenLayers.LonLat(s.lon+r*t,s.lat+n*t)),i},getLonLatFromPixel:function(e){return this.getLonLatFromViewPortPx(e)},getPixelFromLonLat:function(e){return e=this.getViewPortPxFromLonLat(e),e.x=Math.round(e.x),e.y=Math.round(e.y),e},getGeodesicPixelSize:function(e){var t=e?this.getLonLatFromPixel(e):this.getCachedCenter()||new OpenLayers.LonLat(0,0),i=this.getResolution();e=t.add(-i/2,0);var n=t.add(i/2,0),r=t.add(0,-i/2),t=t.add(0,i/2),i=new OpenLayers.Projection("EPSG:4326"),s=this.getProjectionObject()||i;return s.equals(i)||(e.transform(s,i),n.transform(s,i),r.transform(s,i),t.transform(s,i)),new OpenLayers.Size(OpenLayers.Util.distVincenty(e,n),OpenLayers.Util.distVincenty(r,t))},getViewPortPxFromLayerPx:function(e){var t=null;return null!=e&&(t=e.add(this.layerContainerOriginPx.x,this.layerContainerOriginPx.y)),t},getLayerPxFromViewPortPx:function(e){var t=null;return null!=e&&(t=e.add(-this.layerContainerOriginPx.x,-this.layerContainerOriginPx.y),isNaN(t.x)||isNaN(t.y))&&(t=null),t},getLonLatFromLayerPx:function(e){return e=this.getViewPortPxFromLayerPx(e),this.getLonLatFromViewPortPx(e)},getLayerPxFromLonLat:function(e){return e=this.getPixelFromLonLat(e),this.getLayerPxFromViewPortPx(e)},applyTransform:function(e,t,i){i=i||1;var n=this.layerContainerOriginPx,r=1!==i;e=e||n.x,t=t||n.y;var s=this.layerContainerDiv.style,o=this.applyTransform.transform,a=this.applyTransform.template;if(void 0===o&&(o=OpenLayers.Util.vendorPrefix.style("transform"),this.applyTransform.transform=o)){var l=OpenLayers.Element.getStyle(this.viewPortDiv,OpenLayers.Util.vendorPrefix.css("transform"));l&&"none"===l||(a=["translate3d(",",0) ","scale3d(",",1)"],s[o]=[a[0],"0,0",a[1]].join("")),a&&~s[o].indexOf(a[0])||(a=["translate(",") ","scale(",")"]),this.applyTransform.template=a}null===o||"translate3d("!==a[0]&&!0!==r?(s.left=e+"px",s.top=t+"px",null!==o&&(s[o]="")):(!0===r&&"translate("===a[0]&&(e-=n.x,t-=n.y,s.left=n.x+"px",s.top=n.y+"px"),s[o]=[a[0],e,"px,",t,"px",a[1],a[2],i,",",i,a[3]].join(""))},CLASS_NAME:"OpenLayers.Map"}),OpenLayers.Map.TILE_WIDTH=256,OpenLayers.Map.TILE_HEIGHT=256,OpenLayers.Icon=OpenLayers.Class({url:null,size:null,offset:null,calculateOffset:null,imageDiv:null,px:null,initialize:function(e,t,i,n){this.url=e,this.size=t||{w:20,h:20},this.offset=i||{x:-(this.size.w/2),y:-(this.size.h/2)},this.calculateOffset=n,e=OpenLayers.Util.createUniqueID("OL_Icon_"),this.imageDiv=OpenLayers.Util.createAlphaImageDiv(e)},destroy:function(){this.erase(),OpenLayers.Event.stopObservingElement(this.imageDiv.firstChild),this.imageDiv.innerHTML="",this.imageDiv=null},clone:function(){return new OpenLayers.Icon(this.url,this.size,this.offset,this.calculateOffset)},setSize:function(e){null!=e&&(this.size=e),this.draw()},setUrl:function(e){null!=e&&(this.url=e),this.draw()},draw:function(e){return OpenLayers.Util.modifyAlphaImageDiv(this.imageDiv,null,null,this.size,this.url,"absolute"),this.moveTo(e),this.imageDiv},erase:function(){null!=this.imageDiv&&null!=this.imageDiv.parentNode&&OpenLayers.Element.remove(this.imageDiv)},setOpacity:function(e){OpenLayers.Util.modifyAlphaImageDiv(this.imageDiv,null,null,null,null,null,null,null,e)},moveTo:function(e){null!=e&&(this.px=e),null!=this.imageDiv&&(null==this.px?this.display(!1):(this.calculateOffset&&(this.offset=this.calculateOffset(this.size)),OpenLayers.Util.modifyAlphaImageDiv(this.imageDiv,null,{x:this.px.x+this.offset.x,y:this.px.y+this.offset.y})))},display:function(e){this.imageDiv.style.display=e?"":"none"},isDrawn:function(){return this.imageDiv&&this.imageDiv.parentNode&&11!=this.imageDiv.parentNode.nodeType},CLASS_NAME:"OpenLayers.Icon"}),OpenLayers.Marker=OpenLayers.Class({icon:null,lonlat:null,events:null,map:null,initialize:function(e,t){this.lonlat=e;var i=t?t:OpenLayers.Marker.defaultIcon();null==this.icon?this.icon=i:(this.icon.url=i.url,this.icon.size=i.size,this.icon.offset=i.offset,this.icon.calculateOffset=i.calculateOffset),this.events=new OpenLayers.Events(this,this.icon.imageDiv)},destroy:function(){this.erase(),this.map=null,this.events.destroy(),this.events=null,null!=this.icon&&(this.icon.destroy(),this.icon=null)},draw:function(e){return this.icon.draw(e)},erase:function(){null!=this.icon&&this.icon.erase()},moveTo:function(e){null!=e&&null!=this.icon&&this.icon.moveTo(e),this.lonlat=this.map.getLonLatFromLayerPx(e)},isDrawn:function(){return this.icon&&this.icon.isDrawn()},onScreen:function(){var e=!1;return this.map&&(e=this.map.getExtent().containsLonLat(this.lonlat)),e},inflate:function(e){this.icon&&this.icon.setSize({w:this.icon.size.w*e,h:this.icon.size.h*e})},setOpacity:function(e){this.icon.setOpacity(e)},setUrl:function(e){this.icon.setUrl(e)},display:function(e){this.icon.display(e)},CLASS_NAME:"OpenLayers.Marker"}),OpenLayers.Marker.defaultIcon=function(){return new OpenLayers.Icon(OpenLayers.Util.getImageLocation("marker.png"),{w:21,h:25},{x:-10.5,y:-25})},OpenLayers.Layer=OpenLayers.Class({id:null,name:null,div:null,opacity:1,alwaysInRange:null,RESOLUTION_PROPERTIES:"scales resolutions maxScale minScale maxResolution minResolution numZoomLevels maxZoomLevel".split(" "),events:null,map:null,isBaseLayer:!1,alpha:!1,displayInLayerSwitcher:!0,visibility:!0,attribution:null,inRange:!1,imageSize:null,options:null,eventListeners:null,gutter:0,projection:null,units:null,scales:null,resolutions:null,maxExtent:null,minExtent:null,maxResolution:null,minResolution:null,numZoomLevels:null,minScale:null,maxScale:null,displayOutsideMaxExtent:!1,wrapDateLine:!1,metadata:null,initialize:function(e,t){this.metadata={},t=OpenLayers.Util.extend({},t),null!=this.alwaysInRange&&(t.alwaysInRange=this.alwaysInRange),this.addOptions(t),this.name=e,null==this.id&&(this.id=OpenLayers.Util.createUniqueID(this.CLASS_NAME+"_"),this.div=OpenLayers.Util.createDiv(this.id),this.div.style.width="100%",this.div.style.height="100%",this.div.dir="ltr",this.events=new OpenLayers.Events(this,this.div),this.eventListeners instanceof Object)&&this.events.on(this.eventListeners)},destroy:function(e){null==e&&(e=!0),null!=this.map&&this.map.removeLayer(this,e),this.options=this.div=this.name=this.map=this.projection=null,this.events&&(this.eventListeners&&this.events.un(this.eventListeners),this.events.destroy()),this.events=this.eventListeners=null},clone:function(e){return null==e&&(e=new OpenLayers.Layer(this.name,this.getOptions())),OpenLayers.Util.applyDefaults(e,this),e.map=null,e},getOptions:function(){var e,t={};for(e in this.options)t[e]=this[e];return t},setName:function(e){e!=this.name&&(this.name=e,null!=this.map&&this.map.events.triggerEvent("changelayer",{layer:this,property:"name"}))},addOptions:function(e,t){if(null==this.options&&(this.options={}),e&&("string"==typeof e.projection&&(e.projection=new OpenLayers.Projection(e.projection)),e.projection&&OpenLayers.Util.applyDefaults(e,OpenLayers.Projection.defaults[e.projection.getCode()]),!e.maxExtent||e.maxExtent instanceof OpenLayers.Bounds||(e.maxExtent=new OpenLayers.Bounds(e.maxExtent)),!e.minExtent||e.minExtent instanceof OpenLayers.Bounds||(e.minExtent=new OpenLayers.Bounds(e.minExtent))),OpenLayers.Util.extend(this.options,e),OpenLayers.Util.extend(this,e),this.projection&&this.projection.getUnits()&&(this.units=this.projection.getUnits()),this.map){var i,n=this.map.getResolution(),r=this.RESOLUTION_PROPERTIES.concat(["projection","units","minExtent","maxExtent"]);for(i in e)if(e.hasOwnProperty(i)&&0<=OpenLayers.Util.indexOf(r,i)){this.initResolutions(),t&&this.map.baseLayer===this&&(this.map.setCenter(this.map.getCenter(),this.map.getZoomForResolution(n),!1,!0),this.map.events.triggerEvent("changebaselayer",{layer:this}));break}}},onMapResize:function(){},redraw:function(){var e=!1;if(this.map){this.inRange=this.calculateInRange();var t=this.getExtent();t&&this.inRange&&this.visibility&&(this.moveTo(t,!0,!1),this.events.triggerEvent("moveend",{zoomChanged:!0}),e=!0)}return e},moveTo:function(e,t,i){e=this.visibility,this.isBaseLayer||(e=e&&this.inRange),this.display(e)},moveByPx:function(e,t){},setMap:function(e){null==this.map&&(this.map=e,this.maxExtent=this.maxExtent||this.map.maxExtent,this.minExtent=this.minExtent||this.map.minExtent,this.projection=this.projection||this.map.projection,"string"==typeof this.projection&&(this.projection=new OpenLayers.Projection(this.projection)),this.projection&&this.projection.getUnits()?this.units=this.projection.getUnits():this.units=this.units||this.map.units,this.initResolutions(),this.isBaseLayer||(this.inRange=this.calculateInRange(),this.div.style.display=this.visibility&&this.inRange?"":"none"),this.setTileSize())},afterAdd:function(){},removeMap:function(e){},getImageSize:function(e){return this.imageSize||this.tileSize},setTileSize:function(e){this.tileSize=e=e?e:this.tileSize?this.tileSize:this.map.getTileSize(),this.gutter&&(this.imageSize=new OpenLayers.Size(e.w+2*this.gutter,e.h+2*this.gutter))},getVisibility:function(){return this.visibility},setVisibility:function(e){e!=this.visibility&&(this.visibility=e,this.display(e),this.redraw(),null!=this.map&&this.map.events.triggerEvent("changelayer",{layer:this,property:"visibility"}),this.events.triggerEvent("visibilitychanged"))},display:function(e){e!=("none"!=this.div.style.display)&&(this.div.style.display=e&&this.calculateInRange()?"block":"none")},calculateInRange:function(){var e=!1;return this.alwaysInRange?e=!0:this.map&&(e=this.map.getResolution(),e=e>=this.minResolution&&e<=this.maxResolution),e},setIsBaseLayer:function(e){e!=this.isBaseLayer&&(this.isBaseLayer=e,null!=this.map&&this.map.events.triggerEvent("changebaselayer",{layer:this}))},initResolutions:function(){var e,t,i,n={},r=!0;for(e=0,t=this.RESOLUTION_PROPERTIES.length;e<t;e++)i=this.RESOLUTION_PROPERTIES[e],n[i]=this.options[i],r&&this.options[i]&&(r=!1);if(null==this.options.alwaysInRange&&(this.alwaysInRange=r),null==n.resolutions&&(n.resolutions=this.resolutionsFromScales(n.scales)),null==n.resolutions&&(n.resolutions=this.calculateResolutions(n)),null==n.resolutions){for(e=0,t=this.RESOLUTION_PROPERTIES.length;e<t;e++)i=this.RESOLUTION_PROPERTIES[e],n[i]=null!=this.options[i]?this.options[i]:this.map[i];null==n.resolutions&&(n.resolutions=this.resolutionsFromScales(n.scales)),null==n.resolutions&&(n.resolutions=this.calculateResolutions(n))}var s;this.options.maxResolution&&"auto"!==this.options.maxResolution&&(s=this.options.maxResolution),this.options.minScale&&(s=OpenLayers.Util.getResolutionFromScale(this.options.minScale,this.units));var o;if(this.options.minResolution&&"auto"!==this.options.minResolution&&(o=this.options.minResolution),this.options.maxScale&&(o=OpenLayers.Util.getResolutionFromScale(this.options.maxScale,this.units)),n.resolutions&&(n.resolutions.sort(function(e,t){return t-e}),s||(s=n.resolutions[0]),o||(o=n.resolutions[n.resolutions.length-1])),this.resolutions=n.resolutions){for(t=this.resolutions.length,this.scales=Array(t),e=0;e<t;e++)this.scales[e]=OpenLayers.Util.getScaleFromResolution(this.resolutions[e],this.units);this.numZoomLevels=t}(this.minResolution=o)&&(this.maxScale=OpenLayers.Util.getScaleFromResolution(o,this.units)),(this.maxResolution=s)&&(this.minScale=OpenLayers.Util.getScaleFromResolution(s,this.units))},resolutionsFromScales:function(e){if(null!=e){var t,i,n;for(n=e.length,t=Array(n),i=0;i<n;i++)t[i]=OpenLayers.Util.getResolutionFromScale(e[i],this.units);return t}},calculateResolutions:function(e){var t,i,n=e.maxResolution;if(null!=e.minScale?n=OpenLayers.Util.getResolutionFromScale(e.minScale,this.units):"auto"==n&&null!=this.maxExtent&&(t=this.map.getSize(),i=this.maxExtent.getWidth()/t.w,t=this.maxExtent.getHeight()/t.h,n=Math.max(i,t)),i=e.minResolution,null!=e.maxScale?i=OpenLayers.Util.getResolutionFromScale(e.maxScale,this.units):"auto"==e.minResolution&&null!=this.minExtent&&(t=this.map.getSize(),i=this.minExtent.getWidth()/t.w,t=this.minExtent.getHeight()/t.h,i=Math.max(i,t)),"number"!=typeof n&&"number"!=typeof i&&null!=this.maxExtent&&(n=this.map.getTileSize(),n=Math.max(this.maxExtent.getWidth()/n.w,this.maxExtent.getHeight()/n.h)),t=e.maxZoomLevel,e=e.numZoomLevels,"number"==typeof i&&"number"==typeof n&&void 0===e?e=Math.floor(Math.log(n/i)/Math.log(2))+1:void 0===e&&null!=t&&(e=t+1),!("number"!=typeof e||0>=e||"number"!=typeof n&&"number"!=typeof i)){t=Array(e);var r=2;"number"==typeof i&&"number"==typeof n&&(r=Math.pow(n/i,1/(e-1)));var s;if("number"==typeof n)for(s=0;s<e;s++)t[s]=n/Math.pow(r,s);else for(s=0;s<e;s++)t[e-1-s]=i*Math.pow(r,s);return t}},getResolution:function(){var e=this.map.getZoom();return this.getResolutionForZoom(e)},getExtent:function(){return this.map.calculateBounds()},getZoomForExtent:function(e,t){var i=this.map.getSize(),i=Math.max(e.getWidth()/i.w,e.getHeight()/i.h);return this.getZoomForResolution(i,t)},getDataExtent:function(){},getResolutionForZoom:function(e){if(e=Math.max(0,Math.min(e,this.resolutions.length-1)),this.map.fractionalZoom){var t=Math.floor(e);e=this.resolutions[t]-(e-t)*(this.resolutions[t]-this.resolutions[Math.ceil(e)])}else e=this.resolutions[Math.round(e)];return e},getZoomForResolution:function(e,t){var i,n;if(this.map.fractionalZoom){var r,s=0,o=this.resolutions[s],a=this.resolutions[this.resolutions.length-1];for(i=0,n=this.resolutions.length;i<n;++i)if(r=this.resolutions[i],r>=e&&(o=r,s=i),r<=e){a=r;break}i=o-a,i=0<i?s+(o-e)/i:s}else{for(o=Number.POSITIVE_INFINITY,i=0,n=this.resolutions.length;i<n;i++)if(t){if(s=Math.abs(this.resolutions[i]-e),s>o)break;o=s}else if(this.resolutions[i]<e)break;i=Math.max(0,i-1)}return i},getLonLatFromViewPortPx:function(e){var t=null,i=this.map;if(null!=e&&i.minPx){var t=i.getResolution(),n=i.getMaxExtent({restricted:!0}),t=new OpenLayers.LonLat((e.x-i.minPx.x)*t+n.left,(i.minPx.y-e.y)*t+n.top);this.wrapDateLine&&(t=t.wrapDateLine(this.maxExtent))}return t},getViewPortPxFromLonLat:function(e,t){var i=null;return null!=e&&(t=t||this.map.getResolution(),i=this.map.calculateBounds(null,t),i=new OpenLayers.Pixel(1/t*(e.lon-i.left),1/t*(i.top-e.lat))),i},setOpacity:function(e){if(e!=this.opacity){this.opacity=e;for(var t=this.div.childNodes,i=0,n=t.length;i<n;++i){var r=t[i].firstChild||t[i],s=t[i].lastChild;s&&"iframe"===s.nodeName.toLowerCase()&&(r=s.parentNode),OpenLayers.Util.modifyDOMElement(r,null,null,null,null,null,null,e)}null!=this.map&&this.map.events.triggerEvent("changelayer",{layer:this,property:"opacity"})}},getZIndex:function(){return this.div.style.zIndex},setZIndex:function(e){this.div.style.zIndex=e},adjustBounds:function(e){if(this.gutter){var t=this.gutter*this.map.getResolution();e=new OpenLayers.Bounds(e.left-t,e.bottom-t,e.right+t,e.top+t)}return this.wrapDateLine&&(t={rightTolerance:this.getResolution(),leftTolerance:this.getResolution()},e=e.wrapDateLine(this.maxExtent,t)),e},CLASS_NAME:"OpenLayers.Layer"}),OpenLayers.Layer.HTTPRequest=OpenLayers.Class(OpenLayers.Layer,{URL_HASH_FACTOR:(Math.sqrt(5)-1)/2,url:null,params:null,reproject:!1,initialize:function(e,t,i,n){OpenLayers.Layer.prototype.initialize.apply(this,[e,n]),this.url=t,this.params||(this.params=OpenLayers.Util.extend({},i))},destroy:function(){this.params=this.url=null,OpenLayers.Layer.prototype.destroy.apply(this,arguments)},clone:function(e){return null==e&&(e=new OpenLayers.Layer.HTTPRequest(this.name,this.url,this.params,this.getOptions())),e=OpenLayers.Layer.prototype.clone.apply(this,[e])},setUrl:function(e){this.url=e},mergeNewParams:function(e){return this.params=OpenLayers.Util.extend(this.params,e),e=this.redraw(),null!=this.map&&this.map.events.triggerEvent("changelayer",{layer:this,property:"params"}),e},redraw:function(e){return e?(this.events.triggerEvent("refresh"),this.mergeNewParams({_olSalt:Math.random()})):OpenLayers.Layer.prototype.redraw.apply(this,[])},selectUrl:function(e,t){for(var i=1,n=0,r=e.length;n<r;n++)i*=e.charCodeAt(n)*this.URL_HASH_FACTOR,i-=Math.floor(i);return t[Math.floor(i*t.length)]},getFullRequestString:function(e,t){var i=t||this.url,n=OpenLayers.Util.extend({},this.params),n=OpenLayers.Util.extend(n,e),r=OpenLayers.Util.getParameterString(n);OpenLayers.Util.isArray(i)&&(i=this.selectUrl(r,i));var s,r=OpenLayers.Util.upperCaseObject(OpenLayers.Util.getParameters(i));for(s in n)s.toUpperCase()in r&&delete n[s];return r=OpenLayers.Util.getParameterString(n),OpenLayers.Util.urlAppend(i,r)},CLASS_NAME:"OpenLayers.Layer.HTTPRequest"}),OpenLayers.Tile=OpenLayers.Class({events:null,eventListeners:null,id:null,layer:null,url:null,bounds:null,size:null,position:null,isLoading:!1,initialize:function(e,t,i,n,r,s){this.layer=e,this.position=t.clone(),this.setBounds(i),this.url=n,r&&(this.size=r.clone()),this.id=OpenLayers.Util.createUniqueID("Tile_"),OpenLayers.Util.extend(this,s),this.events=new OpenLayers.Events(this),this.eventListeners instanceof Object&&this.events.on(this.eventListeners)},unload:function(){this.isLoading&&(this.isLoading=!1,this.events.triggerEvent("unload"))},destroy:function(){this.position=this.size=this.bounds=this.layer=null,this.eventListeners&&this.events.un(this.eventListeners),this.events.destroy(),this.events=this.eventListeners=null},draw:function(e){e||this.clear();var t=this.shouldDraw();return t&&!e&&!1===this.events.triggerEvent("beforedraw")&&(t=null),t},shouldDraw:function(){var e=!1,t=this.layer.maxExtent;if(t){var i=this.layer.map,i=i.baseLayer.wrapDateLine&&i.getMaxExtent();this.bounds.intersectsBounds(t,{inclusive:!1,worldBounds:i})&&(e=!0)}return e||this.layer.displayOutsideMaxExtent},setBounds:function(e){if(e=e.clone(),this.layer.map.baseLayer.wrapDateLine){var t=this.layer.map.getMaxExtent(),i=this.layer.map.getResolution();e=e.wrapDateLine(t,{leftTolerance:i,rightTolerance:i})}this.bounds=e},moveTo:function(e,t,i){null==i&&(i=!0),this.setBounds(e),this.position=t.clone(),i&&this.draw()},clear:function(e){},CLASS_NAME:"OpenLayers.Tile"}),OpenLayers.Tile.Image=OpenLayers.Class(OpenLayers.Tile,{url:null,imgDiv:null,frame:null,imageReloadAttempts:null,layerAlphaHack:null,asyncRequestId:null,maxGetUrlLength:null,canvasContext:null,crossOriginKeyword:null,initialize:function(e,t,i,n,r,s){OpenLayers.Tile.prototype.initialize.apply(this,arguments),this.url=n,this.layerAlphaHack=this.layer.alpha&&OpenLayers.Util.alphaHack(),(null!=this.maxGetUrlLength||this.layer.gutter||this.layerAlphaHack)&&(this.frame=document.createElement("div"),this.frame.style.position="absolute",this.frame.style.overflow="hidden"),null!=this.maxGetUrlLength&&OpenLayers.Util.extend(this,OpenLayers.Tile.Image.IFrame)},destroy:function(){this.imgDiv&&(this.clear(),this.frame=this.imgDiv=null),this.asyncRequestId=null,OpenLayers.Tile.prototype.destroy.apply(this,arguments)},draw:function(){var e=OpenLayers.Tile.prototype.draw.apply(this,arguments);return e?(this.layer!=this.layer.map.baseLayer&&this.layer.reproject&&(this.bounds=this.getBoundsFromBaseLayer(this.position)),this.isLoading?this._loadEvent="reload":(this.isLoading=!0,this._loadEvent="loadstart"),this.renderTile(),this.positionTile()):!1===e&&this.unload(),e},renderTile:function(){if(this.layer.async){var e=this.asyncRequestId=(this.asyncRequestId||0)+1;this.layer.getURLasync(this.bounds,function(t){e==this.asyncRequestId&&(this.url=t,this.initImage())},this)}else this.url=this.layer.getURL(this.bounds),this.initImage()},positionTile:function(){var e=this.getTile().style,t=this.frame?this.size:this.layer.getImageSize(this.bounds),i=1;this.layer instanceof OpenLayers.Layer.Grid&&(i=this.layer.getServerResolution()/this.layer.map.getResolution()),e.left=this.position.x+"px",e.top=this.position.y+"px",e.width=Math.round(i*t.w)+"px",e.height=Math.round(i*t.h)+"px"},clear:function(){OpenLayers.Tile.prototype.clear.apply(this,arguments);var e=this.imgDiv;if(e){var t=this.getTile();t.parentNode===this.layer.div&&this.layer.div.removeChild(t),this.setImgSrc(),!0===this.layerAlphaHack&&(e.style.filter=""),OpenLayers.Element.removeClass(e,"olImageLoadError")}this.canvasContext=null},getImage:function(){if(!this.imgDiv){this.imgDiv=OpenLayers.Tile.Image.IMAGE.cloneNode(!1);var e=this.imgDiv.style;if(this.frame){var t=0,i=0;this.layer.gutter&&(t=this.layer.gutter/this.layer.tileSize.w*100,i=this.layer.gutter/this.layer.tileSize.h*100),e.left=-t+"%",e.top=-i+"%",e.width=2*t+100+"%",e.height=2*i+100+"%"}e.visibility="hidden",e.opacity=0,1>this.layer.opacity&&(e.filter="alpha(opacity="+100*this.layer.opacity+")"),e.position="absolute",this.layerAlphaHack&&(e.paddingTop=e.height,e.height="0",e.width="100%"),this.frame&&this.frame.appendChild(this.imgDiv)}return this.imgDiv},setImage:function(e){this.imgDiv=e},initImage:function(){if(this.url||this.imgDiv){this.events.triggerEvent("beforeload"),this.layer.div.appendChild(this.getTile()),this.events.triggerEvent(this._loadEvent);var e=this.getImage(),t=e.getAttribute("src")||"";this.url&&OpenLayers.Util.isEquivalentUrl(t,this.url)?this._loadTimeout=window.setTimeout(OpenLayers.Function.bind(this.onImageLoad,this),0):(this.stopLoading(),this.crossOriginKeyword&&e.removeAttribute("crossorigin"),OpenLayers.Event.observe(e,"load",OpenLayers.Function.bind(this.onImageLoad,this)),OpenLayers.Event.observe(e,"error",OpenLayers.Function.bind(this.onImageError,this)),this.imageReloadAttempts=0,this.setImgSrc(this.url))}else this.isLoading=!1},setImgSrc:function(e){var t=this.imgDiv;e?(t.style.visibility="hidden",t.style.opacity=0,this.crossOriginKeyword&&("data:"!==e.substr(0,5)?t.setAttribute("crossorigin",this.crossOriginKeyword):t.removeAttribute("crossorigin")),t.src=e):(this.stopLoading(),this.imgDiv=null,t.parentNode&&t.parentNode.removeChild(t))},getTile:function(){return this.frame?this.frame:this.getImage()},createBackBuffer:function(){if(this.imgDiv&&!this.isLoading){var e;return this.frame?(e=this.frame.cloneNode(!1),e.appendChild(this.imgDiv)):e=this.imgDiv,this.imgDiv=null,e}},onImageLoad:function(){var e=this.imgDiv;this.stopLoading(),e.style.visibility="inherit",e.style.opacity=this.layer.opacity,this.isLoading=!1,this.canvasContext=null,this.events.triggerEvent("loadend"),!0===this.layerAlphaHack&&(e.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+e.src+"', sizingMethod='scale')")},onImageError:function(){var e=this.imgDiv;null!=e.src&&(this.imageReloadAttempts++,this.imageReloadAttempts<=OpenLayers.IMAGE_RELOAD_ATTEMPTS?this.setImgSrc(this.layer.getURL(this.bounds)):(OpenLayers.Element.addClass(e,"olImageLoadError"),this.events.triggerEvent("loaderror"),this.onImageLoad()))},stopLoading:function(){OpenLayers.Event.stopObservingElement(this.imgDiv),window.clearTimeout(this._loadTimeout),delete this._loadTimeout},getCanvasContext:function(){if(OpenLayers.CANVAS_SUPPORTED&&this.imgDiv&&!this.isLoading){if(!this.canvasContext){var e=document.createElement("canvas");e.width=this.size.w,e.height=this.size.h,this.canvasContext=e.getContext("2d"),this.canvasContext.drawImage(this.imgDiv,0,0)}return this.canvasContext}},CLASS_NAME:"OpenLayers.Tile.Image"}),OpenLayers.Tile.Image.IMAGE=function(){var e=new Image;return e.className="olTileImage",e.galleryImg="no",e}(),OpenLayers.Layer.Grid=OpenLayers.Class(OpenLayers.Layer.HTTPRequest,{tileSize:null,tileOriginCorner:"bl",tileOrigin:null,tileOptions:null,tileClass:OpenLayers.Tile.Image,grid:null,singleTile:!1,ratio:1.5,buffer:0,transitionEffect:"resize",numLoadingTiles:0,serverResolutions:null,loading:!1,backBuffer:null,gridResolution:null,backBufferResolution:null,backBufferLonLat:null,backBufferTimerId:null,removeBackBufferDelay:null,className:null,gridLayout:null,rowSign:null,transitionendEvents:["transitionend","webkitTransitionEnd","otransitionend","oTransitionEnd"],initialize:function(e,t,i,n){OpenLayers.Layer.HTTPRequest.prototype.initialize.apply(this,arguments),this.grid=[],this._removeBackBuffer=OpenLayers.Function.bind(this.removeBackBuffer,this),this.initProperties(),this.rowSign="t"===this.tileOriginCorner.substr(0,1)?1:-1},initProperties:function(){void 0===this.options.removeBackBufferDelay&&(this.removeBackBufferDelay=this.singleTile?0:2500),void 0===this.options.className&&(this.className=this.singleTile?"olLayerGridSingleTile":"olLayerGrid")},setMap:function(e){OpenLayers.Layer.HTTPRequest.prototype.setMap.call(this,e),OpenLayers.Element.addClass(this.div,this.className)},removeMap:function(e){this.removeBackBuffer()},destroy:function(){this.removeBackBuffer(),this.clearGrid(),this.tileSize=this.grid=null,OpenLayers.Layer.HTTPRequest.prototype.destroy.apply(this,arguments)},clearGrid:function(){if(this.grid){for(var e=0,t=this.grid.length;e<t;e++)for(var i=this.grid[e],n=0,r=i.length;n<r;n++)this.destroyTile(i[n]);this.grid=[],this.gridLayout=this.gridResolution=null}},addOptions:function(e,t){var i=void 0!==e.singleTile&&e.singleTile!==this.singleTile;OpenLayers.Layer.HTTPRequest.prototype.addOptions.apply(this,arguments),this.map&&i&&(this.initProperties(),this.clearGrid(),this.tileSize=this.options.tileSize,this.setTileSize(),this.visibility&&this.moveTo(null,!0))},clone:function(e){return null==e&&(e=new OpenLayers.Layer.Grid(this.name,this.url,this.params,this.getOptions())),e=OpenLayers.Layer.HTTPRequest.prototype.clone.apply(this,[e]),null!=this.tileSize&&(e.tileSize=this.tileSize.clone()),e.grid=[],e.gridResolution=null,e.backBuffer=null,e.backBufferTimerId=null,e.loading=!1,e.numLoadingTiles=0,e},moveTo:function(e,t,i){if(OpenLayers.Layer.HTTPRequest.prototype.moveTo.apply(this,arguments),e=e||this.map.getExtent(),null!=e){var n=!this.grid.length||t,r=this.getTilesBounds(),s=this.map.getResolution();this.getServerResolution(s),this.singleTile?(n||!i&&!r.containsBounds(e))&&(t&&"resize"!==this.transitionEffect&&this.removeBackBuffer(),t&&"resize"!==this.transitionEffect||this.applyBackBuffer(s),this.initSingleTile(e)):(n=n||!r.intersectsBounds(e,{worldBounds:this.map.baseLayer.wrapDateLine&&this.map.getMaxExtent()}))?(!t||"resize"!==this.transitionEffect&&this.gridResolution!==s||this.applyBackBuffer(s),this.initGriddedTiles(e)):this.moveGriddedTiles()}},getTileData:function(e){var t=null,i=e.lon,n=e.lat,r=this.grid.length;if(this.map&&r){var s=this.map.getResolution();e=this.tileSize.w;var o=this.tileSize.h,a=this.grid[0][0].bounds,l=a.left,a=a.top;if(i<l&&this.map.baseLayer.wrapDateLine)var h=this.map.getMaxExtent().getWidth(),i=i+h*Math.ceil((l-i)/h);i=(i-l)/(s*e),n=(a-n)/(s*o),s=Math.floor(i),l=Math.floor(n),0<=l&&l<r&&(r=this.grid[l][s])&&(t={tile:r,i:Math.floor((i-s)*e),j:Math.floor((n-l)*o)})}return t},destroyTile:function(e){this.removeTileMonitoringHooks(e),e.destroy()},getServerResolution:function(e){var t=Number.POSITIVE_INFINITY;if(e=e||this.map.getResolution(),this.serverResolutions&&-1===OpenLayers.Util.indexOf(this.serverResolutions,e)){var i,n,r,s;for(i=this.serverResolutions.length-1;0<=i&&(r=this.serverResolutions[i],n=Math.abs(r-e),!(n>t));i--)t=n,s=r;e=s}return e},getServerZoom:function(){var e=this.getServerResolution();return this.serverResolutions?OpenLayers.Util.indexOf(this.serverResolutions,e):this.map.getZoomForResolution(e)+(this.zoomOffset||0)},applyBackBuffer:function(e){null!==this.backBufferTimerId&&this.removeBackBuffer();var t=this.backBuffer;if(!t){if(t=this.createBackBuffer(),!t)return;e===this.gridResolution?this.div.insertBefore(t,this.div.firstChild):this.map.baseLayer.div.parentNode.insertBefore(t,this.map.baseLayer.div),this.backBuffer=t;var i=this.grid[0][0].bounds;this.backBufferLonLat={lon:i.left,lat:i.top},this.backBufferResolution=this.gridResolution}for(var n,i=this.backBufferResolution/e,r=t.childNodes,s=r.length-1;0<=s;--s)n=r[s],n.style.top=(i*n._i*t._th|0)+"px",n.style.left=(i*n._j*t._tw|0)+"px",n.style.width=Math.round(i*n._w)+"px",n.style.height=Math.round(i*n._h)+"px";e=this.getViewPortPxFromLonLat(this.backBufferLonLat,e),i=this.map.layerContainerOriginPx.y,t.style.left=Math.round(e.x-this.map.layerContainerOriginPx.x)+"px",t.style.top=Math.round(e.y-i)+"px"},createBackBuffer:function(){var e;if(0<this.grid.length){e=document.createElement("div"),e.id=this.div.id+"_bb",e.className="olBackBuffer",e.style.position="absolute";var t=this.map;e.style.zIndex="resize"===this.transitionEffect?this.getZIndex()-1:t.Z_INDEX_BASE.BaseLayer-(t.getNumLayers()-t.getLayerIndex(this));for(var t=0,i=this.grid.length;t<i;t++)for(var n=0,r=this.grid[t].length;n<r;n++){var s=this.grid[t][n],o=this.grid[t][n].createBackBuffer();o&&(o._i=t,o._j=n,o._w=this.singleTile?this.getImageSize(s.bounds).w:s.size.w,o._h=s.size.h,o.id=s.id+"_bb",e.appendChild(o))}e._tw=this.tileSize.w,e._th=this.tileSize.h}return e},removeBackBuffer:function(){if(this._transitionElement){for(var e=this.transitionendEvents.length-1;0<=e;--e)OpenLayers.Event.stopObserving(this._transitionElement,this.transitionendEvents[e],this._removeBackBuffer);delete this._transitionElement}this.backBuffer&&(this.backBuffer.parentNode&&this.backBuffer.parentNode.removeChild(this.backBuffer),
this.backBufferResolution=this.backBuffer=null,null!==this.backBufferTimerId&&(window.clearTimeout(this.backBufferTimerId),this.backBufferTimerId=null))},moveByPx:function(e,t){this.singleTile||this.moveGriddedTiles()},setTileSize:function(e){this.singleTile&&(e=this.map.getSize(),e.h=parseInt(e.h*this.ratio,10),e.w=parseInt(e.w*this.ratio,10)),OpenLayers.Layer.HTTPRequest.prototype.setTileSize.apply(this,[e])},getTilesBounds:function(){var e=null,t=this.grid.length;if(t)var e=this.grid[t-1][0].bounds,t=this.grid[0].length*e.getWidth(),i=this.grid.length*e.getHeight(),e=new OpenLayers.Bounds(e.left,e.bottom,e.left+t,e.bottom+i);return e},initSingleTile:function(e){this.events.triggerEvent("retile");var t=e.getCenterLonLat(),i=e.getWidth()*this.ratio;e=e.getHeight()*this.ratio,t=new OpenLayers.Bounds(t.lon-i/2,t.lat-e/2,t.lon+i/2,t.lat+e/2),this.gridResolution=this.getServerResolution(),(i=this.maxExtent)&&(!this.displayOutsideMaxExtent||this.map.baseLayer.wrapDateLine&&this.maxExtent.equals(this.map.getMaxExtent()))&&(t.left=Math.max(t.left,i.left),t.right=Math.min(t.right,i.right)),i=this.map.getLayerPxFromLonLat({lon:t.left,lat:t.top}),this.grid.length||(this.grid[0]=[]),(e=this.grid[0][0])?e.moveTo(t,i):(e=this.addTile(t,i),this.addTileMonitoringHooks(e),e.draw(),this.grid[0][0]=e),this.removeExcessTiles(1,1)},calculateGridLayout:function(e,t,i){var n=i*this.tileSize.w;i*=this.tileSize.h;var r=Math.floor((e.left-t.lon)/n)-this.buffer,s=this.rowSign;return e=Math[~s?"floor":"ceil"](s*(t.lat-e.top+i)/i)-this.buffer*s,{tilelon:n,tilelat:i,startcol:r,startrow:e}},getImageSize:function(e){var t=OpenLayers.Layer.HTTPRequest.prototype.getImageSize.apply(this,arguments);return this.singleTile&&(t=new OpenLayers.Size(Math.round(e.getWidth()/this.gridResolution),t.h)),t},getTileOrigin:function(){var e=this.tileOrigin;if(!e)var e=this.getMaxExtent(),t={tl:["left","top"],tr:["right","top"],bl:["left","bottom"],br:["right","bottom"]}[this.tileOriginCorner],e=new OpenLayers.LonLat(e[t[0]],e[t[1]]);return e},getTileBoundsForGridIndex:function(e,t){var i=this.getTileOrigin(),n=this.gridLayout,r=n.tilelon,s=n.tilelat,o=n.startcol,n=n.startrow,a=this.rowSign;return new OpenLayers.Bounds(i.lon+(o+t)*r,i.lat-(n+e*a)*s*a,i.lon+(o+t+1)*r,i.lat-(n+(e-1)*a)*s*a)},initGriddedTiles:function(e){this.events.triggerEvent("retile");var t=this.map.getSize(),i=this.getTileOrigin(),n=this.map.getResolution(),r=this.getServerResolution(),s=n/r,n=this.tileSize.w/s,s=this.tileSize.h/s,o=Math.ceil(t.h/s)+2*this.buffer+1,t=Math.ceil(t.w/n)+2*this.buffer+1;this.gridLayout=r=this.calculateGridLayout(e,i,r);var i=r.tilelon,a=r.tilelat,r=this.map.layerContainerOriginPx.x,l=this.map.layerContainerOriginPx.y,h=this.getTileBoundsForGridIndex(0,0),u=this.map.getViewPortPxFromLonLat(new OpenLayers.LonLat(h.left,h.top));u.x=Math.round(u.x)-r,u.y=Math.round(u.y)-l;var r=[],l=this.map.getCenter(),c=0;do{var p=this.grid[c];p||(p=[],this.grid.push(p));var d=0;do{var h=this.getTileBoundsForGridIndex(c,d),f=u.clone();f.x+=d*Math.round(n),f.y+=c*Math.round(s);var y=p[d];y?y.moveTo(h,f,!1):(y=this.addTile(h,f),this.addTileMonitoringHooks(y),p.push(y)),f=h.getCenterLonLat(),r.push({tile:y,distance:Math.pow(f.lon-l.lon,2)+Math.pow(f.lat-l.lat,2)}),d+=1}while(h.right<=e.right+i*this.buffer||d<t);c+=1}while(h.bottom>=e.bottom-a*this.buffer||c<o);for(this.removeExcessTiles(c,d),this.gridResolution=n=this.getServerResolution(),r.sort(function(e,t){return e.distance-t.distance}),e=0,n=r.length;e<n;++e)r[e].tile.draw()},getMaxExtent:function(){return this.maxExtent},addTile:function(e,t){var i=new this.tileClass(this,t,e,null,this.tileSize,this.tileOptions);return this.events.triggerEvent("addtile",{tile:i}),i},addTileMonitoringHooks:function(e){e.onLoadStart=function(){!1===this.loading&&(this.loading=!0,this.events.triggerEvent("loadstart")),this.events.triggerEvent("tileloadstart",{tile:e}),this.numLoadingTiles++,!this.singleTile&&this.backBuffer&&this.gridResolution===this.backBufferResolution&&OpenLayers.Element.addClass(e.getTile(),"olTileReplacing")},e.onLoadEnd=function(t){if(this.numLoadingTiles--,t="unload"===t.type,this.events.triggerEvent("tileloaded",{tile:e,aborted:t}),!this.singleTile&&!t&&this.backBuffer&&this.gridResolution===this.backBufferResolution){var i=e.getTile();if("none"===OpenLayers.Element.getStyle(i,"display")){var n=document.getElementById(e.id+"_bb");n&&n.parentNode.removeChild(n)}OpenLayers.Element.removeClass(i,"olTileReplacing")}if(0===this.numLoadingTiles){if(this.backBuffer)if(0===this.backBuffer.childNodes.length)this.removeBackBuffer();else{if(this._transitionElement=t?this.div.lastChild:e.imgDiv,t=this.transitionendEvents,this._transitionElement)for(i=t.length-1;0<=i;--i)OpenLayers.Event.observe(this._transitionElement,t[i],this._removeBackBuffer);this.backBufferTimerId=window.setTimeout(this._removeBackBuffer,this.removeBackBufferDelay)}this.loading=!1,this.events.triggerEvent("loadend")}},e.onLoadError=function(){this.events.triggerEvent("tileerror",{tile:e})},e.events.on({loadstart:e.onLoadStart,loadend:e.onLoadEnd,unload:e.onLoadEnd,loaderror:e.onLoadError,scope:this})},removeTileMonitoringHooks:function(e){e.unload(),e.events.un({loadstart:e.onLoadStart,loadend:e.onLoadEnd,unload:e.onLoadEnd,loaderror:e.onLoadError,scope:this})},moveGriddedTiles:function(){for(var e=this.buffer+1;;){var t=this.grid[0][0],i=t.position.x+this.map.layerContainerOriginPx.x,t=t.position.y+this.map.layerContainerOriginPx.y,n=this.getServerResolution()/this.map.getResolution(),n={w:Math.round(this.tileSize.w*n),h:Math.round(this.tileSize.h*n)};if(i>-n.w*(e-1))this.shiftColumn(!0,n);else if(i<-n.w*e)this.shiftColumn(!1,n);else if(t>-n.h*(e-1))this.shiftRow(!0,n);else{if(!(t<-n.h*e))break;this.shiftRow(!1,n)}}},shiftRow:function(e,t){var i=this.grid,n=e?0:i.length-1,r=e?-1:1;this.gridLayout.startrow+=r*this.rowSign;for(var s=i[n],o=i[e?"pop":"shift"](),a=0,l=o.length;a<l;a++){var h=o[a],u=s[a].position.clone();u.y+=t.h*r,h.moveTo(this.getTileBoundsForGridIndex(n,a),u)}i[e?"unshift":"push"](o)},shiftColumn:function(e,t){var i=this.grid,n=e?0:i[0].length-1,r=e?-1:1;this.gridLayout.startcol+=r;for(var s=0,o=i.length;s<o;s++){var a=i[s],l=a[n].position.clone(),h=a[e?"pop":"shift"]();l.x+=t.w*r,h.moveTo(this.getTileBoundsForGridIndex(s,n),l),a[e?"unshift":"push"](h)}},removeExcessTiles:function(e,t){for(var i,n;this.grid.length>e;){var r=this.grid.pop();for(i=0,n=r.length;i<n;i++){var s=r[i];this.destroyTile(s)}}for(i=0,n=this.grid.length;i<n;i++)for(;this.grid[i].length>t;)r=this.grid[i],s=r.pop(),this.destroyTile(s)},onMapResize:function(){this.singleTile&&(this.clearGrid(),this.setTileSize())},getTileBounds:function(e){var t=this.maxExtent,i=this.getResolution(),n=i*this.tileSize.w,i=i*this.tileSize.h,r=this.getLonLatFromViewPortPx(e);return e=t.left+n*Math.floor((r.lon-t.left)/n),t=t.bottom+i*Math.floor((r.lat-t.bottom)/i),new OpenLayers.Bounds(e,t,e+n,t+i)},CLASS_NAME:"OpenLayers.Layer.Grid"}),OpenLayers.TileManager=OpenLayers.Class({cacheSize:256,tilesPerFrame:2,frameDelay:16,moveDelay:100,zoomDelay:200,maps:null,tileQueueId:null,tileQueue:null,tileCache:null,tileCacheIndex:null,initialize:function(e){OpenLayers.Util.extend(this,e),this.maps=[],this.tileQueueId={},this.tileQueue={},this.tileCache={},this.tileCacheIndex=[]},addMap:function(e){if(!this._destroyed&&OpenLayers.Layer.Grid){this.maps.push(e),this.tileQueue[e.id]=[];for(var t=0,i=e.layers.length;t<i;++t)this.addLayer({layer:e.layers[t]});e.events.on({move:this.move,zoomend:this.zoomEnd,changelayer:this.changeLayer,addlayer:this.addLayer,preremovelayer:this.removeLayer,scope:this})}},removeMap:function(e){if(!this._destroyed&&OpenLayers.Layer.Grid){if(window.clearTimeout(this.tileQueueId[e.id]),e.layers)for(var t=0,i=e.layers.length;t<i;++t)this.removeLayer({layer:e.layers[t]});e.events&&e.events.un({move:this.move,zoomend:this.zoomEnd,changelayer:this.changeLayer,addlayer:this.addLayer,preremovelayer:this.removeLayer,scope:this}),delete this.tileQueue[e.id],delete this.tileQueueId[e.id],OpenLayers.Util.removeItem(this.maps,e)}},move:function(e){this.updateTimeout(e.object,this.moveDelay,!0)},zoomEnd:function(e){this.updateTimeout(e.object,this.zoomDelay)},changeLayer:function(e){"visibility"!==e.property&&"params"!==e.property||this.updateTimeout(e.object,0)},addLayer:function(e){if(e=e.layer,e instanceof OpenLayers.Layer.Grid){e.events.on({addtile:this.addTile,refresh:this.handleLayerRefresh,retile:this.clearTileQueue,scope:this});var t,i,n;for(t=e.grid.length-1;0<=t;--t)for(i=e.grid[t].length-1;0<=i;--i)n=e.grid[t][i],this.addTile({tile:n}),n.url&&!n.imgDiv&&this.manageTileCache({object:n})}},removeLayer:function(e){if(e=e.layer,e instanceof OpenLayers.Layer.Grid&&(this.clearTileQueue({object:e}),e.events&&e.events.un({addtile:this.addTile,refresh:this.handleLayerRefresh,retile:this.clearTileQueue,scope:this}),e.grid)){var t,i,n;for(t=e.grid.length-1;0<=t;--t)for(i=e.grid[t].length-1;0<=i;--i)n=e.grid[t][i],this.unloadTile({object:n})}},handleLayerRefresh:function(e){if(e=e.object,e.grid){var t,i,n;for(t=e.grid.length-1;0<=t;--t)for(i=e.grid[t].length-1;0<=i;--i)n=e.grid[t][i],OpenLayers.Util.removeItem(this.tileCacheIndex,n.url),delete this.tileCache[n.url]}},updateTimeout:function(e,t,i){window.clearTimeout(this.tileQueueId[e.id]);var n=this.tileQueue[e.id];i&&!n.length||(this.tileQueueId[e.id]=window.setTimeout(OpenLayers.Function.bind(function(){this.drawTilesFromQueue(e),n.length&&this.updateTimeout(e,this.frameDelay)},this),t))},addTile:function(e){e.tile instanceof OpenLayers.Tile.Image?e.tile.layer.singleTile||e.tile.events.on({beforedraw:this.queueTileDraw,beforeload:this.manageTileCache,loadend:this.addToCache,unload:this.unloadTile,scope:this}):this.removeLayer({layer:e.tile.layer})},unloadTile:function(e){e=e.object,e.events.un({beforedraw:this.queueTileDraw,beforeload:this.manageTileCache,loadend:this.addToCache,unload:this.unloadTile,scope:this}),OpenLayers.Util.removeItem(this.tileQueue[e.layer.map.id],e)},queueTileDraw:function(e){e=e.object;var t=!1,i=e.layer,n=i.getURL(e.bounds),r=this.tileCache[n];return r&&"olTileImage"!==r.className&&(delete this.tileCache[n],OpenLayers.Util.removeItem(this.tileCacheIndex,n),r=null),!i.url||!i.async&&r||(t=this.tileQueue[i.map.id],~OpenLayers.Util.indexOf(t,e)||t.push(e),t=!0),!t},drawTilesFromQueue:function(e){var t=this.tileQueue[e.id],i=this.tilesPerFrame;for(e=e.zoomTween&&e.zoomTween.playing;!e&&t.length&&i;)t.shift().draw(!0),--i},manageTileCache:function(e){e=e.object;var t=this.tileCache[e.url];t&&(t.parentNode&&OpenLayers.Element.hasClass(t.parentNode,"olBackBuffer")&&(t.parentNode.removeChild(t),t.id=null),t.parentNode||(t.style.visibility="hidden",t.style.opacity=0,e.setImage(t),OpenLayers.Util.removeItem(this.tileCacheIndex,e.url),this.tileCacheIndex.push(e.url)))},addToCache:function(e){e=e.object,this.tileCache[e.url]||OpenLayers.Element.hasClass(e.imgDiv,"olImageLoadError")||(this.tileCacheIndex.length>=this.cacheSize&&(delete this.tileCache[this.tileCacheIndex[0]],this.tileCacheIndex.shift()),this.tileCache[e.url]=e.imgDiv,this.tileCacheIndex.push(e.url))},clearTileQueue:function(e){e=e.object;for(var t=this.tileQueue[e.map.id],i=t.length-1;0<=i;--i)t[i].layer===e&&t.splice(i,1)},destroy:function(){for(var e=this.maps.length-1;0<=e;--e)this.removeMap(this.maps[e]);this.tileCacheIndex=this.tileCache=this.tileQueueId=this.tileQueue=this.maps=null,this._destroyed=!0}}),OpenLayers.Kinetic=OpenLayers.Class({threshold:0,deceleration:.0035,nbPoints:100,delay:200,points:void 0,timerId:void 0,initialize:function(e){OpenLayers.Util.extend(this,e)},begin:function(){OpenLayers.Animation.stop(this.timerId),this.timerId=void 0,this.points=[]},update:function(e){this.points.unshift({xy:e,tick:(new Date).getTime()}),this.points.length>this.nbPoints&&this.points.pop()},end:function(e){for(var t,i,n=(new Date).getTime(),r=0,s=this.points.length;r<s&&(i=this.points[r],!(n-i.tick>this.delay));r++)t=i;if(t&&(r=(new Date).getTime()-t.tick,n=Math.sqrt(Math.pow(e.x-t.xy.x,2)+Math.pow(e.y-t.xy.y,2)),r=n/r,!(0==r||r<this.threshold)))return n=Math.asin((e.y-t.xy.y)/n),t.xy.x<=e.x&&(n=Math.PI-n),{speed:r,theta:n}},move:function(e,t){var i=e.speed,n=Math.cos(e.theta),r=-Math.sin(e.theta),s=(new Date).getTime(),o=0,a=0;this.timerId=OpenLayers.Animation.start(OpenLayers.Function.bind(function(){if(null!=this.timerId){var e,l,h=(new Date).getTime()-s,u=-this.deceleration*Math.pow(h,2)/2+i*h,c=u*n,u=u*r;e=!1,0>=-this.deceleration*h+i&&(OpenLayers.Animation.stop(this.timerId),this.timerId=null,e=!0),h=c-o,l=u-a,o=c,a=u,t(h,l,e)}},this))},CLASS_NAME:"OpenLayers.Kinetic"}),OpenLayers.Strategy=OpenLayers.Class({layer:null,options:null,active:null,autoActivate:!0,autoDestroy:!0,initialize:function(e){OpenLayers.Util.extend(this,e),this.options=e,this.active=!1},destroy:function(){this.deactivate(),this.options=this.layer=null},setLayer:function(e){this.layer=e},activate:function(){return!this.active&&(this.active=!0)},deactivate:function(){return!!this.active&&(this.active=!1,!0)},CLASS_NAME:"OpenLayers.Strategy"}),OpenLayers.Strategy.Fixed=OpenLayers.Class(OpenLayers.Strategy,{preload:!1,activate:function(){var e=OpenLayers.Strategy.prototype.activate.apply(this,arguments);return e&&(this.layer.events.on({refresh:this.load,scope:this}),1==this.layer.visibility||this.preload?this.load():this.layer.events.on({visibilitychanged:this.load,scope:this})),e},deactivate:function(){var e=OpenLayers.Strategy.prototype.deactivate.call(this);return e&&this.layer.events.un({refresh:this.load,visibilitychanged:this.load,scope:this}),e},load:function(e){var t=this.layer;t.events.triggerEvent("loadstart",{filter:t.filter}),t.protocol.read(OpenLayers.Util.applyDefaults({callback:this.merge,filter:t.filter,scope:this},e)),t.events.un({visibilitychanged:this.load,scope:this})},merge:function(e){var t=this.layer;t.destroyFeatures();var i=e.features;if(i&&0<i.length){var n=t.projection,r=t.map.getProjectionObject();if(!r.equals(n))for(var s,o=0,a=i.length;o<a;++o)(s=i[o].geometry)&&s.transform(n,r);t.addFeatures(i)}t.events.triggerEvent("loadend",{response:e})},CLASS_NAME:"OpenLayers.Strategy.Fixed"}),OpenLayers.Layer.Markers=OpenLayers.Class(OpenLayers.Layer,{isBaseLayer:!1,markers:null,drawn:!1,initialize:function(e,t){OpenLayers.Layer.prototype.initialize.apply(this,arguments),this.markers=[]},destroy:function(){this.clearMarkers(),this.markers=null,OpenLayers.Layer.prototype.destroy.apply(this,arguments)},setOpacity:function(e){if(e!=this.opacity){this.opacity=e,e=0;for(var t=this.markers.length;e<t;e++)this.markers[e].setOpacity(this.opacity)}},moveTo:function(e,t,i){if(OpenLayers.Layer.prototype.moveTo.apply(this,arguments),t||!this.drawn){for(var n=0,r=this.markers.length;n<r;n++)this.drawMarker(this.markers[n]);this.drawn=!0}},addMarker:function(e){this.markers.push(e),1>this.opacity&&e.setOpacity(this.opacity),this.map&&this.map.getExtent()&&(e.map=this.map,this.drawMarker(e))},removeMarker:function(e){this.markers&&this.markers.length&&(OpenLayers.Util.removeItem(this.markers,e),e.erase())},clearMarkers:function(){if(null!=this.markers)for(;0<this.markers.length;)this.removeMarker(this.markers[0])},drawMarker:function(e){var t=this.map.getLayerPxFromLonLat(e.lonlat);null==t?e.display(!1):e.isDrawn()?e.icon&&e.icon.moveTo(t):(e=e.draw(t),this.div.appendChild(e))},getDataExtent:function(){var e=null;if(this.markers&&0<this.markers.length)for(var e=new OpenLayers.Bounds,t=0,i=this.markers.length;t<i;t++)e.extend(this.markers[t].lonlat);return e},CLASS_NAME:"OpenLayers.Layer.Markers"}),OpenLayers.Layer.Zoomify=OpenLayers.Class(OpenLayers.Layer.Grid,{size:null,isBaseLayer:!0,standardTileSize:256,tileOriginCorner:"tl",numberOfTiers:0,tileCountUpToTier:null,tierSizeInTiles:null,tierImageSize:null,initialize:function(e,t,i,n){this.initializeZoomify(i),OpenLayers.Layer.Grid.prototype.initialize.apply(this,[e,t,{},n])},initializeZoomify:function(e){var t=e.clone();for(this.size=e.clone(),e=new OpenLayers.Size(Math.ceil(t.w/this.standardTileSize),Math.ceil(t.h/this.standardTileSize)),this.tierSizeInTiles=[e],this.tierImageSize=[t];t.w>this.standardTileSize||t.h>this.standardTileSize;)t=new OpenLayers.Size(Math.floor(t.w/2),Math.floor(t.h/2)),e=new OpenLayers.Size(Math.ceil(t.w/this.standardTileSize),Math.ceil(t.h/this.standardTileSize)),this.tierSizeInTiles.push(e),this.tierImageSize.push(t);for(this.tierSizeInTiles.reverse(),this.tierImageSize.reverse(),this.numberOfTiers=this.tierSizeInTiles.length,t=[1],this.tileCountUpToTier=[0],e=1;e<this.numberOfTiers;e++)t.unshift(Math.pow(2,e)),this.tileCountUpToTier.push(this.tierSizeInTiles[e-1].w*this.tierSizeInTiles[e-1].h+this.tileCountUpToTier[e-1]);this.serverResolutions||(this.serverResolutions=t)},destroy:function(){OpenLayers.Layer.Grid.prototype.destroy.apply(this,arguments),this.tileCountUpToTier.length=0,this.tierSizeInTiles.length=0,this.tierImageSize.length=0},clone:function(e){return null==e&&(e=new OpenLayers.Layer.Zoomify(this.name,this.url,this.size,this.options)),e=OpenLayers.Layer.Grid.prototype.clone.apply(this,[e])},createBackBuffer:function(){var e=OpenLayers.Layer.Grid.prototype.createBackBuffer.apply(this,arguments);if(e)for(var t,i=e.childNodes.length-1;0<=i;--i)t=e.childNodes[i],t._w=t.width,t._h=t.height;return e},getURL:function(e){e=this.adjustBounds(e);var t=this.getServerResolution(),i=Math.round((e.left-this.tileOrigin.lon)/(t*this.tileSize.w));return e=Math.round((this.tileOrigin.lat-e.top)/(t*this.tileSize.h)),t=this.getZoomForResolution(t),i="TileGroup"+Math.floor((i+e*this.tierSizeInTiles[t].w+this.tileCountUpToTier[t])/256)+"/"+t+"-"+i+"-"+e+".jpg",t=this.url,OpenLayers.Util.isArray(t)&&(t=this.selectUrl(i,t)),t+i},getImageSize:function(){if(0<arguments.length){var e=this.adjustBounds(arguments[0]),t=this.getServerResolution(),i=Math.round((e.left-this.tileOrigin.lon)/(t*this.tileSize.w)),e=Math.round((this.tileOrigin.lat-e.top)/(t*this.tileSize.h)),t=this.getZoomForResolution(t),n=this.standardTileSize,r=this.standardTileSize;return i==this.tierSizeInTiles[t].w-1&&(n=this.tierImageSize[t].w%this.standardTileSize,0==n&&(n=this.standardTileSize)),e==this.tierSizeInTiles[t].h-1&&(r=this.tierImageSize[t].h%this.standardTileSize,0==r&&(r=this.standardTileSize)),i==this.tierSizeInTiles[t].w&&(n=Math.ceil(this.size.w/Math.pow(2,this.numberOfTiers-1-t)-this.tierImageSize[t].w)),e==this.tierSizeInTiles[t].h&&(r=Math.ceil(this.size.h/Math.pow(2,this.numberOfTiers-1-t)-this.tierImageSize[t].h)),new OpenLayers.Size(n,r)}return this.tileSize},setMap:function(e){OpenLayers.Layer.Grid.prototype.setMap.apply(this,arguments),this.tileOrigin=new OpenLayers.LonLat(this.map.maxExtent.left,this.map.maxExtent.top)},CLASS_NAME:"OpenLayers.Layer.Zoomify"}),OpenLayers.Renderer=OpenLayers.Class({container:null,root:null,extent:null,locked:!1,size:null,resolution:null,map:null,featureDx:0,initialize:function(e,t){this.container=OpenLayers.Util.getElement(e),OpenLayers.Util.extend(this,t)},destroy:function(){this.map=this.resolution=this.size=this.extent=this.container=null},supported:function(){return!1},setExtent:function(e,t){if(this.extent=e.clone(),this.map.baseLayer&&this.map.baseLayer.wrapDateLine){var i=e.getWidth()/this.map.getExtent().getWidth();e=e.scale(1/i),this.extent=e.wrapDateLine(this.map.getMaxExtent()).scale(i)}return t&&(this.resolution=null),!0},setSize:function(e){this.size=e.clone(),this.resolution=null},getResolution:function(){return this.resolution=this.resolution||this.map.getResolution()},drawFeature:function(e,t){if(null==t&&(t=e.style),e.geometry){var i=e.geometry.getBounds();if(i){var n;if(this.map.baseLayer&&this.map.baseLayer.wrapDateLine&&(n=this.map.getMaxExtent()),i.intersectsBounds(this.extent,{worldBounds:n})?this.calculateFeatureDx(i,n):t={display:"none"},i=this.drawGeometry(e.geometry,t,e.id),"none"!=t.display&&t.label&&!1!==i){if(n=e.geometry.getCentroid(),t.labelXOffset||t.labelYOffset){var r=isNaN(t.labelXOffset)?0:t.labelXOffset,s=isNaN(t.labelYOffset)?0:t.labelYOffset,o=this.getResolution();n.move(r*o,s*o)}this.drawText(e.id,t,n)}else this.removeText(e.id);return i}}},calculateFeatureDx:function(e,t){if(this.featureDx=0,t){var i=t.getWidth();this.featureDx=Math.round(((e.left+e.right)/2-(this.extent.left+this.extent.right)/2)/i)*i}},drawGeometry:function(e,t,i){},drawText:function(e,t,i){},removeText:function(e){},clear:function(){},getFeatureIdFromEvent:function(e){},eraseFeatures:function(e){OpenLayers.Util.isArray(e)||(e=[e]);for(var t=0,i=e.length;t<i;++t){var n=e[t];this.eraseGeometry(n.geometry,n.id),this.removeText(n.id)}},eraseGeometry:function(e,t){},moveRoot:function(e){},getRenderLayerId:function(){return this.container.id},applyDefaultSymbolizer:function(e){var t=OpenLayers.Util.extend({},OpenLayers.Renderer.defaultSymbolizer);return!1===e.stroke&&(delete t.strokeWidth,delete t.strokeColor),!1===e.fill&&delete t.fillColor,OpenLayers.Util.extend(t,e),t},CLASS_NAME:"OpenLayers.Renderer"}),OpenLayers.Renderer.defaultSymbolizer={fillColor:"#000000",strokeColor:"#000000",strokeWidth:2,fillOpacity:1,strokeOpacity:1,pointRadius:0,labelAlign:"cm"},OpenLayers.Renderer.symbol={star:[350,75,379,161,469,161,397,215,423,301,350,250,277,301,303,215,231,161,321,161,350,75],cross:[4,0,6,0,6,4,10,4,10,6,6,6,6,10,4,10,4,6,0,6,0,4,4,4,4,0],x:[0,0,25,0,50,35,75,0,100,0,65,50,100,100,75,100,50,65,25,100,0,100,35,50,0,0],square:[0,0,0,1,1,1,1,0,0,0],triangle:[0,10,10,10,5,0,0,10]},OpenLayers.Feature=OpenLayers.Class({layer:null,id:null,lonlat:null,data:null,marker:null,popupClass:null,popup:null,initialize:function(e,t,i){this.layer=e,this.lonlat=t,this.data=null!=i?i:{},this.id=OpenLayers.Util.createUniqueID(this.CLASS_NAME+"_")},destroy:function(){null!=this.layer&&null!=this.layer.map&&null!=this.popup&&this.layer.map.removePopup(this.popup),null!=this.layer&&null!=this.marker&&this.layer.removeMarker(this.marker),this.data=this.lonlat=this.id=this.layer=null,null!=this.marker&&(this.destroyMarker(this.marker),this.marker=null),null!=this.popup&&(this.destroyPopup(this.popup),this.popup=null)},onScreen:function(){var e=!1;return null!=this.layer&&null!=this.layer.map&&(e=this.layer.map.getExtent().containsLonLat(this.lonlat)),e},createMarker:function(){return null!=this.lonlat&&(this.marker=new OpenLayers.Marker(this.lonlat,this.data.icon)),this.marker},destroyMarker:function(){this.marker.destroy()},createPopup:function(e){return null!=this.lonlat&&(this.popup||(this.popup=new(this.popupClass?this.popupClass:OpenLayers.Popup.Anchored)(this.id+"_popup",this.lonlat,this.data.popupSize,this.data.popupContentHTML,this.marker?this.marker.icon:null,e)),null!=this.data.overflow&&(this.popup.contentDiv.style.overflow=this.data.overflow),this.popup.feature=this),this.popup},destroyPopup:function(){this.popup&&(this.popup.feature=null,this.popup.destroy(),this.popup=null)},CLASS_NAME:"OpenLayers.Feature"}),OpenLayers.State={UNKNOWN:"Unknown",INSERT:"Insert",UPDATE:"Update",DELETE:"Delete"},OpenLayers.Feature.Vector=OpenLayers.Class(OpenLayers.Feature,{fid:null,geometry:null,attributes:null,bounds:null,state:null,style:null,url:null,renderIntent:"default",modified:null,initialize:function(e,t,i){OpenLayers.Feature.prototype.initialize.apply(this,[null,null,t]),this.lonlat=null,this.geometry=e?e:null,this.state=null,this.attributes={},t&&(this.attributes=OpenLayers.Util.extend(this.attributes,t)),this.style=i?i:null},destroy:function(){this.layer&&(this.layer.removeFeatures(this),this.layer=null),this.modified=this.geometry=null,OpenLayers.Feature.prototype.destroy.apply(this,arguments)},clone:function(){return new OpenLayers.Feature.Vector(this.geometry?this.geometry.clone():null,this.attributes,this.style)},onScreen:function(e){var t=!1;return this.layer&&this.layer.map&&(t=this.layer.map.getExtent(),e?(e=this.geometry.getBounds(),t=t.intersectsBounds(e)):t=t.toGeometry().intersects(this.geometry)),t},getVisibility:function(){return!(this.style&&"none"==this.style.display||!this.layer||this.layer&&this.layer.styleMap&&"none"==this.layer.styleMap.createSymbolizer(this,this.renderIntent).display||this.layer&&!this.layer.getVisibility())},createMarker:function(){return null},destroyMarker:function(){},createPopup:function(){return null},atPoint:function(e,t,i){var n=!1;return this.geometry&&(n=this.geometry.atPoint(e,t,i)),n},destroyPopup:function(){},move:function(e){if(this.layer&&this.geometry.move){e="OpenLayers.LonLat"==e.CLASS_NAME?this.layer.getViewPortPxFromLonLat(e):e;var t=this.layer.getViewPortPxFromLonLat(this.geometry.getBounds().getCenterLonLat()),i=this.layer.map.getResolution();return this.geometry.move(i*(e.x-t.x),i*(t.y-e.y)),this.layer.drawFeature(this),t}},toState:function(e){if(e==OpenLayers.State.UPDATE)switch(this.state){case OpenLayers.State.UNKNOWN:case OpenLayers.State.DELETE:this.state=e}else if(e==OpenLayers.State.INSERT)switch(this.state){case OpenLayers.State.UNKNOWN:break;default:this.state=e}else if(e==OpenLayers.State.DELETE)switch(this.state){case OpenLayers.State.UNKNOWN:case OpenLayers.State.UPDATE:this.state=e}else e==OpenLayers.State.UNKNOWN&&(this.state=e)},CLASS_NAME:"OpenLayers.Feature.Vector"}),OpenLayers.Feature.Vector.style={default:{fillColor:"#ee9900",fillOpacity:.4,hoverFillColor:"white",hoverFillOpacity:.8,strokeColor:"#ee9900",strokeOpacity:1,strokeWidth:1,strokeLinecap:"round",strokeDashstyle:"solid",hoverStrokeColor:"red",hoverStrokeOpacity:1,hoverStrokeWidth:.2,pointRadius:6,hoverPointRadius:1,hoverPointUnit:"%",pointerEvents:"visiblePainted",cursor:"inherit",fontColor:"#000000",labelAlign:"cm",labelOutlineColor:"white",labelOutlineWidth:3},select:{fillColor:"blue",fillOpacity:.4,hoverFillColor:"white",hoverFillOpacity:.8,strokeColor:"blue",strokeOpacity:1,strokeWidth:2,strokeLinecap:"round",strokeDashstyle:"solid",hoverStrokeColor:"red",hoverStrokeOpacity:1,hoverStrokeWidth:.2,pointRadius:6,hoverPointRadius:1,hoverPointUnit:"%",pointerEvents:"visiblePainted",cursor:"pointer",fontColor:"#000000",labelAlign:"cm",labelOutlineColor:"white",labelOutlineWidth:3},temporary:{fillColor:"#66cccc",fillOpacity:.2,hoverFillColor:"white",hoverFillOpacity:.8,strokeColor:"#66cccc",strokeOpacity:1,strokeLinecap:"round",strokeWidth:2,strokeDashstyle:"solid",hoverStrokeColor:"red",hoverStrokeOpacity:1,hoverStrokeWidth:.2,pointRadius:6,hoverPointRadius:1,hoverPointUnit:"%",pointerEvents:"visiblePainted",cursor:"inherit",fontColor:"#000000",labelAlign:"cm",labelOutlineColor:"white",labelOutlineWidth:3},delete:{display:"none"}},OpenLayers.Style=OpenLayers.Class({id:null,name:null,title:null,description:null,layerName:null,isDefault:!1,rules:null,context:null,defaultStyle:null,defaultsPerSymbolizer:!1,propertyStyles:null,initialize:function(e,t){OpenLayers.Util.extend(this,t),this.rules=[],t&&t.rules&&this.addRules(t.rules),this.setDefaultStyle(e||OpenLayers.Feature.Vector.style.default),this.id=OpenLayers.Util.createUniqueID(this.CLASS_NAME+"_")},destroy:function(){for(var e=0,t=this.rules.length;e<t;e++)this.rules[e].destroy(),this.rules[e]=null;this.defaultStyle=this.rules=null},createSymbolizer:function(e){for(var t,i=this.defaultsPerSymbolizer?{}:this.createLiterals(OpenLayers.Util.extend({},this.defaultStyle),e),n=this.rules,r=[],s=!1,o=0,a=n.length;o<a;o++)t=n[o],t.evaluate(e)&&(t instanceof OpenLayers.Rule&&t.elseFilter?r.push(t):(s=!0,this.applySymbolizer(t,i,e)));if(0==s&&0<r.length)for(s=!0,o=0,a=r.length;o<a;o++)this.applySymbolizer(r[o],i,e);return 0<n.length&&0==s&&(i.display="none"),null!=i.label&&"string"!=typeof i.label&&(i.label=String(i.label)),i},applySymbolizer:function(e,t,i){var n=i.geometry?this.getSymbolizerPrefix(i.geometry):OpenLayers.Style.SYMBOLIZER_PREFIXES[0];return e=e.symbolizer[n]||e.symbolizer,!0===this.defaultsPerSymbolizer&&(n=this.defaultStyle,OpenLayers.Util.applyDefaults(e,{pointRadius:n.pointRadius}),!0!==e.stroke&&!0!==e.graphic||OpenLayers.Util.applyDefaults(e,{strokeWidth:n.strokeWidth,strokeColor:n.strokeColor,strokeOpacity:n.strokeOpacity,strokeDashstyle:n.strokeDashstyle,strokeLinecap:n.strokeLinecap}),!0!==e.fill&&!0!==e.graphic||OpenLayers.Util.applyDefaults(e,{fillColor:n.fillColor,fillOpacity:n.fillOpacity}),!0===e.graphic&&OpenLayers.Util.applyDefaults(e,{pointRadius:this.defaultStyle.pointRadius,externalGraphic:this.defaultStyle.externalGraphic,graphicName:this.defaultStyle.graphicName,graphicOpacity:this.defaultStyle.graphicOpacity,graphicWidth:this.defaultStyle.graphicWidth,graphicHeight:this.defaultStyle.graphicHeight,graphicXOffset:this.defaultStyle.graphicXOffset,graphicYOffset:this.defaultStyle.graphicYOffset})),this.createLiterals(OpenLayers.Util.extend(t,e),i)},createLiterals:function(e,t){var i=OpenLayers.Util.extend({},t.attributes||t.data);OpenLayers.Util.extend(i,this.context);for(var n in this.propertyStyles)e[n]=OpenLayers.Style.createLiteral(e[n],i,t,n);return e},findPropertyStyles:function(){var e={};this.addPropertyStyles(e,this.defaultStyle);for(var t,i,n=this.rules,r=0,s=n.length;r<s;r++){t=n[r].symbolizer;for(var o in t){if(i=t[o],"object"!=typeof i){this.addPropertyStyles(e,t);break}this.addPropertyStyles(e,i)}}return e},addPropertyStyles:function(e,t){var i,n;for(n in t)i=t[n],"string"==typeof i&&i.match(/\$\{\w+\}/)&&(e[n]=!0);return e},addRules:function(e){Array.prototype.push.apply(this.rules,e),this.propertyStyles=this.findPropertyStyles()},setDefaultStyle:function(e){this.defaultStyle=e,this.propertyStyles=this.findPropertyStyles()},getSymbolizerPrefix:function(e){for(var t=OpenLayers.Style.SYMBOLIZER_PREFIXES,i=0,n=t.length;i<n;i++)if(-1!=e.CLASS_NAME.indexOf(t[i]))return t[i]},clone:function(){var e=OpenLayers.Util.extend({},this);if(this.rules){e.rules=[];for(var t=0,i=this.rules.length;t<i;++t)e.rules.push(this.rules[t].clone())}return e.context=this.context&&OpenLayers.Util.extend({},this.context),t=OpenLayers.Util.extend({},this.defaultStyle),new OpenLayers.Style(t,e)},CLASS_NAME:"OpenLayers.Style"}),OpenLayers.Style.createLiteral=function(e,t,i,n){return"string"==typeof e&&-1!=e.indexOf("${")&&(e=OpenLayers.String.format(e,t,[i,n]),e=isNaN(e)||!e?e:parseFloat(e)),e},OpenLayers.Style.SYMBOLIZER_PREFIXES=["Point","Line","Polygon","Text","Raster"],OpenLayers.StyleMap=OpenLayers.Class({styles:null,extendDefault:!0,initialize:function(e,t){if(this.styles={default:new OpenLayers.Style(OpenLayers.Feature.Vector.style.default),select:new OpenLayers.Style(OpenLayers.Feature.Vector.style.select),temporary:new OpenLayers.Style(OpenLayers.Feature.Vector.style.temporary),delete:new OpenLayers.Style(OpenLayers.Feature.Vector.style.delete)},e instanceof OpenLayers.Style)this.styles.default=e,this.styles.select=e,this.styles.temporary=e,this.styles.delete=e;else if("object"==typeof e)for(var i in e)if(e[i]instanceof OpenLayers.Style)this.styles[i]=e[i];else{if("object"!=typeof e[i]){this.styles.default=new OpenLayers.Style(e),this.styles.select=new OpenLayers.Style(e),this.styles.temporary=new OpenLayers.Style(e),this.styles.delete=new OpenLayers.Style(e);break}this.styles[i]=new OpenLayers.Style(e[i])}OpenLayers.Util.extend(this,t)},destroy:function(){for(var e in this.styles)this.styles[e].destroy();this.styles=null},createSymbolizer:function(e,t){e||(e=new OpenLayers.Feature.Vector),this.styles[t]||(t="default"),e.renderIntent=t;var i={};return this.extendDefault&&"default"!=t&&(i=this.styles.default.createSymbolizer(e)),OpenLayers.Util.extend(i,this.styles[t].createSymbolizer(e))},addUniqueValueRules:function(e,t,i,n){var r,s=[];for(r in i)s.push(new OpenLayers.Rule({symbolizer:i[r],context:n,filter:new OpenLayers.Filter.Comparison({type:OpenLayers.Filter.Comparison.EQUAL_TO,property:t,value:r})}));this.styles[e].addRules(s)},CLASS_NAME:"OpenLayers.StyleMap"}),OpenLayers.Layer.Vector=OpenLayers.Class(OpenLayers.Layer,{isBaseLayer:!1,isFixed:!1,features:null,filter:null,selectedFeatures:null,unrenderedFeatures:null,reportError:!0,style:null,styleMap:null,strategies:null,
protocol:null,renderers:["SVG","VML","Canvas"],renderer:null,rendererOptions:null,geometryType:null,drawn:!1,ratio:1,initialize:function(e,t){if(OpenLayers.Layer.prototype.initialize.apply(this,arguments),this.renderer&&this.renderer.supported()||this.assignRenderer(),this.renderer&&this.renderer.supported()||(this.renderer=null,this.displayError()),this.styleMap||(this.styleMap=new OpenLayers.StyleMap),this.features=[],this.selectedFeatures=[],this.unrenderedFeatures={},this.strategies)for(var i=0,n=this.strategies.length;i<n;i++)this.strategies[i].setLayer(this)},destroy:function(){if(this.strategies){var e,t,i;for(t=0,i=this.strategies.length;t<i;t++)e=this.strategies[t],e.autoDestroy&&e.destroy();this.strategies=null}this.protocol&&(this.protocol.autoDestroy&&this.protocol.destroy(),this.protocol=null),this.destroyFeatures(),this.unrenderedFeatures=this.selectedFeatures=this.features=null,this.renderer&&this.renderer.destroy(),this.drawn=this.geometryType=this.renderer=null,OpenLayers.Layer.prototype.destroy.apply(this,arguments)},clone:function(e){null==e&&(e=new OpenLayers.Layer.Vector(this.name,this.getOptions())),e=OpenLayers.Layer.prototype.clone.apply(this,[e]);for(var t=this.features,i=t.length,n=Array(i),r=0;r<i;++r)n[r]=t[r].clone();return e.features=n,e},refresh:function(e){this.calculateInRange()&&this.visibility&&this.events.triggerEvent("refresh",e)},assignRenderer:function(){for(var e=0,t=this.renderers.length;e<t;e++){var i=this.renderers[e];if((i="function"==typeof i?i:OpenLayers.Renderer[i])&&i.prototype.supported()){this.renderer=new i(this.div,this.rendererOptions);break}}},displayError:function(){this.reportError&&OpenLayers.Console.userError(OpenLayers.i18n("browserNotSupported",{renderers:this.renderers.join("\n")}))},setMap:function(e){if(OpenLayers.Layer.prototype.setMap.apply(this,arguments),this.renderer){this.renderer.map=this.map;var t=this.map.getSize();t.w*=this.ratio,t.h*=this.ratio,this.renderer.setSize(t)}else this.map.removeLayer(this)},afterAdd:function(){if(this.strategies){var e,t,i;for(t=0,i=this.strategies.length;t<i;t++)e=this.strategies[t],e.autoActivate&&e.activate()}},removeMap:function(e){if(this.drawn=!1,this.strategies){var t,i;for(t=0,i=this.strategies.length;t<i;t++)e=this.strategies[t],e.autoActivate&&e.deactivate()}},onMapResize:function(){OpenLayers.Layer.prototype.onMapResize.apply(this,arguments);var e=this.map.getSize();e.w*=this.ratio,e.h*=this.ratio,this.renderer.setSize(e)},moveTo:function(e,t,i){OpenLayers.Layer.prototype.moveTo.apply(this,arguments);var n=!0;if(!i){this.renderer.root.style.visibility="hidden";var n=this.map.getSize(),r=n.w,n=n.h,r=r/2*this.ratio-r/2,n=n/2*this.ratio-n/2,r=r+this.map.layerContainerOriginPx.x,r=-Math.round(r),n=n+this.map.layerContainerOriginPx.y,n=-Math.round(n);if(this.div.style.left=r+"px",this.div.style.top=n+"px",r=this.map.getExtent().scale(this.ratio),n=this.renderer.setExtent(r,t),this.renderer.root.style.visibility="visible",!0===OpenLayers.IS_GECKO&&(this.div.scrollLeft=this.div.scrollLeft),!t&&n)for(var s in this.unrenderedFeatures)r=this.unrenderedFeatures[s],this.drawFeature(r)}if(!this.drawn||t||!n)for(this.drawn=!0,s=0,n=this.features.length;s<n;s++)this.renderer.locked=s!==n-1,r=this.features[s],this.drawFeature(r)},display:function(e){OpenLayers.Layer.prototype.display.apply(this,arguments);var t=this.div.style.display;t!=this.renderer.root.style.display&&(this.renderer.root.style.display=t)},addFeatures:function(e,t){OpenLayers.Util.isArray(e)||(e=[e]);var i=!t||!t.silent;if(i){var n={features:e};if(!1===this.events.triggerEvent("beforefeaturesadded",n))return;e=n.features}for(var n=[],r=0,s=e.length;r<s;r++){this.renderer.locked=r!=e.length-1;var o=e[r];if(this.geometryType&&!(o.geometry instanceof this.geometryType))throw new TypeError("addFeatures: component should be an "+this.geometryType.prototype.CLASS_NAME);if(o.layer=this,!o.style&&this.style&&(o.style=OpenLayers.Util.extend({},this.style)),i){if(!1===this.events.triggerEvent("beforefeatureadded",{feature:o}))continue;this.preFeatureInsert(o)}n.push(o),this.features.push(o),this.drawFeature(o),i&&(this.events.triggerEvent("featureadded",{feature:o}),this.onFeatureInsert(o))}i&&this.events.triggerEvent("featuresadded",{features:n})},removeFeatures:function(e,t){if(e&&0!==e.length){if(e===this.features)return this.removeAllFeatures(t);OpenLayers.Util.isArray(e)||(e=[e]),e===this.selectedFeatures&&(e=e.slice());var i=!t||!t.silent;i&&this.events.triggerEvent("beforefeaturesremoved",{features:e});for(var n=e.length-1;0<=n;n--){this.renderer.locked=!(0==n||!e[n-1].geometry);var r=e[n];delete this.unrenderedFeatures[r.id],i&&this.events.triggerEvent("beforefeatureremoved",{feature:r}),this.features=OpenLayers.Util.removeItem(this.features,r),r.layer=null,r.geometry&&this.renderer.eraseFeatures(r),-1!=OpenLayers.Util.indexOf(this.selectedFeatures,r)&&OpenLayers.Util.removeItem(this.selectedFeatures,r),i&&this.events.triggerEvent("featureremoved",{feature:r})}i&&this.events.triggerEvent("featuresremoved",{features:e})}},removeAllFeatures:function(e){e=!e||!e.silent;var t=this.features;e&&this.events.triggerEvent("beforefeaturesremoved",{features:t});for(var i,n=t.length-1;0<=n;n--)i=t[n],e&&this.events.triggerEvent("beforefeatureremoved",{feature:i}),i.layer=null,e&&this.events.triggerEvent("featureremoved",{feature:i});this.renderer.clear(),this.features=[],this.unrenderedFeatures={},this.selectedFeatures=[],e&&this.events.triggerEvent("featuresremoved",{features:t})},destroyFeatures:function(e,t){if(void 0==e&&(e=this.features),e){this.removeFeatures(e,t);for(var i=e.length-1;0<=i;i--)e[i].destroy()}},drawFeature:function(e,t){if(this.drawn){if("object"!=typeof t){t||e.state!==OpenLayers.State.DELETE||(t="delete");var i=t||e.renderIntent;(t=e.style||this.style)||(t=this.styleMap.createSymbolizer(e,i))}i=this.renderer.drawFeature(e,t),!1===i||null===i?this.unrenderedFeatures[e.id]=e:delete this.unrenderedFeatures[e.id]}},eraseFeatures:function(e){this.renderer.eraseFeatures(e)},getFeatureFromEvent:function(e){if(!this.renderer)throw Error("getFeatureFromEvent called on layer with no renderer. This usually means you destroyed a layer, but not some handler which is associated with it.");var t=null;return(e=this.renderer.getFeatureIdFromEvent(e))&&(t="string"==typeof e?this.getFeatureById(e):e),t},getFeatureBy:function(e,t){for(var i=null,n=0,r=this.features.length;n<r;++n)if(this.features[n][e]==t){i=this.features[n];break}return i},getFeatureById:function(e){return this.getFeatureBy("id",e)},getFeatureByFid:function(e){return this.getFeatureBy("fid",e)},getFeaturesByAttribute:function(e,t){var i,n,r=this.features.length,s=[];for(i=0;i<r;i++)(n=this.features[i])&&n.attributes&&n.attributes[e]===t&&s.push(n);return s},onFeatureInsert:function(e){},preFeatureInsert:function(e){},getDataExtent:function(){var e=null,t=this.features;if(t&&0<t.length)for(var i,n=0,r=t.length;n<r;n++)(i=t[n].geometry)&&(null===e&&(e=new OpenLayers.Bounds),e.extend(i.getBounds()));return e},CLASS_NAME:"OpenLayers.Layer.Vector"}),OpenLayers.Layer.TMS=OpenLayers.Class(OpenLayers.Layer.Grid,{serviceVersion:"1.0.0",layername:null,type:null,isBaseLayer:!0,tileOrigin:null,serverResolutions:null,zoomOffset:0,initialize:function(e,t,i){var n=[];n.push(e,t,{},i),OpenLayers.Layer.Grid.prototype.initialize.apply(this,n)},clone:function(e){return null==e&&(e=new OpenLayers.Layer.TMS(this.name,this.url,this.getOptions())),e=OpenLayers.Layer.Grid.prototype.clone.apply(this,[e])},getURL:function(e){e=this.adjustBounds(e);var t=this.getServerResolution(),i=Math.round((e.left-this.tileOrigin.lon)/(t*this.tileSize.w));return e=Math.round((e.bottom-this.tileOrigin.lat)/(t*this.tileSize.h)),t=this.getServerZoom(),i=this.serviceVersion+"/"+this.layername+"/"+t+"/"+i+"/"+e+"."+this.type,e=this.url,OpenLayers.Util.isArray(e)&&(e=this.selectUrl(i,e)),e+i},setMap:function(e){OpenLayers.Layer.Grid.prototype.setMap.apply(this,arguments),this.tileOrigin||(this.tileOrigin=new OpenLayers.LonLat(this.map.maxExtent.left,this.map.maxExtent.bottom))},CLASS_NAME:"OpenLayers.Layer.TMS"}),OpenLayers.Protocol=OpenLayers.Class({format:null,options:null,autoDestroy:!0,defaultFilter:null,initialize:function(e){e=e||{},OpenLayers.Util.extend(this,e),this.options=e},mergeWithDefaultFilter:function(e){return e&&this.defaultFilter?new OpenLayers.Filter.Logical({type:OpenLayers.Filter.Logical.AND,filters:[this.defaultFilter,e]}):e||this.defaultFilter||void 0},destroy:function(){this.format=this.options=null},read:function(e){e=e||{},e.filter=this.mergeWithDefaultFilter(e.filter)},create:function(){},update:function(){},delete:function(){},commit:function(){},abort:function(e){},createCallback:function(e,t,i){return OpenLayers.Function.bind(function(){e.apply(this,[t,i])},this)},CLASS_NAME:"OpenLayers.Protocol"}),OpenLayers.Protocol.Response=OpenLayers.Class({code:null,requestType:null,last:!0,features:null,data:null,reqFeatures:null,priv:null,error:null,initialize:function(e){OpenLayers.Util.extend(this,e)},success:function(){return 0<this.code},CLASS_NAME:"OpenLayers.Protocol.Response"}),OpenLayers.Protocol.Response.SUCCESS=1,OpenLayers.Protocol.Response.FAILURE=0,OpenLayers.ProxyHost="",OpenLayers.Request||(OpenLayers.Request={}),OpenLayers.Util.extend(OpenLayers.Request,{DEFAULT_CONFIG:{method:"GET",url:window.location.href,async:!0,user:void 0,password:void 0,params:null,proxy:OpenLayers.ProxyHost,headers:{},data:null,callback:function(){},success:null,failure:null,scope:null},URL_SPLIT_REGEX:/([^:]*:)\/\/([^:]*:?[^@]*@)?([^:\/\?]*):?([^\/\?]*)/,events:new OpenLayers.Events(this),makeSameOrigin:function(e,t){var i=0!==e.indexOf("http"),n=!i&&e.match(this.URL_SPLIT_REGEX);if(n){var r=window.location,i=n[1]==r.protocol&&n[3]==r.hostname,n=n[4],r=r.port;(80!=n&&""!=n||"80"!=r&&""!=r)&&(i=i&&n==r)}return i||t&&(e="function"==typeof t?t(e):t+encodeURIComponent(e)),e},issue:function(e){var t=OpenLayers.Util.extend(this.DEFAULT_CONFIG,{proxy:OpenLayers.ProxyHost});e=e||{},e.headers=e.headers||{},e=OpenLayers.Util.applyDefaults(e,t),e.headers=OpenLayers.Util.applyDefaults(e.headers,t.headers);var i,t=!1;for(i in e.headers)e.headers.hasOwnProperty(i)&&"x-requested-with"===i.toLowerCase()&&(t=!0);!1===t&&(e.headers["X-Requested-With"]="XMLHttpRequest");var n=new OpenLayers.Request.XMLHttpRequest,r=OpenLayers.Util.urlAppend(e.url,OpenLayers.Util.getParameterString(e.params||{})),r=OpenLayers.Request.makeSameOrigin(r,e.proxy);n.open(e.method,r,e.async,e.user,e.password);for(var s in e.headers)n.setRequestHeader(s,e.headers[s]);var o=this.events,a=this;return n.onreadystatechange=function(){n.readyState==OpenLayers.Request.XMLHttpRequest.DONE&&!1!==o.triggerEvent("complete",{request:n,config:e,requestUrl:r})&&a.runCallbacks({request:n,config:e,requestUrl:r})},!1===e.async?n.send(e.data):window.setTimeout(function(){0!==n.readyState&&n.send(e.data)},0),n},runCallbacks:function(e){var t,i=e.request,n=e.config,r=n.scope?OpenLayers.Function.bind(n.callback,n.scope):n.callback;n.success&&(t=n.scope?OpenLayers.Function.bind(n.success,n.scope):n.success);var s;n.failure&&(s=n.scope?OpenLayers.Function.bind(n.failure,n.scope):n.failure),"file:"==OpenLayers.Util.createUrlObject(n.url).protocol&&i.responseText&&(i.status=200),r(i),(!i.status||200<=i.status&&300>i.status)&&(this.events.triggerEvent("success",e),t&&t(i)),i.status&&(200>i.status||300<=i.status)&&(this.events.triggerEvent("failure",e),s&&s(i))},GET:function(e){return e=OpenLayers.Util.extend(e,{method:"GET"}),OpenLayers.Request.issue(e)},POST:function(e){return e=OpenLayers.Util.extend(e,{method:"POST"}),e.headers=e.headers?e.headers:{},"CONTENT-TYPE"in OpenLayers.Util.upperCaseObject(e.headers)||(e.headers["Content-Type"]="application/xml"),OpenLayers.Request.issue(e)},PUT:function(e){return e=OpenLayers.Util.extend(e,{method:"PUT"}),e.headers=e.headers?e.headers:{},"CONTENT-TYPE"in OpenLayers.Util.upperCaseObject(e.headers)||(e.headers["Content-Type"]="application/xml"),OpenLayers.Request.issue(e)},DELETE:function(e){return e=OpenLayers.Util.extend(e,{method:"DELETE"}),OpenLayers.Request.issue(e)},HEAD:function(e){return e=OpenLayers.Util.extend(e,{method:"HEAD"}),OpenLayers.Request.issue(e)},OPTIONS:function(e){return e=OpenLayers.Util.extend(e,{method:"OPTIONS"}),OpenLayers.Request.issue(e)}}),function(){function e(){this._object=s&&!l?new s:new window.ActiveXObject("Microsoft.XMLHTTP"),this._listeners=[]}function t(){return new e}function i(e){t.onreadystatechange&&t.onreadystatechange.apply(e),e.dispatchEvent({type:"readystatechange",bubbles:!1,cancelable:!1,timeStamp:new Date+0})}function n(e){try{e.responseText=e._object.responseText}catch(e){}try{var t,i=e._object,n=i.responseXML,r=i.responseText;a&&r&&n&&!n.documentElement&&i.getResponseHeader("Content-Type").match(/[^\/]+\/[^\+]+\+xml/)&&(n=new window.ActiveXObject("Microsoft.XMLDOM"),n.async=!1,n.validateOnParse=!1,n.loadXML(r)),t=n&&(a&&0!=n.parseError||!n.documentElement||n.documentElement&&"parsererror"==n.documentElement.tagName)?null:n,e.responseXML=t}catch(e){}try{e.status=e._object.status}catch(e){}try{e.statusText=e._object.statusText}catch(e){}}function r(e){e._object.onreadystatechange=new window.Function}var s=window.XMLHttpRequest,o=!!window.controllers,a=window.document.all&&!window.opera,l=a&&window.navigator.userAgent.match(/MSIE 7.0/);t.prototype=e.prototype,o&&s.wrapped&&(t.wrapped=s.wrapped),t.UNSENT=0,t.OPENED=1,t.HEADERS_RECEIVED=2,t.LOADING=3,t.DONE=4,t.prototype.readyState=t.UNSENT,t.prototype.responseText="",t.prototype.responseXML=null,t.prototype.status=0,t.prototype.statusText="",t.prototype.priority="NORMAL",t.prototype.onreadystatechange=null,t.onreadystatechange=null,t.onopen=null,t.onsend=null,t.onabort=null,t.prototype.open=function(e,s,l,h,u){delete this._headers,3>arguments.length&&(l=!0),this._async=l;var c,p=this,d=this.readyState;a&&l&&(c=function(){d!=t.DONE&&(r(p),p.abort())},window.attachEvent("onunload",c)),t.onopen&&t.onopen.apply(this,arguments),4<arguments.length?this._object.open(e,s,l,h,u):3<arguments.length?this._object.open(e,s,l,h):this._object.open(e,s,l),this.readyState=t.OPENED,i(this),this._object.onreadystatechange=function(){o&&!l||(p.readyState=p._object.readyState,n(p),p._aborted?p.readyState=t.UNSENT:(p.readyState==t.DONE&&(delete p._data,r(p),a&&l&&window.detachEvent("onunload",c)),d!=p.readyState&&i(p),d=p.readyState))}},t.prototype.send=function(e){t.onsend&&t.onsend.apply(this,arguments),arguments.length||(e=null),e&&e.nodeType&&(e=window.XMLSerializer?(new window.XMLSerializer).serializeToString(e):e.xml,this._headers["Content-Type"]||this._object.setRequestHeader("Content-Type","application/xml")),this._data=e;e:if(this._object.send(this._data),o&&!this._async)for(this.readyState=t.OPENED,n(this);this.readyState<t.DONE;)if(this.readyState++,i(this),this._aborted)break e},t.prototype.abort=function(){t.onabort&&t.onabort.apply(this,arguments),this.readyState>t.UNSENT&&(this._aborted=!0),this._object.abort(),r(this),this.readyState=t.UNSENT,delete this._data},t.prototype.getAllResponseHeaders=function(){return this._object.getAllResponseHeaders()},t.prototype.getResponseHeader=function(e){return this._object.getResponseHeader(e)},t.prototype.setRequestHeader=function(e,t){return this._headers||(this._headers={}),this._headers[e]=t,this._object.setRequestHeader(e,t)},t.prototype.addEventListener=function(e,t,i){for(var n,r=0;n=this._listeners[r];r++)if(n[0]==e&&n[1]==t&&n[2]==i)return;this._listeners.push([e,t,i])},t.prototype.removeEventListener=function(e,t,i){for(var n,r=0;(n=this._listeners[r])&&(n[0]!=e||n[1]!=t||n[2]!=i);r++);n&&this._listeners.splice(r,1)},t.prototype.dispatchEvent=function(e){e={type:e.type,target:this,currentTarget:this,eventPhase:2,bubbles:e.bubbles,cancelable:e.cancelable,timeStamp:e.timeStamp,stopPropagation:function(){},preventDefault:function(){},initEvent:function(){}},"readystatechange"==e.type&&this.onreadystatechange&&(this.onreadystatechange.handleEvent||this.onreadystatechange).apply(this,[e]);for(var t,i=0;t=this._listeners[i];i++)t[0]!=e.type||t[2]||(t[1].handleEvent||t[1]).apply(this,[e])},t.prototype.toString=function(){return"[object XMLHttpRequest]"},t.toString=function(){return"[XMLHttpRequest]"},window.Function.prototype.apply||(window.Function.prototype.apply=function(e,t){t||(t=[]),e.__func=this,e.__func(t[0],t[1],t[2],t[3],t[4]),delete e.__func}),OpenLayers.Request||(OpenLayers.Request={}),OpenLayers.Request.XMLHttpRequest=t}(),OpenLayers.Protocol.HTTP=OpenLayers.Class(OpenLayers.Protocol,{url:null,headers:null,params:null,callback:null,scope:null,readWithPOST:!1,updateWithPOST:!1,deleteWithPOST:!1,wildcarded:!1,srsInBBOX:!1,initialize:function(e){if(e=e||{},this.params={},this.headers={},OpenLayers.Protocol.prototype.initialize.apply(this,arguments),!this.filterToParams&&OpenLayers.Format.QueryStringFilter){var t=new OpenLayers.Format.QueryStringFilter({wildcarded:this.wildcarded,srsInBBOX:this.srsInBBOX});this.filterToParams=function(e,i){return t.write(e,i)}}},destroy:function(){this.headers=this.params=null,OpenLayers.Protocol.prototype.destroy.apply(this)},read:function(e){OpenLayers.Protocol.prototype.read.apply(this,arguments),e=e||{},e.params=OpenLayers.Util.applyDefaults(e.params,this.options.params),e=OpenLayers.Util.applyDefaults(e,this.options),e.filter&&this.filterToParams&&(e.params=this.filterToParams(e.filter,e.params));var t=void 0!==e.readWithPOST?e.readWithPOST:this.readWithPOST,i=new OpenLayers.Protocol.Response({requestType:"read"});return t?(t=e.headers||{},t["Content-Type"]="application/x-www-form-urlencoded",i.priv=OpenLayers.Request.POST({url:e.url,callback:this.createCallback(this.handleRead,i,e),data:OpenLayers.Util.getParameterString(e.params),headers:t})):i.priv=OpenLayers.Request.GET({url:e.url,callback:this.createCallback(this.handleRead,i,e),params:e.params,headers:e.headers}),i},handleRead:function(e,t){this.handleResponse(e,t)},create:function(e,t){t=OpenLayers.Util.applyDefaults(t,this.options);var i=new OpenLayers.Protocol.Response({reqFeatures:e,requestType:"create"});return i.priv=OpenLayers.Request.POST({url:t.url,callback:this.createCallback(this.handleCreate,i,t),headers:t.headers,data:this.format.write(e)}),i},handleCreate:function(e,t){this.handleResponse(e,t)},update:function(e,t){t=t||{};var i=t.url||e.url||this.options.url+"/"+e.fid;t=OpenLayers.Util.applyDefaults(t,this.options);var n=new OpenLayers.Protocol.Response({reqFeatures:e,requestType:"update"});return n.priv=OpenLayers.Request[this.updateWithPOST?"POST":"PUT"]({url:i,callback:this.createCallback(this.handleUpdate,n,t),headers:t.headers,data:this.format.write(e)}),n},handleUpdate:function(e,t){this.handleResponse(e,t)},delete:function(e,t){t=t||{};var i=t.url||e.url||this.options.url+"/"+e.fid;t=OpenLayers.Util.applyDefaults(t,this.options);var n=new OpenLayers.Protocol.Response({reqFeatures:e,requestType:"delete"}),r=this.deleteWithPOST?"POST":"DELETE",i={url:i,callback:this.createCallback(this.handleDelete,n,t),headers:t.headers};return this.deleteWithPOST&&(i.data=this.format.write(e)),n.priv=OpenLayers.Request[r](i),n},handleDelete:function(e,t){this.handleResponse(e,t)},handleResponse:function(e,t){var i=e.priv;t.callback&&(200<=i.status&&300>i.status?("delete"!=e.requestType&&(e.features=this.parseFeatures(i)),e.code=OpenLayers.Protocol.Response.SUCCESS):e.code=OpenLayers.Protocol.Response.FAILURE,t.callback.call(t.scope,e))},parseFeatures:function(e){var t=e.responseXML;return t&&t.documentElement||(t=e.responseText),!t||0>=t.length?null:this.format.read(t)},commit:function(e,t){function i(e){for(var t=e.features?e.features.length:0,i=Array(t),r=0;r<t;++r)i[r]=e.features[r].fid;f.insertIds=i,n.apply(this,[e])}function n(e){this.callUserCallback(e,t),d=d&&e.success(),s++,s>=p&&t.callback&&(f.code=d?OpenLayers.Protocol.Response.SUCCESS:OpenLayers.Protocol.Response.FAILURE,t.callback.apply(t.scope,[f]))}t=OpenLayers.Util.applyDefaults(t,this.options);var r=[],s=0,o={};o[OpenLayers.State.INSERT]=[],o[OpenLayers.State.UPDATE]=[],o[OpenLayers.State.DELETE]=[];for(var a,l,h=[],u=0,c=e.length;u<c;++u)a=e[u],(l=o[a.state])&&(l.push(a),h.push(a));var p=(0<o[OpenLayers.State.INSERT].length?1:0)+o[OpenLayers.State.UPDATE].length+o[OpenLayers.State.DELETE].length,d=!0,f=new OpenLayers.Protocol.Response({reqFeatures:h});for(a=o[OpenLayers.State.INSERT],0<a.length&&r.push(this.create(a,OpenLayers.Util.applyDefaults({callback:i,scope:this},t.create))),a=o[OpenLayers.State.UPDATE],u=a.length-1;0<=u;--u)r.push(this.update(a[u],OpenLayers.Util.applyDefaults({callback:n,scope:this},t.update)));for(a=o[OpenLayers.State.DELETE],u=a.length-1;0<=u;--u)r.push(this.delete(a[u],OpenLayers.Util.applyDefaults({callback:n,scope:this},t.delete)));return r},abort:function(e){e&&e.priv.abort()},callUserCallback:function(e,t){var i=t[e.requestType];i&&i.callback&&i.callback.call(i.scope,e)},CLASS_NAME:"OpenLayers.Protocol.HTTP"}),OpenLayers.Handler.Click=OpenLayers.Class(OpenLayers.Handler,{delay:300,single:!0,double:!1,pixelTolerance:0,dblclickTolerance:13,stopSingle:!1,stopDouble:!1,timerId:null,down:null,last:null,first:null,rightclickTimerId:null,touchstart:function(e){return this.startTouch(),this.down=this.getEventInfo(e),this.last=this.getEventInfo(e),!0},touchmove:function(e){return this.last=this.getEventInfo(e),!0},touchend:function(e){return this.down&&(e.xy=this.last.xy,e.lastTouches=this.last.touches,this.handleSingle(e),this.down=null),!0},mousedown:function(e){return this.down=this.getEventInfo(e),this.last=this.getEventInfo(e),!0},mouseup:function(e){var t=!0;return this.checkModifiers(e)&&this.control.handleRightClicks&&OpenLayers.Event.isRightClick(e)&&(t=this.rightclick(e)),t},rightclick:function(e){if(this.passesTolerance(e)){if(null!=this.rightclickTimerId)return this.clearTimer(),this.callback("dblrightclick",[e]),!this.stopDouble;e=this.double?OpenLayers.Util.extend({},e):this.callback("rightclick",[e]),e=OpenLayers.Function.bind(this.delayedRightCall,this,e),this.rightclickTimerId=window.setTimeout(e,this.delay)}return!this.stopSingle},delayedRightCall:function(e){this.rightclickTimerId=null,e&&this.callback("rightclick",[e])},click:function(e){return this.last||(this.last=this.getEventInfo(e)),this.handleSingle(e),!this.stopSingle},dblclick:function(e){return this.handleDouble(e),!this.stopDouble},handleDouble:function(e){this.passesDblclickTolerance(e)&&(this.double&&this.callback("dblclick",[e]),this.clearTimer())},handleSingle:function(e){this.passesTolerance(e)&&(null!=this.timerId?(this.last.touches&&1===this.last.touches.length&&(this.double&&OpenLayers.Event.preventDefault(e),this.handleDouble(e)),this.last.touches&&2===this.last.touches.length||this.clearTimer()):(this.first=this.getEventInfo(e),e=this.single?OpenLayers.Util.extend({},e):null,this.queuePotentialClick(e)))},queuePotentialClick:function(e){this.timerId=window.setTimeout(OpenLayers.Function.bind(this.delayedCall,this,e),this.delay)},passesTolerance:function(e){var t=!0;if(null!=this.pixelTolerance&&this.down&&this.down.xy&&(t=this.pixelTolerance>=this.down.xy.distanceTo(e.xy))&&this.touch&&this.down.touches.length===this.last.touches.length){e=0;for(var i=this.down.touches.length;e<i;++e)if(this.getTouchDistance(this.down.touches[e],this.last.touches[e])>this.pixelTolerance){t=!1;break}}return t},getTouchDistance:function(e,t){return Math.sqrt(Math.pow(e.clientX-t.clientX,2)+Math.pow(e.clientY-t.clientY,2))},passesDblclickTolerance:function(e){return e=!0,this.down&&this.first&&(e=this.down.xy.distanceTo(this.first.xy)<=this.dblclickTolerance),e},clearTimer:function(){null!=this.timerId&&(window.clearTimeout(this.timerId),this.timerId=null),null!=this.rightclickTimerId&&(window.clearTimeout(this.rightclickTimerId),this.rightclickTimerId=null)},delayedCall:function(e){this.timerId=null,e&&this.callback("click",[e])},getEventInfo:function(e){var t;if(e.touches){var i=e.touches.length;t=Array(i);for(var n,r=0;r<i;r++)n=e.touches[r],t[r]={clientX:n.olClientX,clientY:n.olClientY}}return{xy:e.xy,touches:t}},deactivate:function(){var e=!1;return OpenLayers.Handler.prototype.deactivate.apply(this,arguments)&&(this.clearTimer(),this.last=this.first=this.down=null,e=!0),e},CLASS_NAME:"OpenLayers.Handler.Click"}),OpenLayers.Geometry=OpenLayers.Class({id:null,parent:null,bounds:null,initialize:function(){this.id=OpenLayers.Util.createUniqueID(this.CLASS_NAME+"_")},destroy:function(){this.bounds=this.id=null},clone:function(){return new OpenLayers.Geometry},setBounds:function(e){e&&(this.bounds=e.clone())},clearBounds:function(){this.bounds=null,this.parent&&this.parent.clearBounds()},extendBounds:function(e){this.getBounds()?this.bounds.extend(e):this.setBounds(e)},getBounds:function(){return null==this.bounds&&this.calculateBounds(),this.bounds},calculateBounds:function(){},distanceTo:function(e,t){},getVertices:function(e){},atPoint:function(e,t,i){var n=!1;return null!=this.getBounds()&&null!=e&&(t=null!=t?t:0,i=null!=i?i:0,n=new OpenLayers.Bounds(this.bounds.left-t,this.bounds.bottom-i,this.bounds.right+t,this.bounds.top+i).containsLonLat(e)),n},getLength:function(){return 0},getArea:function(){return 0},getCentroid:function(){return null},toString:function(){return OpenLayers.Format&&OpenLayers.Format.WKT?OpenLayers.Format.WKT.prototype.write(new OpenLayers.Feature.Vector(this)):Object.prototype.toString.call(this)},CLASS_NAME:"OpenLayers.Geometry"}),OpenLayers.Geometry.fromWKT=function(e){var t;if(OpenLayers.Format&&OpenLayers.Format.WKT){var i=OpenLayers.Geometry.fromWKT.format;if(i||(i=new OpenLayers.Format.WKT,OpenLayers.Geometry.fromWKT.format=i),e=i.read(e),e instanceof OpenLayers.Feature.Vector)t=e.geometry;else if(OpenLayers.Util.isArray(e)){t=e.length;for(var i=Array(t),n=0;n<t;++n)i[n]=e[n].geometry;t=new OpenLayers.Geometry.Collection(i)}}return t},OpenLayers.Geometry.segmentsIntersect=function(e,t,i){var n=i&&i.point;i=i&&i.tolerance;var r=!1,s=e.x1-t.x1,o=e.y1-t.y1,a=e.x2-e.x1,l=e.y2-e.y1,h=t.y2-t.y1,u=t.x2-t.x1,c=h*a-u*l,h=u*o-h*s,o=a*o-l*s;if(0==c?0==h&&0==o&&(r=!0):(s=h/c,c=o/c,0<=s&&1>=s&&0<=c&&1>=c&&(n?(a=e.x1+s*a,c=e.y1+s*l,r=new OpenLayers.Geometry.Point(a,c)):r=!0)),i)if(r){if(n)e:for(e=[e,t],t=0;2>t;++t)for(s=e[t],l=1;3>l;++l)if(a=s["x"+l],c=s["y"+l],n=Math.sqrt(Math.pow(a-r.x,2)+Math.pow(c-r.y,2)),n<i){r.x=a,r.y=c;break e}}else e:for(e=[e,t],t=0;2>t;++t)for(a=e[t],c=e[(t+1)%2],l=1;3>l;++l)if(s={x:a["x"+l],y:a["y"+l]},o=OpenLayers.Geometry.distanceToSegment(s,c),o.distance<i){r=!n||new OpenLayers.Geometry.Point(s.x,s.y);break e}return r},OpenLayers.Geometry.distanceToSegment=function(e,t){var i=OpenLayers.Geometry.distanceSquaredToSegment(e,t);return i.distance=Math.sqrt(i.distance),i},OpenLayers.Geometry.distanceSquaredToSegment=function(e,t){var i=e.x,n=e.y,r=t.x1,s=t.y1,o=t.x2,a=t.y2,l=o-r,h=a-s,u=0==l&&0==h?0:(l*(i-r)+h*(n-s))/(Math.pow(l,2)+Math.pow(h,2));return 0>=u||(1<=u?(r=o,s=a):(r+=u*l,s+=u*h)),{distance:Math.pow(r-i,2)+Math.pow(s-n,2),x:r,y:s,along:u}},OpenLayers.Geometry.Point=OpenLayers.Class(OpenLayers.Geometry,{x:null,y:null,initialize:function(e,t){OpenLayers.Geometry.prototype.initialize.apply(this,arguments),this.x=parseFloat(e),this.y=parseFloat(t)},clone:function(e){return null==e&&(e=new OpenLayers.Geometry.Point(this.x,this.y)),OpenLayers.Util.applyDefaults(e,this),e},calculateBounds:function(){this.bounds=new OpenLayers.Bounds(this.x,this.y,this.x,this.y)},distanceTo:function(e,t){var i,n,r,s,o,a=!(t&&!1===t.edge)&&t&&t.details;return e instanceof OpenLayers.Geometry.Point?(n=this.x,r=this.y,s=e.x,o=e.y,i=Math.sqrt(Math.pow(n-s,2)+Math.pow(r-o,2)),i=a?{x0:n,y0:r,x1:s,y1:o,distance:i}:i):(i=e.distanceTo(this,t),a&&(i={x0:i.x1,y0:i.y1,x1:i.x0,y1:i.y0,distance:i.distance})),i},equals:function(e){var t=!1;return null!=e&&(t=this.x==e.x&&this.y==e.y||isNaN(this.x)&&isNaN(this.y)&&isNaN(e.x)&&isNaN(e.y)),t},toShortString:function(){return this.x+", "+this.y},move:function(e,t){this.x+=e,this.y+=t,this.clearBounds()},rotate:function(e,t){e*=Math.PI/180;var i=this.distanceTo(t),n=e+Math.atan2(this.y-t.y,this.x-t.x);this.x=t.x+i*Math.cos(n),this.y=t.y+i*Math.sin(n),this.clearBounds()},getCentroid:function(){return new OpenLayers.Geometry.Point(this.x,this.y)},resize:function(e,t,i){return this.x=t.x+e*(void 0==i?1:i)*(this.x-t.x),this.y=t.y+e*(this.y-t.y),this.clearBounds(),this},intersects:function(e){return"OpenLayers.Geometry.Point"==e.CLASS_NAME?this.equals(e):e.intersects(this)},transform:function(e,t){return e&&t&&(OpenLayers.Projection.transform(this,e,t),this.bounds=null),this},getVertices:function(e){return[this]},CLASS_NAME:"OpenLayers.Geometry.Point"}),OpenLayers.Handler.Point=OpenLayers.Class(OpenLayers.Handler,{point:null,layer:null,multi:!1,citeCompliant:!1,mouseDown:!1,stoppedDown:null,lastDown:null,lastUp:null,persist:!1,stopDown:!1,stopUp:!1,layerOptions:null,pixelTolerance:5,lastTouchPx:null,initialize:function(e,t,i){i&&i.layerOptions&&i.layerOptions.styleMap||(this.style=OpenLayers.Util.extend(OpenLayers.Feature.Vector.style.default,{})),OpenLayers.Handler.prototype.initialize.apply(this,arguments)},activate:function(){if(!OpenLayers.Handler.prototype.activate.apply(this,arguments))return!1;var e=OpenLayers.Util.extend({displayInLayerSwitcher:!1,calculateInRange:OpenLayers.Function.True,wrapDateLine:this.citeCompliant},this.layerOptions);return this.layer=new OpenLayers.Layer.Vector(this.CLASS_NAME,e),this.map.addLayer(this.layer),!0},createFeature:function(e){e=this.layer.getLonLatFromViewPortPx(e),e=new OpenLayers.Geometry.Point(e.lon,e.lat),this.point=new OpenLayers.Feature.Vector(e),this.callback("create",[this.point.geometry,this.point]),this.point.geometry.clearBounds(),this.layer.addFeatures([this.point],{silent:!0})},deactivate:function(){return!!OpenLayers.Handler.prototype.deactivate.apply(this,arguments)&&(this.cancel(),null!=this.layer.map&&(this.destroyFeature(!0),this.layer.destroy(!1)),this.layer=null,!0)},destroyFeature:function(e){!this.layer||!e&&this.persist||this.layer.destroyFeatures(),this.point=null},destroyPersistedFeature:function(){var e=this.layer;e&&1<e.features.length&&this.layer.features[0].destroy()},finalize:function(e){this.mouseDown=!1,this.lastTouchPx=this.lastUp=this.lastDown=null,this.callback(e?"cancel":"done",[this.geometryClone()]),this.destroyFeature(e)},cancel:function(){this.finalize(!0)},click:function(e){return OpenLayers.Event.stop(e),!1},dblclick:function(e){return OpenLayers.Event.stop(e),!1},modifyFeature:function(e){this.point||this.createFeature(e),e=this.layer.getLonLatFromViewPortPx(e),this.point.geometry.x=e.lon,this.point.geometry.y=e.lat,this.callback("modify",[this.point.geometry,this.point,!1]),this.point.geometry.clearBounds(),this.drawFeature()},drawFeature:function(){this.layer.drawFeature(this.point,this.style)},getGeometry:function(){var e=this.point&&this.point.geometry;return e&&this.multi&&(e=new OpenLayers.Geometry.MultiPoint([e])),e},geometryClone:function(){var e=this.getGeometry();return e&&e.clone()},mousedown:function(e){return this.down(e)},touchstart:function(e){return this.startTouch(),this.lastTouchPx=e.xy,this.down(e)},mousemove:function(e){return this.move(e)},touchmove:function(e){return this.lastTouchPx=e.xy,this.move(e)},mouseup:function(e){return this.up(e)},touchend:function(e){return e.xy=this.lastTouchPx,this.up(e)},down:function(e){return this.mouseDown=!0,this.lastDown=e.xy,this.touch||this.modifyFeature(e.xy),this.stoppedDown=this.stopDown,!this.stopDown},move:function(e){return this.touch||this.mouseDown&&!this.stoppedDown||this.modifyFeature(e.xy),!0},up:function(e){return this.mouseDown=!1,this.stoppedDown=this.stopDown,!(!(!this.checkModifiers(e)||this.lastUp&&this.lastUp.equals(e.xy))&&this.lastDown&&this.passesTolerance(this.lastDown,e.xy,this.pixelTolerance))||(this.touch&&this.modifyFeature(e.xy),this.persist&&this.destroyPersistedFeature(),this.lastUp=e.xy,
this.finalize(),!this.stopUp)},mouseout:function(e){OpenLayers.Util.mouseLeft(e,this.map.viewPortDiv)&&(this.stoppedDown=this.stopDown,this.mouseDown=!1)},passesTolerance:function(e,t,i){var n=!0;return null!=i&&e&&t&&e.distanceTo(t)>i&&(n=!1),n},CLASS_NAME:"OpenLayers.Handler.Point"}),OpenLayers.Geometry.Collection=OpenLayers.Class(OpenLayers.Geometry,{components:null,componentTypes:null,initialize:function(e){OpenLayers.Geometry.prototype.initialize.apply(this,arguments),this.components=[],null!=e&&this.addComponents(e)},destroy:function(){this.components.length=0,this.components=null,OpenLayers.Geometry.prototype.destroy.apply(this,arguments)},clone:function(){for(var e=new(OpenLayers.Util.getConstructor(this.CLASS_NAME)),t=0,i=this.components.length;t<i;t++)e.addComponent(this.components[t].clone());return OpenLayers.Util.applyDefaults(e,this),e},getComponentsString:function(){for(var e=[],t=0,i=this.components.length;t<i;t++)e.push(this.components[t].toShortString());return e.join(",")},calculateBounds:function(){this.bounds=null;var e=new OpenLayers.Bounds,t=this.components;if(t)for(var i=0,n=t.length;i<n;i++)e.extend(t[i].getBounds());null!=e.left&&null!=e.bottom&&null!=e.right&&null!=e.top&&this.setBounds(e)},addComponents:function(e){OpenLayers.Util.isArray(e)||(e=[e]);for(var t=0,i=e.length;t<i;t++)this.addComponent(e[t])},addComponent:function(e,t){var i=!1;if(e&&(null==this.componentTypes||-1<OpenLayers.Util.indexOf(this.componentTypes,e.CLASS_NAME))){if(null!=t&&t<this.components.length){var i=this.components.slice(0,t),n=this.components.slice(t,this.components.length);i.push(e),this.components=i.concat(n)}else this.components.push(e);e.parent=this,this.clearBounds(),i=!0}return i},removeComponents:function(e){var t=!1;OpenLayers.Util.isArray(e)||(e=[e]);for(var i=e.length-1;0<=i;--i)t=this.removeComponent(e[i])||t;return t},removeComponent:function(e){return OpenLayers.Util.removeItem(this.components,e),this.clearBounds(),!0},getLength:function(){for(var e=0,t=0,i=this.components.length;t<i;t++)e+=this.components[t].getLength();return e},getArea:function(){for(var e=0,t=0,i=this.components.length;t<i;t++)e+=this.components[t].getArea();return e},getGeodesicArea:function(e){for(var t=0,i=0,n=this.components.length;i<n;i++)t+=this.components[i].getGeodesicArea(e);return t},getCentroid:function(e){if(!e)return this.components.length&&this.components[0].getCentroid();if(e=this.components.length,!e)return!1;for(var t,i=[],n=[],r=0,s=Number.MAX_VALUE,o=0;o<e;++o){t=this.components[o];var a=t.getArea();t=t.getCentroid(!0),isNaN(a)||isNaN(t.x)||isNaN(t.y)||(i.push(a),r+=a,s=a<s&&0<a?a:s,n.push(t))}if(e=i.length,0===r){for(o=0;o<e;++o)i[o]=1;r=i.length}else{for(o=0;o<e;++o)i[o]/=s;r/=s}for(var l=s=0,o=0;o<e;++o)t=n[o],a=i[o],s+=t.x*a,l+=t.y*a;return new OpenLayers.Geometry.Point(s/r,l/r)},getGeodesicLength:function(e){for(var t=0,i=0,n=this.components.length;i<n;i++)t+=this.components[i].getGeodesicLength(e);return t},move:function(e,t){for(var i=0,n=this.components.length;i<n;i++)this.components[i].move(e,t)},rotate:function(e,t){for(var i=0,n=this.components.length;i<n;++i)this.components[i].rotate(e,t)},resize:function(e,t,i){for(var n=0;n<this.components.length;++n)this.components[n].resize(e,t,i);return this},distanceTo:function(e,t){for(var i,n,r,s=!(t&&!1===t.edge)&&t&&t.details,o=Number.POSITIVE_INFINITY,a=0,l=this.components.length;a<l&&(i=this.components[a].distanceTo(e,t),r=s?i.distance:i,!(r<o&&(o=r,n=i,0==o)));++a);return n},equals:function(e){var t=!0;if(e&&e.CLASS_NAME&&this.CLASS_NAME==e.CLASS_NAME)if(OpenLayers.Util.isArray(e.components)&&e.components.length==this.components.length){for(var i=0,n=this.components.length;i<n;++i)if(!this.components[i].equals(e.components[i])){t=!1;break}}else t=!1;else t=!1;return t},transform:function(e,t){if(e&&t){for(var i=0,n=this.components.length;i<n;i++)this.components[i].transform(e,t);this.bounds=null}return this},intersects:function(e){for(var t=!1,i=0,n=this.components.length;i<n&&!(t=e.intersects(this.components[i]));++i);return t},getVertices:function(e){for(var t=[],i=0,n=this.components.length;i<n;++i)Array.prototype.push.apply(t,this.components[i].getVertices(e));return t},CLASS_NAME:"OpenLayers.Geometry.Collection"}),OpenLayers.Geometry.MultiPoint=OpenLayers.Class(OpenLayers.Geometry.Collection,{componentTypes:["OpenLayers.Geometry.Point"],addPoint:function(e,t){this.addComponent(e,t)},removePoint:function(e){this.removeComponent(e)},CLASS_NAME:"OpenLayers.Geometry.MultiPoint"}),OpenLayers.Geometry.Curve=OpenLayers.Class(OpenLayers.Geometry.MultiPoint,{componentTypes:["OpenLayers.Geometry.Point"],getLength:function(){var e=0;if(this.components&&1<this.components.length)for(var t=1,i=this.components.length;t<i;t++)e+=this.components[t-1].distanceTo(this.components[t]);return e},getGeodesicLength:function(e){var t=this;if(e){var i=new OpenLayers.Projection("EPSG:4326");i.equals(e)||(t=this.clone().transform(e,i))}if(e=0,t.components&&1<t.components.length)for(var n,r=1,s=t.components.length;r<s;r++)i=t.components[r-1],n=t.components[r],e+=OpenLayers.Util.distVincenty({lon:i.x,lat:i.y},{lon:n.x,lat:n.y});return 1e3*e},CLASS_NAME:"OpenLayers.Geometry.Curve"}),OpenLayers.Geometry.LineString=OpenLayers.Class(OpenLayers.Geometry.Curve,{removeComponent:function(e){var t=this.components&&2<this.components.length;return t&&OpenLayers.Geometry.Collection.prototype.removeComponent.apply(this,arguments),t},intersects:function(e){var t=!1,i=e.CLASS_NAME;if("OpenLayers.Geometry.LineString"==i||"OpenLayers.Geometry.LinearRing"==i||"OpenLayers.Geometry.Point"==i){var n=this.getSortedSegments();e="OpenLayers.Geometry.Point"==i?[{x1:e.x,y1:e.y,x2:e.x,y2:e.y}]:e.getSortedSegments();var r,s,o,a,l,h,u,c=0,p=n.length;e:for(;c<p;++c){i=n[c],r=i.x1,s=i.x2,o=i.y1,a=i.y2;for(var d=0,f=e.length;d<f&&(l=e[d],!(l.x1>s));++d)if(!(l.x2<r||(h=l.y1,u=l.y2,Math.min(h,u)>Math.max(o,a)||Math.max(h,u)<Math.min(o,a)||!OpenLayers.Geometry.segmentsIntersect(i,l)))){t=!0;break e}}}else t=e.intersects(this);return t},getSortedSegments:function(){for(var e,t,i=this.components.length-1,n=Array(i),r=0;r<i;++r)e=this.components[r],t=this.components[r+1],n[r]=e.x<t.x?{x1:e.x,y1:e.y,x2:t.x,y2:t.y}:{x1:t.x,y1:t.y,x2:e.x,y2:e.y};return n.sort(function(e,t){return e.x1-t.x1})},splitWithSegment:function(e,t){for(var i,n,r,s=!(t&&!1===t.edge),o=t&&t.tolerance,a=[],l=this.getVertices(),h=[],u=[],c=!1,p={point:!0,tolerance:o},d=null,f=0,y=l.length-2;f<=y;++f)o=l[f],h.push(o.clone()),i=l[f+1],n={x1:o.x,y1:o.y,x2:i.x,y2:i.y},n=OpenLayers.Geometry.segmentsIntersect(e,n,p),n instanceof OpenLayers.Geometry.Point&&((r=!!(n.x===e.x1&&n.y===e.y1||n.x===e.x2&&n.y===e.y2||n.equals(o)||n.equals(i)))||s)&&(n.equals(u[u.length-1])||u.push(n.clone()),0===f&&n.equals(o)||n.equals(i)||(c=!0,n.equals(o)||h.push(n),a.push(new OpenLayers.Geometry.LineString(h)),h=[n.clone()]));if(c&&(h.push(i.clone()),a.push(new OpenLayers.Geometry.LineString(h))),0<u.length)var m=e.x1<e.x2?1:-1,g=e.y1<e.y2?1:-1,d={lines:a,points:u.sort(function(e,t){return m*e.x-m*t.x||g*e.y-g*t.y})};return d},split:function(e,t){var i,n,r,s,o=null,a=t&&t.mutual;if(e instanceof OpenLayers.Geometry.LineString){var l,h,u,c,p,d=this.getVertices(),f=[];r=[];for(var y=0,m=d.length-2;y<=m;++y){l=d[y],h=d[y+1],u={x1:l.x,y1:l.y,x2:h.x,y2:h.y},s=s||[e],a&&f.push(l.clone());for(var g=0;g<s.length;++g)if((c=s[g].splitWithSegment(u,t))&&(p=c.lines,0<p.length&&(p.unshift(g,1),Array.prototype.splice.apply(s,p),g+=p.length-2),a))for(var v=0,L=c.points.length;v<L;++v)p=c.points[v],p.equals(l)||(f.push(p),r.push(new OpenLayers.Geometry.LineString(f)),f=p.equals(h)?[]:[p.clone()])}a&&0<r.length&&0<f.length&&(f.push(h.clone()),r.push(new OpenLayers.Geometry.LineString(f)))}else o=e.splitWith(this,t);return s&&1<s.length?n=!0:s=[],r&&1<r.length?i=!0:r=[],(n||i)&&(o=a?[r,s]:s),o},splitWith:function(e,t){return e.split(this,t)},getVertices:function(e){return!0===e?[this.components[0],this.components[this.components.length-1]]:!1===e?this.components.slice(1,this.components.length-1):this.components.slice()},distanceTo:function(e,t){var i,n=!(t&&!1===t.edge)&&t&&t.details,r={},s=Number.POSITIVE_INFINITY;if(e instanceof OpenLayers.Geometry.Point)for(var o,a=this.getSortedSegments(),l=e.x,h=e.y,u=0,c=a.length;u<c&&(o=a[u],i=OpenLayers.Geometry.distanceToSegment(e,o),!(i.distance<s&&(s=i.distance,r=n?{distance:s,x0:i.x,y0:i.y,x1:l,y1:h,index:u,indexDistance:new OpenLayers.Geometry.Point(o.x1,o.y1).distanceTo(e)}:s,0===s)));++u);else if(e instanceof OpenLayers.Geometry.LineString){var p,d,a=this.getSortedSegments(),l=e.getSortedSegments(),f=l.length,y={point:!0},u=0,c=a.length;e:for(;u<c;++u){h=a[u],o=h.x1,d=h.y1;for(var m=0;m<f;++m){if(i=l[m],p=OpenLayers.Geometry.segmentsIntersect(h,i,y)){s=0,r={distance:0,x0:p.x,y0:p.y,x1:p.x,y1:p.y};break e}i=OpenLayers.Geometry.distanceToSegment({x:o,y:d},i),i.distance<s&&(s=i.distance,r={distance:s,x0:o,y0:d,x1:i.x,y1:i.y})}}n||(r=r.distance),0!==s&&h&&(i=e.distanceTo(new OpenLayers.Geometry.Point(h.x2,h.y2),t),u=n?i.distance:i,u<s&&(r=n?{distance:s,x0:i.x1,y0:i.y1,x1:i.x0,y1:i.y0}:u))}else r=e.distanceTo(this,t),n&&(r={distance:r.distance,x0:r.x1,y0:r.y1,x1:r.x0,y1:r.y0});return r},simplify:function(e){if(this&&null!==this){var t=this.getVertices();if(3>t.length)return this;var i=function(e,t,n,s){for(var o,a=0,l=0,h=t;h<n;h++){o=e[t];var u=e[n],c=e[h];o=Math.abs(.5*(o.x*u.y+u.x*c.y+c.x*o.y-u.x*o.y-c.x*u.y-o.x*c.y))/Math.sqrt(Math.pow(o.x-u.x,2)+Math.pow(o.y-u.y,2))*2,o>a&&(a=o,l=h)}a>s&&l!=t&&(r.push(l),i(e,t,l,s),i(e,l,n,s))},n=t.length-1,r=[];for(r.push(0),r.push(n);t[0].equals(t[n]);)n--,r.push(n);for(i(t,0,n,e),e=[],r.sort(function(e,t){return e-t}),n=0;n<r.length;n++)e.push(t[r[n]]);return new OpenLayers.Geometry.LineString(e)}return this},CLASS_NAME:"OpenLayers.Geometry.LineString"}),OpenLayers.Geometry.LineString.geodesic=function(e,t,i){for(var n,r,s,o,a,l=[],h=e(0),u=e(1),c=t(h),p=t(u),d=[u,h],f=[p,c],y=[1,0],m={},g=1e5;0<--g&&0<y.length;)s=y.pop(),h=d.pop(),c=f.pop(),u=s.toString(),u in m||(l.push(c),m[u]=!0),o=y.pop(),u=d.pop(),p=f.pop(),a=(s+o)/2,n=e(a),r=t(n),OpenLayers.Geometry.distanceSquaredToSegment(r,{x1:c.x,y1:c.y,x2:p.x,y2:p.y}).distance<i?(l.push(p),u=o.toString(),m[u]=!0):(y.push(o,a,a,s),f.push(p,r,r,c),d.push(u,n,n,h));return new OpenLayers.Geometry.LineString(l)},OpenLayers.Geometry.LineString.geodesicMeridian=function(e,t,i,n,r){var s=new OpenLayers.Projection("EPSG:4326");return OpenLayers.Geometry.LineString.geodesic(function(n){return new OpenLayers.Geometry.Point(e,t+(i-t)*n)},function(e){return e.transform(s,n)},r)},OpenLayers.Geometry.LineString.geodesicParallel=function(e,t,i,n,r){var s=new OpenLayers.Projection("EPSG:4326");return OpenLayers.Geometry.LineString.geodesic(function(n){return new OpenLayers.Geometry.Point(t+(i-t)*n,e)},function(e){return e.transform(s,n)},r)},OpenLayers.Handler.Path=OpenLayers.Class(OpenLayers.Handler.Point,{line:null,maxVertices:null,doubleTouchTolerance:20,freehand:!1,freehandToggle:"shiftKey",timerId:null,redoStack:null,createFeature:function(e){e=this.layer.getLonLatFromViewPortPx(e),e=new OpenLayers.Geometry.Point(e.lon,e.lat),this.point=new OpenLayers.Feature.Vector(e),this.line=new OpenLayers.Feature.Vector(new OpenLayers.Geometry.LineString([this.point.geometry])),this.callback("create",[this.point.geometry,this.getSketch()]),this.point.geometry.clearBounds(),this.layer.addFeatures([this.line,this.point],{silent:!0})},destroyFeature:function(e){OpenLayers.Handler.Point.prototype.destroyFeature.call(this,e),this.line=null},destroyPersistedFeature:function(){var e=this.layer;e&&2<e.features.length&&this.layer.features[0].destroy()},removePoint:function(){this.point&&this.layer.removeFeatures([this.point])},addPoint:function(e){this.layer.removeFeatures([this.point]),e=this.layer.getLonLatFromViewPortPx(e),this.point=new OpenLayers.Feature.Vector(new OpenLayers.Geometry.Point(e.lon,e.lat)),this.line.geometry.addComponent(this.point.geometry,this.line.geometry.components.length),this.layer.addFeatures([this.point]),this.callback("point",[this.point.geometry,this.getGeometry()]),this.callback("modify",[this.point.geometry,this.getSketch()]),this.drawFeature(),delete this.redoStack},insertXY:function(e,t){this.line.geometry.addComponent(new OpenLayers.Geometry.Point(e,t),this.getCurrentPointIndex()),this.drawFeature(),delete this.redoStack},insertDeltaXY:function(e,t){var i=this.getCurrentPointIndex()-1,i=this.line.geometry.components[i];!i||isNaN(i.x)||isNaN(i.y)||this.insertXY(i.x+e,i.y+t)},insertDirectionLength:function(e,t){e*=Math.PI/180,this.insertDeltaXY(t*Math.cos(e),t*Math.sin(e))},insertDeflectionLength:function(e,t){var i=this.getCurrentPointIndex()-1;if(0<i){var n=this.line.geometry.components[i],i=this.line.geometry.components[i-1];this.insertDirectionLength(180*Math.atan2(n.y-i.y,n.x-i.x)/Math.PI+e,t)}},getCurrentPointIndex:function(){return this.line.geometry.components.length-1},undo:function(){var e=this.line.geometry,t=e.components,i=this.getCurrentPointIndex()-1,n=t[i],r=e.removeComponent(n);return r&&(this.touch&&0<i&&(t=e.components,e=t[i-1],i=this.getCurrentPointIndex(),t=t[i],t.x=e.x,t.y=e.y),this.redoStack||(this.redoStack=[]),this.redoStack.push(n),this.drawFeature()),r},redo:function(){var e=this.redoStack&&this.redoStack.pop();return e&&(this.line.geometry.addComponent(e,this.getCurrentPointIndex()),this.drawFeature()),!!e},freehandMode:function(e){return this.freehandToggle&&e[this.freehandToggle]?!this.freehand:this.freehand},modifyFeature:function(e,t){this.line||this.createFeature(e);var i=this.layer.getLonLatFromViewPortPx(e);this.point.geometry.x=i.lon,this.point.geometry.y=i.lat,this.callback("modify",[this.point.geometry,this.getSketch(),t]),this.point.geometry.clearBounds(),this.drawFeature()},drawFeature:function(){this.layer.drawFeature(this.line,this.style),this.layer.drawFeature(this.point,this.style)},getSketch:function(){return this.line},getGeometry:function(){var e=this.line&&this.line.geometry;return e&&this.multi&&(e=new OpenLayers.Geometry.MultiLineString([e])),e},touchstart:function(e){return this.timerId&&this.passesTolerance(this.lastTouchPx,e.xy,this.doubleTouchTolerance)?(this.finishGeometry(),window.clearTimeout(this.timerId),this.timerId=null,!1):(this.timerId&&(window.clearTimeout(this.timerId),this.timerId=null),this.timerId=window.setTimeout(OpenLayers.Function.bind(function(){this.timerId=null},this),300),OpenLayers.Handler.Point.prototype.touchstart.call(this,e))},down:function(e){var t=this.stopDown;return this.freehandMode(e)&&(t=!0,this.touch&&(this.modifyFeature(e.xy,!!this.lastUp),OpenLayers.Event.stop(e))),this.touch||this.lastDown&&this.passesTolerance(this.lastDown,e.xy,this.pixelTolerance)||this.modifyFeature(e.xy,!!this.lastUp),this.mouseDown=!0,this.lastDown=e.xy,this.stoppedDown=t,!t},move:function(e){return this.stoppedDown&&this.freehandMode(e)?(this.persist&&this.destroyPersistedFeature(),this.maxVertices&&this.line&&this.line.geometry.components.length===this.maxVertices?(this.removePoint(),this.finalize()):this.addPoint(e.xy),!1):(this.touch||this.mouseDown&&!this.stoppedDown||this.modifyFeature(e.xy,!!this.lastUp),!0)},up:function(e){return!this.mouseDown||this.lastUp&&this.lastUp.equals(e.xy)||(this.stoppedDown&&this.freehandMode(e)?(this.persist&&this.destroyPersistedFeature(),this.removePoint(),this.finalize()):this.passesTolerance(this.lastDown,e.xy,this.pixelTolerance)&&(this.touch&&this.modifyFeature(e.xy),null==this.lastUp&&this.persist&&this.destroyPersistedFeature(),this.addPoint(e.xy),this.lastUp=e.xy,this.line.geometry.components.length===this.maxVertices+1&&this.finishGeometry())),this.stoppedDown=this.stopDown,this.mouseDown=!1,!this.stopUp},finishGeometry:function(){this.line.geometry.removeComponent(this.line.geometry.components[this.line.geometry.components.length-1]),this.removePoint(),this.finalize()},dblclick:function(e){return this.freehandMode(e)||this.finishGeometry(),!1},CLASS_NAME:"OpenLayers.Handler.Path"}),OpenLayers.Geometry.LinearRing=OpenLayers.Class(OpenLayers.Geometry.LineString,{componentTypes:["OpenLayers.Geometry.Point"],addComponent:function(e,t){var i=!1,n=this.components.pop();return null==t&&e.equals(n)||(i=OpenLayers.Geometry.Collection.prototype.addComponent.apply(this,arguments)),OpenLayers.Geometry.Collection.prototype.addComponent.apply(this,[this.components[0]]),i},removeComponent:function(e){var t=this.components&&3<this.components.length;return t&&(this.components.pop(),OpenLayers.Geometry.Collection.prototype.removeComponent.apply(this,arguments),OpenLayers.Geometry.Collection.prototype.addComponent.apply(this,[this.components[0]])),t},move:function(e,t){for(var i=0,n=this.components.length;i<n-1;i++)this.components[i].move(e,t)},rotate:function(e,t){for(var i=0,n=this.components.length;i<n-1;++i)this.components[i].rotate(e,t)},resize:function(e,t,i){for(var n=0,r=this.components.length;n<r-1;++n)this.components[n].resize(e,t,i);return this},transform:function(e,t){if(e&&t){for(var i=0,n=this.components.length;i<n-1;i++)this.components[i].transform(e,t);this.bounds=null}return this},getCentroid:function(){if(this.components){var e=this.components.length;if(0<e&&2>=e)return this.components[0].clone();if(2<e){var t=0,i=0,n=this.components[0].x,r=this.components[0].y,s=-1*this.getArea();if(0!=s){for(var o=0;o<e-1;o++)var a=this.components[o],l=this.components[o+1],t=t+(a.x+l.x-2*n)*((a.x-n)*(l.y-r)-(l.x-n)*(a.y-r)),i=i+(a.y+l.y-2*r)*((a.x-n)*(l.y-r)-(l.x-n)*(a.y-r));t=n+t/(6*s),e=r+i/(6*s)}else{for(o=0;o<e-1;o++)t+=this.components[o].x,i+=this.components[o].y;t/=e-1,e=i/(e-1)}return new OpenLayers.Geometry.Point(t,e)}return null}},getArea:function(){var e=0;if(this.components&&2<this.components.length){for(var t=e=0,i=this.components.length;t<i-1;t++)var n=this.components[t],r=this.components[t+1],e=e+(n.x+r.x)*(r.y-n.y);e=-e/2}return e},getGeodesicArea:function(e){var t=this;if(e){var i=new OpenLayers.Projection("EPSG:4326");i.equals(e)||(t=this.clone().transform(e,i))}if(e=0,i=t.components&&t.components.length,2<i){for(var n,r,s=0;s<i-1;s++)n=t.components[s],r=t.components[s+1],e+=OpenLayers.Util.rad(r.x-n.x)*(2+Math.sin(OpenLayers.Util.rad(n.y))+Math.sin(OpenLayers.Util.rad(r.y)));e=e*OpenLayers.Util.VincentyConstants.a*OpenLayers.Util.VincentyConstants.a/2}return e},containsPoint:function(e){var t=OpenLayers.Number.limitSigDigs,i=t(e.x,14);e=t(e.y,14);for(var n,r,s,o,a,l=this.components.length-1,h=0,u=0;u<l;++u)if(n=this.components[u],s=t(n.x,14),n=t(n.y,14),r=this.components[u+1],o=t(r.x,14),r=t(r.y,14),n==r){if(e==n&&(s<=o&&i>=s&&i<=o||s>=o&&i<=s&&i>=o)){h=-1;break}}else{if(a=t((o-s)/(r-n)*(e-r)+o,14),a==i&&(n<r&&e>=n&&e<=r||n>r&&e<=n&&e>=r)){h=-1;break}a<=i||s!=o&&(a<Math.min(s,o)||a>Math.max(s,o))||(n<r&&e>=n&&e<r||n>r&&e<n&&e>=r)&&++h}return-1==h?1:!!(1&h)},intersects:function(e){var t=!1;if("OpenLayers.Geometry.Point"==e.CLASS_NAME)t=this.containsPoint(e);else if("OpenLayers.Geometry.LineString"==e.CLASS_NAME)t=e.intersects(this);else if("OpenLayers.Geometry.LinearRing"==e.CLASS_NAME)t=OpenLayers.Geometry.LineString.prototype.intersects.apply(this,[e]);else for(var i=0,n=e.components.length;i<n&&!(t=e.components[i].intersects(this));++i);return t},getVertices:function(e){return!0===e?[]:this.components.slice(0,this.components.length-1)},CLASS_NAME:"OpenLayers.Geometry.LinearRing"}),OpenLayers.Geometry.Polygon=OpenLayers.Class(OpenLayers.Geometry.Collection,{componentTypes:["OpenLayers.Geometry.LinearRing"],getArea:function(){var e=0;if(this.components&&0<this.components.length)for(var e=e+Math.abs(this.components[0].getArea()),t=1,i=this.components.length;t<i;t++)e-=Math.abs(this.components[t].getArea());return e},getGeodesicArea:function(e){var t=0;if(this.components&&0<this.components.length)for(var t=t+Math.abs(this.components[0].getGeodesicArea(e)),i=1,n=this.components.length;i<n;i++)t-=Math.abs(this.components[i].getGeodesicArea(e));return t},containsPoint:function(e){var t=this.components.length,i=!1;if(0<t&&(i=this.components[0].containsPoint(e),1!==i&&i&&1<t))for(var n,r=1;r<t;++r)if(n=this.components[r].containsPoint(e)){i=1===n&&1;break}return i},intersects:function(e){var t,i,n=!1;if("OpenLayers.Geometry.Point"==e.CLASS_NAME)n=this.containsPoint(e);else if("OpenLayers.Geometry.LineString"==e.CLASS_NAME||"OpenLayers.Geometry.LinearRing"==e.CLASS_NAME){for(t=0,i=this.components.length;t<i&&!(n=e.intersects(this.components[t]));++t);if(!n)for(t=0,i=e.components.length;t<i&&!(n=this.containsPoint(e.components[t]));++t);}else for(t=0,i=e.components.length;t<i&&!(n=this.intersects(e.components[t]));++t);if(!n&&"OpenLayers.Geometry.Polygon"==e.CLASS_NAME){var r=this.components[0];for(t=0,i=r.components.length;t<i&&!(n=e.containsPoint(r.components[t]));++t);}return n},distanceTo:function(e,t){return t&&!1===t.edge&&this.intersects(e)?0:OpenLayers.Geometry.Collection.prototype.distanceTo.apply(this,[e,t])},CLASS_NAME:"OpenLayers.Geometry.Polygon"}),OpenLayers.Geometry.Polygon.createRegularPolygon=function(e,t,i,n){var r=Math.PI*(1/i-.5);n&&(r+=n/180*Math.PI);for(var s,o=[],a=0;a<i;++a)s=r+2*a*Math.PI/i,n=e.x+t*Math.cos(s),s=e.y+t*Math.sin(s),o.push(new OpenLayers.Geometry.Point(n,s));return e=new OpenLayers.Geometry.LinearRing(o),new OpenLayers.Geometry.Polygon([e])},OpenLayers.Handler.Polygon=OpenLayers.Class(OpenLayers.Handler.Path,{holeModifier:null,drawingHole:!1,polygon:null,createFeature:function(e){e=this.layer.getLonLatFromViewPortPx(e),e=new OpenLayers.Geometry.Point(e.lon,e.lat),this.point=new OpenLayers.Feature.Vector(e),this.line=new OpenLayers.Feature.Vector(new OpenLayers.Geometry.LinearRing([this.point.geometry])),this.polygon=new OpenLayers.Feature.Vector(new OpenLayers.Geometry.Polygon([this.line.geometry])),this.callback("create",[this.point.geometry,this.getSketch()]),this.point.geometry.clearBounds(),this.layer.addFeatures([this.polygon,this.point],{silent:!0})},addPoint:function(e){if(!this.drawingHole&&this.holeModifier&&this.evt&&this.evt[this.holeModifier])for(var t,i=this.point.geometry,n=this.control.layer.features,r=n.length-1;0<=r;--r)if(t=n[r].geometry,(t instanceof OpenLayers.Geometry.Polygon||t instanceof OpenLayers.Geometry.MultiPolygon)&&t.intersects(i)){i=n[r],this.control.layer.removeFeatures([i],{silent:!0}),this.control.layer.events.registerPriority("sketchcomplete",this,this.finalizeInteriorRing),this.control.layer.events.registerPriority("sketchmodified",this,this.enforceTopology),i.geometry.addComponent(this.line.geometry),this.polygon=i,this.drawingHole=!0;break}OpenLayers.Handler.Path.prototype.addPoint.apply(this,arguments)},getCurrentPointIndex:function(){return this.line.geometry.components.length-2},enforceTopology:function(e){e=e.vertex;var t=this.line.geometry.components;this.polygon.geometry.intersects(e)||(t=t[t.length-3],e.x=t.x,e.y=t.y)},finishGeometry:function(){this.line.geometry.removeComponent(this.line.geometry.components[this.line.geometry.components.length-2]),this.removePoint(),this.finalize()},finalizeInteriorRing:function(){var e=this.line.geometry,t=0!==e.getArea();if(t){for(var i=this.polygon.geometry.components,n=i.length-2;0<=n;--n)if(e.intersects(i[n])){t=!1;break}if(t)e:for(n=i.length-2;0<n;--n)for(var r=i[n].components,s=0,o=r.length;s<o;++s)if(e.containsPoint(r[s])){t=!1;break e}}return t?this.polygon.state!==OpenLayers.State.INSERT&&(this.polygon.state=OpenLayers.State.UPDATE):this.polygon.geometry.removeComponent(e),this.restoreFeature(),!1},cancel:function(){return this.drawingHole&&(this.polygon.geometry.removeComponent(this.line.geometry),this.restoreFeature(!0)),OpenLayers.Handler.Path.prototype.cancel.apply(this,arguments)},restoreFeature:function(e){this.control.layer.events.unregister("sketchcomplete",this,this.finalizeInteriorRing),this.control.layer.events.unregister("sketchmodified",this,this.enforceTopology),this.layer.removeFeatures([this.polygon],{silent:!0}),this.control.layer.addFeatures([this.polygon],{silent:!0}),this.drawingHole=!1,e||this.control.layer.events.triggerEvent("sketchcomplete",{feature:this.polygon})},destroyFeature:function(e){OpenLayers.Handler.Path.prototype.destroyFeature.call(this,e),this.polygon=null},drawFeature:function(){this.layer.drawFeature(this.polygon,this.style),this.layer.drawFeature(this.point,this.style)},getSketch:function(){return this.polygon},getGeometry:function(){var e=this.polygon&&this.polygon.geometry;return e&&this.multi&&(e=new OpenLayers.Geometry.MultiPolygon([e])),e},CLASS_NAME:"OpenLayers.Handler.Polygon"}),OpenLayers.Handler.Drag=OpenLayers.Class(OpenLayers.Handler,{started:!1,stopDown:!0,dragging:!1,last:null,start:null,lastMoveEvt:null,oldOnselectstart:null,interval:0,timeoutId:null,documentDrag:!1,documentEvents:null,initialize:function(e,t,i){if(OpenLayers.Handler.prototype.initialize.apply(this,arguments),!0===this.documentDrag){var n=this;this._docMove=function(e){n.mousemove({xy:{x:e.clientX,y:e.clientY},element:document})},this._docUp=function(e){n.mouseup({xy:{x:e.clientX,y:e.clientY}})}}},dragstart:function(e){var t=!0;return this.dragging=!1,this.checkModifiers(e)&&this._pointerId==e.pointerId&&(OpenLayers.Event.isLeftClick(e)||OpenLayers.Event.isSingleTouch(e))?(this.started=!0,this.last=this.start=e.xy,OpenLayers.Element.addClass(this.map.viewPortDiv,"olDragDown"),this.down(e),this.callback("down",[e.xy]),OpenLayers.Event.preventDefault(e),this.oldOnselectstart||(this.oldOnselectstart=document.onselectstart?document.onselectstart:OpenLayers.Function.True),document.onselectstart=OpenLayers.Function.False,t=!this.stopDown):(delete this._pointerId,this.started=!1,this.last=this.start=null),t},dragmove:function(e){return this.lastMoveEvt=e,!this.started||this._pointerId!=e.pointerId||this.timeoutId||e.xy.x==this.last.x&&e.xy.y==this.last.y||(!0===this.documentDrag&&this.documentEvents&&(e.element===document?(this.adjustXY(e),this.setEvent(e)):this.removeDocumentEvents()),0<this.interval&&(this.timeoutId=setTimeout(OpenLayers.Function.bind(this.removeTimeout,this),this.interval)),this.dragging=!0,this.move(e),this.callback("move",[e.xy]),this.oldOnselectstart||(this.oldOnselectstart=document.onselectstart,document.onselectstart=OpenLayers.Function.False),this.last=e.xy),!0},dragend:function(e){if(this.started&&this._pointerId==e.pointerId){!0===this.documentDrag&&this.documentEvents&&(this.adjustXY(e),this.removeDocumentEvents());var t=this.start!=this.last;this.dragging=this.started=!1,delete this._pointerId,OpenLayers.Element.removeClass(this.map.viewPortDiv,"olDragDown"),this.up(e),this.callback("up",[e.xy]),t&&this.callback("done",[e.xy]),document.onselectstart=this.oldOnselectstart}return!0},down:function(e){},move:function(e){},up:function(e){},out:function(e){},mousedown:function(e){return this.dragstart(e)},touchstart:function(e){return this.startTouch(),"_pointerId"in this||(this._pointerId=e.pointerId),this.dragstart(e)},mousemove:function(e){return this.dragmove(e)},touchmove:function(e){return this.dragmove(e)},removeTimeout:function(){this.timeoutId=null,this.dragging&&this.mousemove(this.lastMoveEvt)},mouseup:function(e){return this.dragend(e)},touchend:function(e){return e.xy=this.last,this.dragend(e)},mouseout:function(e){if(this.started&&OpenLayers.Util.mouseLeft(e,this.map.viewPortDiv))if(!0===this.documentDrag)this.addDocumentEvents();else{var t=this.start!=this.last;this.dragging=this.started=!1,OpenLayers.Element.removeClass(this.map.viewPortDiv,"olDragDown"),this.out(e),this.callback("out",[]),t&&this.callback("done",[e.xy]),document.onselectstart&&(document.onselectstart=this.oldOnselectstart)}return!0},click:function(e){return this.start==this.last},activate:function(){var e=!1;return OpenLayers.Handler.prototype.activate.apply(this,arguments)&&(this.dragging=!1,e=!0),e},deactivate:function(){var e=!1;return OpenLayers.Handler.prototype.deactivate.apply(this,arguments)&&(this.dragging=this.started=!1,this.last=this.start=null,e=!0,OpenLayers.Element.removeClass(this.map.viewPortDiv,"olDragDown")),e},adjustXY:function(e){var t=OpenLayers.Util.pagePosition(this.map.viewPortDiv);e.xy.x-=t[0],e.xy.y-=t[1]},addDocumentEvents:function(){OpenLayers.Element.addClass(document.body,"olDragDown"),this.documentEvents=!0,OpenLayers.Event.observe(document,"mousemove",this._docMove),OpenLayers.Event.observe(document,"mouseup",this._docUp)},removeDocumentEvents:function(){OpenLayers.Element.removeClass(document.body,"olDragDown"),this.documentEvents=!1,OpenLayers.Event.stopObserving(document,"mousemove",this._docMove),OpenLayers.Event.stopObserving(document,"mouseup",this._docUp)},CLASS_NAME:"OpenLayers.Handler.Drag"}),OpenLayers.Handler.RegularPolygon=OpenLayers.Class(OpenLayers.Handler.Drag,{sides:4,radius:null,snapAngle:null,snapToggle:"shiftKey",layerOptions:null,persist:!1,irregular:!1,citeCompliant:!1,angle:null,fixedRadius:!1,feature:null,layer:null,origin:null,initialize:function(e,t,i){i&&i.layerOptions&&i.layerOptions.styleMap||(this.style=OpenLayers.Util.extend(OpenLayers.Feature.Vector.style.default,{})),OpenLayers.Handler.Drag.prototype.initialize.apply(this,[e,t,i]),this.options=i?i:{}},setOptions:function(e){OpenLayers.Util.extend(this.options,e),OpenLayers.Util.extend(this,e)},activate:function(){var e=!1;return OpenLayers.Handler.Drag.prototype.activate.apply(this,arguments)&&(e=OpenLayers.Util.extend({displayInLayerSwitcher:!1,calculateInRange:OpenLayers.Function.True,wrapDateLine:this.citeCompliant},this.layerOptions),this.layer=new OpenLayers.Layer.Vector(this.CLASS_NAME,e),this.map.addLayer(this.layer),e=!0),e},deactivate:function(){var e=!1;return OpenLayers.Handler.Drag.prototype.deactivate.apply(this,arguments)&&(this.dragging&&this.cancel(),null!=this.layer.map&&(this.layer.destroy(!1),this.feature&&this.feature.destroy()),this.feature=this.layer=null,e=!0),e},down:function(e){this.fixedRadius=!!this.radius,e=this.layer.getLonLatFromViewPortPx(e.xy),this.origin=new OpenLayers.Geometry.Point(e.lon,e.lat),this.fixedRadius&&!this.irregular||(this.radius=this.map.getResolution()),this.persist&&this.clear(),this.feature=new OpenLayers.Feature.Vector,this.createGeometry(),this.callback("create",[this.origin,this.feature]),this.layer.addFeatures([this.feature],{silent:!0}),this.layer.drawFeature(this.feature,this.style)},move:function(e){var t=this.layer.getLonLatFromViewPortPx(e.xy),t=new OpenLayers.Geometry.Point(t.lon,t.lat);this.irregular?(e=Math.sqrt(2)*Math.abs(t.y-this.origin.y)/2,this.radius=Math.max(this.map.getResolution()/2,e)):this.fixedRadius?this.origin=t:(this.calculateAngle(t,e),this.radius=Math.max(this.map.getResolution()/2,t.distanceTo(this.origin))),this.modifyGeometry(),this.irregular&&(e=t.x-this.origin.x,t=t.y-this.origin.y,this.feature.geometry.resize(1,this.origin,0==t?e/(this.radius*Math.sqrt(2)):e/t),this.feature.geometry.move(e/2,t/2)),this.layer.drawFeature(this.feature,this.style)},up:function(e){this.finalize(),this.start==this.last&&this.callback("done",[e.xy])},out:function(e){this.finalize()},createGeometry:function(){this.angle=Math.PI*(1/this.sides-.5),this.snapAngle&&(this.angle+=Math.PI/180*this.snapAngle),this.feature.geometry=OpenLayers.Geometry.Polygon.createRegularPolygon(this.origin,this.radius,this.sides,this.snapAngle)},modifyGeometry:function(){var e,t,i=this.feature.geometry.components[0];i.components.length!=this.sides+1&&(this.createGeometry(),i=this.feature.geometry.components[0]);for(var n=0;n<this.sides;++n)t=i.components[n],e=this.angle+2*n*Math.PI/this.sides,t.x=this.origin.x+this.radius*Math.cos(e),t.y=this.origin.y+this.radius*Math.sin(e),t.clearBounds()},calculateAngle:function(e,t){var i=Math.atan2(e.y-this.origin.y,e.x-this.origin.x);if(this.snapAngle&&this.snapToggle&&!t[this.snapToggle]){var n=Math.PI/180*this.snapAngle;this.angle=Math.round(i/n)*n}else this.angle=i},cancel:function(){this.callback("cancel",null),this.finalize()},finalize:function(){this.origin=null,this.radius=this.options.radius;
},clear:function(){this.layer&&(this.layer.renderer.clear(),this.layer.destroyFeatures())},callback:function(e,t){this.callbacks[e]&&this.callbacks[e].apply(this.control,[this.feature.geometry.clone()]),this.persist||"done"!=e&&"cancel"!=e||this.clear()},CLASS_NAME:"OpenLayers.Handler.RegularPolygon"}),OpenLayers.ElementsIndexer=OpenLayers.Class({maxZIndex:null,order:null,indices:null,compare:null,initialize:function(e){this.compare=e?OpenLayers.ElementsIndexer.IndexingMethods.Z_ORDER_Y_ORDER:OpenLayers.ElementsIndexer.IndexingMethods.Z_ORDER_DRAWING_ORDER,this.clear()},insert:function(e){this.exists(e)&&this.remove(e);var t=e.id;this.determineZIndex(e);for(var i,n=-1,r=this.order.length;1<r-n;)i=parseInt((n+r)/2),0<this.compare(this,e,OpenLayers.Util.getElement(this.order[i]))?n=i:r=i;return this.order.splice(r,0,t),this.indices[t]=this.getZIndex(e),this.getNextElement(r)},remove:function(e){e=e.id;var t=OpenLayers.Util.indexOf(this.order,e);0<=t&&(this.order.splice(t,1),delete this.indices[e],this.maxZIndex=0<this.order.length?this.indices[this.order[this.order.length-1]]:0)},clear:function(){this.order=[],this.indices={},this.maxZIndex=0},exists:function(e){return null!=this.indices[e.id]},getZIndex:function(e){return e._style.graphicZIndex},determineZIndex:function(e){var t=e._style.graphicZIndex;null==t?(t=this.maxZIndex,e._style.graphicZIndex=t):t>this.maxZIndex&&(this.maxZIndex=t)},getNextElement:function(e){e+=1;for(var t=void 0;e<this.order.length&&void 0==t;e++)t=OpenLayers.Util.getElement(this.order[e]);return t||null},CLASS_NAME:"OpenLayers.ElementsIndexer"}),OpenLayers.ElementsIndexer.IndexingMethods={Z_ORDER:function(e,t,i){t=e.getZIndex(t);var n=0;return i&&(e=e.getZIndex(i),n=t-e),n},Z_ORDER_DRAWING_ORDER:function(e,t,i){return e=OpenLayers.ElementsIndexer.IndexingMethods.Z_ORDER(e,t,i),i&&0==e&&(e=1),e},Z_ORDER_Y_ORDER:function(e,t,i){return e=OpenLayers.ElementsIndexer.IndexingMethods.Z_ORDER(e,t,i),i&&0===e&&(t=i._boundsBottom-t._boundsBottom,e=0===t?1:t),e}},OpenLayers.Renderer.Elements=OpenLayers.Class(OpenLayers.Renderer,{rendererRoot:null,root:null,vectorRoot:null,textRoot:null,xmlns:null,xOffset:0,indexer:null,BACKGROUND_ID_SUFFIX:"_background",LABEL_ID_SUFFIX:"_label",LABEL_OUTLINE_SUFFIX:"_outline",initialize:function(e,t){OpenLayers.Renderer.prototype.initialize.apply(this,arguments),this.rendererRoot=this.createRenderRoot(),this.root=this.createRoot("_root"),this.vectorRoot=this.createRoot("_vroot"),this.textRoot=this.createRoot("_troot"),this.root.appendChild(this.vectorRoot),this.root.appendChild(this.textRoot),this.rendererRoot.appendChild(this.root),this.container.appendChild(this.rendererRoot),t&&(t.zIndexing||t.yOrdering)&&(this.indexer=new OpenLayers.ElementsIndexer(t.yOrdering))},destroy:function(){this.clear(),this.xmlns=this.root=this.rendererRoot=null,OpenLayers.Renderer.prototype.destroy.apply(this,arguments)},clear:function(){var e,t=this.vectorRoot;if(t)for(;e=t.firstChild;)t.removeChild(e);if(t=this.textRoot)for(;e=t.firstChild;)t.removeChild(e);this.indexer&&this.indexer.clear()},setExtent:function(e,t){var i=OpenLayers.Renderer.prototype.setExtent.apply(this,arguments),n=this.getResolution();if(this.map.baseLayer&&this.map.baseLayer.wrapDateLine){var r,s=e.getWidth()/this.map.getExtent().getWidth();e=e.scale(1/s),s=this.map.getMaxExtent(),s.right>e.left&&s.right<e.right?r=!0:s.left>e.left&&s.left<e.right&&(r=!1),(r!==this.rightOfDateLine||t)&&(i=!1,this.xOffset=!0===r?s.getWidth()/n:0),this.rightOfDateLine=r}return i},getNodeType:function(e,t){},drawGeometry:function(e,t,i){var n=e.CLASS_NAME,r=!0;if("OpenLayers.Geometry.Collection"==n||"OpenLayers.Geometry.MultiPoint"==n||"OpenLayers.Geometry.MultiLineString"==n||"OpenLayers.Geometry.MultiPolygon"==n){for(var n=0,s=e.components.length;n<s;n++)r=this.drawGeometry(e.components[n],t,i)&&r;return r}return n=r=!1,"none"!=t.display&&(t.backgroundGraphic?this.redrawBackgroundNode(e.id,e,t,i):n=!0,r=this.redrawNode(e.id,e,t,i)),0==r&&(t=document.getElementById(e.id))&&(t._style.backgroundGraphic&&(n=!0),t.parentNode.removeChild(t)),n&&(t=document.getElementById(e.id+this.BACKGROUND_ID_SUFFIX))&&t.parentNode.removeChild(t),r},redrawNode:function(e,t,i,n){return i=this.applyDefaultSymbolizer(i),e=this.nodeFactory(e,this.getNodeType(t,i)),e._featureId=n,e._boundsBottom=t.getBounds().bottom,e._geometryClass=t.CLASS_NAME,e._style=i,t=this.drawGeometryNode(e,t,i),!1!==t&&(e=t.node,this.indexer?(i=this.indexer.insert(e))?this.vectorRoot.insertBefore(e,i):this.vectorRoot.appendChild(e):e.parentNode!==this.vectorRoot&&this.vectorRoot.appendChild(e),this.postDraw(e),t.complete)},redrawBackgroundNode:function(e,t,i,n){return i=OpenLayers.Util.extend({},i),i.externalGraphic=i.backgroundGraphic,i.graphicXOffset=i.backgroundXOffset,i.graphicYOffset=i.backgroundYOffset,i.graphicZIndex=i.backgroundGraphicZIndex,i.graphicWidth=i.backgroundWidth||i.graphicWidth,i.graphicHeight=i.backgroundHeight||i.graphicHeight,i.backgroundGraphic=null,i.backgroundXOffset=null,i.backgroundYOffset=null,i.backgroundGraphicZIndex=null,this.redrawNode(e+this.BACKGROUND_ID_SUFFIX,t,i,null)},drawGeometryNode:function(e,t,i){i=i||e._style;var n,r={isFilled:void 0===i.fill||i.fill,isStroked:void 0===i.stroke?!!i.strokeWidth:i.stroke};switch(t.CLASS_NAME){case"OpenLayers.Geometry.Point":!1===i.graphic&&(r.isFilled=!1,r.isStroked=!1),n=this.drawPoint(e,t);break;case"OpenLayers.Geometry.LineString":r.isFilled=!1,n=this.drawLineString(e,t);break;case"OpenLayers.Geometry.LinearRing":n=this.drawLinearRing(e,t);break;case"OpenLayers.Geometry.Polygon":n=this.drawPolygon(e,t);break;case"OpenLayers.Geometry.Rectangle":n=this.drawRectangle(e,t)}return e._options=r,0!=n&&{node:this.setStyle(e,i,r,t),complete:n}},postDraw:function(e){},drawPoint:function(e,t){},drawLineString:function(e,t){},drawLinearRing:function(e,t){},drawPolygon:function(e,t){},drawRectangle:function(e,t){},drawCircle:function(e,t){},removeText:function(e){var t=document.getElementById(e+this.LABEL_ID_SUFFIX);t&&this.textRoot.removeChild(t),(e=document.getElementById(e+this.LABEL_OUTLINE_SUFFIX))&&this.textRoot.removeChild(e)},getFeatureIdFromEvent:function(e){var t=e.target,i=t&&t.correspondingUseElement;return(i?i:t||e.srcElement)._featureId},eraseGeometry:function(e,t){if("OpenLayers.Geometry.MultiPoint"==e.CLASS_NAME||"OpenLayers.Geometry.MultiLineString"==e.CLASS_NAME||"OpenLayers.Geometry.MultiPolygon"==e.CLASS_NAME||"OpenLayers.Geometry.Collection"==e.CLASS_NAME)for(var i=0,n=e.components.length;i<n;i++)this.eraseGeometry(e.components[i],t);else(i=OpenLayers.Util.getElement(e.id))&&i.parentNode&&(i.geometry&&(i.geometry.destroy(),i.geometry=null),i.parentNode.removeChild(i),this.indexer&&this.indexer.remove(i),i._style.backgroundGraphic&&(i=OpenLayers.Util.getElement(e.id+this.BACKGROUND_ID_SUFFIX))&&i.parentNode&&i.parentNode.removeChild(i))},nodeFactory:function(e,t){var i=OpenLayers.Util.getElement(e);return i?this.nodeTypeCompare(i,t)||(i.parentNode.removeChild(i),i=this.nodeFactory(e,t)):i=this.createNode(t,e),i},nodeTypeCompare:function(e,t){},createNode:function(e,t){},moveRoot:function(e){var t=this.root;e.root.parentNode==this.rendererRoot&&(t=e.root),t.parentNode.removeChild(t),e.rendererRoot.appendChild(t)},getRenderLayerId:function(){return this.root.parentNode.parentNode.id},isComplexSymbol:function(e){return"circle"!=e&&!!e},CLASS_NAME:"OpenLayers.Renderer.Elements"}),OpenLayers.Renderer.SVG=OpenLayers.Class(OpenLayers.Renderer.Elements,{xmlns:"http://www.w3.org/2000/svg",xlinkns:"http://www.w3.org/1999/xlink",MAX_PIXEL:15e3,translationParameters:null,symbolMetrics:null,initialize:function(e){this.supported()&&(OpenLayers.Renderer.Elements.prototype.initialize.apply(this,arguments),this.translationParameters={x:0,y:0},this.symbolMetrics={})},supported:function(){return document.implementation&&(document.implementation.hasFeature("org.w3c.svg","1.0")||document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#SVG","1.1")||document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1"))},inValidRange:function(e,t,i){return e+=i?0:this.translationParameters.x,t+=i?0:this.translationParameters.y,e>=-this.MAX_PIXEL&&e<=this.MAX_PIXEL&&t>=-this.MAX_PIXEL&&t<=this.MAX_PIXEL},setExtent:function(e,t){var i=OpenLayers.Renderer.Elements.prototype.setExtent.apply(this,arguments),n=this.getResolution(),r=-e.left/n,n=e.top/n;return t?(this.left=r,this.top=n,this.rendererRoot.setAttributeNS(null,"viewBox","0 0 "+this.size.w+" "+this.size.h),this.translate(this.xOffset,0),!0):((r=this.translate(r-this.left+this.xOffset,n-this.top))||this.setExtent(e,!0),i&&r)},translate:function(e,t){if(this.inValidRange(e,t,!0)){var i="";return(e||t)&&(i="translate("+e+","+t+")"),this.root.setAttributeNS(null,"transform",i),this.translationParameters={x:e,y:t},!0}return!1},setSize:function(e){OpenLayers.Renderer.prototype.setSize.apply(this,arguments),this.rendererRoot.setAttributeNS(null,"width",this.size.w),this.rendererRoot.setAttributeNS(null,"height",this.size.h)},getNodeType:function(e,t){var i=null;switch(e.CLASS_NAME){case"OpenLayers.Geometry.Point":i=t.externalGraphic?"image":this.isComplexSymbol(t.graphicName)?"svg":"circle";break;case"OpenLayers.Geometry.Rectangle":i="rect";break;case"OpenLayers.Geometry.LineString":i="polyline";break;case"OpenLayers.Geometry.LinearRing":i="polygon";break;case"OpenLayers.Geometry.Polygon":case"OpenLayers.Geometry.Curve":i="path"}return i},setStyle:function(e,t,i){t=t||e._style,i=i||e._options;var n=t.title||t.graphicTitle;if(n){e.setAttributeNS(null,"title",n);var r=e.getElementsByTagName("title");0<r.length?r[0].firstChild.textContent=n:(r=this.nodeFactory(null,"title"),r.textContent=n,e.appendChild(r))}var s,r=parseFloat(e.getAttributeNS(null,"r")),n=1;if("OpenLayers.Geometry.Point"==e._geometryClass&&r){if(e.style.visibility="",!1===t.graphic)e.style.visibility="hidden";else if(t.externalGraphic){s=this.getPosition(e),t.graphicWidth&&t.graphicHeight&&e.setAttributeNS(null,"preserveAspectRatio","none");var r=t.graphicWidth||t.graphicHeight,o=t.graphicHeight||t.graphicWidth,r=r?r:2*t.pointRadius,o=o?o:2*t.pointRadius,a=void 0!=t.graphicYOffset?t.graphicYOffset:-(.5*o),l=t.graphicOpacity||t.fillOpacity;e.setAttributeNS(null,"x",(s.x+(void 0!=t.graphicXOffset?t.graphicXOffset:-(.5*r))).toFixed()),e.setAttributeNS(null,"y",(s.y+a).toFixed()),e.setAttributeNS(null,"width",r),e.setAttributeNS(null,"height",o),e.setAttributeNS(this.xlinkns,"xlink:href",t.externalGraphic),e.setAttributeNS(null,"style","opacity: "+l),e.onclick=OpenLayers.Event.preventDefault}else if(this.isComplexSymbol(t.graphicName)){var r=3*t.pointRadius,o=2*r,h=this.importSymbol(t.graphicName);s=this.getPosition(e),n=3*this.symbolMetrics[h.id][0]/o,a=e.parentNode,l=e.nextSibling,a&&a.removeChild(e),e.firstChild&&e.removeChild(e.firstChild),e.appendChild(h.firstChild.cloneNode(!0)),e.setAttributeNS(null,"viewBox",h.getAttributeNS(null,"viewBox")),e.setAttributeNS(null,"width",o),e.setAttributeNS(null,"height",o),e.setAttributeNS(null,"x",s.x-r),e.setAttributeNS(null,"y",s.y-r),l?a.insertBefore(e,l):a&&a.appendChild(e)}else e.setAttributeNS(null,"r",t.pointRadius);r=t.rotation,void 0===r&&void 0===e._rotation||!s||(e._rotation=r,r|=0,"svg"!==e.nodeName?e.setAttributeNS(null,"transform","rotate("+r+" "+s.x+" "+s.y+")"):(s=this.symbolMetrics[h.id],e.firstChild.setAttributeNS(null,"transform","rotate("+r+" "+s[1]+" "+s[2]+")")))}return i.isFilled?(e.setAttributeNS(null,"fill",t.fillColor),e.setAttributeNS(null,"fill-opacity",t.fillOpacity)):e.setAttributeNS(null,"fill","none"),i.isStroked?(e.setAttributeNS(null,"stroke",t.strokeColor),e.setAttributeNS(null,"stroke-opacity",t.strokeOpacity),e.setAttributeNS(null,"stroke-width",t.strokeWidth*n),e.setAttributeNS(null,"stroke-linecap",t.strokeLinecap||"round"),e.setAttributeNS(null,"stroke-linejoin","round"),t.strokeDashstyle&&e.setAttributeNS(null,"stroke-dasharray",this.dashStyle(t,n))):e.setAttributeNS(null,"stroke","none"),t.pointerEvents&&e.setAttributeNS(null,"pointer-events",t.pointerEvents),null!=t.cursor&&e.setAttributeNS(null,"cursor",t.cursor),e},dashStyle:function(e,t){var i=e.strokeWidth*t,n=e.strokeDashstyle;switch(n){case"solid":return"none";case"dot":return[1,4*i].join();case"dash":return[4*i,4*i].join();case"dashdot":return[4*i,4*i,1,4*i].join();case"longdash":return[8*i,4*i].join();case"longdashdot":return[8*i,4*i,1,4*i].join();default:return OpenLayers.String.trim(n).replace(/\s+/g,",")}},createNode:function(e,t){var i=document.createElementNS(this.xmlns,e);return t&&i.setAttributeNS(null,"id",t),i.setAttribute("class"," "),i},nodeTypeCompare:function(e,t){return t==e.nodeName},createRenderRoot:function(){var e=this.nodeFactory(this.container.id+"_svgRoot","svg");return e.style.display="block",e},createRoot:function(e){return this.nodeFactory(this.container.id+e,"g")},createDefs:function(){var e=this.nodeFactory(this.container.id+"_defs","defs");return this.rendererRoot.appendChild(e),e},drawPoint:function(e,t){return this.drawCircle(e,t,1)},drawCircle:function(e,t,i){var n=this.getResolution(),r=(t.x-this.featureDx)/n+this.left;return t=this.top-t.y/n,!!this.inValidRange(r,t)&&(e.setAttributeNS(null,"cx",r),e.setAttributeNS(null,"cy",t),e.setAttributeNS(null,"r",i),e)},drawLineString:function(e,t){var i=this.getComponentsString(t.components);return!!i.path&&(e.setAttributeNS(null,"points",i.path),i.complete?e:null)},drawLinearRing:function(e,t){var i=this.getComponentsString(t.components);return!!i.path&&(e.setAttributeNS(null,"points",i.path),i.complete?e:null)},drawPolygon:function(e,t){for(var i,n,r="",s=!0,o=!0,a=0,l=t.components.length;a<l;a++)r+=" M",i=this.getComponentsString(t.components[a].components," "),(n=i.path)?(r+=" "+n,o=i.complete&&o):s=!1;return!!s&&(e.setAttributeNS(null,"d",r+" z"),e.setAttributeNS(null,"fill-rule","evenodd"),o?e:null)},drawRectangle:function(e,t){var i=this.getResolution(),n=(t.x-this.featureDx)/i+this.left,r=this.top-t.y/i;return!!this.inValidRange(n,r)&&(e.setAttributeNS(null,"x",n),e.setAttributeNS(null,"y",r),e.setAttributeNS(null,"width",t.width/i),e.setAttributeNS(null,"height",t.height/i),e)},drawText:function(e,t,i){var n=!!t.labelOutlineWidth;if(n){var r=OpenLayers.Util.extend({},t);r.fontColor=r.labelOutlineColor,r.fontStrokeColor=r.labelOutlineColor,r.fontStrokeWidth=t.labelOutlineWidth,t.labelOutlineOpacity&&(r.fontOpacity=t.labelOutlineOpacity),delete r.labelOutlineWidth,this.drawText(e,r,i)}var s=this.getResolution(),r=(i.x-this.featureDx)/s+this.left,o=i.y/s-this.top,n=n?this.LABEL_OUTLINE_SUFFIX:this.LABEL_ID_SUFFIX,s=this.nodeFactory(e+n,"text");s.setAttributeNS(null,"x",r),s.setAttributeNS(null,"y",-o),t.fontColor&&s.setAttributeNS(null,"fill",t.fontColor),t.fontStrokeColor&&s.setAttributeNS(null,"stroke",t.fontStrokeColor),t.fontStrokeWidth&&s.setAttributeNS(null,"stroke-width",t.fontStrokeWidth),t.fontOpacity&&s.setAttributeNS(null,"opacity",t.fontOpacity),t.fontFamily&&s.setAttributeNS(null,"font-family",t.fontFamily),t.fontSize&&s.setAttributeNS(null,"font-size",t.fontSize),t.fontWeight&&s.setAttributeNS(null,"font-weight",t.fontWeight),t.fontStyle&&s.setAttributeNS(null,"font-style",t.fontStyle),!0===t.labelSelect?(s.setAttributeNS(null,"pointer-events","visible"),s._featureId=e):s.setAttributeNS(null,"pointer-events","none"),o=t.labelAlign||OpenLayers.Renderer.defaultSymbolizer.labelAlign,s.setAttributeNS(null,"text-anchor",OpenLayers.Renderer.SVG.LABEL_ALIGN[o[0]]||"middle"),!0===OpenLayers.IS_GECKO&&s.setAttributeNS(null,"dominant-baseline",OpenLayers.Renderer.SVG.LABEL_ALIGN[o[1]]||"central");for(var a=t.label.split("\n"),l=a.length;s.childNodes.length>l;)s.removeChild(s.lastChild);for(var h=0;h<l;h++){var u=this.nodeFactory(e+n+"_tspan_"+h,"tspan");if(!0===t.labelSelect&&(u._featureId=e,u._geometry=i,u._geometryClass=i.CLASS_NAME),!1===OpenLayers.IS_GECKO&&u.setAttributeNS(null,"baseline-shift",OpenLayers.Renderer.SVG.LABEL_VSHIFT[o[1]]||"-35%"),u.setAttribute("x",r),0==h){var c=OpenLayers.Renderer.SVG.LABEL_VFACTOR[o[1]];null==c&&(c=-.5),u.setAttribute("dy",c*(l-1)+"em")}else u.setAttribute("dy","1em");u.textContent=""===a[h]?" ":a[h],u.parentNode||s.appendChild(u)}s.parentNode||this.textRoot.appendChild(s)},getComponentsString:function(e,t){for(var i,n=[],r=!0,s=e.length,o=[],a=0;a<s;a++)i=e[a],n.push(i),(i=this.getShortString(i))?o.push(i):(0<a&&this.getShortString(e[a-1])&&o.push(this.clipLine(e[a],e[a-1])),a<s-1&&this.getShortString(e[a+1])&&o.push(this.clipLine(e[a],e[a+1])),r=!1);return{path:o.join(t||","),complete:r}},clipLine:function(e,t){if(t.equals(e))return"";var i,n=this.getResolution(),r=this.MAX_PIXEL-this.translationParameters.x,s=this.MAX_PIXEL-this.translationParameters.y,o=(t.x-this.featureDx)/n+this.left,a=this.top-t.y/n,l=(e.x-this.featureDx)/n+this.left,n=this.top-e.y/n;return(l<-r||l>r)&&(i=(n-a)/(l-o),l=0>l?-r:r,n=a+(l-o)*i),(n<-s||n>s)&&(i=(l-o)/(n-a),n=0>n?-s:s,l=o+(n-a)*i),l+","+n},getShortString:function(e){var t=this.getResolution(),i=(e.x-this.featureDx)/t+this.left;return e=this.top-e.y/t,!!this.inValidRange(i,e)&&i+","+e},getPosition:function(e){return{x:parseFloat(e.getAttributeNS(null,"cx")),y:parseFloat(e.getAttributeNS(null,"cy"))}},importSymbol:function(e){this.defs||(this.defs=this.createDefs());var t=this.container.id+"-"+e,i=document.getElementById(t);if(null!=i)return i;var n=OpenLayers.Renderer.symbol[e];if(!n)throw Error(e+" is not a valid symbol name");e=this.nodeFactory(t,"symbol");var r=this.nodeFactory(null,"polygon");e.appendChild(r);for(var s,o,i=new OpenLayers.Bounds(Number.MAX_VALUE,Number.MAX_VALUE,0,0),a=[],l=0;l<n.length;l+=2)s=n[l],o=n[l+1],i.left=Math.min(i.left,s),i.bottom=Math.min(i.bottom,o),i.right=Math.max(i.right,s),i.top=Math.max(i.top,o),a.push(s,",",o);return r.setAttributeNS(null,"points",a.join(" ")),n=i.getWidth(),r=i.getHeight(),e.setAttributeNS(null,"viewBox",[i.left-n,i.bottom-r,3*n,3*r].join(" ")),this.symbolMetrics[t]=[Math.max(n,r),i.getCenterLonLat().lon,i.getCenterLonLat().lat],this.defs.appendChild(e),e},getFeatureIdFromEvent:function(e){var t=OpenLayers.Renderer.Elements.prototype.getFeatureIdFromEvent.apply(this,arguments);return t||(t=e.target,t=t.parentNode&&t!=this.rendererRoot?t.parentNode._featureId:void 0),t},CLASS_NAME:"OpenLayers.Renderer.SVG"}),OpenLayers.Renderer.SVG.LABEL_ALIGN={l:"start",r:"end",b:"bottom",t:"hanging"},OpenLayers.Renderer.SVG.LABEL_VSHIFT={t:"-70%",b:"0"},OpenLayers.Renderer.SVG.LABEL_VFACTOR={t:0,b:-1},OpenLayers.Renderer.SVG.preventDefault=function(e){OpenLayers.Event.preventDefault(e)},OpenLayers.Renderer.Canvas=OpenLayers.Class(OpenLayers.Renderer,{hitDetection:!0,hitOverflow:0,canvas:null,features:null,pendingRedraw:!1,cachedSymbolBounds:{},initialize:function(e,t){OpenLayers.Renderer.prototype.initialize.apply(this,arguments),this.root=document.createElement("canvas"),this.container.appendChild(this.root),this.canvas=this.root.getContext("2d"),this._clearRectId=OpenLayers.Util.createUniqueID(),this.features={},this.hitDetection&&(this.hitCanvas=document.createElement("canvas"),this.hitContext=this.hitCanvas.getContext("2d"))},setExtent:function(){return OpenLayers.Renderer.prototype.setExtent.apply(this,arguments),!1},eraseGeometry:function(e,t){this.eraseFeatures(this.features[t][0])},supported:function(){return OpenLayers.CANVAS_SUPPORTED},setSize:function(e){this.size=e.clone();var t=this.root;t.style.width=e.w+"px",t.style.height=e.h+"px",t.width=e.w,t.height=e.h,this.resolution=null,this.hitDetection&&(t=this.hitCanvas,t.style.width=e.w+"px",t.style.height=e.h+"px",t.width=e.w,t.height=e.h)},drawFeature:function(e,t){var i;if(e.geometry){t=this.applyDefaultSymbolizer(t||e.style),i=e.geometry.getBounds();var n;this.map.baseLayer&&this.map.baseLayer.wrapDateLine&&(n=this.map.getMaxExtent()),n=i&&i.intersectsBounds(this.extent,{worldBounds:n}),(i="none"!==t.display&&!!i&&n)?this.features[e.id]=[e,t]:delete this.features[e.id],this.pendingRedraw=!0}return this.pendingRedraw&&!this.locked&&(this.redraw(),this.pendingRedraw=!1),i},drawGeometry:function(e,t,i){var n=e.CLASS_NAME;if("OpenLayers.Geometry.Collection"==n||"OpenLayers.Geometry.MultiPoint"==n||"OpenLayers.Geometry.MultiLineString"==n||"OpenLayers.Geometry.MultiPolygon"==n)for(var n=this.map.baseLayer&&this.map.baseLayer.wrapDateLine&&this.map.getMaxExtent(),r=0;r<e.components.length;r++)this.calculateFeatureDx(e.components[r].getBounds(),n),this.drawGeometry(e.components[r],t,i);else switch(e.CLASS_NAME){case"OpenLayers.Geometry.Point":this.drawPoint(e,t,i);break;case"OpenLayers.Geometry.LineString":this.drawLineString(e,t,i);break;case"OpenLayers.Geometry.LinearRing":this.drawLinearRing(e,t,i);break;case"OpenLayers.Geometry.Polygon":this.drawPolygon(e,t,i)}},drawExternalGraphic:function(e,t,i){var n=new Image,r=t.title||t.graphicTitle;r&&(n.title=r);var s=t.graphicWidth||t.graphicHeight,o=t.graphicHeight||t.graphicWidth,s=s?s:2*t.pointRadius,o=o?o:2*t.pointRadius,a=void 0!=t.graphicXOffset?t.graphicXOffset:-(.5*s),l=void 0!=t.graphicYOffset?t.graphicYOffset:-(.5*o),h=this._clearRectId,u=t.graphicOpacity||t.fillOpacity;n.onload=OpenLayers.Function.bind(function(){if(this.features[i]&&h===this._clearRectId){var t=this.getLocalXY(e),r=t[0],t=t[1];if(!isNaN(r)&&!isNaN(t)){var r=r+a|0,t=t+l|0,c=this.canvas;c.globalAlpha=u;var p=OpenLayers.Renderer.Canvas.drawImageScaleFactor||(OpenLayers.Renderer.Canvas.drawImageScaleFactor=/android 2.1/.test(navigator.userAgent.toLowerCase())?320/window.screen.width:1);c.drawImage(n,r*p,t*p,s*p,o*p),this.hitDetection&&(this.setHitContextStyle("fill",i),this.hitContext.fillRect(r,t,s,o))}}},this),n.src=t.externalGraphic,n.complete&&(n.onload(),n.onload=null)},drawNamedSymbol:function(e,t,i){var n,r,s,o;s=Math.PI/180;var a=OpenLayers.Renderer.symbol[t.graphicName];if(!a)throw Error(t.graphicName+" is not a valid symbol name");if(!(!a.length||2>a.length||(e=this.getLocalXY(e),r=e[0],o=e[1],isNaN(r)||isNaN(o)))){if(this.canvas.lineCap="round",this.canvas.lineJoin="round",this.hitDetection&&(this.hitContext.lineCap="round",this.hitContext.lineJoin="round"),t.graphicName in this.cachedSymbolBounds)n=this.cachedSymbolBounds[t.graphicName];else{for(n=new OpenLayers.Bounds,e=0;e<a.length;e+=2)n.extend(new OpenLayers.LonLat(a[e],a[e+1]));this.cachedSymbolBounds[t.graphicName]=n}if(this.canvas.save(),this.hitDetection&&this.hitContext.save(),this.canvas.translate(r,o),this.hitDetection&&this.hitContext.translate(r,o),e=s*t.rotation,isNaN(e)||(this.canvas.rotate(e),this.hitDetection&&this.hitContext.rotate(e)),s=2*t.pointRadius/Math.max(n.getWidth(),n.getHeight()),this.canvas.scale(s,s),this.hitDetection&&this.hitContext.scale(s,s),e=n.getCenterLonLat().lon,n=n.getCenterLonLat().lat,this.canvas.translate(-e,-n),this.hitDetection&&this.hitContext.translate(-e,-n),o=t.strokeWidth,t.strokeWidth=o/s,!1!==t.fill){for(this.setCanvasStyle("fill",t),this.canvas.beginPath(),e=0;e<a.length;e+=2)n=a[e],r=a[e+1],0==e&&this.canvas.moveTo(n,r),this.canvas.lineTo(n,r);if(this.canvas.closePath(),this.canvas.fill(),this.hitDetection){for(this.setHitContextStyle("fill",i,t),this.hitContext.beginPath(),e=0;e<a.length;e+=2)n=a[e],r=a[e+1],0==e&&this.canvas.moveTo(n,r),this.hitContext.lineTo(n,r);this.hitContext.closePath(),this.hitContext.fill()}}if(!1!==t.stroke){for(this.setCanvasStyle("stroke",t),this.canvas.beginPath(),e=0;e<a.length;e+=2)n=a[e],r=a[e+1],0==e&&this.canvas.moveTo(n,r),this.canvas.lineTo(n,r);if(this.canvas.closePath(),this.canvas.stroke(),this.hitDetection){for(this.setHitContextStyle("stroke",i,t,s),this.hitContext.beginPath(),e=0;e<a.length;e+=2)n=a[e],r=a[e+1],0==e&&this.hitContext.moveTo(n,r),this.hitContext.lineTo(n,r);this.hitContext.closePath(),this.hitContext.stroke()}}t.strokeWidth=o,this.canvas.restore(),this.hitDetection&&this.hitContext.restore(),this.setCanvasStyle("reset")}},setCanvasStyle:function(e,t){"fill"===e?(this.canvas.globalAlpha=t.fillOpacity,this.canvas.fillStyle=t.fillColor):"stroke"===e?(this.canvas.globalAlpha=t.strokeOpacity,this.canvas.strokeStyle=t.strokeColor,this.canvas.lineWidth=t.strokeWidth):(this.canvas.globalAlpha=0,this.canvas.lineWidth=1)},featureIdToHex:function(e){e=Number(e.split("_").pop())+1,16777216<=e&&(this.hitOverflow=e-16777215,e=e%16777216+1),e="000000"+e.toString(16);var t=e.length;return e="#"+e.substring(t-6,t)},setHitContextStyle:function(e,t,i,n){t=this.featureIdToHex(t),"fill"==e?(this.hitContext.globalAlpha=1,this.hitContext.fillStyle=t):"stroke"==e?(this.hitContext.globalAlpha=1,this.hitContext.strokeStyle=t,"undefined"==typeof n?this.hitContext.lineWidth=i.strokeWidth+2:isNaN(n)||(this.hitContext.lineWidth=i.strokeWidth+2/n)):(this.hitContext.globalAlpha=0,this.hitContext.lineWidth=1)},drawPoint:function(e,t,i){if(!1!==t.graphic)if(t.externalGraphic)this.drawExternalGraphic(e,t,i);else if(t.graphicName&&"circle"!=t.graphicName)this.drawNamedSymbol(e,t,i);else{var n=this.getLocalXY(e);if(e=n[0],n=n[1],!isNaN(e)&&!isNaN(n)){var r=2*Math.PI,s=t.pointRadius;!1!==t.fill&&(this.setCanvasStyle("fill",t),this.canvas.beginPath(),this.canvas.arc(e,n,s,0,r,!0),this.canvas.fill(),this.hitDetection&&(this.setHitContextStyle("fill",i,t),this.hitContext.beginPath(),this.hitContext.arc(e,n,s,0,r,!0),this.hitContext.fill())),!1!==t.stroke&&(this.setCanvasStyle("stroke",t),this.canvas.beginPath(),this.canvas.arc(e,n,s,0,r,!0),this.canvas.stroke(),this.hitDetection&&(this.setHitContextStyle("stroke",i,t),this.hitContext.beginPath(),this.hitContext.arc(e,n,s,0,r,!0),this.hitContext.stroke()),this.setCanvasStyle("reset"))}}},drawLineString:function(e,t,i){t=OpenLayers.Util.applyDefaults({fill:!1},t),this.drawLinearRing(e,t,i)},drawLinearRing:function(e,t,i){!1!==t.fill&&(this.setCanvasStyle("fill",t),this.renderPath(this.canvas,e,t,i,"fill"),this.hitDetection&&(this.setHitContextStyle("fill",i,t),this.renderPath(this.hitContext,e,t,i,"fill"))),!1!==t.stroke&&(this.setCanvasStyle("stroke",t),this.renderPath(this.canvas,e,t,i,"stroke"),this.hitDetection&&(this.setHitContextStyle("stroke",i,t),this.renderPath(this.hitContext,e,t,i,"stroke"))),this.setCanvasStyle("reset")},renderPath:function(e,t,i,n,r){t=t.components,i=t.length,e.beginPath(),n=this.getLocalXY(t[0]);var s=n[1];if(!isNaN(n[0])&&!isNaN(s)){for(e.moveTo(n[0],n[1]),n=1;n<i;++n)s=this.getLocalXY(t[n]),e.lineTo(s[0],s[1]);"fill"===r?e.fill():e.stroke()}},drawPolygon:function(e,t,i){e=e.components;var n=e.length;this.drawLinearRing(e[0],t,i);for(var r=1;r<n;++r)this.canvas.globalCompositeOperation="destination-out",this.hitDetection&&(this.hitContext.globalCompositeOperation="destination-out"),this.drawLinearRing(e[r],OpenLayers.Util.applyDefaults({stroke:!1,fillOpacity:1},t),i),this.canvas.globalCompositeOperation="source-over",this.hitDetection&&(this.hitContext.globalCompositeOperation="source-over"),this.drawLinearRing(e[r],OpenLayers.Util.applyDefaults({fill:!1},t),i)},drawText:function(e,t){var i=this.getLocalXY(e);this.setCanvasStyle("reset"),this.canvas.fillStyle=t.fontColor,this.canvas.globalAlpha=t.fontOpacity||1;var n=[t.fontStyle?t.fontStyle:"normal","normal",t.fontWeight?t.fontWeight:"normal",t.fontSize?t.fontSize:"1em",t.fontFamily?t.fontFamily:"sans-serif"].join(" "),r=t.label.split("\n"),s=r.length;if(this.canvas.fillText){this.canvas.font=n,this.canvas.textAlign=OpenLayers.Renderer.Canvas.LABEL_ALIGN[t.labelAlign[0]]||"center",this.canvas.textBaseline=OpenLayers.Renderer.Canvas.LABEL_ALIGN[t.labelAlign[1]]||"middle";var o=OpenLayers.Renderer.Canvas.LABEL_FACTOR[t.labelAlign[1]];for(null==o&&(o=-.5),n=this.canvas.measureText("Mg").height||this.canvas.measureText("xx").width,i[1]+=n*o*(s-1),o=0;o<s;o++)t.labelOutlineWidth&&(this.canvas.save(),this.canvas.globalAlpha=t.labelOutlineOpacity||t.fontOpacity||1,this.canvas.strokeStyle=t.labelOutlineColor,this.canvas.lineWidth=t.labelOutlineWidth,this.canvas.strokeText(r[o],i[0],i[1]+n*o+1),this.canvas.restore()),this.canvas.fillText(r[o],i[0],i[1]+n*o)}else if(this.canvas.mozDrawText){this.canvas.mozTextStyle=n;var a=OpenLayers.Renderer.Canvas.LABEL_FACTOR[t.labelAlign[0]];for(null==a&&(a=-.5),o=OpenLayers.Renderer.Canvas.LABEL_FACTOR[t.labelAlign[1]],null==o&&(o=-.5),n=this.canvas.mozMeasureText("xx"),i[1]+=n*(1+o*s),o=0;o<s;o++){var l=i[0]+a*this.canvas.mozMeasureText(r[o]),h=i[1]+o*n;this.canvas.translate(l,h),this.canvas.mozDrawText(r[o]),this.canvas.translate(-l,-h)}}this.setCanvasStyle("reset")},getLocalXY:function(e){var t=this.getResolution(),i=this.extent;return[(e.x-this.featureDx)/t+-i.left/t,i.top/t-e.y/t]},clear:function(){this.clearCanvas(),this.features={}},clearCanvas:function(){var e=this.root.height,t=this.root.width;this.canvas.clearRect(0,0,t,e),this._clearRectId=OpenLayers.Util.createUniqueID(),this.hitDetection&&this.hitContext.clearRect(0,0,t,e)},getFeatureIdFromEvent:function(e){var t;if(this.hitDetection&&"none"!==this.root.style.display&&!this.map.dragging&&(e=e.xy,e=this.hitContext.getImageData(0|e.x,0|e.y,1,1).data,255===e[3]&&(e=e[2]+256*(e[1]+256*e[0])))){e="OpenLayers_Feature_Vector_"+(e-1+this.hitOverflow);try{t=this.features[e][0]}catch(e){}}return t},eraseFeatures:function(e){OpenLayers.Util.isArray(e)||(e=[e]);for(var t=0;t<e.length;++t)delete this.features[e[t].id];this.redraw()},redraw:function(){if(!this.locked){this.clearCanvas();var e,t,i,n,r=[],s=this.map.baseLayer&&this.map.baseLayer.wrapDateLine&&this.map.getMaxExtent();for(n in this.features)this.features.hasOwnProperty(n)&&(e=this.features[n][0],t=e.geometry,this.calculateFeatureDx(t.getBounds(),s),i=this.features[n][1],this.drawGeometry(t,i,e.id),i.label&&r.push([e,i]));for(t=0,i=r.length;t<i;++t)e=r[t],this.drawText(e[0].geometry.getCentroid(),e[1])}},CLASS_NAME:"OpenLayers.Renderer.Canvas"}),OpenLayers.Renderer.Canvas.LABEL_ALIGN={l:"left",r:"right",t:"top",b:"bottom"},OpenLayers.Renderer.Canvas.LABEL_FACTOR={l:0,r:-1,t:0,b:-1},OpenLayers.Renderer.Canvas.drawImageScaleFactor=null,OpenLayers.Popup=OpenLayers.Class({events:null,id:"",lonlat:null,div:null,contentSize:null,size:null,contentHTML:null,backgroundColor:"",opacity:"",border:"",contentDiv:null,groupDiv:null,closeDiv:null,autoSize:!1,minSize:null,maxSize:null,displayClass:"olPopup",contentDisplayClass:"olPopupContent",padding:0,disableFirefoxOverflowHack:!1,fixPadding:function(){"number"==typeof this.padding&&(this.padding=new OpenLayers.Bounds(this.padding,this.padding,this.padding,this.padding))},panMapIfOutOfView:!1,keepInMap:!1,closeOnMove:!1,map:null,initialize:function(e,t,i,n,r,s){null==e&&(e=OpenLayers.Util.createUniqueID(this.CLASS_NAME+"_")),this.id=e,this.lonlat=t,this.contentSize=null!=i?i:new OpenLayers.Size(OpenLayers.Popup.WIDTH,OpenLayers.Popup.HEIGHT),null!=n&&(this.contentHTML=n),this.backgroundColor=OpenLayers.Popup.COLOR,this.opacity=OpenLayers.Popup.OPACITY,this.border=OpenLayers.Popup.BORDER,this.div=OpenLayers.Util.createDiv(this.id,null,null,null,null,null,"hidden"),this.div.className=this.displayClass,this.groupDiv=OpenLayers.Util.createDiv(this.id+"_GroupDiv",null,null,null,"relative",null,"hidden"),e=this.div.id+"_contentDiv",this.contentDiv=OpenLayers.Util.createDiv(e,null,this.contentSize.clone(),null,"relative"),this.contentDiv.className=this.contentDisplayClass,this.groupDiv.appendChild(this.contentDiv),this.div.appendChild(this.groupDiv),r&&this.addCloseBox(s),this.registerEvents()},destroy:function(){this.border=this.opacity=this.backgroundColor=this.contentHTML=this.size=this.lonlat=this.id=null,this.closeOnMove&&this.map&&this.map.events.unregister("movestart",this,this.hide),this.events.destroy(),this.events=null,this.closeDiv&&(OpenLayers.Event.stopObservingElement(this.closeDiv),this.groupDiv.removeChild(this.closeDiv)),this.closeDiv=null,this.div.removeChild(this.groupDiv),this.groupDiv=null,null!=this.map&&this.map.removePopup(this),this.panMapIfOutOfView=this.padding=this.maxSize=this.minSize=this.autoSize=this.div=this.map=null},draw:function(e){return null==e&&null!=this.lonlat&&null!=this.map&&(e=this.map.getLayerPxFromLonLat(this.lonlat)),
this.closeOnMove&&this.map.events.register("movestart",this,this.hide),this.disableFirefoxOverflowHack||"firefox"!=OpenLayers.BROWSER_NAME||(this.map.events.register("movestart",this,function(){var e=document.defaultView.getComputedStyle(this.contentDiv,null).getPropertyValue("overflow");"hidden"!=e&&(this.contentDiv._oldOverflow=e,this.contentDiv.style.overflow="hidden")}),this.map.events.register("moveend",this,function(){var e=this.contentDiv._oldOverflow;e&&(this.contentDiv.style.overflow=e,this.contentDiv._oldOverflow=null)})),this.moveTo(e),this.autoSize||this.size||this.setSize(this.contentSize),this.setBackgroundColor(),this.setOpacity(),this.setBorder(),this.setContentHTML(),this.panMapIfOutOfView&&this.panIntoView(),this.div},updatePosition:function(){if(this.lonlat&&this.map){var e=this.map.getLayerPxFromLonLat(this.lonlat);e&&this.moveTo(e)}},moveTo:function(e){null!=e&&null!=this.div&&(this.div.style.left=e.x+"px",this.div.style.top=e.y+"px")},visible:function(){return OpenLayers.Element.visible(this.div)},toggle:function(){this.visible()?this.hide():this.show()},show:function(){this.div.style.display="",this.panMapIfOutOfView&&this.panIntoView()},hide:function(){this.div.style.display="none"},setSize:function(e){this.size=e.clone();var t=this.getContentDivPadding(),i=t.left+t.right,n=t.top+t.bottom;if(this.fixPadding(),i+=this.padding.left+this.padding.right,n+=this.padding.top+this.padding.bottom,this.closeDiv)var r=parseInt(this.closeDiv.style.width),i=i+(r+t.right);this.size.w+=i,this.size.h+=n,"msie"==OpenLayers.BROWSER_NAME&&(this.contentSize.w+=t.left+t.right,this.contentSize.h+=t.bottom+t.top),null!=this.div&&(this.div.style.width=this.size.w+"px",this.div.style.height=this.size.h+"px"),null!=this.contentDiv&&(this.contentDiv.style.width=e.w+"px",this.contentDiv.style.height=e.h+"px")},updateSize:function(){var e="<div class='"+this.contentDisplayClass+"'>"+this.contentDiv.innerHTML+"</div>",t=this.map?this.map.div:document.body,i=OpenLayers.Util.getRenderedDimensions(e,null,{displayClass:this.displayClass,containerElement:t}),n=this.getSafeContentSize(i);n.equals(i)?n=i:(i={w:n.w<i.w?n.w:null,h:n.h<i.h?n.h:null},i.w&&i.h||(e=OpenLayers.Util.getRenderedDimensions(e,i,{displayClass:this.contentDisplayClass,containerElement:t}),"hidden"!=OpenLayers.Element.getStyle(this.contentDiv,"overflow")&&e.equals(n)&&(n=OpenLayers.Util.getScrollbarWidth(),i.w?e.h+=n:e.w+=n),n=this.getSafeContentSize(e))),this.setSize(n)},setBackgroundColor:function(e){void 0!=e&&(this.backgroundColor=e),null!=this.div&&(this.div.style.backgroundColor=this.backgroundColor)},setOpacity:function(e){void 0!=e&&(this.opacity=e),null!=this.div&&(this.div.style.opacity=this.opacity,this.div.style.filter="alpha(opacity="+100*this.opacity+")")},setBorder:function(e){void 0!=e&&(this.border=e),null!=this.div&&(this.div.style.border=this.border)},setContentHTML:function(e){null!=e&&(this.contentHTML=e),null!=this.contentDiv&&null!=this.contentHTML&&this.contentHTML!=this.contentDiv.innerHTML&&(this.contentDiv.innerHTML=this.contentHTML,this.autoSize&&(this.registerImageListeners(),this.updateSize()))},registerImageListeners:function(){for(var e=function(){null!==this.popup.id&&(this.popup.updateSize(),this.popup.visible()&&this.popup.panMapIfOutOfView&&this.popup.panIntoView(),OpenLayers.Event.stopObserving(this.img,"load",this.img._onImgLoad))},t=this.contentDiv.getElementsByTagName("img"),i=0,n=t.length;i<n;i++){var r=t[i];0!=r.width&&0!=r.height||(r._onImgLoad=OpenLayers.Function.bind(e,{popup:this,img:r}),OpenLayers.Event.observe(r,"load",r._onImgLoad))}},getSafeContentSize:function(e){e=e.clone();var t=this.getContentDivPadding(),i=t.left+t.right,n=t.top+t.bottom;if(this.fixPadding(),i+=this.padding.left+this.padding.right,n+=this.padding.top+this.padding.bottom,this.closeDiv)var r=parseInt(this.closeDiv.style.width),i=i+(r+t.right);if(this.minSize&&(e.w=Math.max(e.w,this.minSize.w-i),e.h=Math.max(e.h,this.minSize.h-n)),this.maxSize&&(e.w=Math.min(e.w,this.maxSize.w-i),e.h=Math.min(e.h,this.maxSize.h-n)),this.map&&this.map.size){if(r=t=0,this.keepInMap&&!this.panMapIfOutOfView)switch(r=this.map.getPixelFromLonLat(this.lonlat),this.relativePosition){case"tr":t=r.x,r=this.map.size.h-r.y;break;case"tl":t=this.map.size.w-r.x,r=this.map.size.h-r.y;break;case"bl":t=this.map.size.w-r.x,r=r.y;break;case"br":t=r.x,r=r.y;break;default:t=r.x,r=this.map.size.h-r.y}n=this.map.size.h-this.map.paddingForPopups.top-this.map.paddingForPopups.bottom-n-r,e.w=Math.min(e.w,this.map.size.w-this.map.paddingForPopups.left-this.map.paddingForPopups.right-i-t),e.h=Math.min(e.h,n)}return e},getContentDivPadding:function(){var e=this._contentDivPadding;return e||(null==this.div.parentNode&&(this.div.style.display="none",document.body.appendChild(this.div)),this._contentDivPadding=e=new OpenLayers.Bounds(OpenLayers.Element.getStyle(this.contentDiv,"padding-left"),OpenLayers.Element.getStyle(this.contentDiv,"padding-bottom"),OpenLayers.Element.getStyle(this.contentDiv,"padding-right"),OpenLayers.Element.getStyle(this.contentDiv,"padding-top")),this.div.parentNode==document.body&&(document.body.removeChild(this.div),this.div.style.display="")),e},addCloseBox:function(e){this.closeDiv=OpenLayers.Util.createDiv(this.id+"_close",null,{w:17,h:17}),this.closeDiv.className="olPopupCloseBox";var t=this.getContentDivPadding();this.closeDiv.style.right=t.right+"px",this.closeDiv.style.top=t.top+"px",this.groupDiv.appendChild(this.closeDiv),e=e||function(e){this.hide(),OpenLayers.Event.stop(e)},OpenLayers.Event.observe(this.closeDiv,"touchend",OpenLayers.Function.bindAsEventListener(e,this)),OpenLayers.Event.observe(this.closeDiv,"click",OpenLayers.Function.bindAsEventListener(e,this))},panIntoView:function(){var e=this.map.getSize(),t=this.map.getViewPortPxFromLayerPx(new OpenLayers.Pixel(parseInt(this.div.style.left),parseInt(this.div.style.top))),i=t.clone();t.x<this.map.paddingForPopups.left?i.x=this.map.paddingForPopups.left:t.x+this.size.w>e.w-this.map.paddingForPopups.right&&(i.x=e.w-this.map.paddingForPopups.right-this.size.w),t.y<this.map.paddingForPopups.top?i.y=this.map.paddingForPopups.top:t.y+this.size.h>e.h-this.map.paddingForPopups.bottom&&(i.y=e.h-this.map.paddingForPopups.bottom-this.size.h),this.map.pan(t.x-i.x,t.y-i.y)},registerEvents:function(){this.events=new OpenLayers.Events(this,this.div,null,!0),this.events.on({mousedown:this.onmousedown,mousemove:this.onmousemove,mouseup:this.onmouseup,click:this.onclick,mouseout:this.onmouseout,dblclick:this.ondblclick,touchstart:function(e){OpenLayers.Event.stop(e,!0)},scope:this})},onmousedown:function(e){this.mousedown=!0,OpenLayers.Event.stop(e,!0)},onmousemove:function(e){this.mousedown&&OpenLayers.Event.stop(e,!0)},onmouseup:function(e){this.mousedown&&(this.mousedown=!1,OpenLayers.Event.stop(e,!0))},onclick:function(e){OpenLayers.Event.stop(e,!0)},onmouseout:function(e){this.mousedown=!1},ondblclick:function(e){OpenLayers.Event.stop(e,!0)},CLASS_NAME:"OpenLayers.Popup"}),OpenLayers.Popup.WIDTH=200,OpenLayers.Popup.HEIGHT=200,OpenLayers.Popup.COLOR="white",OpenLayers.Popup.OPACITY=1,OpenLayers.Popup.BORDER="0px",OpenLayers.Popup.Anchored=OpenLayers.Class(OpenLayers.Popup,{relativePosition:null,keepInMap:!0,anchor:null,initialize:function(e,t,i,n,r,s,o){OpenLayers.Popup.prototype.initialize.apply(this,[e,t,i,n,s,o]),this.anchor=null!=r?r:{size:new OpenLayers.Size(0,0),offset:new OpenLayers.Pixel(0,0)}},destroy:function(){this.relativePosition=this.anchor=null,OpenLayers.Popup.prototype.destroy.apply(this,arguments)},show:function(){this.updatePosition(),OpenLayers.Popup.prototype.show.apply(this,arguments)},moveTo:function(e){var t=this.relativePosition;this.relativePosition=this.calculateRelativePosition(e),OpenLayers.Popup.prototype.moveTo.call(this,this.calculateNewPx(e)),this.relativePosition!=t&&this.updateRelativePosition()},setSize:function(e){if(OpenLayers.Popup.prototype.setSize.apply(this,arguments),this.lonlat&&this.map){var t=this.map.getLayerPxFromLonLat(this.lonlat);this.moveTo(t)}},calculateRelativePosition:function(e){return e=this.map.getLonLatFromLayerPx(e),e=this.map.getExtent().determineQuadrant(e),OpenLayers.Bounds.oppositeQuadrant(e)},updateRelativePosition:function(){},calculateNewPx:function(e){e=e.offset(this.anchor.offset);var t=this.size||this.contentSize,i="t"==this.relativePosition.charAt(0);return e.y+=i?-t.h:this.anchor.size.h,i="l"==this.relativePosition.charAt(1),e.x+=i?-t.w:this.anchor.size.w,e},CLASS_NAME:"OpenLayers.Popup.Anchored"}),OpenLayers.Popup.Framed=OpenLayers.Class(OpenLayers.Popup.Anchored,{imageSrc:null,imageSize:null,isAlphaImage:!1,positionBlocks:null,blocks:null,fixedRelativePosition:!1,initialize:function(e,t,i,n,r,s,o){OpenLayers.Popup.Anchored.prototype.initialize.apply(this,arguments),this.fixedRelativePosition&&(this.updateRelativePosition(),this.calculateRelativePosition=function(e){return this.relativePosition}),this.contentDiv.style.position="absolute",this.contentDiv.style.zIndex=1,s&&(this.closeDiv.style.zIndex=1),this.groupDiv.style.position="absolute",this.groupDiv.style.top="0px",this.groupDiv.style.left="0px",this.groupDiv.style.height="100%",this.groupDiv.style.width="100%"},destroy:function(){this.isAlphaImage=this.imageSize=this.imageSrc=null,this.fixedRelativePosition=!1,this.positionBlocks=null;for(var e=0;e<this.blocks.length;e++){var t=this.blocks[e];t.image&&t.div.removeChild(t.image),t.image=null,t.div&&this.groupDiv.removeChild(t.div),t.div=null}this.blocks=null,OpenLayers.Popup.Anchored.prototype.destroy.apply(this,arguments)},setBackgroundColor:function(e){},setBorder:function(){},setOpacity:function(e){},setSize:function(e){OpenLayers.Popup.Anchored.prototype.setSize.apply(this,arguments),this.updateBlocks()},updateRelativePosition:function(){if(this.padding=this.positionBlocks[this.relativePosition].padding,this.closeDiv){var e=this.getContentDivPadding();this.closeDiv.style.right=e.right+this.padding.right+"px",this.closeDiv.style.top=e.top+this.padding.top+"px"}this.updateBlocks()},calculateNewPx:function(e){var t=OpenLayers.Popup.Anchored.prototype.calculateNewPx.apply(this,arguments);return t=t.offset(this.positionBlocks[this.relativePosition].offset)},createBlocks:function(){this.blocks=[];var e,t=null;for(e in this.positionBlocks){t=e;break}for(t=this.positionBlocks[t],e=0;e<t.blocks.length;e++){var i={};this.blocks.push(i),i.div=OpenLayers.Util.createDiv(this.id+"_FrameDecorationDiv_"+e,null,null,null,"absolute",null,"hidden",null),i.image=(this.isAlphaImage?OpenLayers.Util.createAlphaImageDiv:OpenLayers.Util.createImage)(this.id+"_FrameDecorationImg_"+e,null,this.imageSize,this.imageSrc,"absolute",null,null,null),i.div.appendChild(i.image),this.groupDiv.appendChild(i.div)}},updateBlocks:function(){if(this.blocks||this.createBlocks(),this.size&&this.relativePosition){for(var e=this.positionBlocks[this.relativePosition],t=0;t<e.blocks.length;t++){var i=e.blocks[t],n=this.blocks[t],r=i.anchor.left,s=i.anchor.bottom,o=i.anchor.right,a=i.anchor.top,l=isNaN(i.size.w)?this.size.w-(o+r):i.size.w,h=isNaN(i.size.h)?this.size.h-(s+a):i.size.h;n.div.style.width=(0>l?0:l)+"px",n.div.style.height=(0>h?0:h)+"px",n.div.style.left=null!=r?r+"px":"",n.div.style.bottom=null!=s?s+"px":"",n.div.style.right=null!=o?o+"px":"",n.div.style.top=null!=a?a+"px":"",n.image.style.left=i.position.x+"px",n.image.style.top=i.position.y+"px"}this.contentDiv.style.left=this.padding.left+"px",this.contentDiv.style.top=this.padding.top+"px"}},CLASS_NAME:"OpenLayers.Popup.Framed"}),OpenLayers.Popup.FramedCloud=OpenLayers.Class(OpenLayers.Popup.Framed,{contentDisplayClass:"olFramedCloudPopupContent",autoSize:!0,panMapIfOutOfView:!0,imageSize:new OpenLayers.Size(1276,736),isAlphaImage:!1,fixedRelativePosition:!1,positionBlocks:{tl:{offset:new OpenLayers.Pixel(44,0),padding:new OpenLayers.Bounds(8,40,8,9),blocks:[{size:new OpenLayers.Size("auto","auto"),anchor:new OpenLayers.Bounds(0,51,22,0),position:new OpenLayers.Pixel(0,0)},{size:new OpenLayers.Size(22,"auto"),anchor:new OpenLayers.Bounds(null,50,0,0),position:new OpenLayers.Pixel(-1238,0)},{size:new OpenLayers.Size("auto",19),anchor:new OpenLayers.Bounds(0,32,22,null),position:new OpenLayers.Pixel(0,-631)},{size:new OpenLayers.Size(22,18),anchor:new OpenLayers.Bounds(null,32,0,null),position:new OpenLayers.Pixel(-1238,-632)},{size:new OpenLayers.Size(81,35),anchor:new OpenLayers.Bounds(null,0,0,null),position:new OpenLayers.Pixel(0,-688)}]},tr:{offset:new OpenLayers.Pixel(-45,0),padding:new OpenLayers.Bounds(8,40,8,9),blocks:[{size:new OpenLayers.Size("auto","auto"),anchor:new OpenLayers.Bounds(0,51,22,0),position:new OpenLayers.Pixel(0,0)},{size:new OpenLayers.Size(22,"auto"),anchor:new OpenLayers.Bounds(null,50,0,0),position:new OpenLayers.Pixel(-1238,0)},{size:new OpenLayers.Size("auto",19),anchor:new OpenLayers.Bounds(0,32,22,null),position:new OpenLayers.Pixel(0,-631)},{size:new OpenLayers.Size(22,19),anchor:new OpenLayers.Bounds(null,32,0,null),position:new OpenLayers.Pixel(-1238,-631)},{size:new OpenLayers.Size(81,35),anchor:new OpenLayers.Bounds(0,0,null,null),position:new OpenLayers.Pixel(-215,-687)}]},bl:{offset:new OpenLayers.Pixel(45,0),padding:new OpenLayers.Bounds(8,9,8,40),blocks:[{size:new OpenLayers.Size("auto","auto"),anchor:new OpenLayers.Bounds(0,21,22,32),position:new OpenLayers.Pixel(0,0)},{size:new OpenLayers.Size(22,"auto"),anchor:new OpenLayers.Bounds(null,21,0,32),position:new OpenLayers.Pixel(-1238,0)},{size:new OpenLayers.Size("auto",21),anchor:new OpenLayers.Bounds(0,0,22,null),position:new OpenLayers.Pixel(0,-629)},{size:new OpenLayers.Size(22,21),anchor:new OpenLayers.Bounds(null,0,0,null),position:new OpenLayers.Pixel(-1238,-629)},{size:new OpenLayers.Size(81,33),anchor:new OpenLayers.Bounds(null,null,0,0),position:new OpenLayers.Pixel(-101,-674)}]},br:{offset:new OpenLayers.Pixel(-44,0),padding:new OpenLayers.Bounds(8,9,8,40),blocks:[{size:new OpenLayers.Size("auto","auto"),anchor:new OpenLayers.Bounds(0,21,22,32),position:new OpenLayers.Pixel(0,0)},{size:new OpenLayers.Size(22,"auto"),anchor:new OpenLayers.Bounds(null,21,0,32),position:new OpenLayers.Pixel(-1238,0)},{size:new OpenLayers.Size("auto",21),anchor:new OpenLayers.Bounds(0,0,22,null),position:new OpenLayers.Pixel(0,-629)},{size:new OpenLayers.Size(22,21),anchor:new OpenLayers.Bounds(null,0,0,null),position:new OpenLayers.Pixel(-1238,-629)},{size:new OpenLayers.Size(81,33),anchor:new OpenLayers.Bounds(0,null,null,0),position:new OpenLayers.Pixel(-311,-674)}]}},minSize:new OpenLayers.Size(105,10),maxSize:new OpenLayers.Size(1200,660),initialize:function(e,t,i,n,r,s,o){this.imageSrc=OpenLayers.Util.getImageLocation("cloud-popup-relative.png"),OpenLayers.Popup.Framed.prototype.initialize.apply(this,arguments),this.contentDiv.className=this.contentDisplayClass},CLASS_NAME:"OpenLayers.Popup.FramedCloud"}),OpenLayers.Control=OpenLayers.Class({id:null,map:null,div:null,type:null,allowSelection:!1,displayClass:"",title:"",autoActivate:!1,active:null,handlerOptions:null,handler:null,eventListeners:null,events:null,initialize:function(e){this.displayClass=this.CLASS_NAME.replace("OpenLayers.","ol").replace(/\./g,""),OpenLayers.Util.extend(this,e),this.events=new OpenLayers.Events(this),this.eventListeners instanceof Object&&this.events.on(this.eventListeners),null==this.id&&(this.id=OpenLayers.Util.createUniqueID(this.CLASS_NAME+"_"))},destroy:function(){if(this.events&&(this.eventListeners&&this.events.un(this.eventListeners),this.events.destroy(),this.events=null),this.eventListeners=null,this.handler&&(this.handler.destroy(),this.handler=null),this.handlers){for(var e in this.handlers)this.handlers.hasOwnProperty(e)&&"function"==typeof this.handlers[e].destroy&&this.handlers[e].destroy();this.handlers=null}this.map&&(this.map.removeControl(this),this.map=null),this.div=null},setMap:function(e){this.map=e,this.handler&&this.handler.setMap(e)},draw:function(e){return null==this.div&&(this.div=OpenLayers.Util.createDiv(this.id),this.div.className=this.displayClass,this.allowSelection||(this.div.className+=" olControlNoSelect",this.div.setAttribute("unselectable","on",0),this.div.onselectstart=OpenLayers.Function.False),""!=this.title&&(this.div.title=this.title)),null!=e&&(this.position=e.clone()),this.moveTo(this.position),this.div},moveTo:function(e){null!=e&&null!=this.div&&(this.div.style.left=e.x+"px",this.div.style.top=e.y+"px")},activate:function(){return!this.active&&(this.handler&&this.handler.activate(),this.active=!0,this.map&&OpenLayers.Element.addClass(this.map.viewPortDiv,this.displayClass.replace(/ /g,"")+"Active"),this.events.triggerEvent("activate"),!0)},deactivate:function(){return!!this.active&&(this.handler&&this.handler.deactivate(),this.active=!1,this.map&&OpenLayers.Element.removeClass(this.map.viewPortDiv,this.displayClass.replace(/ /g,"")+"Active"),this.events.triggerEvent("deactivate"),!0)},CLASS_NAME:"OpenLayers.Control"}),OpenLayers.Control.TYPE_BUTTON=1,OpenLayers.Control.TYPE_TOGGLE=2,OpenLayers.Control.TYPE_TOOL=3,OpenLayers.Handler.Box=OpenLayers.Class(OpenLayers.Handler,{dragHandler:null,boxDivClassName:"olHandlerBoxZoomBox",boxOffsets:null,initialize:function(e,t,i){OpenLayers.Handler.prototype.initialize.apply(this,arguments),this.dragHandler=new OpenLayers.Handler.Drag(this,{down:this.startBox,move:this.moveBox,out:this.removeBox,up:this.endBox},{keyMask:this.keyMask})},destroy:function(){OpenLayers.Handler.prototype.destroy.apply(this,arguments),this.dragHandler&&(this.dragHandler.destroy(),this.dragHandler=null)},setMap:function(e){OpenLayers.Handler.prototype.setMap.apply(this,arguments),this.dragHandler&&this.dragHandler.setMap(e)},startBox:function(e){this.callback("start",[]),this.zoomBox=OpenLayers.Util.createDiv("zoomBox",{x:-9999,y:-9999}),this.zoomBox.className=this.boxDivClassName,this.zoomBox.style.zIndex=this.map.Z_INDEX_BASE.Popup-1,this.map.viewPortDiv.appendChild(this.zoomBox),OpenLayers.Element.addClass(this.map.viewPortDiv,"olDrawBox")},moveBox:function(e){var t=this.dragHandler.start.x,i=this.dragHandler.start.y,n=Math.abs(t-e.x),r=Math.abs(i-e.y),s=this.getBoxOffsets();this.zoomBox.style.width=n+s.width+1+"px",this.zoomBox.style.height=r+s.height+1+"px",this.zoomBox.style.left=(e.x<t?t-n-s.left:t-s.left)+"px",this.zoomBox.style.top=(e.y<i?i-r-s.top:i-s.top)+"px"},endBox:function(e){if(5<Math.abs(this.dragHandler.start.x-e.x)||5<Math.abs(this.dragHandler.start.y-e.y)){var t=this.dragHandler.start;e=new OpenLayers.Bounds(Math.min(t.x,e.x),Math.max(t.y,e.y),Math.max(t.x,e.x),Math.min(t.y,e.y))}else e=this.dragHandler.start.clone();this.removeBox(),this.callback("done",[e])},removeBox:function(){this.map.viewPortDiv.removeChild(this.zoomBox),this.boxOffsets=this.zoomBox=null,OpenLayers.Element.removeClass(this.map.viewPortDiv,"olDrawBox")},activate:function(){return!!OpenLayers.Handler.prototype.activate.apply(this,arguments)&&(this.dragHandler.activate(),!0)},deactivate:function(){return!!OpenLayers.Handler.prototype.deactivate.apply(this,arguments)&&(this.dragHandler.deactivate()&&this.zoomBox&&this.removeBox(),!0)},getBoxOffsets:function(){if(!this.boxOffsets){var e=document.createElement("div");e.style.position="absolute",e.style.border="1px solid black",e.style.width="3px",document.body.appendChild(e);var t=3==e.clientWidth;document.body.removeChild(e);var e=parseInt(OpenLayers.Element.getStyle(this.zoomBox,"border-left-width")),i=parseInt(OpenLayers.Element.getStyle(this.zoomBox,"border-right-width")),n=parseInt(OpenLayers.Element.getStyle(this.zoomBox,"border-top-width")),r=parseInt(OpenLayers.Element.getStyle(this.zoomBox,"border-bottom-width"));this.boxOffsets={left:e,right:i,top:n,bottom:r,width:!1===t?e+i:0,height:!1===t?n+r:0}}return this.boxOffsets},CLASS_NAME:"OpenLayers.Handler.Box"}),OpenLayers.Control.ZoomBox=OpenLayers.Class(OpenLayers.Control,{type:OpenLayers.Control.TYPE_TOOL,out:!1,keyMask:null,alwaysZoom:!1,zoomOnClick:!0,draw:function(){this.handler=new OpenLayers.Handler.Box(this,{done:this.zoomBox},{keyMask:this.keyMask})},zoomBox:function(e){if(e instanceof OpenLayers.Bounds){var t,i=e.getCenterPixel();if(this.out){t=Math.min(this.map.size.h/(e.bottom-e.top),this.map.size.w/(e.right-e.left));var n=this.map.getExtent(),r=this.map.getLonLatFromPixel(i),s=r.lon-n.getWidth()/2*t;e=r.lon+n.getWidth()/2*t;var o=r.lat-n.getHeight()/2*t;t=r.lat+n.getHeight()/2*t,t=new OpenLayers.Bounds(s,o,e,t)}else s=this.map.getLonLatFromPixel({x:e.left,y:e.bottom}),e=this.map.getLonLatFromPixel({x:e.right,y:e.top}),t=new OpenLayers.Bounds(s.lon,s.lat,e.lon,e.lat);s=this.map.getZoom(),o=this.map.getSize(),e=o.w/2,o=o.h/2,t=this.map.getZoomForExtent(t),n=this.map.getResolution(),r=this.map.getResolutionForZoom(t),n==r?this.map.setCenter(this.map.getLonLatFromPixel(i)):this.map.zoomTo(t,{x:(n*i.x-r*e)/(n-r),y:(n*i.y-r*o)/(n-r)}),s==this.map.getZoom()&&1==this.alwaysZoom&&this.map.zoomTo(s+(this.out?-1:1))}else this.zoomOnClick&&(this.out?this.map.zoomTo(this.map.getZoom()-1,e):this.map.zoomTo(this.map.getZoom()+1,e))},CLASS_NAME:"OpenLayers.Control.ZoomBox"}),OpenLayers.Control.DragPan=OpenLayers.Class(OpenLayers.Control,{type:OpenLayers.Control.TYPE_TOOL,panned:!1,interval:0,documentDrag:!1,kinetic:null,enableKinetic:!0,kineticInterval:10,draw:function(){if(this.enableKinetic&&OpenLayers.Kinetic){var e={interval:this.kineticInterval};"object"==typeof this.enableKinetic&&(e=OpenLayers.Util.extend(e,this.enableKinetic)),this.kinetic=new OpenLayers.Kinetic(e)}this.handler=new OpenLayers.Handler.Drag(this,{move:this.panMap,done:this.panMapDone,down:this.panMapStart},{interval:this.interval,documentDrag:this.documentDrag})},panMapStart:function(){this.kinetic&&this.kinetic.begin()},panMap:function(e){this.kinetic&&this.kinetic.update(e),this.panned=!0,this.map.pan(this.handler.last.x-e.x,this.handler.last.y-e.y,{dragging:!0,animate:!1})},panMapDone:function(e){if(this.panned){var t=null;if(this.kinetic&&(t=this.kinetic.end(e)),this.map.pan(this.handler.last.x-e.x,this.handler.last.y-e.y,{dragging:!!t,animate:!1}),t){var i=this;this.kinetic.move(t,function(e,t,n){i.map.pan(e,t,{dragging:!n,animate:!1})})}this.panned=!1}},CLASS_NAME:"OpenLayers.Control.DragPan"}),OpenLayers.Handler.MouseWheel=OpenLayers.Class(OpenLayers.Handler,{wheelListener:null,interval:0,maxDelta:Number.POSITIVE_INFINITY,delta:0,cumulative:!0,initialize:function(e,t,i){OpenLayers.Handler.prototype.initialize.apply(this,arguments),this.wheelListener=OpenLayers.Function.bindAsEventListener(this.onWheelEvent,this)},destroy:function(){OpenLayers.Handler.prototype.destroy.apply(this,arguments),this.wheelListener=null},onWheelEvent:function(e){if(this.map&&this.checkModifiers(e)){for(var t=!1,i=!1,n=!1,r=OpenLayers.Event.element(e);null!=r&&!n&&!t;){if(!t)try{var s,t=(s=r.currentStyle?r.currentStyle.overflow:document.defaultView.getComputedStyle(r,null).getPropertyValue("overflow"))&&"auto"==s||"scroll"==s}catch(e){}if(!i&&(i=OpenLayers.Element.hasClass(r,"olScrollable"),!i))for(var n=0,o=this.map.layers.length;n<o;n++){var a=this.map.layers[n];if(r==a.div||r==a.pane){i=!0;break}}n=r==this.map.div,r=r.parentNode}if(!t&&n){if(i)if(t=0,e.wheelDelta?(t=e.wheelDelta,0===t%160&&(t*=.75),t/=120):e.detail&&(t=-(e.detail/Math.abs(e.detail))),this.delta+=t,window.clearTimeout(this._timeoutId),this.interval&&Math.abs(this.delta)<this.maxDelta){var l=OpenLayers.Util.extend({},e);this._timeoutId=window.setTimeout(OpenLayers.Function.bind(function(){this.wheelZoom(l)},this),this.interval)}else this.wheelZoom(e);OpenLayers.Event.stop(e)}}},wheelZoom:function(e){var t=this.delta;this.delta=0,t&&(e.xy=this.map.events.getMousePosition(e),0>t?this.callback("down",[e,this.cumulative?Math.max(-this.maxDelta,t):-1]):this.callback("up",[e,this.cumulative?Math.min(this.maxDelta,t):1]))},activate:function(e){if(OpenLayers.Handler.prototype.activate.apply(this,arguments)){var t=this.wheelListener;return OpenLayers.Event.observe(window,"DOMMouseScroll",t),OpenLayers.Event.observe(window,"mousewheel",t),OpenLayers.Event.observe(document,"mousewheel",t),!0}return!1},deactivate:function(e){if(OpenLayers.Handler.prototype.deactivate.apply(this,arguments)){var t=this.wheelListener;return OpenLayers.Event.stopObserving(window,"DOMMouseScroll",t),OpenLayers.Event.stopObserving(window,"mousewheel",t),OpenLayers.Event.stopObserving(document,"mousewheel",t),!0}return!1},CLASS_NAME:"OpenLayers.Handler.MouseWheel"}),OpenLayers.Control.Navigation=OpenLayers.Class(OpenLayers.Control,{dragPan:null,dragPanOptions:null,pinchZoom:null,pinchZoomOptions:null,documentDrag:!1,zoomBox:null,zoomBoxEnabled:!0,zoomWheelEnabled:!0,mouseWheelOptions:null,handleRightClicks:!1,zoomBoxKeyMask:OpenLayers.Handler.MOD_SHIFT,autoActivate:!0,initialize:function(e){this.handlers={},OpenLayers.Control.prototype.initialize.apply(this,arguments)},destroy:function(){this.deactivate(),this.dragPan&&this.dragPan.destroy(),this.dragPan=null,this.zoomBox&&this.zoomBox.destroy(),this.zoomBox=null,this.pinchZoom&&this.pinchZoom.destroy(),this.pinchZoom=null,OpenLayers.Control.prototype.destroy.apply(this,arguments)},activate:function(){return this.dragPan.activate(),this.zoomWheelEnabled&&this.handlers.wheel.activate(),this.handlers.click.activate(),this.zoomBoxEnabled&&this.zoomBox.activate(),this.pinchZoom&&this.pinchZoom.activate(),OpenLayers.Control.prototype.activate.apply(this,arguments)},deactivate:function(){return this.pinchZoom&&this.pinchZoom.deactivate(),this.zoomBox.deactivate(),this.dragPan.deactivate(),this.handlers.click.deactivate(),this.handlers.wheel.deactivate(),OpenLayers.Control.prototype.deactivate.apply(this,arguments)},draw:function(){this.handleRightClicks&&(this.map.viewPortDiv.oncontextmenu=OpenLayers.Function.False),this.handlers.click=new OpenLayers.Handler.Click(this,{click:this.defaultClick,dblclick:this.defaultDblClick,dblrightclick:this.defaultDblRightClick},{double:!0,stopDouble:!0}),this.dragPan=new OpenLayers.Control.DragPan(OpenLayers.Util.extend({map:this.map,documentDrag:this.documentDrag},this.dragPanOptions)),this.zoomBox=new OpenLayers.Control.ZoomBox({map:this.map,keyMask:this.zoomBoxKeyMask}),this.dragPan.draw(),this.zoomBox.draw(),this.handlers.wheel=new OpenLayers.Handler.MouseWheel(this,{up:this.wheelUp,down:this.wheelDown},OpenLayers.Util.extend(this.map.fractionalZoom?{}:{cumulative:!1,interval:50,maxDelta:6},this.mouseWheelOptions)),OpenLayers.Control.PinchZoom&&(this.pinchZoom=new OpenLayers.Control.PinchZoom(OpenLayers.Util.extend({map:this.map},this.pinchZoomOptions)))},defaultClick:function(e){e.lastTouches&&2==e.lastTouches.length&&this.map.zoomOut()},defaultDblClick:function(e){this.map.zoomTo(this.map.zoom+1,e.xy)},defaultDblRightClick:function(e){this.map.zoomTo(this.map.zoom-1,e.xy)},wheelChange:function(e,t){this.map.fractionalZoom||(t=Math.round(t));var i,n=this.map.getZoom();i=Math.max(n+t,0),i=Math.min(i,this.map.getNumZoomLevels()),i!==n&&this.map.zoomTo(i,e.xy)},wheelUp:function(e,t){this.wheelChange(e,t||1)},wheelDown:function(e,t){this.wheelChange(e,t||-1)},disableZoomBox:function(){this.zoomBoxEnabled=!1,this.zoomBox.deactivate()},enableZoomBox:function(){this.zoomBoxEnabled=!0,this.active&&this.zoomBox.activate()},disableZoomWheel:function(){this.zoomWheelEnabled=!1,this.handlers.wheel.deactivate()},enableZoomWheel:function(){this.zoomWheelEnabled=!0,this.active&&this.handlers.wheel.activate()},CLASS_NAME:"OpenLayers.Control.Navigation"}),OpenLayers.Events.buttonclick=OpenLayers.Class({target:null,events:"mousedown mouseup click dblclick touchstart touchmove touchend keydown".split(" "),startRegEx:/^mousedown|touchstart$/,cancelRegEx:/^touchmove$/,completeRegEx:/^mouseup|touchend$/,isDeviceTouchCapable:"ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch,initialize:function(e){for(this.target=e,e=this.events.length-1;0<=e;--e)this.target.register(this.events[e],this,this.buttonClick,{extension:!0})},destroy:function(){for(var e=this.events.length-1;0<=e;--e)this.target.unregister(this.events[e],this,this.buttonClick);delete this.target},getPressedButton:function(e){var t,i=3;do{if(OpenLayers.Element.hasClass(e,"olButton")){t=e;break}e=e.parentNode}while(0<--i&&e);return t},ignore:function(e){var t=3,i=!1;do{if("a"===e.nodeName.toLowerCase()){i=!0;break}e=e.parentNode}while(0<--t&&e);return i},buttonClick:function(e){var t=!0,i=OpenLayers.Event.element(e);if(i&&(OpenLayers.Event.isLeftClick(e)&&!this.isDeviceTouchCapable||!~e.type.indexOf("mouse")))if(i=this.getPressedButton(i)){if("keydown"===e.type)switch(e.keyCode){case OpenLayers.Event.KEY_RETURN:case OpenLayers.Event.KEY_SPACE:this.target.triggerEvent("buttonclick",{buttonElement:i}),OpenLayers.Event.stop(e),t=!1}else if(this.startEvt){if(this.completeRegEx.test(e.type)){var t=OpenLayers.Util.pagePosition(i),n=OpenLayers.Util.getViewportElement(),r=window.pageYOffset||n.scrollTop;t[0]-=window.pageXOffset||n.scrollLeft,t[1]-=r,this.target.triggerEvent("buttonclick",{buttonElement:i,buttonXY:{x:this.startEvt.clientX-t[0],y:this.startEvt.clientY-t[1]}})}this.cancelRegEx.test(e.type)&&e.touches&&this.startEvt.touches&&4<(4<Math.abs(e.touches[0].olClientX-this.startEvt.touches[0].olClientX)||Math.abs(e.touches[0].olClientY-this.startEvt.touches[0].olClientY))&&delete this.startEvt,OpenLayers.Event.stop(e),t=!1}this.startRegEx.test(e.type)&&(this.startEvt=e,OpenLayers.Event.stop(e),t=!1)}else t=!this.ignore(OpenLayers.Event.element(e)),delete this.startEvt;return t}}),OpenLayers.Control.Zoom=OpenLayers.Class(OpenLayers.Control,{zoomInText:"+",zoomInId:"olZoomInLink",zoomOutText:"−",zoomOutId:"olZoomOutLink",draw:function(){var e=OpenLayers.Control.prototype.draw.apply(this),t=this.getOrCreateLinks(e),i=t.zoomIn,t=t.zoomOut,n=this.map.events;return t.parentNode!==e&&(n=this.events,n.attachToElement(t.parentNode)),n.register("buttonclick",this,this.onZoomClick),this.zoomInLink=i,this.zoomOutLink=t,e},getOrCreateLinks:function(e){var t=document.getElementById(this.zoomInId),i=document.getElementById(this.zoomOutId);return t||(t=document.createElement("a"),t.href="#zoomIn",t.appendChild(document.createTextNode(this.zoomInText)),t.className="olControlZoomIn",e.appendChild(t)),OpenLayers.Element.addClass(t,"olButton"),i||(i=document.createElement("a"),i.href="#zoomOut",i.appendChild(document.createTextNode(this.zoomOutText)),i.className="olControlZoomOut",e.appendChild(i)),OpenLayers.Element.addClass(i,"olButton"),{zoomIn:t,zoomOut:i}},onZoomClick:function(e){e=e.buttonElement,e===this.zoomInLink?this.map.zoomIn():e===this.zoomOutLink&&this.map.zoomOut()},destroy:function(){this.map&&this.map.events.unregister("buttonclick",this,this.onZoomClick),delete this.zoomInLink,delete this.zoomOutLink,OpenLayers.Control.prototype.destroy.apply(this)},CLASS_NAME:"OpenLayers.Control.Zoom"}),OpenLayers.Control.MousePosition=OpenLayers.Class(OpenLayers.Control,{autoActivate:!0,element:null,prefix:"",separator:", ",suffix:"",numDigits:5,granularity:10,emptyString:null,lastXy:null,displayProjection:null,destroy:function(){this.deactivate(),OpenLayers.Control.prototype.destroy.apply(this,arguments)},activate:function(){return!!OpenLayers.Control.prototype.activate.apply(this,arguments)&&(this.map.events.register("mousemove",this,this.redraw),this.map.events.register("mouseout",this,this.reset),this.redraw(),!0)},deactivate:function(){return!!OpenLayers.Control.prototype.deactivate.apply(this,arguments)&&(this.map.events.unregister("mousemove",this,this.redraw),this.map.events.unregister("mouseout",this,this.reset),this.element.innerHTML="",!0)},draw:function(){return OpenLayers.Control.prototype.draw.apply(this,arguments),this.element||(this.div.left="",this.div.top="",this.element=this.div),this.div},redraw:function(e){var t;null==e?this.reset():null==this.lastXy||Math.abs(e.xy.x-this.lastXy.x)>this.granularity||Math.abs(e.xy.y-this.lastXy.y)>this.granularity?this.lastXy=e.xy:(t=this.map.getLonLatFromPixel(e.xy))&&(this.displayProjection&&t.transform(this.map.getProjectionObject(),this.displayProjection),
this.lastXy=e.xy,e=this.formatOutput(t),e!=this.element.innerHTML&&(this.element.innerHTML=e))},reset:function(e){null!=this.emptyString&&(this.element.innerHTML=this.emptyString)},formatOutput:function(e){var t=parseInt(this.numDigits);return this.prefix+e.lon.toFixed(t)+this.separator+e.lat.toFixed(t)+this.suffix},CLASS_NAME:"OpenLayers.Control.MousePosition"});OpenLayers.Control.DrawFeature=OpenLayers.Class(OpenLayers.Control,{layer:null,callbacks:null,multi:!1,featureAdded:function(){},initialize:function(e,t,i){OpenLayers.Control.prototype.initialize.apply(this,[i]),this.callbacks=OpenLayers.Util.extend({done:this.drawFeature,modify:function(e,t){this.layer.events.triggerEvent("sketchmodified",{vertex:e,feature:t})},create:function(e,t){this.layer.events.triggerEvent("sketchstarted",{vertex:e,feature:t})}},this.callbacks),this.layer=e,this.handlerOptions=this.handlerOptions||{},this.handlerOptions.layerOptions=OpenLayers.Util.applyDefaults(this.handlerOptions.layerOptions,{renderers:e.renderers,rendererOptions:e.rendererOptions}),"multi"in this.handlerOptions||(this.handlerOptions.multi=this.multi),(e=this.layer.styleMap&&this.layer.styleMap.styles.temporary)&&(this.handlerOptions.layerOptions=OpenLayers.Util.applyDefaults(this.handlerOptions.layerOptions,{styleMap:new OpenLayers.StyleMap({default:e})})),this.handler=new t(this,this.callbacks,this.handlerOptions)},drawFeature:function(e){e=new OpenLayers.Feature.Vector(e),!1!==this.layer.events.triggerEvent("sketchcomplete",{feature:e})&&(e.state=OpenLayers.State.INSERT,this.layer.addFeatures([e]),this.featureAdded(e),this.events.triggerEvent("featureadded",{feature:e}))},insertXY:function(e,t){this.handler&&this.handler.line&&this.handler.insertXY(e,t)},insertDeltaXY:function(e,t){this.handler&&this.handler.line&&this.handler.insertDeltaXY(e,t)},insertDirectionLength:function(e,t){this.handler&&this.handler.line&&this.handler.insertDirectionLength(e,t)},insertDeflectionLength:function(e,t){this.handler&&this.handler.line&&this.handler.insertDeflectionLength(e,t)},undo:function(){return this.handler.undo&&this.handler.undo()},redo:function(){return this.handler.redo&&this.handler.redo()},finishSketch:function(){this.handler.finishGeometry()},cancel:function(){this.handler.cancel()},CLASS_NAME:"OpenLayers.Control.DrawFeature"});OpenLayers.Handler.Keyboard=OpenLayers.Class(OpenLayers.Handler,{KEY_EVENTS:["keydown","keyup"],eventListener:null,observeElement:null,initialize:function(e,t,i){OpenLayers.Handler.prototype.initialize.apply(this,arguments),this.eventListener=OpenLayers.Function.bindAsEventListener(this.handleKeyEvent,this)},destroy:function(){this.deactivate(),this.eventListener=null,OpenLayers.Handler.prototype.destroy.apply(this,arguments)},activate:function(){if(OpenLayers.Handler.prototype.activate.apply(this,arguments)){this.observeElement=this.observeElement||document;for(var e=0,t=this.KEY_EVENTS.length;e<t;e++)OpenLayers.Event.observe(this.observeElement,this.KEY_EVENTS[e],this.eventListener);return!0}return!1},deactivate:function(){var e=!1;if(OpenLayers.Handler.prototype.deactivate.apply(this,arguments)){for(var e=0,t=this.KEY_EVENTS.length;e<t;e++)OpenLayers.Event.stopObserving(this.observeElement,this.KEY_EVENTS[e],this.eventListener);e=!0}return e},handleKeyEvent:function(e){this.checkModifiers(e)&&this.callback(e.type,[e])},CLASS_NAME:"OpenLayers.Handler.Keyboard"}),OpenLayers.Control.KeyboardDefaults=OpenLayers.Class(OpenLayers.Control,{autoActivate:!0,slideFactor:75,observeElement:null,draw:function(){this.handler=new OpenLayers.Handler.Keyboard(this,{keydown:this.defaultKeyPress},{observeElement:this.observeElement||document})},defaultKeyPress:function(e){var t,i=!0;if(t=OpenLayers.Event.element(e),!t||"INPUT"!=t.tagName&&"TEXTAREA"!=t.tagName&&"SELECT"!=t.tagName){switch(e.keyCode){case OpenLayers.Event.KEY_LEFT:this.map.pan(-this.slideFactor,0);break;case OpenLayers.Event.KEY_RIGHT:this.map.pan(this.slideFactor,0);break;case OpenLayers.Event.KEY_UP:this.map.pan(0,-this.slideFactor);break;case OpenLayers.Event.KEY_DOWN:this.map.pan(0,this.slideFactor);break;case 33:t=this.map.getSize(),this.map.pan(0,-.75*t.h);break;case 34:t=this.map.getSize(),this.map.pan(0,.75*t.h);break;case 35:t=this.map.getSize(),this.map.pan(.75*t.w,0);break;case 36:t=this.map.getSize(),this.map.pan(-.75*t.w,0);break;case 43:case 61:case 187:case 107:this.map.zoomIn();break;case 45:case 109:case 189:case 95:this.map.zoomOut();break;default:i=!1}i&&OpenLayers.Event.stop(e)}},CLASS_NAME:"OpenLayers.Control.KeyboardDefaults"}),OpenLayers.Control.Measure=OpenLayers.Class(OpenLayers.Control,{callbacks:null,displaySystem:"metric",geodesic:!1,displaySystemUnits:{geographic:["dd"],english:["mi","ft","in"],metric:["km","m"]},partialDelay:300,delayedTrigger:null,persist:!1,immediate:!1,initialize:function(e,t){OpenLayers.Control.prototype.initialize.apply(this,[t]);var i={done:this.measureComplete,point:this.measurePartial};this.immediate&&(i.modify=this.measureImmediate),this.callbacks=OpenLayers.Util.extend(i,this.callbacks),this.handlerOptions=OpenLayers.Util.extend({persist:this.persist},this.handlerOptions),this.handler=new e(this,this.callbacks,this.handlerOptions)},deactivate:function(){return this.cancelDelay(),OpenLayers.Control.prototype.deactivate.apply(this,arguments)},cancel:function(){this.cancelDelay(),this.handler.cancel()},setImmediate:function(e){(this.immediate=e)?this.callbacks.modify=this.measureImmediate:delete this.callbacks.modify},updateHandler:function(e,t){var i=this.active;i&&this.deactivate(),this.handler=new e(this,this.callbacks,t),i&&this.activate()},measureComplete:function(e){this.cancelDelay(),this.measure(e,"measure")},measurePartial:function(e,t){this.cancelDelay(),t=t.clone(),this.handler.freehandMode(this.handler.evt)?this.measure(t,"measurepartial"):this.delayedTrigger=window.setTimeout(OpenLayers.Function.bind(function(){this.delayedTrigger=null,this.measure(t,"measurepartial")},this),this.partialDelay)},measureImmediate:function(e,t,i){i&&!this.handler.freehandMode(this.handler.evt)&&(this.cancelDelay(),this.measure(t.geometry,"measurepartial"))},cancelDelay:function(){null!==this.delayedTrigger&&(window.clearTimeout(this.delayedTrigger),this.delayedTrigger=null)},measure:function(e,t){var i,n;-1<e.CLASS_NAME.indexOf("LineString")?(i=this.getBestLength(e),n=1):(i=this.getBestArea(e),n=2),this.events.triggerEvent(t,{measure:i[0],units:i[1],order:n,geometry:e})},getBestArea:function(e){for(var t,i,n=this.displaySystemUnits[this.displaySystem],r=0,s=n.length;r<s&&(t=n[r],i=this.getArea(e,t),!(1<i));++r);return[i,t]},getArea:function(e,t){var i,n;this.geodesic?(i=e.getGeodesicArea(this.map.getProjectionObject()),n="m"):(i=e.getArea(),n=this.map.getUnits());var r=OpenLayers.INCHES_PER_UNIT[t];return r&&(i*=Math.pow(OpenLayers.INCHES_PER_UNIT[n]/r,2)),i},getBestLength:function(e){for(var t,i,n=this.displaySystemUnits[this.displaySystem],r=0,s=n.length;r<s&&(t=n[r],i=this.getLength(e,t),!(1<i));++r);return[i,t]},getLength:function(e,t){var i,n;this.geodesic?(i=e.getGeodesicLength(this.map.getProjectionObject()),n="m"):(i=e.getLength(),n=this.map.getUnits());var r=OpenLayers.INCHES_PER_UNIT[t];return r&&(i*=OpenLayers.INCHES_PER_UNIT[n]/r),i},CLASS_NAME:"OpenLayers.Control.Measure"}),OpenLayers.Control.LayerSwitcher=OpenLayers.Class(OpenLayers.Control,{layerStates:null,layersDiv:null,baseLayersDiv:null,baseLayers:null,dataLbl:null,dataLayersDiv:null,dataLayers:null,minimizeDiv:null,maximizeDiv:null,ascending:!0,initialize:function(e){OpenLayers.Control.prototype.initialize.apply(this,arguments),this.layerStates=[]},destroy:function(){this.clearLayersArray("base"),this.clearLayersArray("data"),this.map.events.un({buttonclick:this.onButtonClick,addlayer:this.redraw,changelayer:this.redraw,removelayer:this.redraw,changebaselayer:this.redraw,scope:this}),this.events.unregister("buttonclick",this,this.onButtonClick),OpenLayers.Control.prototype.destroy.apply(this,arguments)},setMap:function(e){OpenLayers.Control.prototype.setMap.apply(this,arguments),this.map.events.on({addlayer:this.redraw,changelayer:this.redraw,removelayer:this.redraw,changebaselayer:this.redraw,scope:this}),this.outsideViewport?(this.events.attachToElement(this.div),this.events.register("buttonclick",this,this.onButtonClick)):this.map.events.register("buttonclick",this,this.onButtonClick)},draw:function(){return OpenLayers.Control.prototype.draw.apply(this),this.loadContents(),this.outsideViewport||this.minimizeControl(),this.redraw(),this.div},onButtonClick:function(e){e=e.buttonElement,e===this.minimizeDiv?this.minimizeControl():e===this.maximizeDiv?this.maximizeControl():e._layerSwitcher===this.id&&(e.for&&(e=document.getElementById(e.for)),e.disabled||("radio"==e.type?(e.checked=!0,this.map.setBaseLayer(this.map.getLayer(e._layer))):(e.checked=!e.checked,this.updateMap())))},clearLayersArray:function(e){this[e+"LayersDiv"].innerHTML="",this[e+"Layers"]=[]},checkRedraw:function(){if(!this.layerStates.length||this.map.layers.length!=this.layerStates.length)return!0;for(var e=0,t=this.layerStates.length;e<t;e++){var i=this.layerStates[e],n=this.map.layers[e];if(i.name!=n.name||i.inRange!=n.inRange||i.id!=n.id||i.visibility!=n.visibility)return!0}return!1},redraw:function(){if(!this.checkRedraw())return this.div;this.clearLayersArray("base"),this.clearLayersArray("data");var e=!1,t=!1,i=this.map.layers.length;this.layerStates=Array(i);for(var n=0;n<i;n++){var r=this.map.layers[n];this.layerStates[n]={name:r.name,visibility:r.visibility,inRange:r.inRange,id:r.id}}var s=this.map.layers.slice();for(this.ascending||s.reverse(),n=0,i=s.length;n<i;n++){var r=s[n],o=r.isBaseLayer;if(r.displayInLayerSwitcher){o?t=!0:e=!0;var a=o?r==this.map.baseLayer:r.getVisibility(),l=document.createElement("input"),h=OpenLayers.Util.createUniqueID(this.id+"_input_");l.id=h,l.name=o?this.id+"_baseLayers":r.name,l.type=o?"radio":"checkbox",l.value=r.name,l.checked=a,l.defaultChecked=a,l.className="olButton",l._layer=r.id,l._layerSwitcher=this.id,o||r.inRange||(l.disabled=!0),a=document.createElement("label"),a.for=l.id,OpenLayers.Element.addClass(a,"labelSpan olButton"),a._layer=r.id,a._layerSwitcher=this.id,o||r.inRange||(a.style.color="gray"),a.innerHTML=r.name,a.style.verticalAlign=o?"bottom":"baseline",h=document.createElement("br"),(o?this.baseLayers:this.dataLayers).push({layer:r,inputElem:l,labelSpan:a}),r=o?this.baseLayersDiv:this.dataLayersDiv,r.appendChild(l),r.appendChild(a),r.appendChild(h)}}return this.dataLbl.style.display=e?"":"none",this.baseLbl.style.display=t?"":"none",this.div},updateMap:function(){for(var e=0,t=this.baseLayers.length;e<t;e++){var i=this.baseLayers[e];i.inputElem.checked&&this.map.setBaseLayer(i.layer,!1)}for(e=0,t=this.dataLayers.length;e<t;e++)i=this.dataLayers[e],i.layer.setVisibility(i.inputElem.checked)},maximizeControl:function(e){this.div.style.width="",this.div.style.height="",this.showControls(!1),null!=e&&OpenLayers.Event.stop(e)},minimizeControl:function(e){this.div.style.width="0px",this.div.style.height="0px",this.showControls(!0),null!=e&&OpenLayers.Event.stop(e)},showControls:function(e){this.maximizeDiv.style.display=e?"":"none",this.minimizeDiv.style.display=e?"none":"",this.layersDiv.style.display=e?"none":""},loadContents:function(){this.layersDiv=document.createElement("div"),this.layersDiv.id=this.id+"_layersDiv",OpenLayers.Element.addClass(this.layersDiv,"layersDiv"),this.baseLbl=document.createElement("div"),this.baseLbl.innerHTML=OpenLayers.i18n("Base Layer"),OpenLayers.Element.addClass(this.baseLbl,"baseLbl"),this.baseLayersDiv=document.createElement("div"),OpenLayers.Element.addClass(this.baseLayersDiv,"baseLayersDiv"),this.dataLbl=document.createElement("div"),this.dataLbl.innerHTML=OpenLayers.i18n("Overlays"),OpenLayers.Element.addClass(this.dataLbl,"dataLbl"),this.dataLayersDiv=document.createElement("div"),OpenLayers.Element.addClass(this.dataLayersDiv,"dataLayersDiv"),this.ascending?(this.layersDiv.appendChild(this.baseLbl),this.layersDiv.appendChild(this.baseLayersDiv),this.layersDiv.appendChild(this.dataLbl),this.layersDiv.appendChild(this.dataLayersDiv)):(this.layersDiv.appendChild(this.dataLbl),this.layersDiv.appendChild(this.dataLayersDiv),this.layersDiv.appendChild(this.baseLbl),this.layersDiv.appendChild(this.baseLayersDiv)),this.div.appendChild(this.layersDiv);var e=OpenLayers.Util.getImageLocation("layer-switcher-maximize.png");this.maximizeDiv=OpenLayers.Util.createAlphaImageDiv("OpenLayers_Control_MaximizeDiv",null,null,e,"absolute"),OpenLayers.Element.addClass(this.maximizeDiv,"maximizeDiv olButton"),this.maximizeDiv.style.display="none",this.div.appendChild(this.maximizeDiv),e=OpenLayers.Util.getImageLocation("layer-switcher-minimize.png"),this.minimizeDiv=OpenLayers.Util.createAlphaImageDiv("OpenLayers_Control_MinimizeDiv",null,null,e,"absolute"),OpenLayers.Element.addClass(this.minimizeDiv,"minimizeDiv olButton"),this.minimizeDiv.style.display="none",this.div.appendChild(this.minimizeDiv)},CLASS_NAME:"OpenLayers.Control.LayerSwitcher"}),OpenLayers.Control.ModifyFeature=OpenLayers.Class(OpenLayers.Control,{bySegment:!1,documentDrag:!1,geometryTypes:null,clickout:!0,toggle:!0,standalone:!1,layer:null,feature:null,vertex:null,vertices:null,virtualVertices:null,handlers:null,deleteCodes:null,virtualStyle:null,vertexRenderIntent:null,mode:null,createVertices:!0,modified:!1,radiusHandle:null,dragHandle:null,onModificationStart:function(){},onModification:function(){},onModificationEnd:function(){},initialize:function(e,t){t=t||{},this.layer=e,this.vertices=[],this.virtualVertices=[],this.virtualStyle=OpenLayers.Util.extend({},this.layer.style||this.layer.styleMap.createSymbolizer(null,t.vertexRenderIntent)),this.virtualStyle.fillOpacity=.3,this.virtualStyle.strokeOpacity=.3,this.deleteCodes=[46,68],this.mode=OpenLayers.Control.ModifyFeature.RESHAPE,OpenLayers.Control.prototype.initialize.apply(this,[t]),OpenLayers.Util.isArray(this.deleteCodes)||(this.deleteCodes=[this.deleteCodes]);var i=this,n={documentDrag:this.documentDrag,setEvent:function(e){var t=i.feature;i._lastVertex=t?t.layer.getFeatureFromEvent(e):null,OpenLayers.Handler.Drag.prototype.setEvent.apply(this,arguments)},stopDown:!1};if(this.handlers={keyboard:new OpenLayers.Handler.Keyboard(this,{keydown:this.handleKeypress}),drag:new OpenLayers.Handler.Drag(this,{down:function(e){this.vertex=null,(e=this.layer.getFeatureFromEvent(this.handlers.drag.evt))?this.dragStart(e):this.clickout&&(this._unselect=this.feature)},move:function(e){delete this._unselect,this.vertex&&this.dragVertex(this.vertex,e)},up:function(){this.handlers.drag.stopDown=!1,this._unselect&&(this.unselectFeature(this._unselect),delete this._unselect)},done:function(e){this.vertex&&this.dragComplete(this.vertex)}},n)},this.bySegment){if(!window.rbush)throw Error("The rbush library is required");if(!OpenLayers.Control.ModifyFeature.BySegment)throw Error("OpenLayers.Control.ModifyFeature.BySegment is missing from the build");OpenLayers.Util.extend(this,OpenLayers.Control.ModifyFeature.BySegment)}},createVirtualVertex:function(e,t){var i=new OpenLayers.Feature.Vector(new OpenLayers.Geometry.Point((e.x+t.x)/2,(e.y+t.y)/2),null,this.virtualStyle);return i._sketch=!0,i},destroy:function(){this.map&&this.map.events.un({removelayer:this.handleMapEvents,changelayer:this.handleMapEvents,scope:this}),this.layer=null,OpenLayers.Control.prototype.destroy.apply(this,[])},activate:function(){return!!OpenLayers.Control.prototype.activate.apply(this,arguments)&&(this.moveLayerToTop(),this.map.events.on({removelayer:this.handleMapEvents,changelayer:this.handleMapEvents,scope:this}),this._lastVertex=null,this.handlers.keyboard.activate()&&this.handlers.drag.activate())},deactivate:function(){var e=!1;return OpenLayers.Control.prototype.deactivate.apply(this,arguments)&&(this.moveLayerBack(),this.map.events.un({removelayer:this.handleMapEvents,changelayer:this.handleMapEvents,scope:this}),this.layer.removeFeatures(this.vertices,{silent:!0}),this.layer.removeFeatures(this.virtualVertices,{silent:!0}),this.vertices=[],this.handlers.drag.deactivate(),this.handlers.keyboard.deactivate(),(e=this.feature)&&e.geometry&&e.layer&&this.unselectFeature(e),e=!0),e},beforeSelectFeature:function(e){return this.layer.events.triggerEvent("beforefeaturemodified",{feature:e})},selectFeature:function(e){var t=OpenLayers.Util.indexOf;this.feature===e||this.geometryTypes&&-1==t(this.geometryTypes,e.geometry.CLASS_NAME)||(!1!==this.beforeSelectFeature(e)&&(this.feature&&this.unselectFeature(this.feature),this.feature=e,-1==t(this.layer.selectedFeatures,e)&&this.layer.selectedFeatures.push(e),this.layer.drawFeature(e,"select"),this.modified=!1,this.resetVertices(),this.onModificationStart(this.feature)),t=e.modified,!e.geometry||t&&t.geometry||(this._originalGeometry=e.geometry.clone()))},unselectFeature:function(e){this.layer.removeFeatures(this.vertices,{silent:!0}),this.vertices=[],this.layer.destroyFeatures(this.virtualVertices,{silent:!0}),this.virtualVertices=[],this.dragHandle&&(this.layer.destroyFeatures([this.dragHandle],{silent:!0}),delete this.dragHandle),this.radiusHandle&&(this.layer.destroyFeatures([this.radiusHandle],{silent:!0}),delete this.radiusHandle),this.layer.drawFeature(this.feature,"default"),this.feature=null,OpenLayers.Util.removeItem(this.layer.selectedFeatures,e),this.onModificationEnd(e),this.layer.events.triggerEvent("afterfeaturemodified",{feature:e,modified:this.modified}),this.modified=!1},dragStart:function(e){var t="OpenLayers.Geometry.Point"==e.geometry.CLASS_NAME;this.standalone||(e._sketch||!t)&&e._sketch||(this.toggle&&this.feature===e&&(this._unselect=e),this.selectFeature(e)),this.feature&&(e._sketch||t&&e===this.feature)&&(this.vertex=e,this.handlers.drag.stopDown=!0)},dragVertex:function(e,t){var i=this.map.getLonLatFromViewPortPx(t),n=e.geometry;n.move(i.lon-n.x,i.lat-n.y),this.modified=!0,"OpenLayers.Geometry.Point"==this.feature.geometry.CLASS_NAME?this.layer.events.triggerEvent("vertexmodified",{vertex:e.geometry,feature:this.feature,pixel:t}):(e._index?(-1==e._index&&(e._index=OpenLayers.Util.indexOf(e.geometry.parent.components,e._next)),e.geometry.parent.addComponent(e.geometry,e._index),delete e._index,OpenLayers.Util.removeItem(this.virtualVertices,e),this.vertices.push(e)):e==this.dragHandle?(this.layer.removeFeatures(this.vertices,{silent:!0}),this.vertices=[],this.radiusHandle&&(this.layer.destroyFeatures([this.radiusHandle],{silent:!0}),this.radiusHandle=null)):e!==this.radiusHandle&&this.layer.events.triggerEvent("vertexmodified",{vertex:e.geometry,feature:this.feature,pixel:t}),0<this.virtualVertices.length&&(this.layer.destroyFeatures(this.virtualVertices,{silent:!0}),this.virtualVertices=[]),this.layer.drawFeature(this.feature,this.standalone?void 0:"select")),this.layer.drawFeature(e)},dragComplete:function(e){this.resetVertices(),this.setFeatureState(),this.onModification(this.feature),this.layer.events.triggerEvent("featuremodified",{feature:this.feature})},setFeatureState:function(){if(this.feature.state!=OpenLayers.State.INSERT&&this.feature.state!=OpenLayers.State.DELETE&&(this.feature.state=OpenLayers.State.UPDATE,this.modified&&this._originalGeometry)){var e=this.feature;e.modified=OpenLayers.Util.extend(e.modified,{geometry:this._originalGeometry}),delete this._originalGeometry}},resetVertices:function(){0<this.vertices.length&&(this.layer.removeFeatures(this.vertices,{silent:!0}),this.vertices=[]),0<this.virtualVertices.length&&(this.layer.removeFeatures(this.virtualVertices,{silent:!0}),this.virtualVertices=[]),this.dragHandle&&(this.layer.destroyFeatures([this.dragHandle],{silent:!0}),this.dragHandle=null),this.radiusHandle&&(this.layer.destroyFeatures([this.radiusHandle],{silent:!0}),this.radiusHandle=null),this.feature&&"OpenLayers.Geometry.Point"!=this.feature.geometry.CLASS_NAME&&(this.mode&OpenLayers.Control.ModifyFeature.DRAG&&this.collectDragHandle(),this.mode&(OpenLayers.Control.ModifyFeature.ROTATE|OpenLayers.Control.ModifyFeature.RESIZE)&&this.collectRadiusHandle(),this.mode&OpenLayers.Control.ModifyFeature.RESHAPE&&(this.mode&OpenLayers.Control.ModifyFeature.RESIZE||this.collectVertices()))},handleKeypress:function(e){var t=e.keyCode;this.feature&&-1!=OpenLayers.Util.indexOf(this.deleteCodes,t)&&(t=this._lastVertex)&&-1!=OpenLayers.Util.indexOf(this.vertices,t)&&!this.handlers.drag.dragging&&t.geometry.parent&&(t.geometry.parent.removeComponent(t.geometry),this.layer.events.triggerEvent("vertexremoved",{vertex:t.geometry,feature:this.feature,pixel:e.xy}),this.layer.drawFeature(this.feature,this.standalone?void 0:"select"),this.modified=!0,this.resetVertices(),this.setFeatureState(),this.onModification(this.feature),this.layer.events.triggerEvent("featuremodified",{feature:this.feature}))},collectVertices:function(){function e(i){var n,r,s;if("OpenLayers.Geometry.Point"==i.CLASS_NAME)r=new OpenLayers.Feature.Vector(i),r._sketch=!0,r.renderIntent=t.vertexRenderIntent,t.vertices.push(r);else{for(s=i.components.length,"OpenLayers.Geometry.LinearRing"==i.CLASS_NAME&&--s,n=0;n<s;++n)r=i.components[n],"OpenLayers.Geometry.Point"==r.CLASS_NAME?(r=new OpenLayers.Feature.Vector(r),r._sketch=!0,r.renderIntent=t.vertexRenderIntent,t.vertices.push(r)):e(r);if(t.createVertices&&"OpenLayers.Geometry.MultiPoint"!=i.CLASS_NAME)for(n=0,s=i.components.length;n<s-1;++n){r=i.components[n];var o=i.components[n+1];"OpenLayers.Geometry.Point"==r.CLASS_NAME&&"OpenLayers.Geometry.Point"==o.CLASS_NAME&&(r=t.createVirtualVertex.call(t,r,o),r.geometry.parent=i,r._index=n+1,t.virtualVertices.push(r))}}}this.vertices=[],this.virtualVertices=[];var t=this;e.call(this,this.feature.geometry),this.layer.addFeatures(this.virtualVertices,{silent:!0}),this.layer.addFeatures(this.vertices,{silent:!0})},collectDragHandle:function(){var e=this.feature.geometry,t=e.getBounds().getCenterLonLat(),t=new OpenLayers.Geometry.Point(t.lon,t.lat),i=new OpenLayers.Feature.Vector(t);t.move=function(t,i){OpenLayers.Geometry.Point.prototype.move.call(this,t,i),e.move(t,i)},i._sketch=!0,this.dragHandle=i,this.dragHandle.renderIntent=this.vertexRenderIntent,this.layer.addFeatures([this.dragHandle],{silent:!0})},collectRadiusHandle:function(){var e=this.feature.geometry,t=e.getBounds(),i=t.getCenterLonLat(),n=new OpenLayers.Geometry.Point(i.lon,i.lat),t=new OpenLayers.Geometry.Point(t.right,t.bottom),i=new OpenLayers.Feature.Vector(t),r=this.mode&OpenLayers.Control.ModifyFeature.RESIZE,s=this.mode&OpenLayers.Control.ModifyFeature.RESHAPE,o=this.mode&OpenLayers.Control.ModifyFeature.ROTATE;t.move=function(t,i){OpenLayers.Geometry.Point.prototype.move.call(this,t,i);var a=this.x-n.x,l=this.y-n.y,h=a-t,u=l-i;if(o&&e.rotate(180/Math.PI*(Math.atan2(l,a)-Math.atan2(u,h)),n),r){var c;s?(l/=u,c=a/h/l):l=Math.sqrt(a*a+l*l)/Math.sqrt(h*h+u*u),e.resize(l,n,c)}},i._sketch=!0,this.radiusHandle=i,this.radiusHandle.renderIntent=this.vertexRenderIntent,this.layer.addFeatures([this.radiusHandle],{silent:!0})},setMap:function(e){this.handlers.drag.setMap(e),OpenLayers.Control.prototype.setMap.apply(this,arguments)},handleMapEvents:function(e){"removelayer"!=e.type&&"order"!=e.property||this.moveLayerToTop()},moveLayerToTop:function(){var e=Math.max(this.map.Z_INDEX_BASE.Feature-1,this.layer.getZIndex())+1;this.layer.setZIndex(e)},moveLayerBack:function(){var e=this.layer.getZIndex()-1;e>=this.map.Z_INDEX_BASE.Feature?this.layer.setZIndex(e):this.map.setLayerZIndex(this.layer,this.map.getLayerIndex(this.layer))},CLASS_NAME:"OpenLayers.Control.ModifyFeature"}),OpenLayers.Control.ModifyFeature.RESHAPE=1,OpenLayers.Control.ModifyFeature.RESIZE=2,OpenLayers.Control.ModifyFeature.ROTATE=4,OpenLayers.Control.ModifyFeature.DRAG=8,OpenLayers.Handler.Feature=OpenLayers.Class(OpenLayers.Handler,{EVENTMAP:{click:{in:"click",out:"clickout"},mousemove:{in:"over",out:"out"},dblclick:{in:"dblclick",out:null},mousedown:{in:null,out:null},mouseup:{in:null,out:null},touchstart:{in:"click",out:"clickout"}},feature:null,lastFeature:null,down:null,up:null,clickTolerance:4,geometryTypes:null,stopClick:!0,stopDown:!0,stopUp:!1,initialize:function(e,t,i,n){OpenLayers.Handler.prototype.initialize.apply(this,[e,i,n]),this.layer=t},touchstart:function(e){return this.startTouch(),!!OpenLayers.Event.isMultiTouch(e)||this.mousedown(e)},touchmove:function(e){OpenLayers.Event.preventDefault(e)},mousedown:function(e){return(OpenLayers.Event.isLeftClick(e)||OpenLayers.Event.isSingleTouch(e))&&(this.down=e.xy),!this.handle(e)||!this.stopDown},mouseup:function(e){return this.up=e.xy,!this.handle(e)||!this.stopUp},click:function(e){return!this.handle(e)||!this.stopClick},mousemove:function(e){return!this.callbacks.over&&!this.callbacks.out||(this.handle(e),!0)},dblclick:function(e){return!this.handle(e)},geometryTypeMatches:function(e){return null==this.geometryTypes||-1<OpenLayers.Util.indexOf(this.geometryTypes,e.geometry.CLASS_NAME)},handle:function(e){this.feature&&!this.feature.layer&&(this.feature=null);var t=e.type,i=!1,n=!!this.feature,r="click"==t||"dblclick"==t||"touchstart"==t;return(this.feature=this.layer.getFeatureFromEvent(e))&&!this.feature.layer&&(this.feature=null),this.lastFeature&&!this.lastFeature.layer&&(this.lastFeature=null),this.feature?("touchstart"===t&&OpenLayers.Event.preventDefault(e),e=this.feature!=this.lastFeature,this.geometryTypeMatches(this.feature)?(n&&e?(this.lastFeature&&this.triggerCallback(t,"out",[this.lastFeature]),this.triggerCallback(t,"in",[this.feature])):n&&!r||this.triggerCallback(t,"in",[this.feature]),this.lastFeature=this.feature,i=!0):(this.lastFeature&&(n&&e||r)&&this.triggerCallback(t,"out",[this.lastFeature]),this.feature=null)):this.lastFeature&&(n||r)&&this.triggerCallback(t,"out",[this.lastFeature]),i},triggerCallback:function(e,t,i){(t=this.EVENTMAP[e][t])&&("click"==e&&this.up&&this.down?(Math.sqrt(Math.pow(this.up.x-this.down.x,2)+Math.pow(this.up.y-this.down.y,2))<=this.clickTolerance&&this.callback(t,i),this.up=this.down=null):this.callback(t,i))},activate:function(){var e=!1;return OpenLayers.Handler.prototype.activate.apply(this,arguments)&&(this.moveLayerToTop(),this.map.events.on({removelayer:this.handleMapEvents,changelayer:this.handleMapEvents,scope:this}),e=!0),e},deactivate:function(){var e=!1;return OpenLayers.Handler.prototype.deactivate.apply(this,arguments)&&(this.moveLayerBack(),this.up=this.down=this.lastFeature=this.feature=null,this.map.events.un({removelayer:this.handleMapEvents,changelayer:this.handleMapEvents,scope:this}),e=!0),e},handleMapEvents:function(e){"removelayer"!=e.type&&"order"!=e.property||this.moveLayerToTop()},moveLayerToTop:function(){var e=Math.max(this.map.Z_INDEX_BASE.Feature-1,this.layer.getZIndex())+1;this.layer.setZIndex(e)},moveLayerBack:function(){var e=this.layer.getZIndex()-1;e>=this.map.Z_INDEX_BASE.Feature?this.layer.setZIndex(e):this.map.setLayerZIndex(this.layer,this.map.getLayerIndex(this.layer))},CLASS_NAME:"OpenLayers.Handler.Feature"}),OpenLayers.Layer.Vector.RootContainer=OpenLayers.Class(OpenLayers.Layer.Vector,{displayInLayerSwitcher:!1,layers:null,display:function(){},getFeatureFromEvent:function(e){for(var t,i=this.layers,n=0;n<i.length;n++)if(t=i[n].getFeatureFromEvent(e))return t},setMap:function(e){OpenLayers.Layer.Vector.prototype.setMap.apply(this,arguments),this.collectRoots(),e.events.register("changelayer",this,this.handleChangeLayer)},removeMap:function(e){e.events.unregister("changelayer",this,this.handleChangeLayer),this.resetRoots(),OpenLayers.Layer.Vector.prototype.removeMap.apply(this,arguments)},collectRoots:function(){for(var e,t=0;t<this.map.layers.length;++t)e=this.map.layers[t],-1!=OpenLayers.Util.indexOf(this.layers,e)&&e.renderer.moveRoot(this.renderer)},resetRoots:function(){for(var e,t=0;t<this.layers.length;++t)e=this.layers[t],this.renderer&&e.renderer.getRenderLayerId()==this.id&&this.renderer.moveRoot(e.renderer)},handleChangeLayer:function(e){var t=e.layer;"order"==e.property&&-1!=OpenLayers.Util.indexOf(this.layers,t)&&(this.resetRoots(),this.collectRoots())},CLASS_NAME:"OpenLayers.Layer.Vector.RootContainer"}),OpenLayers.Control.SelectFeature=OpenLayers.Class(OpenLayers.Control,{multipleKey:null,toggleKey:null,multiple:!1,clickout:!0,toggle:!1,hover:!1,highlightOnly:!1,box:!1,onBeforeSelect:function(){},onSelect:function(){},onUnselect:function(){},scope:null,geometryTypes:null,layer:null,layers:null,callbacks:null,selectStyle:null,renderIntent:"select",handlers:null,initialize:function(e,t){OpenLayers.Control.prototype.initialize.apply(this,[t]),null===this.scope&&(this.scope=this),this.initLayer(e);var i={click:this.clickFeature,clickout:this.clickoutFeature};this.hover&&(i.over=this.overFeature,i.out=this.outFeature),this.callbacks=OpenLayers.Util.extend(i,this.callbacks),this.handlers={feature:new OpenLayers.Handler.Feature(this,this.layer,this.callbacks,{geometryTypes:this.geometryTypes})},this.box&&(this.handlers.box=new OpenLayers.Handler.Box(this,{done:this.selectBox},{boxDivClassName:"olHandlerBoxSelectFeature"}))},initLayer:function(e){OpenLayers.Util.isArray(e)?(this.layers=e,this.layer=new OpenLayers.Layer.Vector.RootContainer(this.id+"_container",{layers:e})):this.layer=e},destroy:function(){this.active&&this.layers&&this.map.removeLayer(this.layer),OpenLayers.Control.prototype.destroy.apply(this,arguments),this.layers&&this.layer.destroy()},activate:function(){return this.active||(this.layers&&this.map.addLayer(this.layer),this.handlers.feature.activate(),this.box&&this.handlers.box&&this.handlers.box.activate()),OpenLayers.Control.prototype.activate.apply(this,arguments)},deactivate:function(){return this.active&&(this.handlers.feature.deactivate(),this.handlers.box&&this.handlers.box.deactivate(),this.layers&&this.map.removeLayer(this.layer)),OpenLayers.Control.prototype.deactivate.apply(this,arguments)},unselectAll:function(e){var t,i,n,r,s=this.layers||[this.layer];for(n=0;n<s.length;++n)if(t=s[n],r=0,null!=t.selectedFeatures)for(;t.selectedFeatures.length>r;)i=t.selectedFeatures[r],e&&e.except==i?++r:this.unselect(i)},clickFeature:function(e){this.hover||(-1<OpenLayers.Util.indexOf(e.layer.selectedFeatures,e)?this.toggleSelect()?this.unselect(e):this.multipleSelect()||this.unselectAll({except:e}):(this.multipleSelect()||this.unselectAll({except:e}),this.select(e)))},multipleSelect:function(){return this.multiple||this.handlers.feature.evt&&this.handlers.feature.evt[this.multipleKey]},toggleSelect:function(){return this.toggle||this.handlers.feature.evt&&this.handlers.feature.evt[this.toggleKey]},clickoutFeature:function(e){!this.hover&&this.clickout&&this.unselectAll()},overFeature:function(e){var t=e.layer;this.hover&&(this.highlightOnly?this.highlight(e):-1==OpenLayers.Util.indexOf(t.selectedFeatures,e)&&this.select(e))},outFeature:function(e){if(this.hover)if(this.highlightOnly){if(e._lastHighlighter==this.id)if(e._prevHighlighter&&e._prevHighlighter!=this.id){delete e._lastHighlighter;var t=this.map.getControl(e._prevHighlighter);t&&t.highlight(e)}else this.unhighlight(e)}else this.unselect(e)},highlight:function(e){var t=e.layer;!1!==this.events.triggerEvent("beforefeaturehighlighted",{feature:e})&&(e._prevHighlighter=e._lastHighlighter,e._lastHighlighter=this.id,t.drawFeature(e,this.selectStyle||this.renderIntent),this.events.triggerEvent("featurehighlighted",{feature:e}))},unhighlight:function(e){var t=e.layer;void 0==e._prevHighlighter?delete e._lastHighlighter:(e._prevHighlighter!=this.id&&(e._lastHighlighter=e._prevHighlighter),delete e._prevHighlighter),t.drawFeature(e,e.style||e.layer.style||"default"),this.events.triggerEvent("featureunhighlighted",{feature:e})},select:function(e){var t=this.onBeforeSelect.call(this.scope,e),i=e.layer;!1!==t&&(t=i.events.triggerEvent("beforefeatureselected",{feature:e}),!1!==t&&(i.selectedFeatures.push(e),this.highlight(e),this.handlers.feature.lastFeature||(this.handlers.feature.lastFeature=i.selectedFeatures[0]),i.events.triggerEvent("featureselected",{
feature:e}),this.onSelect.call(this.scope,e)))},unselect:function(e){var t=e.layer;this.unhighlight(e),OpenLayers.Util.removeItem(t.selectedFeatures,e),t.events.triggerEvent("featureunselected",{feature:e}),this.onUnselect.call(this.scope,e)},selectBox:function(e){if(e instanceof OpenLayers.Bounds){var t=this.map.getLonLatFromPixel({x:e.left,y:e.bottom});e=this.map.getLonLatFromPixel({x:e.right,y:e.top}),t=new OpenLayers.Bounds(t.lon,t.lat,e.lon,e.lat),this.multipleSelect()||this.unselectAll(),e=this.multiple,this.multiple=!0;var i=this.layers||[this.layer];this.events.triggerEvent("boxselectionstart",{layers:i});for(var n,r=0;r<i.length;++r){n=i[r];for(var s=0,o=n.features.length;s<o;++s){var a=n.features[s];a.getVisibility()&&(null==this.geometryTypes||-1<OpenLayers.Util.indexOf(this.geometryTypes,a.geometry.CLASS_NAME))&&t.toGeometry().intersects(a.geometry)&&-1==OpenLayers.Util.indexOf(n.selectedFeatures,a)&&this.select(a)}}this.multiple=e,this.events.triggerEvent("boxselectionend",{layers:i})}},setMap:function(e){this.handlers.feature.setMap(e),this.box&&this.handlers.box.setMap(e),OpenLayers.Control.prototype.setMap.apply(this,arguments)},setLayer:function(e){var t=this.active;this.unselectAll(),this.deactivate(),this.layers&&(this.layer.destroy(),this.layers=null),this.initLayer(e),this.handlers.feature.layer=this.layer,t&&this.activate()},addLayer:function(e){var t=this.active;this.deactivate(),null==this.layers?null!=this.layer?(this.layers=[this.layer],this.layers.push(e)):this.layers=[e]:this.layers.push(e),this.initLayer(this.layers),this.handlers.feature.layer=this.layer,t&&this.activate()},CLASS_NAME:"OpenLayers.Control.SelectFeature"}),OpenLayers.Handler.Pinch=OpenLayers.Class(OpenLayers.Handler,{started:!1,stopDown:!1,pinching:!1,last:null,start:null,touchstart:function(e){var t=!0;if(this.pinching=!1,OpenLayers.Event.isMultiTouch(e))this.started=!0,this.last=this.start={distance:this.getDistance(e.touches),delta:0,scale:1},this.callback("start",[e,this.start]),t=!this.stopDown;else{if(this.started)return!1;this.started=!1,this.last=this.start=null}return OpenLayers.Event.preventDefault(e),t},touchmove:function(e){if(this.started&&OpenLayers.Event.isMultiTouch(e)){this.pinching=!0;var t=this.getPinchData(e);this.callback("move",[e,t]),this.last=t,OpenLayers.Event.stop(e)}else if(this.started)return!1;return!0},touchend:function(e){return!(this.started&&!OpenLayers.Event.isMultiTouch(e))||(this.pinching=this.started=!1,this.callback("done",[e,this.start,this.last]),this.last=this.start=null,!1)},activate:function(){var e=!1;return OpenLayers.Handler.prototype.activate.apply(this,arguments)&&(this.pinching=!1,e=!0),e},deactivate:function(){var e=!1;return OpenLayers.Handler.prototype.deactivate.apply(this,arguments)&&(this.pinching=this.started=!1,this.last=this.start=null,e=!0),e},getDistance:function(e){var t=e[0];return e=e[1],Math.sqrt(Math.pow(t.olClientX-e.olClientX,2)+Math.pow(t.olClientY-e.olClientY,2))},getPinchData:function(e){return e=this.getDistance(e.touches),{distance:e,delta:this.last.distance-e,scale:e/this.start.distance}},CLASS_NAME:"OpenLayers.Handler.Pinch"}),OpenLayers.Control.PinchZoom=OpenLayers.Class(OpenLayers.Control,{type:OpenLayers.Control.TYPE_TOOL,pinchOrigin:null,currentCenter:null,autoActivate:!0,preserveCenter:!1,initialize:function(e){OpenLayers.Control.prototype.initialize.apply(this,arguments),this.handler=new OpenLayers.Handler.Pinch(this,{start:this.pinchStart,move:this.pinchMove,done:this.pinchDone},this.handlerOptions)},pinchStart:function(e,t){var i=this.preserveCenter?this.map.getPixelFromLonLat(this.map.getCenter()):e.xy;this.currentCenter=this.pinchOrigin=i},pinchMove:function(e,t){var i=t.scale,n=this.map.layerContainerOriginPx,r=this.pinchOrigin,s=this.preserveCenter?this.map.getPixelFromLonLat(this.map.getCenter()):e.xy;this.map.applyTransform(Math.round(n.x+s.x-r.x+(i-1)*(n.x-r.x)),Math.round(n.y+s.y-r.y+(i-1)*(n.y-r.y)),i),this.currentCenter=s},pinchDone:function(e,t,i){if(this.map.applyTransform(),e=this.map.getZoomForResolution(this.map.getResolution()/i.scale,!0),e!==this.map.getZoom()||!this.currentCenter.equals(this.pinchOrigin)){t=this.map.getResolutionForZoom(e),i=this.map.getLonLatFromPixel(this.pinchOrigin);var n=this.currentCenter,r=this.map.getSize();i.lon+=t*(r.w/2-n.x),i.lat-=t*(r.h/2-n.y),this.map.div.clientWidth=this.map.div.clientWidth,this.map.setCenter(i,e)}},CLASS_NAME:"OpenLayers.Control.PinchZoom"}),OpenLayers.Control.TouchNavigation=OpenLayers.Class(OpenLayers.Control,{dragPan:null,dragPanOptions:null,pinchZoom:null,pinchZoomOptions:null,clickHandlerOptions:null,documentDrag:!1,autoActivate:!0,initialize:function(e){this.handlers={},OpenLayers.Control.prototype.initialize.apply(this,arguments)},destroy:function(){this.deactivate(),this.dragPan&&this.dragPan.destroy(),this.dragPan=null,this.pinchZoom&&(this.pinchZoom.destroy(),delete this.pinchZoom),OpenLayers.Control.prototype.destroy.apply(this,arguments)},activate:function(){return!!OpenLayers.Control.prototype.activate.apply(this,arguments)&&(this.dragPan.activate(),this.handlers.click.activate(),this.pinchZoom.activate(),!0)},deactivate:function(){return!!OpenLayers.Control.prototype.deactivate.apply(this,arguments)&&(this.dragPan.deactivate(),this.handlers.click.deactivate(),this.pinchZoom.deactivate(),!0)},draw:function(){var e={click:this.defaultClick,dblclick:this.defaultDblClick},t=OpenLayers.Util.extend({double:!0,stopDouble:!0,pixelTolerance:2},this.clickHandlerOptions);this.handlers.click=new OpenLayers.Handler.Click(this,e,t),this.dragPan=new OpenLayers.Control.DragPan(OpenLayers.Util.extend({map:this.map,documentDrag:this.documentDrag},this.dragPanOptions)),this.dragPan.draw(),this.pinchZoom=new OpenLayers.Control.PinchZoom(OpenLayers.Util.extend({map:this.map},this.pinchZoomOptions))},defaultClick:function(e){e.lastTouches&&2==e.lastTouches.length&&this.map.zoomOut()},defaultDblClick:function(e){this.map.zoomTo(this.map.zoom+1,e.xy)},CLASS_NAME:"OpenLayers.Control.TouchNavigation"}),OpenLayers.Format=OpenLayers.Class({options:null,externalProjection:null,internalProjection:null,data:null,keepData:!1,initialize:function(e){OpenLayers.Util.extend(this,e),this.options=e},destroy:function(){},read:function(e){throw Error("Read not implemented.")},write:function(e){throw Error("Write not implemented.")},CLASS_NAME:"OpenLayers.Format"}),OpenLayers.Format.JSON=OpenLayers.Class(OpenLayers.Format,{indent:"    ",space:" ",newline:"\n",level:0,pretty:!1,nativeJSON:function(){return!(!window.JSON||"function"!=typeof JSON.parse||"function"!=typeof JSON.stringify)}(),read:function(a,b){var c;if(this.nativeJSON)c=JSON.parse(a,b);else try{if(/^[\],:{}\s]*$/.test(a.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))&&(c=eval("("+a+")"),"function"==typeof b)){var d=function(e,t){if(t&&"object"==typeof t)for(var i in t)t.hasOwnProperty(i)&&(t[i]=d(i,t[i]));return b(e,t)};c=d("",c)}}catch(e){}return this.keepData&&(this.data=c),c},write:function(e,t){this.pretty=!!t;var i=null,n=typeof e;if(this.serialize[n])try{i=!this.pretty&&this.nativeJSON?JSON.stringify(e):this.serialize[n].apply(this,[e])}catch(e){OpenLayers.Console.error("Trouble serializing: "+e)}return i},writeIndent:function(){var e=[];if(this.pretty)for(var t=0;t<this.level;++t)e.push(this.indent);return e.join("")},writeNewline:function(){return this.pretty?this.newline:""},writeSpace:function(){return this.pretty?this.space:""},serialize:{object:function(e){if(null==e)return"null";if(e.constructor==Date)return this.serialize.date.apply(this,[e]);if(e.constructor==Array)return this.serialize.array.apply(this,[e]);var t=["{"];this.level+=1;var i,n,r,s=!1;for(i in e)e.hasOwnProperty(i)&&(n=OpenLayers.Format.JSON.prototype.write.apply(this,[i,this.pretty]),r=OpenLayers.Format.JSON.prototype.write.apply(this,[e[i],this.pretty]),null!=n&&null!=r&&(s&&t.push(","),t.push(this.writeNewline(),this.writeIndent(),n,":",this.writeSpace(),r),s=!0));return--this.level,t.push(this.writeNewline(),this.writeIndent(),"}"),t.join("")},array:function(e){var t,i=["["];this.level+=1;for(var n=0,r=e.length;n<r;++n)t=OpenLayers.Format.JSON.prototype.write.apply(this,[e[n],this.pretty]),null!=t&&(0<n&&i.push(","),i.push(this.writeNewline(),this.writeIndent(),t));return--this.level,i.push(this.writeNewline(),this.writeIndent(),"]"),i.join("")},string:function(e){var t={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};return/["\\\x00-\x1f]/.test(e)?'"'+e.replace(/([\x00-\x1f\\"])/g,function(e,i){var n=t[i];return n?n:(n=i.charCodeAt(),"\\u00"+Math.floor(n/16).toString(16)+(n%16).toString(16))})+'"':'"'+e+'"'},number:function(e){return isFinite(e)?String(e):"null"},boolean:function(e){return String(e)},date:function(e){function t(e){return 10>e?"0"+e:e}return'"'+e.getFullYear()+"-"+t(e.getMonth()+1)+"-"+t(e.getDate())+"T"+t(e.getHours())+":"+t(e.getMinutes())+":"+t(e.getSeconds())+'"'}},CLASS_NAME:"OpenLayers.Format.JSON"}),OpenLayers.Geometry.MultiLineString=OpenLayers.Class(OpenLayers.Geometry.Collection,{componentTypes:["OpenLayers.Geometry.LineString"],split:function(e,t){for(var i,n,r,s,o=null,a=t&&t.mutual,l=[],h=[e],u=0,c=this.components.length;u<c;++u){n=this.components[u],r=!1;for(var p=0;p<h.length;++p)if(i=n.split(h[p],t)){if(a){r=i[0];for(var d=0,f=r.length;d<f;++d)0===d&&l.length?l[l.length-1].addComponent(r[d]):l.push(new OpenLayers.Geometry.MultiLineString([r[d]]));r=!0,i=i[1]}if(i.length){i.unshift(p,1),Array.prototype.splice.apply(h,i);break}}r||(l.length?l[l.length-1].addComponent(n.clone()):l=[new OpenLayers.Geometry.MultiLineString(n.clone())])}return l&&1<l.length?r=!0:l=[],h&&1<h.length?s=!0:h=[],(r||s)&&(o=a?[l,h]:h),o},splitWith:function(e,t){var i,n,r,s,o,a,l=null,h=t&&t.mutual;if(e instanceof OpenLayers.Geometry.LineString){a=[],o=[e];for(var u=0,c=this.components.length;u<c;++u){r=!1,n=this.components[u];for(var p=0;p<o.length;++p)if(i=o[p].split(n,t)){h&&(r=i[0],r.length&&(r.unshift(p,1),Array.prototype.splice.apply(o,r),p+=r.length-2),i=i[1],0===i.length&&(i=[n.clone()])),r=0;for(var d=i.length;r<d;++r)0===r&&a.length?a[a.length-1].addComponent(i[r]):a.push(new OpenLayers.Geometry.MultiLineString([i[r]]));r=!0}r||(a.length?a[a.length-1].addComponent(n.clone()):a=[new OpenLayers.Geometry.MultiLineString([n.clone()])])}}else l=e.split(this);return o&&1<o.length?s=!0:o=[],a&&1<a.length?r=!0:a=[],(s||r)&&(l=h?[o,a]:a),l},CLASS_NAME:"OpenLayers.Geometry.MultiLineString"}),OpenLayers.Geometry.MultiPolygon=OpenLayers.Class(OpenLayers.Geometry.Collection,{componentTypes:["OpenLayers.Geometry.Polygon"],CLASS_NAME:"OpenLayers.Geometry.MultiPolygon"}),OpenLayers.Format.GeoJSON=OpenLayers.Class(OpenLayers.Format.JSON,{ignoreExtraDims:!1,read:function(e,t,i){t=t?t:"FeatureCollection";var n=null;if(i="string"==typeof e?OpenLayers.Format.JSON.prototype.read.apply(this,[e,i]):e){if("string"!=typeof i.type)OpenLayers.Console.error("Bad GeoJSON - no type: "+e);else if(this.isValidType(i,t))switch(t){case"Geometry":try{n=this.parseGeometry(i)}catch(e){OpenLayers.Console.error(e)}break;case"Feature":try{n=this.parseFeature(i),n.type="Feature"}catch(e){OpenLayers.Console.error(e)}break;case"FeatureCollection":switch(n=[],i.type){case"Feature":try{n.push(this.parseFeature(i))}catch(e){n=null,OpenLayers.Console.error(e)}break;case"FeatureCollection":for(e=0,t=i.features.length;e<t;++e)try{n.push(this.parseFeature(i.features[e]))}catch(e){n=null,OpenLayers.Console.error(e)}break;default:try{var r=this.parseGeometry(i);n.push(new OpenLayers.Feature.Vector(r))}catch(e){n=null,OpenLayers.Console.error(e)}}}}else OpenLayers.Console.error("Bad JSON: "+e);return n},isValidType:function(e,t){var i=!1;switch(t){case"Geometry":-1==OpenLayers.Util.indexOf("Point MultiPoint LineString MultiLineString Polygon MultiPolygon Box GeometryCollection".split(" "),e.type)?OpenLayers.Console.error("Unsupported geometry type: "+e.type):i=!0;break;case"FeatureCollection":i=!0;break;default:e.type==t?i=!0:OpenLayers.Console.error("Cannot convert types from "+e.type+" to "+t)}return i},parseFeature:function(e){var t,i,n;i=e.properties?e.properties:{},n=e.geometry&&e.geometry.bbox||e.bbox;try{t=this.parseGeometry(e.geometry)}catch(e){throw e}return t=new OpenLayers.Feature.Vector(t,i),n&&(t.bounds=OpenLayers.Bounds.fromArray(n)),e.id&&(t.fid=e.id),t},parseGeometry:function(e){if(null==e)return null;var t,i=!1;if("GeometryCollection"==e.type){if(!OpenLayers.Util.isArray(e.geometries))throw"GeometryCollection must have geometries array: "+e;t=e.geometries.length;for(var i=Array(t),n=0;n<t;++n)i[n]=this.parseGeometry.apply(this,[e.geometries[n]]);t=new OpenLayers.Geometry.Collection(i),i=!0}else{if(!OpenLayers.Util.isArray(e.coordinates))throw"Geometry must have coordinates array: "+e;if(!this.parseCoords[e.type.toLowerCase()])throw"Unsupported geometry type: "+e.type;try{t=this.parseCoords[e.type.toLowerCase()].apply(this,[e.coordinates])}catch(e){throw e}}return this.internalProjection&&this.externalProjection&&!i&&t.transform(this.externalProjection,this.internalProjection),t},parseCoords:{point:function(e){if(0==this.ignoreExtraDims&&2!=e.length)throw"Only 2D points are supported: "+e;return new OpenLayers.Geometry.Point(e[0],e[1])},multipoint:function(e){for(var t=[],i=null,n=0,r=e.length;n<r;++n){try{i=this.parseCoords.point.apply(this,[e[n]])}catch(e){throw e}t.push(i)}return new OpenLayers.Geometry.MultiPoint(t)},linestring:function(e){for(var t=[],i=null,n=0,r=e.length;n<r;++n){try{i=this.parseCoords.point.apply(this,[e[n]])}catch(e){throw e}t.push(i)}return new OpenLayers.Geometry.LineString(t)},multilinestring:function(e){for(var t=[],i=null,n=0,r=e.length;n<r;++n){try{i=this.parseCoords.linestring.apply(this,[e[n]])}catch(e){throw e}t.push(i)}return new OpenLayers.Geometry.MultiLineString(t)},polygon:function(e){for(var t,i,n=[],r=0,s=e.length;r<s;++r){try{i=this.parseCoords.linestring.apply(this,[e[r]])}catch(e){throw e}t=new OpenLayers.Geometry.LinearRing(i.components),n.push(t)}return new OpenLayers.Geometry.Polygon(n)},multipolygon:function(e){for(var t=[],i=null,n=0,r=e.length;n<r;++n){try{i=this.parseCoords.polygon.apply(this,[e[n]])}catch(e){throw e}t.push(i)}return new OpenLayers.Geometry.MultiPolygon(t)},box:function(e){if(2!=e.length)throw"GeoJSON box coordinates must have 2 elements";return new OpenLayers.Geometry.Polygon([new OpenLayers.Geometry.LinearRing([new OpenLayers.Geometry.Point(e[0][0],e[0][1]),new OpenLayers.Geometry.Point(e[1][0],e[0][1]),new OpenLayers.Geometry.Point(e[1][0],e[1][1]),new OpenLayers.Geometry.Point(e[0][0],e[1][1]),new OpenLayers.Geometry.Point(e[0][0],e[0][1])])])}},write:function(e,t){var i={type:null};if(OpenLayers.Util.isArray(e)){i.type="FeatureCollection";var n=e.length;i.features=Array(n);for(var r=0;r<n;++r){var s=e[r];if(!s instanceof OpenLayers.Feature.Vector)throw"FeatureCollection only supports collections of features: "+s;i.features[r]=this.extract.feature.apply(this,[s])}}else 0==e.CLASS_NAME.indexOf("OpenLayers.Geometry")?i=this.extract.geometry.apply(this,[e]):e instanceof OpenLayers.Feature.Vector&&(i=this.extract.feature.apply(this,[e]),e.layer&&e.layer.projection&&(i.crs=this.createCRSObject(e)));return OpenLayers.Format.JSON.prototype.write.apply(this,[i,t])},createCRSObject:function(e){e=e.layer.projection.toString();var t={};return e.match(/epsg:/i)&&(e=parseInt(e.substring(e.indexOf(":")+1)),t=4326==e?{type:"name",properties:{name:"urn:ogc:def:crs:OGC:1.3:CRS84"}}:{type:"name",properties:{name:"EPSG:"+e}}),t},extract:{feature:function(e){var t=this.extract.geometry.apply(this,[e.geometry]),t={type:"Feature",properties:e.attributes,geometry:t};return null!=e.fid&&(t.id=e.fid),t},geometry:function(e){if(null==e)return null;this.internalProjection&&this.externalProjection&&(e=e.clone(),e.transform(this.internalProjection,this.externalProjection));var t=e.CLASS_NAME.split(".")[2];return e=this.extract[t.toLowerCase()].apply(this,[e]),"Collection"==t?{type:"GeometryCollection",geometries:e}:{type:t,coordinates:e}},point:function(e){return[e.x,e.y]},multipoint:function(e){for(var t=[],i=0,n=e.components.length;i<n;++i)t.push(this.extract.point.apply(this,[e.components[i]]));return t},linestring:function(e){for(var t=[],i=0,n=e.components.length;i<n;++i)t.push(this.extract.point.apply(this,[e.components[i]]));return t},multilinestring:function(e){for(var t=[],i=0,n=e.components.length;i<n;++i)t.push(this.extract.linestring.apply(this,[e.components[i]]));return t},polygon:function(e){for(var t=[],i=0,n=e.components.length;i<n;++i)t.push(this.extract.linestring.apply(this,[e.components[i]]));return t},multipolygon:function(e){for(var t=[],i=0,n=e.components.length;i<n;++i)t.push(this.extract.polygon.apply(this,[e.components[i]]));return t},collection:function(e){for(var t=e.components.length,i=Array(t),n=0;n<t;++n)i[n]=this.extract.geometry.apply(this,[e.components[n]]);return i}},CLASS_NAME:"OpenLayers.Format.GeoJSON"}),OpenLayers.Date={dateRegEx:/^(?:(\d{4})(?:-(\d{2})(?:-(\d{2}))?)?)?(?:(?:T(\d{1,2}):(\d{2}):(\d{2}(?:\.\d+)?)(Z|(?:[+-]\d{1,2}(?::(\d{2}))?)))|Z)?$/,toISOString:function(){return"toISOString"in Date.prototype?function(e){return e.toISOString()}:function(e){return isNaN(e.getTime())?"Invalid Date":e.getUTCFullYear()+"-"+OpenLayers.Number.zeroPad(e.getUTCMonth()+1,2)+"-"+OpenLayers.Number.zeroPad(e.getUTCDate(),2)+"T"+OpenLayers.Number.zeroPad(e.getUTCHours(),2)+":"+OpenLayers.Number.zeroPad(e.getUTCMinutes(),2)+":"+OpenLayers.Number.zeroPad(e.getUTCSeconds(),2)+"."+OpenLayers.Number.zeroPad(e.getUTCMilliseconds(),3)+"Z"}}(),parse:function(e){var t;if((e=e.match(this.dateRegEx))&&(e[1]||e[7])){t=parseInt(e[1],10)||0;var i=parseInt(e[2],10)-1||0,n=parseInt(e[3],10)||1;if(t=new Date(Date.UTC(t,i,n)),i=e[7]){var n=parseInt(e[4],10),r=parseInt(e[5],10),s=parseFloat(e[6]),o=0|s;t.setUTCHours(n,r,o,Math.round(1e3*(s-o))),"Z"!==i&&(i=parseInt(i,10),e=parseInt(e[8],10)||0,e=-1e3*(3600*i+60*e),t=new Date(t.getTime()+e))}}else t=new Date("invalid");return t}},OpenLayers.Format.XML=OpenLayers.Class(OpenLayers.Format,{namespaces:null,namespaceAlias:null,defaultPrefix:null,readers:{},writers:{},xmldom:null,initialize:function(e){OpenLayers.Format.XML.supportActiveX&&(this.xmldom=new ActiveXObject("Microsoft.XMLDOM")),OpenLayers.Format.prototype.initialize.apply(this,[e]),this.namespaces=OpenLayers.Util.extend({},this.namespaces),this.namespaceAlias={};for(var t in this.namespaces)this.namespaceAlias[this.namespaces[t]]=t},destroy:function(){this.xmldom=null,OpenLayers.Format.prototype.destroy.apply(this,arguments)},setNamespace:function(e,t){this.namespaces[e]=t,this.namespaceAlias[t]=e},read:function(e){var t=e.indexOf("<");return 0<t&&(e=e.substring(t)),t=OpenLayers.Util.Try(OpenLayers.Function.bind(function(){var t;return t=OpenLayers.Format.XML.supportActiveX&&!this.xmldom?new ActiveXObject("Microsoft.XMLDOM"):this.xmldom,t.loadXML(e),t},this),function(){return(new DOMParser).parseFromString(e,"text/xml")},function(){var t=new XMLHttpRequest;return t.open("GET","data:text/xml;charset=utf-8,"+encodeURIComponent(e),!1),t.overrideMimeType&&t.overrideMimeType("text/xml"),t.send(null),t.responseXML}),this.keepData&&(this.data=t),t},write:function(e){if(this.xmldom)e=e.xml;else{var t=new XMLSerializer;if(1==e.nodeType){var i=document.implementation.createDocument("","",null);i.importNode&&(e=i.importNode(e,!0)),i.appendChild(e),e=t.serializeToString(i)}else e=t.serializeToString(e)}return e},createElementNS:function(e,t){return this.xmldom?"string"==typeof e?this.xmldom.createNode(1,t,e):this.xmldom.createNode(1,t,""):document.createElementNS(e,t)},createDocumentFragment:function(){return this.xmldom?this.xmldom.createDocumentFragment():document.createDocumentFragment()},createTextNode:function(e){return"string"!=typeof e&&(e=String(e)),this.xmldom?this.xmldom.createTextNode(e):document.createTextNode(e)},getElementsByTagNameNS:function(e,t,i){var n=[];if(e.getElementsByTagNameNS)n=e.getElementsByTagNameNS(t,i);else{e=e.getElementsByTagName("*");for(var r,s,o=0,a=e.length;o<a;++o)r=e[o],s=r.prefix?r.prefix+":"+i:i,("*"==i||s==r.nodeName)&&("*"!=t&&t!=r.namespaceURI||n.push(r))}return n},getAttributeNodeNS:function(e,t,i){var n=null;if(e.getAttributeNodeNS)n=e.getAttributeNodeNS(t,i);else{e=e.attributes;for(var r,s,o=0,a=e.length;o<a;++o)if(r=e[o],r.namespaceURI==t&&(s=r.prefix?r.prefix+":"+i:i,s==r.nodeName)){n=r;break}}return n},getAttributeNS:function(e,t,i){var n="";return e.getAttributeNS?n=e.getAttributeNS(t,i)||"":(e=this.getAttributeNodeNS(e,t,i))&&(n=e.nodeValue),n},getChildValue:function(e,t){var i=t||"";if(e)for(var n=e.firstChild;n;n=n.nextSibling)switch(n.nodeType){case 3:case 4:i+=n.nodeValue}return i},isSimpleContent:function(e){var t=!0;for(e=e.firstChild;e;e=e.nextSibling)if(1===e.nodeType){t=!1;break}return t},contentType:function(e){var t=!1,i=!1,n=OpenLayers.Format.XML.CONTENT_TYPE.EMPTY;for(e=e.firstChild;e;e=e.nextSibling){switch(e.nodeType){case 1:i=!0;break;case 8:break;default:t=!0}if(i&&t)break}if(i&&t)n=OpenLayers.Format.XML.CONTENT_TYPE.MIXED;else{if(i)return OpenLayers.Format.XML.CONTENT_TYPE.COMPLEX;if(t)return OpenLayers.Format.XML.CONTENT_TYPE.SIMPLE}return n},hasAttributeNS:function(e,t,i){return e.hasAttributeNS?e.hasAttributeNS(t,i):!!this.getAttributeNodeNS(e,t,i)},setAttributeNS:function(e,t,i,n){if(e.setAttributeNS)e.setAttributeNS(t,i,n);else{if(!this.xmldom)throw"setAttributeNS not implemented";t?(t=e.ownerDocument.createNode(2,i,t),t.nodeValue=n,e.setAttributeNode(t)):e.setAttribute(i,n)}},createElementNSPlus:function(e,t){t=t||{};var i=t.uri||this.namespaces[t.prefix];i||(i=e.indexOf(":"),i=this.namespaces[e.substring(0,i)]),i||(i=this.namespaces[this.defaultPrefix]),i=this.createElementNS(i,e),t.attributes&&this.setAttributes(i,t.attributes);var n=t.value;return null!=n&&i.appendChild(this.createTextNode(n)),i},setAttributes:function(e,t){var i,n,r;for(r in t)null!=t[r]&&t[r].toString&&(i=t[r].toString(),n=this.namespaces[r.substring(0,r.indexOf(":"))]||null,this.setAttributeNS(e,n,r,i))},getFirstElementChild:function(e){if(e.firstElementChild)return e.firstElementChild;for(e=e.firstChild;1!=e.nodeType&&(e=e.nextSibling););return e},readNode:function(e,t){t||(t={});var i=this.readers[e.namespaceURI?this.namespaceAlias[e.namespaceURI]:this.defaultPrefix];if(i){var n=e.localName||e.nodeName.split(":").pop();(i=i[n]||i["*"])&&i.apply(this,[e,t])}return t},readChildNodes:function(e,t){t||(t={});for(var i,n=e.childNodes,r=0,s=n.length;r<s;++r)i=n[r],1==i.nodeType&&this.readNode(i,t);return t},writeNode:function(e,t,i){var n,r=e.indexOf(":");return 0<r?(n=e.substring(0,r),e=e.substring(r+1)):n=i?this.namespaceAlias[i.namespaceURI]:this.defaultPrefix,t=this.writers[n][e].apply(this,[t]),i&&i.appendChild(t),t},getChildEl:function(e,t,i){return e&&this.getThisOrNextEl(e.firstChild,t,i)},getNextEl:function(e,t,i){return e&&this.getThisOrNextEl(e.nextSibling,t,i)},getThisOrNextEl:function(e,t,i){e:for(;e;e=e.nextSibling)switch(e.nodeType){case 1:if(!(t&&t!==(e.localName||e.nodeName.split(":").pop())||i&&i!==e.namespaceURI))break e;e=null;break e;case 3:if(/^\s*$/.test(e.nodeValue))break;case 4:case 6:case 12:case 10:case 11:e=null;break e}return e||null},lookupNamespaceURI:function(e,t){var i=null;if(e)if(e.lookupNamespaceURI)i=e.lookupNamespaceURI(t);else e:switch(e.nodeType){case 1:if(null!==e.namespaceURI&&e.prefix===t){i=e.namespaceURI;break e}if(i=e.attributes.length)for(var n,r=0;r<i;++r){if(n=e.attributes[r],"xmlns"===n.prefix&&n.name==="xmlns:"+t){i=n.value||null;break e}if("xmlns"===n.name&&null===t){i=n.value||null;break e}}i=this.lookupNamespaceURI(e.parentNode,t);break e;case 2:i=this.lookupNamespaceURI(e.ownerElement,t);break e;case 9:i=this.lookupNamespaceURI(e.documentElement,t);break e;case 6:case 12:case 10:case 11:break e;default:i=this.lookupNamespaceURI(e.parentNode,t)}return i},getXMLDoc:function(){return OpenLayers.Format.XML.document||this.xmldom||(document.implementation&&document.implementation.createDocument?OpenLayers.Format.XML.document=document.implementation.createDocument("","",null):!this.xmldom&&OpenLayers.Format.XML.supportActiveX&&(this.xmldom=new ActiveXObject("Microsoft.XMLDOM"))),OpenLayers.Format.XML.document||this.xmldom},CLASS_NAME:"OpenLayers.Format.XML"}),OpenLayers.Format.XML.CONTENT_TYPE={EMPTY:0,SIMPLE:1,COMPLEX:2,MIXED:3},OpenLayers.Format.XML.lookupNamespaceURI=OpenLayers.Function.bind(OpenLayers.Format.XML.prototype.lookupNamespaceURI,OpenLayers.Format.XML.prototype),OpenLayers.Format.XML.document=null,OpenLayers.Format.XML.supportActiveX=function(){return Object.getOwnPropertyDescriptor&&Object.getOwnPropertyDescriptor(window,"ActiveXObject")||"ActiveXObject"in window}(),OpenLayers.Format.KML=OpenLayers.Class(OpenLayers.Format.XML,{namespaces:{kml:"http://www.opengis.net/kml/2.2",gx:"http://www.google.com/kml/ext/2.2"},kmlns:"http://earth.google.com/kml/2.0",placemarksDesc:"No description available",foldersName:"OpenLayers export",foldersDesc:"Exported on "+new Date,extractAttributes:!0,kvpAttributes:!1,extractStyles:!1,extractTracks:!1,trackAttributes:null,internalns:null,features:null,styles:null,styleBaseUrl:"",fetched:null,maxDepth:0,initialize:function(e){this.regExes={trimSpace:/^\s*|\s*$/g,removeSpace:/\s*/g,splitSpace:/\s+/,trimComma:/\s*,\s*/g,kmlColor:/(\w{2})(\w{2})(\w{2})(\w{2})/,kmlIconPalette:/root:\/\/icons\/palette-(\d+)(\.\w+)/,straightBracket:/\$\[(.*?)\]/g},this.externalProjection=new OpenLayers.Projection("EPSG:4326"),OpenLayers.Format.XML.prototype.initialize.apply(this,[e])},read:function(e){return this.features=[],this.styles={},this.fetched={},this.parseData(e,{depth:0,styleBaseUrl:this.styleBaseUrl})},parseData:function(e,t){"string"==typeof e&&(e=OpenLayers.Format.XML.prototype.read.apply(this,[e]));for(var i=["Link","NetworkLink","Style","StyleMap","Placemark"],n=0,r=i.length;n<r;++n){var s=i[n],o=this.getElementsByTagNameNS(e,"*",s);if(0!=o.length)switch(s.toLowerCase()){case"link":case"networklink":this.parseLinks(o,t);break;case"style":this.extractStyles&&this.parseStyles(o,t);break;case"stylemap":this.extractStyles&&this.parseStyleMaps(o,t);break;case"placemark":this.parseFeatures(o,t)}}return this.features},parseLinks:function(e,t){if(t.depth>=this.maxDepth)return!1;var i=OpenLayers.Util.extend({},t);i.depth++;for(var n=0,r=e.length;n<r;n++){var s=this.parseProperty(e[n],"*","href");s&&!this.fetched[s]&&(this.fetched[s]=!0,(s=this.fetchLink(s))&&this.parseData(s,i))}},fetchLink:function(e){if(e=OpenLayers.Request.GET({url:e,async:!1}))return e.responseText},parseStyles:function(e,t){for(var i=0,n=e.length;i<n;i++){var r=this.parseStyle(e[i]);r&&(this.styles[(t.styleBaseUrl||"")+"#"+r.id]=r)}},parseKmlColor:function(e){var t=null;return e&&(e=e.match(this.regExes.kmlColor))&&(t={color:"#"+e[4]+e[3]+e[2],opacity:parseInt(e[1],16)/255}),t},parseStyle:function(e){for(var t,i,n={},r=["LineStyle","PolyStyle","IconStyle","BalloonStyle","LabelStyle"],s=0,o=r.length;s<o;++s)if(t=r[s],i=this.getElementsByTagNameNS(e,"*",t)[0])switch(t.toLowerCase()){case"linestyle":t=this.parseProperty(i,"*","color"),(t=this.parseKmlColor(t))&&(n.strokeColor=t.color,n.strokeOpacity=t.opacity),(t=this.parseProperty(i,"*","width"))&&(n.strokeWidth=t);break;case"polystyle":t=this.parseProperty(i,"*","color"),(t=this.parseKmlColor(t))&&(n.fillOpacity=t.opacity,n.fillColor=t.color),"0"==this.parseProperty(i,"*","fill")&&(n.fillColor="none"),"0"==this.parseProperty(i,"*","outline")&&(n.strokeWidth="0");break;case"iconstyle":var a=parseFloat(this.parseProperty(i,"*","scale")||1);t=32*a;var l=32*a,h=this.getElementsByTagNameNS(i,"*","Icon")[0];if(h){var u=this.parseProperty(h,"*","href");if(u){var c=this.parseProperty(h,"*","w"),p=this.parseProperty(h,"*","h");!OpenLayers.String.startsWith(u,"http://maps.google.com/mapfiles/kml")||c||p||(p=c=64,a/=2),c=c||p,p=p||c,c&&(t=parseInt(c)*a),p&&(l=parseInt(p)*a),(p=u.match(this.regExes.kmlIconPalette))&&(c=p[1],p=p[2],u=this.parseProperty(h,"*","x"),h=this.parseProperty(h,"*","y"),u="http://maps.google.com/mapfiles/kml/pal"+c+"/icon"+(8*(h?7-h/32:7)+(u?u/32:0))+p),n.graphicOpacity=1,n.externalGraphic=u}}(i=this.getElementsByTagNameNS(i,"*","hotSpot")[0])&&(u=parseFloat(i.getAttribute("x")),h=parseFloat(i.getAttribute("y")),c=i.getAttribute("xunits"),"pixels"==c?n.graphicXOffset=-u*a:"insetPixels"==c?n.graphicXOffset=-t+u*a:"fraction"==c&&(n.graphicXOffset=-t*u),i=i.getAttribute("yunits"),"pixels"==i?n.graphicYOffset=-l+h*a+1:"insetPixels"==i?n.graphicYOffset=-(h*a)+1:"fraction"==i&&(n.graphicYOffset=-l*(1-h)+1)),n.graphicWidth=t,n.graphicHeight=l;break;case"balloonstyle":(i=OpenLayers.Util.getXmlNodeValue(i))&&(n.balloonStyle=i.replace(this.regExes.straightBracket,"${$1}"));break;case"labelstyle":t=this.parseProperty(i,"*","color"),(t=this.parseKmlColor(t))&&(n.fontColor=t.color,n.fontOpacity=t.opacity)}return!n.strokeColor&&n.fillColor&&(n.strokeColor=n.fillColor),(e=e.getAttribute("id"))&&n&&(n.id=e),n},parseStyleMaps:function(e,t){for(var i=0,n=e.length;i<n;i++)for(var r=e[i],s=this.getElementsByTagNameNS(r,"*","Pair"),r=r.getAttribute("id"),o=0,a=s.length;o<a;o++){var l=s[o],h=this.parseProperty(l,"*","key");(l=this.parseProperty(l,"*","styleUrl"))&&"normal"==h&&(this.styles[(t.styleBaseUrl||"")+"#"+r]=this.styles[(t.styleBaseUrl||"")+l])}},parseFeatures:function(e,t){for(var i=[],n=0,r=e.length;n<r;n++){var s=e[n],o=this.parseFeature.apply(this,[s]);if(!o)throw"Bad Placemark: "+n;if(this.extractStyles&&o.attributes&&o.attributes.styleUrl&&(o.style=this.getStyle(o.attributes.styleUrl,t)),this.extractStyles){var a=this.getElementsByTagNameNS(s,"*","Style")[0];a&&(a=this.parseStyle(a))&&(o.style=OpenLayers.Util.extend(o.style,a))}this.extractTracks?(s=this.getElementsByTagNameNS(s,this.namespaces.gx,"Track"))&&0<s.length&&(o={features:[],feature:o},this.readNode(s[0],o),0<o.features.length&&i.push.apply(i,o.features)):i.push(o)}this.features=this.features.concat(i)},readers:{kml:{when:function(e,t){t.whens.push(OpenLayers.Date.parse(this.getChildValue(e)))},_trackPointAttribute:function(e,t){var i=e.nodeName.split(":").pop();t.attributes[i].push(this.getChildValue(e))}},gx:{Track:function(e,t){var i={whens:[],points:[],angles:[]};if(this.trackAttributes){var n;i.attributes={};for(var r=0,s=this.trackAttributes.length;r<s;++r)n=this.trackAttributes[r],i.attributes[n]=[],n in this.readers.kml||(this.readers.kml[n]=this.readers.kml._trackPointAttribute)}if(this.readChildNodes(e,i),i.whens.length!==i.points.length)throw Error("gx:Track with unequal number of when ("+i.whens.length+") and gx:coord ("+i.points.length+") elements.");var o=0<i.angles.length;if(o&&i.whens.length!==i.angles.length)throw Error("gx:Track with unequal number of when ("+i.whens.length+") and gx:angles ("+i.angles.length+") elements.");for(var a,r=0,s=i.whens.length;r<s;++r){if(a=t.feature.clone(),a.fid=t.feature.fid||t.feature.id,n=i.points[r],a.geometry=n,"z"in n&&(a.attributes.altitude=n.z),this.internalProjection&&this.externalProjection&&a.geometry.transform(this.externalProjection,this.internalProjection),this.trackAttributes)for(var l=0,h=this.trackAttributes.length;l<h;++l)n=this.trackAttributes[l],a.attributes[n]=i.attributes[n][r];a.attributes.when=i.whens[r],a.attributes.trackId=t.feature.id,o&&(n=i.angles[r],a.attributes.heading=parseFloat(n[0]),a.attributes.tilt=parseFloat(n[1]),a.attributes.roll=parseFloat(n[2])),t.features.push(a)}},coord:function(e,t){var i=this.getChildValue(e).replace(this.regExes.trimSpace,"").split(/\s+/),n=new OpenLayers.Geometry.Point(i[0],i[1]);2<i.length&&(n.z=parseFloat(i[2])),t.points.push(n)},angles:function(e,t){var i=this.getChildValue(e).replace(this.regExes.trimSpace,"").split(/\s+/);t.angles.push(i)}}},parseFeature:function(e){for(var t,i,n,r=["MultiGeometry","Polygon","LineString","Point"],s=0,o=r.length;s<o;++s)if(t=r[s],
this.internalns=e.namespaceURI?e.namespaceURI:this.kmlns,i=this.getElementsByTagNameNS(e,this.internalns,t),0<i.length){if(!(r=this.parseGeometry[t.toLowerCase()]))throw new TypeError("Unsupported geometry type: "+t);n=r.apply(this,[i[0]]),this.internalProjection&&this.externalProjection&&n.transform(this.externalProjection,this.internalProjection);break}var a;return this.extractAttributes&&(a=this.parseAttributes(e)),t=new OpenLayers.Feature.Vector(n,a),e=e.getAttribute("id")||e.getAttribute("name"),null!=e&&(t.fid=e),t},getStyle:function(e,t){var i=OpenLayers.Util.removeTail(e),n=OpenLayers.Util.extend({},t);return n.depth++,n.styleBaseUrl=i,!this.styles[e]&&!OpenLayers.String.startsWith(e,"#")&&n.depth<=this.maxDepth&&!this.fetched[i]&&(i=this.fetchLink(i))&&this.parseData(i,n),OpenLayers.Util.extend({},this.styles[e])},parseGeometry:{point:function(e){e=this.getElementsByTagNameNS(e,this.internalns,"coordinates");var t=[];if(0<e.length)var i=e[0].firstChild.nodeValue,i=i.replace(this.regExes.removeSpace,""),t=i.split(",");if(!(1<t.length))throw"Bad coordinate string: "+i;return 2==t.length&&(t[2]=null),i=new OpenLayers.Geometry.Point(t[0],t[1],t[2])},linestring:function(e,t){var i=this.getElementsByTagNameNS(e,this.internalns,"coordinates"),n=null;if(0<i.length){for(var r,s,i=this.getChildValue(i[0]),i=i.replace(this.regExes.trimSpace,""),i=i.replace(this.regExes.trimComma,","),n=i.split(this.regExes.splitSpace),o=n.length,a=Array(o),l=0;l<o;++l){if(r=n[l].split(","),s=r.length,!(1<s))throw"Bad LineString point coordinates: "+n[l];2==r.length&&(r[2]=null),a[l]=new OpenLayers.Geometry.Point(r[0],r[1],r[2])}if(!o)throw"Bad LineString coordinates: "+i;n=t?new OpenLayers.Geometry.LinearRing(a):new OpenLayers.Geometry.LineString(a)}return n},polygon:function(e){e=this.getElementsByTagNameNS(e,this.internalns,"LinearRing");var t=e.length,i=Array(t);if(0<t)for(var n=0,r=e.length;n<r;++n){if(!(t=this.parseGeometry.linestring.apply(this,[e[n],!0])))throw"Bad LinearRing geometry: "+n;i[n]=t}return new OpenLayers.Geometry.Polygon(i)},multigeometry:function(e){for(var t,i=[],n=e.childNodes,r=0,s=n.length;r<s;++r)e=n[r],1==e.nodeType&&(t=e.prefix?e.nodeName.split(":")[1]:e.nodeName,(t=this.parseGeometry[t.toLowerCase()])&&i.push(t.apply(this,[e])));return new OpenLayers.Geometry.Collection(i)}},parseAttributes:function(e){var t={},i=e.getElementsByTagName("ExtendedData");i.length&&(t=this.parseExtendedData(i[0]));var n,r,s;e=e.childNodes;for(var i=0,o=e.length;i<o;++i)if(n=e[i],1==n.nodeType&&(r=n.childNodes,1<=r.length&&3>=r.length)){switch(r.length){case 1:s=r[0];break;case 2:s=r[0],r=r[1],s=3==s.nodeType||4==s.nodeType?s:r;break;default:s=r[1]}3!=s.nodeType&&4!=s.nodeType||(n=n.prefix?n.nodeName.split(":")[1]:n.nodeName,(s=OpenLayers.Util.getXmlNodeValue(s))&&(s=s.replace(this.regExes.trimSpace,""),t[n]=s))}return t},parseExtendedData:function(e){var t,i,n,r,s={},o=e.getElementsByTagName("Data");for(t=0,i=o.length;t<i;t++){n=o[t],r=n.getAttribute("name");var a={},l=n.getElementsByTagName("value");l.length&&(a.value=this.getChildValue(l[0])),this.kvpAttributes?s[r]=a.value:(n=n.getElementsByTagName("displayName"),n.length&&(a.displayName=this.getChildValue(n[0])),s[r]=a)}for(e=e.getElementsByTagName("SimpleData"),t=0,i=e.length;t<i;t++)a={},n=e[t],r=n.getAttribute("name"),a.value=this.getChildValue(n),this.kvpAttributes?s[r]=a.value:(a.displayName=r,s[r]=a);return s},parseProperty:function(e,t,i){var n;e=this.getElementsByTagNameNS(e,t,i);try{n=OpenLayers.Util.getXmlNodeValue(e[0])}catch(e){n=null}return n},write:function(e){OpenLayers.Util.isArray(e)||(e=[e]);for(var t=this.createElementNS(this.kmlns,"kml"),i=this.createFolderXML(),n=0,r=e.length;n<r;++n)i.appendChild(this.createPlacemarkXML(e[n]));return t.appendChild(i),OpenLayers.Format.XML.prototype.write.apply(this,[t])},createFolderXML:function(){var e=this.createElementNS(this.kmlns,"Folder");if(this.foldersName){var t=this.createElementNS(this.kmlns,"name"),i=this.createTextNode(this.foldersName);t.appendChild(i),e.appendChild(t)}return this.foldersDesc&&(t=this.createElementNS(this.kmlns,"description"),i=this.createTextNode(this.foldersDesc),t.appendChild(i),e.appendChild(t)),e},createPlacemarkXML:function(e){var t=this.createElementNS(this.kmlns,"name"),i=e.style&&e.style.label?e.style.label:e.id;t.appendChild(this.createTextNode(e.attributes.name||i));var n=this.createElementNS(this.kmlns,"description");return n.appendChild(this.createTextNode(e.attributes.description||this.placemarksDesc)),i=this.createElementNS(this.kmlns,"Placemark"),null!=e.fid&&i.setAttribute("id",e.fid),i.appendChild(t),i.appendChild(n),e.attributes&&(t=this.buildExtendedData(e.attributes))&&i.appendChild(t),e=this.buildGeometryNode(e.geometry),i.appendChild(e),i},buildGeometryNode:function(e){var t=e.CLASS_NAME,t=t.substring(t.lastIndexOf(".")+1),t=this.buildGeometry[t.toLowerCase()],i=null;return t&&(i=t.apply(this,[e])),i},buildGeometry:{point:function(e){var t=this.createElementNS(this.kmlns,"Point");return t.appendChild(this.buildCoordinatesNode(e)),t},multipoint:function(e){return this.buildGeometry.collection.apply(this,[e])},linestring:function(e){var t=this.createElementNS(this.kmlns,"LineString");return t.appendChild(this.buildCoordinatesNode(e)),t},multilinestring:function(e){return this.buildGeometry.collection.apply(this,[e])},linearring:function(e){var t=this.createElementNS(this.kmlns,"LinearRing");return t.appendChild(this.buildCoordinatesNode(e)),t},polygon:function(e){var t=this.createElementNS(this.kmlns,"Polygon");e=e.components;for(var i,n,r=0,s=e.length;r<s;++r)i=0==r?"outerBoundaryIs":"innerBoundaryIs",i=this.createElementNS(this.kmlns,i),n=this.buildGeometry.linearring.apply(this,[e[r]]),i.appendChild(n),t.appendChild(i);return t},multipolygon:function(e){return this.buildGeometry.collection.apply(this,[e])},collection:function(e){for(var t,i=this.createElementNS(this.kmlns,"MultiGeometry"),n=0,r=e.components.length;n<r;++n)(t=this.buildGeometryNode.apply(this,[e.components[n]]))&&i.appendChild(t);return i}},buildCoordinatesNode:function(e){var t,i=this.createElementNS(this.kmlns,"coordinates");if(t=e.components){for(var n=t.length,r=Array(n),s=0;s<n;++s)e=t[s],r[s]=this.buildCoordinates(e);t=r.join(" ")}else t=this.buildCoordinates(e);return t=this.createTextNode(t),i.appendChild(t),i},buildCoordinates:function(e){return this.internalProjection&&this.externalProjection&&(e=e.clone(),e.transform(this.internalProjection,this.externalProjection)),e.x+","+e.y},buildExtendedData:function(e){var t,i=this.createElementNS(this.kmlns,"ExtendedData");for(t in e)if(e[t]&&"name"!=t&&"description"!=t&&"styleUrl"!=t){var n=this.createElementNS(this.kmlns,"Data");n.setAttribute("name",t);var r=this.createElementNS(this.kmlns,"value");if("object"==typeof e[t]){if(e[t].value&&r.appendChild(this.createTextNode(e[t].value)),e[t].displayName){var s=this.createElementNS(this.kmlns,"displayName");s.appendChild(this.getXMLDoc().createCDATASection(e[t].displayName)),n.appendChild(s)}}else r.appendChild(this.createTextNode(e[t]));n.appendChild(r),i.appendChild(n)}return this.isSimpleContent(i)?null:i},CLASS_NAME:"OpenLayers.Format.KML"})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],43:[function(e,t,i){var n=function(e,t){function i(e){return"undefined"!=typeof e}function n(e,t,i){return e<t?t:e>i?i:e}function r(e){var t,i,n,r,s,o,a,l,h=+e[0],u=+e[1],c=+e[2];switch(r=Math.floor(6*h),s=6*h-r,o=c*(1-u),a=c*(1-s*u),l=c*(1-(1-s)*u),isNaN(r)&&(r=0),isNaN(a)&&(a=0),isNaN(l)&&(l=0),r%6){case 0:t=c,i=l,n=o;break;case 1:t=a,i=c,n=o;break;case 2:t=o,i=c,n=l;break;case 3:t=o,i=a,n=c;break;case 4:t=l,i=o,n=c;break;case 5:t=c,i=o,n=a}return[Math.round(255*t),Math.round(255*i),Math.round(255*n)]}function s(e){return a(r(e))}function o(e){var t,i=+e[0],n=+e[1],r=+e[2],s=Math.max(i,n,r),o=Math.min(i,n,r),a=s-o,l=0===s?0:a/s,h=s/255;switch(s){case o:t=0;break;case i:t=n-r+a*(n<r?6:0),t/=6*a;break;case n:t=r-i+2*a,t/=6*a;break;case r:t=i-n+4*a,t/=6*a}return[t,l,h]}function a(e){var t=+e[2]|+e[1]<<8|+e[0]<<16;return t="000000"+t.toString(16),t.slice(-6)}function l(e){return o(h(e))}function h(e){return 3===e.length&&(e=e.replace(/./g,"$&$&")),[parseInt(e[0]+e[1],16),parseInt(e[2]+e[3],16),parseInt(e[4]+e[5],16)]}function u(e){return[+e[0]/360,+e[1]/100,+e[2]/100]}function c(e){return[Math.round(360*+e[0]),Math.round(100*+e[1]),Math.round(100*+e[2])]}function p(e,t,i){return t.addEventListener(e,i,!1)}function d(e,t,i){return t.removeEventListener(e,i)}function f(e,t){for(var i=t.touches?t.touches[0].pageX:t.pageX,n=t.touches?t.touches[0].pageY:t.pageY,r=y(e).l,s=y(e).t;e=e.offsetParent;)r+=y(e).l,s+=y(e).t;return{x:i-r,y:n-s}}function y(e){return{l:e.offsetLeft,t:e.offsetTop}}function m(e,t){for(;(e=e.parentElement)&&e!==t;);return e}function g(e){e&&e.preventDefault()}function v(e){return{w:e.offsetWidth,h:e.offsetHeight}}function L(e){return N||!!i(e)&&e}function b(e){N=e}function O(e,t,n){return i(e)?i(t)?(i(D[e])||(D[e]={}),i(n)||(n=Object.keys(D[e]).length),D[e][n]=t,P):D[e]:D}function w(e,t){return i(e)?i(t)?(delete D[e][t],P):(D[e]={},P):(D={},P)}function x(e,t,n){if(!i(D[e]))return P;if(i(n))i(D[e][n])&&D[e][n].apply(P,t);else for(var r in D[e])D[e][r].apply(P,t);return P}function _(e,t){e&&"h"!==e||x("change:h",t),e&&"sv"!==e||x("change:sv",t),x("change",t)}function E(e,t){return k.setTimeout(e,t)}function S(){return I.parentNode}function C(){var t=v(F).w,i=k.innerHeight,n=Math.max(z.scrollLeft,F.scrollLeft),r=Math.max(z.scrollTop,F.scrollTop),s=t+n,o=i+r;return Z=y(e).l,$=y(e).t+v(e).h,Z+K>s&&(Z=s-K),$+Q>o&&($=o-Q),I.style.left=Z+"px",I.style.top=$+"px",x("fit",[P]),P}function T(i,o){function a(t){var i=t.target,n=i===e||m(i,e)===e;n?T():A(),x(n?"enter":"exit",[P])}function l(e){var t=(r(H),r([H[0],1,1]));j.style.backgroundColor="rgb("+t.join(",")+")",b(H),g(e)}function h(e){var t=n(f(B,e).y,0,E);H[0]=(E-t)/E,G.style.top=t-F/2+"px",l(e)}function u(e){var t=f(j,e),i=n(t.x,0,N),r=n(t.y,0,D);H[1]=1-(N-i)/N,H[2]=(D-r)/D,W.style.right=N-i-U/2+"px",W.style.top=r-Z/2+"px",l(e)}function c(e){X&&(h(e),J=s(H),q||(x("drag:h",[J,P]),x("drag",[J,P]),_("h",[J,P]))),Y&&(u(e),J=s(H),V||(x("drag:sv",[J,P]),x("drag",[J,P]),_("sv",[J,P]))),q=!1,V=!1}function y(i){var n=i.target,r=X?"h":"sv",o=[s(H),P],a=n===e||m(n,e)===e,l=n===I||m(n,I)===I;a||l?l&&(x("stop:"+r,o),x("stop",o),_(r,o)):S()&&t!==!1&&(A(),x("exit",[P]),_(0,o)),X=!1,Y=!1}function O(e){q=!0,X=!0,c(e),g(e),x("start:h",[J,P]),x("start",[J,P]),_("h",[J,P])}function w(e){V=!0,Y=!0,c(e),g(e),x("start:sv",[J,P]),x("start",[J,P]),_("sv",[J,P])}i||((o||z).appendChild(I),P.visible=!0),K=v(I).w,Q=v(I).h;var E=v(B).h,N=v(j).w,D=v(j).h,F=v(G).h,U=v(W).w,Z=v(W).h;if(i){if(I.style.left="-9999px",I.style.top="-9999px",t!==!1)for(var $=t.length;$--;)p(t[$],e,a);P.create=function(){return T(1),x("create",[P]),P},P.destroy=function(){if(t!==!1)for(var i=t.length;i--;)d(t[i],e,a);return A(),b(!1),x("destroy",[P]),P}}else C();R=function(){H=L(H),l(),G.style.top=E-F/2-E*+H[0]+"px",W.style.right=N-U/2-N*+H[1]+"px",W.style.top=D-Z/2-D*+H[2]+"px"},A=function(e){return S()&&(S().removeChild(I),P.visible=!1),d("touchstart",B,O),d("mousedown",B,O),d("touchstart",j,w),d("mousedown",j,w),d("touchmove",M,c),d("mousemove",M,c),d("touchend",M,y),d("mouseup",M,y),d("resize",k,C),P},R(),i||(p("touchstart",B,O),p("mousedown",B,O),p("touchstart",j,w),p("mousedown",j,w),p("touchmove",M,c),p("mousemove",M,c),p("touchend",M,y),p("mouseup",M,y),p("resize",k,C))}var k=window,M=document,P=this,N=!1,D={},I=M.createElement("div");i(t)||(t=["mousedown","touchstart"]),P.parse=function(e){if("object"==typeof e)return e;var t=/\s*rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)\s*$/i.exec(e),i=/\s*hsv\s*\(\s*(\d+)\s*,\s*(\d+)%\s*,\s*(\d+)%\s*\)\s*$/i.exec(e),n="#"===e[0]&&e.match(/^#([\da-f]{3}|[\da-f]{6})$/);return n?l(e.slice(1)):i?u([+i[1],+i[2],+i[3]]):t?o([+t[1],+t[2],+t[3]]):[0,1,1]},b(P.parse(e.getAttribute("data-color")||e.value||[0,1,1])),I.className="color-picker",I.innerHTML='<div class="color-picker-control"><span class="color-picker-h"><i></i></span><span class="color-picker-sv"><i></i></span></div>';var R,A,z=M.body,F=M.documentElement,U=I.firstChild.children,H=L([0,1,1]),B=U[0],j=U[1],G=B.firstChild,W=j.firstChild,q=!1,V=!1,X=!1,Y=!1,Z=0,$=0,K=0,Q=0,J=s(H);return T(1),E(function(){var e=[s(H),P];x("create",e),_(0,e)},0),P.target=e,P.picker=I,P.visible=!1,P.on=O,P.off=w,P.trigger=x,P.fit=C,P.set=function(e){return i(e)?("string"==typeof e&&(e=P.parse(e)),b(e),R(),P):L()},P.HSV2RGB=function(e){return r(u(e))},P._HSV2RGB=r,P.HSV2HEX=function(e){return s(u(e))},P._HSV2HEX=s,P.RGB2HSV=function(e){return c(o(e))},P._RGB2HSV=o,P.RGB2HEX=a,P.HEX2HSV=function(e){return c(l(e))},P._HEX2HSV=l,P.HEX2RGB=h,P.hooks=D,P.enter=function(e){return T(0,e)},P.exit=A,P};t.exports=n},{}],44:[function(e,t,i){var n=function(e){return parseInt(Math.floor(e/64))},r=function(e,t,i){return i*(t-e)+e},s=function(e,t,i){return(i-e)/(t-e)},o=function(e,t,i,n,s,o){var a=r(e[0],e[1],s/i),l=r(t[0],t[1],(n-o)/n);return{x:a,y:l}},a=function(e,t,i,n,r,o){var a=s(e[0],e[1],r)*i,l=n-s(t[0],t[1],o)*n;return{x:a,y:l}},l=function(e,t,i){return i/(e[1]-e[0])*t},h=function(e,t,i,n){return 1==t&&"km"==i?n*e*1e3:n*e};t.exports={getTileRadius:n,lerp:r,reverseLerp:s,latLonToWorld:o,worldToLatLon:a,getScaledRadius:l,calculateDistance:h}},{}],45:[function(e,t,i){var n=e("./OpenLayers.js"),r=e("d3-scale").scaleLinear,s=e("d3-geo").geoTransform,o=e("d3-geo").geoPath,a=e("d3-selection").select;t.exports=n.Class(n.Control,{width:1024,height:1024,x:null,y:null,id:"export-svg",yExtent:[0,16384],xExtent:[0,16384],projection:null,path:null,svg:null,stylePropMap:{fillColor:"fill",fillOpacity:"fill-opacity",strokeColor:"stroke",strokeWidth:"stroke-width",strokeOpacity:"stroke-opacity",graphicOpacity:"opacity"},imagesToLoad:0,layer:null,initialize:function(e,t,i,l,h){n.Control.prototype.initialize.apply(this,[h]),this.map=e,this.layer=t,this.div=i,this.map_tile_path=l,this.x=r().range([0,this.width]),this.y=r().range([0,this.height]);var u=this;this.projection=s({point:function(e,t){this.stream.point(u.x(e),u.height-u.y(t))}}),this.path=o().projection(this.projection),this.x.domain(this.xExtent),this.y.domain(this.yExtent),this.div.addEventListener("click",this.doExport.bind(this),!1);var u=this;this.setStyle=function(e){for(var t in u.stylePropMap)if(e.properties.style[t]){var i=e.properties.style[t];"strokeWidth"==t&&(i=u.x(i)),"fillColor"==t&&"LineString"==e.geometry.type&&(i="none"),a(this).style(u.stylePropMap[t],i)}else"fillColor"==t&&a(this).style(u.stylePropMap[t],"none");if(e.properties.style.externalGraphic){var i=e.properties.style.externalGraphic;if(i.indexOf("ward_sentry")==-1&&i.indexOf("ward_observer")==-1)var n=u.height-u.y(e.geometry.coordinates[1])-u.x(e.properties.style.graphicHeight)/2;else var n=u.height-u.y(e.geometry.coordinates[1])-u.x(e.properties.style.graphicHeight);a(this).attr("xlink:href",i).attr("x",u.x(e.geometry.coordinates[0])-u.x(e.properties.style.graphicHeight)/2).attr("y",n).attr("width",u.x(e.properties.style.graphicHeight)).attr("height",u.x(e.properties.style.graphicHeight)),u.imagesToLoad++;var r=this;u.getImageBase64(i,function(e){a(r).attr("href","data:image/png;base64,"+e),u.imagesToLoad--,u.imageLoadFinished()})}}},imageLoadFinished:function(e){0==this.imagesToLoad&&this.download_png()},featureFilter:function(e){return function(t){return t.geometry.type==e}},createSVG:function(e){this.svg&&this.svg.remove(),this.svg=a("body").append("svg").attr("id",this.id).attr("width",this.width).attr("height",this.height),e.features.forEach(function(e,t){e.zIndex=t});var t=this.map_tile_path+this.map.baseLayer.map_patch+"/"+this.map.baseLayer.map_id+"/dotamap"+("default"==this.map.baseLayer.map_id?"":"_"+this.map.baseLayer.map_id)+"5_25.jpg";this.svg.append("image").attr("class","background").attr("xlink:href",t).attr("width",this.width).attr("height",this.height),this.imagesToLoad=1;var i=this;this.getImageBase64(t,function(e){a("#"+i.id+" .background").attr("href","data:image/png;base64,"+e),i.imagesToLoad--,i.imageLoadFinished()}),this.svg.selectAll("g").data(e.features.filter(this.featureFilter("Polygon"))).enter().append("path").attr("class","node").attr("d",this.path).each(this.setStyle),this.svg.selectAll("g").data(e.features.filter(this.featureFilter("LineString"))).enter().append("path").attr("class","node").attr("d",this.path).each(this.setStyle),this.svg.selectAll("g").data(e.features.filter(this.featureFilter("Point"))).enter().append("image").attr("class","node").attr("d",this.path).each(this.setStyle),this.svg.selectAll(".node").sort(function(e,t){return e.zIndex>t.zIndex?1:e.zIndex<t.zIndex?-1:0})},converterEngine:function(e){for(var t=new Uint8Array(e),i=t.length,n=[];i--;)n[i]=String.fromCharCode(t[i]);var r=window.btoa(n.join(""));return r},getImageBase64:function(e,t){var i=new XMLHttpRequest(e);i.open("GET",e,!0),i.responseType="arraybuffer",i.callback=t;var n=this;i.onload=function(e){if(200==this.status){var t=n.converterEngine(this.response);this.callback(t)}},i.send()},download_png:function(){var e=this.svg.attr("version",1.1).attr("xmlns","http://www.w3.org/2000/svg").node().outerHTML,t="data:image/svg+xml;utf8,"+e,i=document.createElement("canvas");i.width=this.width,i.height=this.height;var n=i.getContext("2d"),r=new Image;r.src=t;var s=this;r.onload=function(){n.drawImage(r,0,0,this.width,this.height),s.downloadCanvas(i)}},dataURLtoBlob:function(e){for(var t=e.split(","),i=t[0].match(/:(.*?);/)[1],n=atob(t[1]),r=n.length,s=new Uint8Array(r);r--;)s[r]=n.charCodeAt(r);return new Blob([s],{type:i})},downloadCanvas:function(e){var t=document.createElement("a"),i=e.toDataURL({format:"png",multiplier:4}),n=(i.substr(22,i.length),this.dataURLtoBlob(i)),r=URL.createObjectURL(n);t.download="image.png",t.href=r,document.body.appendChild(t),t.click(),document.body.removeChild(t)},doExport:function(){var e=new n.Format.GeoJSON,t=JSON.parse(e.write(this.layer.features));this.createSVG(t,this.download_png)},CLASS_NAME:"OpenLayers.Control.ExportMap"})},{"./OpenLayers.js":42,"d3-geo":5,"d3-scale":7,"d3-selection":8}],46:[function(e,t,i){(function(t){function i(e,t,i,n){var r=new P.Layer.TMS(i,n,{type:"jpg",getURL:o(e,t)});return r.map_patch=e,r.map_id=t,r}function n(){switch(xe.modify.mode=P.Control.ModifyFeature.RESHAPE,this.value){case"reshape":xe.modify.mode=P.Control.ModifyFeature.RESHAPE;break;case"rotate":xe.modify.mode=P.Control.ModifyFeature.ROTATE;break;case"scale":xe.modify.mode|=P.Control.ModifyFeature.RESIZE,xe.modify.mode&=~P.Control.ModifyFeature.RESHAPE;break;case"skew":xe.modify.mode|=P.Control.ModifyFeature.RESIZE;break;case"drag":xe.modify.mode=P.Control.ModifyFeature.DRAG}var e=xe.modify.feature;e&&(xe.modify.unselectFeature(e),xe.modify.selectFeature(e))}function r(){var e,t=Object.keys(ae);k("#toolbar").hide();for(var i in xe)e=xe[i],this.value==i&&this.checked?(e.activate(),ne.updateSize(),t.indexOf(i)!=-1&&(k("#toolbar").show(),s(i))):(e.deactivate(),t.indexOf(i)!=-1);"modify"==this.value&&Oe.selectedFeatures.length&&xe.modify.selectFeature(Oe.selectedFeatures[0])}function s(e){B=e,k(".tool-radiobutton").checkboxradio("refresh"),k(".tool-setting").hide(),k("."+e+"-tool-group").css("display","inline-block")}function o(e,t){return function(i){var n=this.map.getResolution(),r=Math.round((i.left-this.maxExtent.left)/(n*this.tileSize.w)),s=Math.round((this.maxExtent.top-i.top)/(n*this.tileSize.h)),o=ne.getZoom(),a=o+"/tile_"+r+"_"+s+"."+this.type,l=this.url;return l instanceof Array&&(l=this.selectUrl(a,l)),l+e+"/"+t+"/"+a}}function a(){var e=X("id");e&&(k.get("save/"+e+".json",function(e){var t=new P.Format.GeoJSON;Oe.addFeatures(t.read(e))}),ne.zoomTo(parseInt(t)));var t=X("zoom");t&&ne.zoomTo(parseInt(t));var i=X("x"),n=X("y");if(i&&n){var r=ie(i,n);ne.setCenter(new P.LonLat(r.x,r.y),void 0,!1,!1)}var s=X("BaseLayer");if(s)for(var o=0;o<re.length;o++){var a=re[o],l=a.name.replace(/ /g,"");if(s===l){ne.setBaseLayer(a);break}}}function l(e){k("#"+e+"-stroke-width").spinner({min:1,step:1,change:function(t,i){var n=parseInt(this.value);isNaN(n)?n=parseInt(ae[e].strokeWidth):ae[e].strokeWidth=n,k(this).val(n)},stop:function(t,i){var n=parseInt(this.value);isNaN(n)||(ae[e].strokeWidth=n)}}).val(ae[e].strokeWidth)}function h(e,t){var i=t?"fill":"stroke",n=document.querySelector("#"+e+"-"+i+"-opacity-icon .opacity-preview-icon");k("#"+e+"-"+i+"-opacity").percentspinner({min:0,max:100,step:1,change:function(t,r){var s=parseInt(this.value);isNaN(s)?s=parseInt(100*ae[e][i+"Opacity"]):(ae[e][i+"Opacity"]=s/100,n.style.opacity=ae[e][i+"Opacity"]),k(this).val(V(s))},spin:function(e,t){n.style.opacity=t.value/100},stop:function(t,r){var s=parseInt(this.value);isNaN(s)||(ae[e][i+"Opacity"]=s/100,n.style.opacity=ae[e][i+"Opacity"])}}).val(V(100*ae[e][i+"Opacity"]))}function u(e,t){var i=t?"fill":"stroke",n=document.getElementById(e+"-"+i+"-color-preview"),r=new M(document.getElementById(e+"-"+i+"-color-picker"));r.set(ae[e][i+"Color"]),r.on("enter",function(){var e="#"+this._HSV2HEX(this.set());n.title=e,n.style.backgroundColor=e}),r.on("change",function(t){this.target.value="#"+t,n.style.backgroundColor="#"+t,ae[e][i+"Color"]="#"+t}),r.on("exit",function(){this.target.value=n.title}),k(n).click(function(){r.visible||r.enter()});var s=document.createElement("button");s.innerHTML="Close",s.className="color-picker-close tool-button",s.addEventListener("click",function(){r.exit()},!1),r.picker.appendChild(s)}function c(e,t,i){k("#"+e+"-"+t).degreespinner({min:0,max:360,step:1,change:function(t,n){var r=parseInt(this.value);isNaN(r)?r=parseInt(oe[e][i]):(oe[e][i]=r,f(e,i,r)),k(this).val(q(r))},stop:function(t,n){var r=parseInt(this.value);isNaN(r)||(oe[e][i]=r,f(e,i,r))}}).val(q(oe[e][i]))}function p(e,t,i,n,r,s){var r=r||"spinner",s=s||d;k("#"+e+"-"+t)[r](P.Util.extend({change:function(t,n){var r=parseInt(this.value);isNaN(r)?r=parseInt(oe[e][i]):(oe[e][i]=r,f(e,i,r)),k(this).val(s(r))},stop:function(t,n){var r=parseInt(this.value);isNaN(r)||(oe[e][i]=r,f(e,i,r))}},n)).val(s(oe[e][i]))}function d(e){return e}function f(e,t,i){var n={};n[t]=i,xe[e].handler.setOptions(n)}function y(e,t){var i=k("<div>").addClass("selectmenu-icon "+e);i.click(function(){ae.icon.externalGraphic=t,k("#marker-image-dropdown").val(t).iconselectmenu("refresh")}),ye.prepend(i)}function m(e){return P.Util.applyDefaults({},ae[e])}function g(e){return{getPointRadius:function(t){return(t.attributes.style?t.attributes.style.pointRadius:m(e).pointRadius)/ne.getResolution()},getStrokeWidth:function(t){return(t.attributes.style?t.attributes.style.strokeWidth:m(e).strokeWidth)/ne.getResolution()},getStrokeColor:function(t){return t.attributes.style?t.attributes.style.strokeColor:m(e).strokeColor},getStrokeOpacity:function(t){return t.attributes.style?t.attributes.style.strokeOpacity:m(e).strokeOpacity}}}function v(e){return{getFillColor:function(t){return t.attributes.style?t.attributes.style.fillColor:m(e).fillColor},getFillOpacity:function(t){return t.attributes.style?t.attributes.style.fillOpacity:m(e).fillOpacity}}}function L(e){b(document.getElementById("measure-distance"),e.order,e.units,e.measure)}function b(e,t,i,n){var r=W(ee,t,i,n),s="";s+=1==t?r.toFixed(0)+" units":r.toFixed(0)+" units<sup>2</sup>",e.value=s}function O(e){return function(t){xe[e].active&&(t.feature.attributes.style=m(e))}}function w(e){document.getElementById("draw-undo").disabled=!1,document.getElementById("draw-redo").disabled=!1}function x(e){document.getElementById("draw-undo").disabled=!0,document.getElementById("draw-redo").disabled=!0}function _(e){k("#controls-container").addClass("minimized"),e&&e.preventDefault()}function E(){return(window.innerWidth>0?window.innerWidth:screen.width)<=768}function S(){xe.selectfeature.unselectAll(),Se.undo()}function C(){xe.selectfeature.unselectAll(),Se.redo()}function T(){var e=xe.modify.feature;e&&(xe.modify.unselectFeature(e),Oe.removeFeatures([e]))}var k=(e("./rollbar"),"undefined"!=typeof window?window.$:"undefined"!=typeof t?t.$:null);e("jquery-ui/ui/version"),e("jquery-ui/ui/safe-active-element"),e("jquery-ui/ui/widget"),e("jquery-ui/ui/escape-selector"),e("jquery-ui/ui/form"),e("jquery-ui/ui/form-reset-mixin"),e("jquery-ui/ui/keycode"),e("jquery-ui/ui/labels"),e("jquery-ui/ui/position"),e("jquery-ui/ui/unique-id"),e("jquery-ui/ui/focusable"),e("jquery-ui/ui/safe-blur"),e("jquery-ui/ui/tabbable"),e("jquery-ui/ui/plugin"),e("jquery-ui/ui/data"),e("jquery-ui/ui/ie"),e("jquery-ui/ui/scroll-parent"),e("jquery-ui/ui/disable-selection"),e("jquery-ui/ui/widgets/button"),e("jquery-ui/ui/widgets/menu"),e("jquery-ui/ui/widgets/mouse"),e("jquery-ui/ui/widgets/draggable"),e("jquery-ui/ui/widgets/resizable");var M=(e("jquery-ui/ui/widgets/spinner"),e("jquery-ui/ui/widgets/selectmenu"),e("jquery-ui/ui/widgets/dialog"),e("jquery-ui/ui/widgets/checkboxradio"),e("jquery-ui/ui/widgets/controlgroup"),e("jquery-ui/ui/widgets/tooltip"),e("./color-picker.js")),P=e("./OpenLayers.js"),N=e("./OpenLayers.Control.UndoRedo"),D=e("./querystringutil"),I=e("./coordinateconversion"),R=e("./layerswitcher"),A=e("./widgets"),z=e("./exportmap"),F=e("./sharemap"),U=e("./savemap"),H=e("./sprite_manifest.json");H.heroes=H.heroes.sort(function(e,t){return e.name<t.name?-1:e.name>t.name?1:0}),H.other=H.other.sort(function(e,t){return e.name<t.name?-1:e.name>t.name?1:0});var B,j=I.latLonToWorld,G=I.worldToLatLon,W=I.calculateDistance,q=A.formatDegree,V=A.formatPercent,X=D.getParameterByName,Y=D.setQueryString,Z="images/",$=16384,K=16384,Q=[-8475.58617377,9327.49124559],J=[9028.52473332,-8836.61406266],ee=Math.abs(Q[1]-Q[0])/$,te=j.bind(null,Q,J,$,K),ie=G.bind(null,Q,J,$,K),ne=new P.Map("map",{theme:null,maxExtent:new P.Bounds(0,0,$,K),numZoomLevels:5,maxResolution:Math.pow(2,4),units:"m",controls:[new P.Control.Navigation,new P.Control.Zoom({zoomInId:"zoom-in",zoomOutId:"zoom-out"})]}),re=[i("700","default","7.00 Default",map_tile_path),i("687","default","6.87 Default",map_tile_path),i("687","desert","7.00 Desert",map_tile_path),i("687","immortalgardens","7.00 Immortal Gardens",map_tile_path)],se=new R({ascending:!1},function(e){var t=e.buttonElement;t===this.maximizeDiv&&(P.Element.removeClass(this.div,"minimized"),E()&&_())}),oe={regularpolygon:{snapAngle:15,sides:4,radius:1e3}},ae={brush:{strokeWidth:50,strokeColor:"#ff0000",strokeOpacity:1,pointRadius:1,fillColor:"#ff0000"},icon:{externalGraphic:"",graphicHeight:512,graphicOpacity:1},line:{strokeWidth:25,strokeColor:"#00ff00",strokeOpacity:1,pointRadius:1,fillColor:"#00ff00"},polygon:{strokeWidth:10,strokeColor:"#0000ff",strokeOpacity:1,pointRadius:1,fillColor:"#ff00ff",fillOpacity:.5},regularpolygon:{strokeWidth:20,strokeColor:"#00ffff",strokeOpacity:1,pointRadius:1,fillColor:"#aa00ff",fillOpacity:1},modify:{strokeWidth:2,strokeColor:"#ff0000",strokeOpacity:1,pointRadius:50,fillColor:"#ff0000",graphicName:"cross"},selectfeature:{strokeWidth:2,strokeColor:"#ff0000",strokeOpacity:1,pointRadius:50,fillColor:"#ff0000",graphicName:"cross"},measure:{strokeWidth:2,strokeColor:"#ff0000",strokeOpacity:1,pointRadius:50,fillColor:"#ff0000",graphicName:"cross"}},le=["brush","line","polygon","regularpolygon"],he=P.Util.getParameters(window.location.href).renderer,ue="save.php";le.forEach(function(e){l(e),h(e),u(e)}),h("polygon",!0),u("polygon",!0),h("regularpolygon",!0),u("regularpolygon",!0),c("regularpolygon","snap-angle","snapAngle"),p("regularpolygon","side-count","sides",{min:3,step:1}),p("regularpolygon","radius","radius",{min:1,step:1}),k("#regularpolygon-snap").checkboxradio({icon:!1}).change(function(){var e,t="regularpolygon",i="snapAngle";this.checked?(e=k(this).data("snapAngle"),k("#regularpolygon-snap-angle").degreespinner("enable")):(e=null,k(this).data("snapAngle",oe[t][i]),oe[t][i]=null,k("#regularpolygon-snap-angle").degreespinner("disable")),oe[t][i]=e,f(t,i,e)}).data("snapAngle",oe.regularpolygon.snapAngle),k("#regularpolygon-fixed-radius").checkboxradio({icon:!1}).change(function(){var e,t="regularpolygon",i="radius";this.checked?(e=k(this).data("radius"),k("#regularpolygon-radius").spinner("enable"),k("#regularpolygon-irregular").prop("checked",!1).checkboxradio("refresh"),f("regularpolygon","irregular",!1)):(e=null,k(this).data("radius",oe[t][i]),oe[t][i]=null,k("#regularpolygon-radius").spinner("disable")),oe[t][i]=e,f(t,i,e)}).data("radius",oe.regularpolygon.radius),k("#regularpolygon-irregular").checkboxradio({icon:!1}).change(function(){var e="regularpolygon",t="irregular",i=this.checked;this.checked&&(k("#regularpolygon-fixed-radius").prop("checked",!1).checkboxradio("refresh"),k("#regularpolygon-radius").spinner("disable")),f(e,t,i)}),k("#marker-size").spinner({min:32,step:32,change:function(e,t){var i=parseInt(this.value);isNaN(i)?i=parseInt(ae.icon.graphicHeight):ae.icon.graphicHeight=i,k(this).val(i)},stop:function(e,t){var i=parseInt(this.value);isNaN(i)||(ae.icon.graphicHeight=i)}}).val(ae.icon.graphicHeight);var ce=document.querySelector("#marker-opacity-icon .opacity-preview-icon");k("#marker-opacity").percentspinner({min:0,max:100,step:1,change:function(e,t){var i=parseInt(this.value);isNaN(i)?i=parseInt(100*ae.icon.graphicOpacity):(ae.icon.graphicOpacity=i/100,ce.style.opacity=ae.icon.graphicOpacity),k(this).val(V(i))},spin:function(e,t){ce.style.opacity=t.value/100},stop:function(e,t){var i=parseInt(this.value);isNaN(i)||(ae.icon.graphicOpacity=i/100,ce.style.opacity=ae.icon.graphicOpacity)}}).val(V(100*ae.icon.graphicOpacity));for(var pe="/media/images/miniheroes/",de=0;de<H.heroes.length;de++){var fe=k('<option value="'+pe+H.heroes[de].file+'">').text(H.heroes[de].name).attr("data-class","miniheroes-sprite-"+H.heroes[de].id);k("#marker-image-dropdown").append(fe)}for(var de=0;de<H.other.length;de++){var fe=k('<option value="'+pe+H.other[de].file+'">').text(H.other[de].name).attr("data-class","miniheroes-sprite-"+H.other[de].id);k("#marker-image-dropdown").append(fe)}var ye=k("#marker-list");k("#marker-image-dropdown").iconselectmenu({change:function(e,t){ae.icon.externalGraphic=t.item.value;var i=t.item.element.attr("data-class"),n=!1;if(ye.children().each(function(e){if(k(this).hasClass(i))return k(this).prependTo("#marker-list"),n=!0,!1}),!n){y(i,t.item.value);for(var r=ye.children().length;r>10;)k("div:last-child",ye).remove(),r--}}}),ae.icon.externalGraphic=k("#marker-image-dropdown > option")[0].value,y(k("#marker-image-dropdown > option").attr("data-class"),ae.icon.externalGraphic),P.Event.observe(document,"keydown",function(e){var t=!1;switch(e.keyCode){case 90:(e.metaKey||e.ctrlKey)&&(S(),t=!0);break;case 89:(e.metaKey||e.ctrlKey)&&(C(),t=!0);break;case 27:t=!0;break;case 46:"modify"==B&&T()}t&&P.Event.stop(e)}),P.ImgPath=Z,re.forEach(function(e){ne.addLayer(e)});var me={brush:g("brush"),line:g("line"),polygon:P.Util.extend(g("polygon"),v("polygon")),regularpolygon:P.Util.extend(g("regularpolygon"),v("regularpolygon")),icon:{getGraphicHeight:function(e){return(e.attributes.style?e.attributes.style.graphicHeight:m("icon").graphicHeight)/ne.getResolution()},getGraphicOpacity:function(e){return e.attributes.style?e.attributes.style.graphicOpacity:m("icon").graphicOpacity},getGraphicYOffset:function(e){var t=m("icon").externalGraphic;return t.indexOf("ward_sentry")==-1&&t.indexOf("ward_observer")==-1?-m("icon").graphicHeight/ne.getResolution()/2:-m("icon").graphicHeight/ne.getResolution()},getExternalGraphic:function(e){return e.attributes.style?e.attributes.style.externalGraphic:m("icon").externalGraphic}},modify:P.Util.extend(g("modify"),{getGraphicName:function(e){return e.attributes.style?e.attributes.style.graphicName:m("modify").graphicName},getExternalGraphic:function(e){return""}})},ge={brush:{pointRadius:"${getPointRadius}",strokeWidth:"${getStrokeWidth}",strokeColor:"${getStrokeColor}",strokeOpacity:"${getStrokeOpacity}"},line:{pointRadius:"${getPointRadius}",
strokeWidth:"${getStrokeWidth}",strokeColor:"${getStrokeColor}",strokeOpacity:"${getStrokeOpacity}"},polygon:{pointRadius:"${getPointRadius}",strokeWidth:"${getStrokeWidth}",strokeColor:"${getStrokeColor}",strokeOpacity:"${getStrokeOpacity}",fillColor:"${getFillColor}",fillOpacity:"${getFillOpacity}"},regularpolygon:{pointRadius:"${getPointRadius}",strokeWidth:"${getStrokeWidth}",strokeColor:"${getStrokeColor}",strokeOpacity:"${getStrokeOpacity}",fillColor:"${getFillColor}",fillOpacity:"${getFillOpacity}"},icon:{graphicOpacity:"${getGraphicOpacity}",externalGraphic:"${getExternalGraphic}",graphicYOffset:"${getGraphicYOffset}",graphicHeight:"${getGraphicHeight}"},modify:{pointRadius:"${getPointRadius}",strokeWidth:"${getStrokeWidth}",strokeColor:"${getStrokeColor}",strokeOpacity:"${getStrokeOpacity}",externalGraphic:"${getExternalGraphic}",graphicName:"${getGraphicName}"}},ve={select:P.Feature.Vector.style.select,virtual:{strokeColor:"#ee9900",fillColor:"#ee9900",strokeOpacity:.3,strokeWidth:2,pointRadius:8,fillOpacity:.3,graphicName:"circle"},vertex:new P.Style(P.Util.applyDefaults({strokeWidth:2,pointRadius:8,graphicName:"circle",externalGraphic:""},P.Feature.Vector.style.default),{extendDefault:!1})};for(var Le in ae)ae.hasOwnProperty(Le)&&(ve[Le]=new P.Style(ge[Le],{context:me[Le]}));var be=0;ve.default=new P.Style({pointRadius:"${getPointRadius}",strokeWidth:"${getStrokeWidth}",strokeColor:"${getStrokeColor}",strokeOpacity:"${getStrokeOpacity}",fillColor:"${getFillColor}",fillOpacity:"${getFillOpacity}",graphicOpacity:"${getGraphicOpacity}",externalGraphic:"${getExternalGraphic}",graphicYOffset:"${getGraphicYOffset}",graphicHeight:"${getGraphicHeight}",graphicName:"${getGraphicName}",graphicZIndex:"${getGraphicZIndex}"},{extendDefault:!0,context:{getPointRadius:function(e){return(e.attributes.style?e.attributes.style.pointRadius:m(B).pointRadius)/ne.getResolution()},getStrokeWidth:function(e){return(e.attributes.style?e.attributes.style.strokeWidth:m(B).strokeWidth)/ne.getResolution()},getStrokeColor:function(e){return e.attributes.style?e.attributes.style.strokeColor:m(B).strokeColor},getStrokeOpacity:function(e){return e.attributes.style?e.attributes.style.strokeOpacity:m(B).strokeOpacity},getFillColor:function(e){return e.attributes.style?e.attributes.style.fillColor:m(B).fillColor},getFillOpacity:function(e){return e.attributes.style?e.attributes.style.fillOpacity:m(B).fillOpacity},getGraphicHeight:function(e){return e.attributes.style?e.attributes.style.graphicHeight/ne.getResolution():m(B).graphicHeight?m(B).graphicHeight/ne.getResolution():P.Feature.Vector.style.default.graphicHeight},getGraphicOpacity:function(e){return e.attributes.style?e.attributes.style.graphicOpacity:m(B).graphicOpacity},getGraphicYOffset:function(e){if(e.attributes.style)var t=e.attributes.style.externalGraphic,i=e.attributes.style.graphicHeight;else{if(!m(B).getGraphicYOffset)return P.Feature.Vector.style.default.getGraphicYOffset;var t=m(B).externalGraphic,i=m(B).graphicHeight}return t&&i?t.indexOf("ward_sentry")==-1&&t.indexOf("ward_observer")==-1?-i/ne.getResolution()/2:-i/ne.getResolution():P.Feature.Vector.style.default.getGraphicYOffset},getExternalGraphic:function(e){return e.attributes.style?e.attributes.style.externalGraphic:m(B).externalGraphic?m(B).externalGraphic:P.Feature.Vector.style.default.externalGraphic},getGraphicName:function(e){return e.attributes.style?e.attributes.style.graphicName:m(B).graphicName?m(B).graphicName:P.Feature.Vector.style.default.graphicName},getGraphicZIndex:function(e){return e.attributes.hasOwnProperty("zIndex")?e.attributes.zIndex:(e.attributes.zIndex=++be,e.attributes.zIndex)}}}),he=he?[he]:P.Layer.Vector.prototype.renderers;var Oe=new P.Layer.Vector("Canvas",{styleMap:new P.StyleMap({default:ve.default,select:ve.select,vertex:ve.vertex}),rendererOptions:{zIndexing:!0},renderers:["Canvas"]});ne.addLayer(Oe);var we=new P.Control.MousePosition;we.formatOutput=function(e){var t=te(e.lon,e.lat);return t.x.toFixed(0)+", "+t.y.toFixed(0)},ne.addControl(we),ne.addControl(new P.Control.TouchNavigation({dragPanOptions:{enableKinetic:!0}})),ne.addControl(new P.Control.KeyboardDefaults),ne.addControl(se),se.maximizeControl(),ne.getCenter()||ne.zoomToMaxExtent();var xe={brush:new P.Control.DrawFeature(Oe,P.Handler.Path,{handlerOptions:{freehand:!0,layerOptions:{styleMap:new P.StyleMap(ve.brush)}}}),icon:new P.Control.DrawFeature(Oe,P.Handler.Point,{handlerOptions:{layerOptions:{styleMap:new P.StyleMap(ve.icon)}}}),line:new P.Control.DrawFeature(Oe,P.Handler.Path,{handlerOptions:{freehand:!1,layerOptions:{styleMap:new P.StyleMap(ve.line)}}}),polygon:new P.Control.DrawFeature(Oe,P.Handler.Polygon,{handlerOptions:{layerOptions:{styleMap:new P.StyleMap(ve.polygon)}}}),regularpolygon:new P.Control.DrawFeature(Oe,P.Handler.RegularPolygon,{handlerOptions:P.Util.extend(oe.regularpolygon,{layerOptions:{styleMap:new P.StyleMap(ve.regularpolygon)}})}),modify:new P.Control.ModifyFeature(Oe,{vertexRenderIntent:"vertex",virtualStyle:ve.virtual}),selectfeature:new P.Control.SelectFeature(Oe),measure:new P.Control.Measure(P.Handler.Path,{persist:!0,immediate:!0})};k("#measure-cancel").click(function(){xe.measure.cancel(),k("#measure-distance").val("")}),xe.measure.events.register("measurepartial",xe.measure,L),xe.measure.events.register("measure",xe.measure,L);var _e={brush:O("brush"),icon:O("icon"),line:O("line"),polygon:O("polygon"),regularpolygon:O("regularpolygon")};for(var Ee in xe)ne.addControl(xe[Ee]),"modify"==Ee?(Oe.events.register("beforefeaturemodified",xe[Ee],x),Oe.events.register("afterfeaturemodified",xe[Ee],w)):Oe.events.register("sketchcomplete",xe[Ee],_e[Ee]);var Se=new N([Oe]);ne.addControl(Se);var Ce=new z(ne,Oe,document.getElementById("export"),map_tile_path);ne.addControl(Ce);var Te=new F(ne,Oe,document.getElementById("share"),map_tile_path);ne.addControl(Te);var ke=new U(ne,Oe,document.getElementById("save"),ue);ne.addControl(ke);var Me=new P.Control.Measure(P.Handler.Path);ne.addControl(Me),Oe.events.register("featureselected",xe.selectfeature,function(e){if(e.feature.geometry.CLASS_NAME.indexOf("LineString")>-1){var t=Me.getBestLength(e.feature.geometry);b(document.getElementById("selectfeature-distance"),1,t[1],t[0])}}),ne.events.register("zoomend",ne,function(){Y("zoom",ne.zoom)}),ne.events.register("moveend",ne,function(){var e=te(ne.center.lon,ne.center.lat);Y("x",e.x.toFixed(0)),Y("y",e.y.toFixed(0))}),document.getElementById("controls-max").addEventListener("click",function(e){k("#controls-container").removeClass("minimized"),E()&&se.minimizeControl(),e&&e.preventDefault()},!1),document.getElementById("controls-min").addEventListener("click",_,!1),E()&&(_.call(document.getElementById("controls-min")),se.minimizeControl()),k(".tool-radiobutton").checkboxradio({icon:!1}).change(r),k("#map-tools").controlgroup({direction:"vertical"}),k(".modify-tool-radiobutton").checkboxradio({icon:!1}).change(n),k(".tool-radiogroup").controlgroup(),Oe.redoStack=[],k("#draw-undo").click(S),k("#draw-redo").click(C),k("#modify-delete").click(T),k(document).tooltip(),a(),k(".controls-container").show(),k(".link-modal").dialog({autoOpen:!1,modal:!0,width:"auto",buttons:{Ok:function(){k(this).dialog("close")}}})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./OpenLayers.Control.UndoRedo":41,"./OpenLayers.js":42,"./color-picker.js":43,"./coordinateconversion":44,"./exportmap":45,"./layerswitcher":47,"./querystringutil":48,"./rollbar":49,"./savemap":50,"./sharemap":51,"./sprite_manifest.json":52,"./widgets":53,"jquery-ui/ui/data":11,"jquery-ui/ui/disable-selection":12,"jquery-ui/ui/escape-selector":13,"jquery-ui/ui/focusable":14,"jquery-ui/ui/form":16,"jquery-ui/ui/form-reset-mixin":15,"jquery-ui/ui/ie":17,"jquery-ui/ui/keycode":18,"jquery-ui/ui/labels":19,"jquery-ui/ui/plugin":20,"jquery-ui/ui/position":21,"jquery-ui/ui/safe-active-element":22,"jquery-ui/ui/safe-blur":23,"jquery-ui/ui/scroll-parent":24,"jquery-ui/ui/tabbable":25,"jquery-ui/ui/unique-id":26,"jquery-ui/ui/version":27,"jquery-ui/ui/widget":28,"jquery-ui/ui/widgets/button":29,"jquery-ui/ui/widgets/checkboxradio":30,"jquery-ui/ui/widgets/controlgroup":31,"jquery-ui/ui/widgets/dialog":32,"jquery-ui/ui/widgets/draggable":33,"jquery-ui/ui/widgets/menu":34,"jquery-ui/ui/widgets/mouse":35,"jquery-ui/ui/widgets/resizable":36,"jquery-ui/ui/widgets/selectmenu":37,"jquery-ui/ui/widgets/spinner":38,"jquery-ui/ui/widgets/tooltip":39}],47:[function(e,t,i){var n=e("./OpenLayers.js");t.exports=n.Class(n.Control.LayerSwitcher,{onButtonClickCallback:null,initialize:function(e,t){n.Control.LayerSwitcher.prototype.initialize.apply(this,arguments),this.onButtonClickCallback=t},onButtonClick:function(e){return this.onButtonClickCallback&&this.onButtonClickCallback(e),n.Control.LayerSwitcher.prototype.onButtonClick.apply(this,arguments)},maximizeControl:function(e){n.Element.removeClass(this.div,"minimized"),this.showControls(!1),null!=e&&n.Event.stop(e)},minimizeControl:function(e){n.Element.addClass(this.div,"minimized"),this.showControls(!0),null!=e&&n.Event.stop(e)},loadContents:function(){this.layersDiv=document.createElement("div"),this.layersDiv.id=this.id+"_layersDiv",n.Element.addClass(this.layersDiv,"layersDiv"),this.baseLbl=document.createElement("div"),this.baseLbl.innerHTML=n.i18n("Base Layer"),n.Element.addClass(this.baseLbl,"baseLbl"),this.baseLayersDiv=document.createElement("div"),n.Element.addClass(this.baseLayersDiv,"baseLayersDiv"),this.dataLbl=document.createElement("div"),this.dataLbl.innerHTML=n.i18n("Overlays"),n.Element.addClass(this.dataLbl,"dataLbl"),this.dataLayersDiv=document.createElement("div"),n.Element.addClass(this.dataLayersDiv,"dataLayersDiv"),this.ascending?(this.layersDiv.appendChild(this.baseLbl),this.layersDiv.appendChild(this.baseLayersDiv),this.layersDiv.appendChild(this.dataLbl),this.layersDiv.appendChild(this.dataLayersDiv)):(this.layersDiv.appendChild(this.dataLbl),this.layersDiv.appendChild(this.dataLayersDiv),this.layersDiv.appendChild(this.baseLbl),this.layersDiv.appendChild(this.baseLayersDiv)),this.div.appendChild(this.layersDiv),this.maximizeDiv=document.createElement("div"),n.Element.addClass(this.maximizeDiv,"OpenLayers_Control_MaximizeDiv maximizeDiv olButton"),this.maximizeDiv.style.display="none",this.div.appendChild(this.maximizeDiv),this.minimizeDiv=document.createElement("div"),n.Element.addClass(this.minimizeDiv,"OpenLayers_Control_MinimizeDiv minimizeDiv olButton"),this.minimizeDiv.style.display="none",this.minimizeDiv.innerHTML="&times;";var e=document.createElement("i");n.Element.addClass(e,"fa fa-bars"),this.maximizeDiv.appendChild(e),this.div.appendChild(this.minimizeDiv)},CLASS_NAME:"OpenLayers.Control.LayerSwitcher"})},{"./OpenLayers.js":42}],48:[function(e,t,i){var n=function(){"use strict";function e(e){return e.replace(/[\[\](){}?*+\^$\\.|\-]/g,"\\$&")}return function(t,i,n){if(n=n||"g","string"!=typeof t||"string"!=typeof i||"string"!=typeof n)throw new TypeError("argument must be string");if(!/^[gi]*$/.test(n))throw new TypeError("Invalid flags supplied '"+n.match(new RegExp("[^gi]*"))+"'");return i=e(i),t.replace(new RegExp("^["+i+"]+|["+i+"]+$",n),"")}}(),r=function(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t=new RegExp("[\\?&]"+e+"=([^&#]*)"),i=t.exec(location.search);return null==i?"":decodeURIComponent(i[1].replace(/\+/g," "))},s=function(e,t){history.pushState(null,"",l(e,t))},o=function(e,t){var i=r(e);i=n(n(i," ;")+";"+t," ;"),history.pushState(null,"",l(e,i))},a=function(e,t){var i=r(e);i=n(n(i," ;").replace(t,"").replace(/;;/g,"")," ;"),history.pushState(null,"",l(e,""!=i?i:null))},l=function(e,t,i){i||(i=window.location.href);var n,r=new RegExp("([?&])"+e+"=.*?(&|#|$)(.*)","gi");if(r.test(i))return"undefined"!=typeof t&&null!==t?i.replace(r,"$1"+e+"="+t+"$2$3"):(n=i.split("#"),i=n[0].replace(r,"$1$3").replace(/(&|\?)$/,""),"undefined"!=typeof n[1]&&null!==n[1]&&(i+="#"+n[1]),i);if("undefined"!=typeof t&&null!==t){var s=i.indexOf("?")!==-1?"&":"?";return n=i.split("#"),i=n[0]+s+e+"="+t,"undefined"!=typeof n[1]&&null!==n[1]&&(i+="#"+n[1]),i}return i};t.exports={trim:n,getParameterByName:r,setQueryString:s,addQueryStringValue:o,removeQueryStringValue:a,updateQueryString:l}},{}],49:[function(e,t,i){var n=e("rollbar-browser"),r={accessToken:"",captureUncaught:!0,payload:{environment:"production",client:{javascript:{source_map_enabled:!0,code_version:"563eb9367533eac6d1595fec5d78744411f4419c",guess_uncaught_frames:!0}}}},s=n.init(r);t.exports=s},{"rollbar-browser":40}],50:[function(e,t,i){(function(i){var n=e("./OpenLayers.js"),r="undefined"!=typeof window?window.$:"undefined"!=typeof i?i.$:null,s=e("./querystringutil").setQueryString;t.exports=n.Class(n.Control,{layer:null,save:function(){var e=new n.Format.GeoJSON,t=e.write(this.layer.features);r("#save-link").hide(),r("#save-container").removeClass("has-link"),r.ajax({type:"POST",url:this.url,data:{data:t},dataType:"json",success:function(e){if(e.error)alert("Save request failed.");else{var t=[location.protocol,"//",location.host,location.pathname].join("")+"?id="+e.file;s("id",e.file),r("#save-container").addClass("has-link"),r("#save-link-message").attr("href",t),r("#save-link-message").text(t),r("#save-link").off("click").fadeIn(),r("#save-link").click(function(){r("#save-link-modal").dialog("open")})}},failure:function(e){alert("Save request failed.")}})},initialize:function(e,t,i,r,s){n.Control.prototype.initialize.apply(this,[s]),this.map=e,this.layer=t,this.div=i,this.url=r,this.div.addEventListener("click",this.save.bind(this),!1)},CLASS_NAME:"OpenLayers.Control.SaveMap"})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./OpenLayers.js":42,"./querystringutil":48}],51:[function(e,t,i){(function(i){var n=e("./OpenLayers.js"),r=e("./exportmap"),s="undefined"!=typeof window?window.$:"undefined"!=typeof i?i.$:null;t.exports=n.Class(r,{id:"share-svg",doExport:function(){s("#share-link").hide(),s("#share-container").removeClass("has-link"),r.prototype.doExport.call(this)},downloadCanvas:function(e){try{var t=e.toDataURL("image/jpeg",.8).split(",")[1]}catch(t){var t=e.toDataURL().split(",")[1]}s.ajax({url:"https://api.imgur.com/3/image",type:"POST",beforeSend:function(e){e.setRequestHeader("Authorization","Client-ID e6d3cc2364556b2")},data:{type:"base64",image:t},dataType:"json",success:function(e){s("#share-container").addClass("has-link"),s("#share-link-message").attr("href",e.data.link),s("#share-link-message").text(e.data.link),s("#share-link").off("click").fadeIn(),s("#share-link").click(function(){s("#share-link-modal").dialog("open")})},failure:function(e){alert("Could not reach api.imgur.com. Sorry :(")}})},CLASS_NAME:"OpenLayers.Control.ShareMap"})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./OpenLayers.js":42,"./exportmap":45}],52:[function(e,t,i){t.exports={heroes:[{file:"abaddon.png",id:"abaddon",name:"Abaddon"},{file:"alchemist.png",id:"alchemist",name:"Alchemist"},{file:"ancient_apparition.png",id:"ancient_apparition",name:"Ancient Apparition"},{file:"antimage.png",id:"antimage",name:"Anti-Mage"},{file:"arc_warden.png",id:"arc_warden",name:"Arc Warden"},{file:"axe.png",id:"axe",name:"Axe"},{file:"bane.png",id:"bane",name:"Bane"},{file:"batrider.png",id:"batrider",name:"Batrider"},{file:"beastmaster.png",id:"beastmaster",name:"Beastmaster"},{file:"bloodseeker.png",id:"bloodseeker",name:"Bloodseeker"},{file:"bounty_hunter.png",id:"bounty_hunter",name:"Bounty Hunter"},{file:"brewmaster.png",id:"brewmaster",name:"Brewmaster"},{file:"bristleback.png",id:"bristleback",name:"Bristleback"},{file:"broodmother.png",id:"broodmother",name:"Broodmother"},{file:"centaur.png",id:"centaur",name:"Centaur Warrunner"},{file:"chaos_knight.png",id:"chaos_knight",name:"Chaos Knight"},{file:"chen.png",id:"chen",name:"Chen"},{file:"clinkz.png",id:"clinkz",name:"Clinkz"},{file:"rattletrap.png",id:"rattletrap",name:"Clockwerk"},{file:"crystal_maiden.png",id:"crystal_maiden",name:"Crystal Maiden"},{file:"crystal_maiden_alt1.png",id:"crystal_maiden_alt1",name:"Crystal Maiden Alt"},{file:"dark_seer.png",id:"dark_seer",name:"Dark Seer"},{file:"dazzle.png",id:"dazzle",name:"Dazzle"},{file:"death_prophet.png",id:"death_prophet",name:"Death Prophet"},{file:"disruptor.png",id:"disruptor",name:"Disruptor"},{file:"doom_bringer.png",id:"doom_bringer",name:"Doom"},{file:"dragon_knight.png",id:"dragon_knight",name:"Dragon Knight"},{file:"drow_ranger.png",id:"drow_ranger",name:"Drow Ranger"},{file:"earth_spirit.png",id:"earth_spirit",name:"Earth Spirit"},{file:"earthshaker.png",id:"earthshaker",name:"Earthshaker"},{file:"elder_titan.png",id:"elder_titan",name:"Elder Titan"},{file:"ember_spirit.png",id:"ember_spirit",name:"Ember Spirit"},{file:"enchantress.png",id:"enchantress",name:"Enchantress"},{file:"enigma.png",id:"enigma",name:"Enigma"},{file:"faceless_void.png",id:"faceless_void",name:"Faceless Void"},{file:"gyrocopter.png",id:"gyrocopter",name:"Gyrocopter"},{file:"huskar.png",id:"huskar",name:"Huskar"},{file:"invoker.png",id:"invoker",name:"Invoker"},{file:"wisp.png",id:"wisp",name:"Io"},{file:"jakiro.png",id:"jakiro",name:"Jakiro"},{file:"juggernaut.png",id:"juggernaut",name:"Juggernaut"},{file:"keeper_of_the_light.png",id:"keeper_of_the_light",name:"Keeper of the Light"},{file:"kunkka.png",id:"kunkka",name:"Kunkka"},{file:"legion_commander.png",id:"legion_commander",name:"Legion Commander"},{file:"legion_commander_alt1.png",id:"legion_commander_alt1",name:"Legion Commander Alt"},{file:"leshrac.png",id:"leshrac",name:"Leshrac"},{file:"lich.png",id:"lich",name:"Lich"},{file:"life_stealer.png",id:"life_stealer",name:"Lifestealer"},{file:"lina.png",id:"lina",name:"Lina"},{file:"lina_alt1.png",id:"lina_alt1",name:"Lina Alt"},{file:"lion.png",id:"lion",name:"Lion"},{file:"lone_druid.png",id:"lone_druid",name:"Lone Druid"},{file:"luna.png",id:"luna",name:"Luna"},{file:"lycan.png",id:"lycan",name:"Lycan"},{file:"magnataur.png",id:"magnataur",name:"Magnus"},{file:"medusa.png",id:"medusa",name:"Medusa"},{file:"meepo.png",id:"meepo",name:"Meepo"},{file:"mirana.png",id:"mirana",name:"Mirana"},{file:"morphling.png",id:"morphling",name:"Morphling"},{file:"naga_siren.png",id:"naga_siren",name:"Naga Siren"},{file:"furion.png",id:"furion",name:"Nature's Prophet"},{file:"necrolyte.png",id:"necrolyte",name:"Necrophos"},{file:"night_stalker.png",id:"night_stalker",name:"Night Stalker"},{file:"nyx_assassin.png",id:"nyx_assassin",name:"Nyx Assassin"},{file:"ogre_magi.png",id:"ogre_magi",name:"Ogre Magi"},{file:"omniknight.png",id:"omniknight",name:"Omniknight"},{file:"oracle.png",id:"oracle",name:"Oracle"},{file:"obsidian_destroyer.png",id:"obsidian_destroyer",name:"Outworld Devourer"},{file:"phantom_assassin.png",id:"phantom_assassin",name:"Phantom Assassin"},{file:"phantom_assassin_alt1.png",id:"phantom_assassin_alt1",name:"Phantom Assassin Alt"},{file:"phantom_lancer.png",id:"phantom_lancer",name:"Phantom Lancer"},{file:"phoenix.png",id:"phoenix",name:"Phoenix"},{file:"puck.png",id:"puck",name:"Puck"},{file:"pudge.png",id:"pudge",name:"Pudge"},{file:"pugna.png",id:"pugna",name:"Pugna"},{file:"queenofpain.png",id:"queenofpain",name:"Queen of Pain"},{file:"razor.png",id:"razor",name:"Razor"},{file:"riki.png",id:"riki",name:"Riki"},{file:"rubick.png",id:"rubick",name:"Rubick"},{file:"sand_king.png",id:"sand_king",name:"Sand King"},{file:"shadow_demon.png",id:"shadow_demon",name:"Shadow Demon"},{file:"nevermore.png",id:"nevermore",name:"Shadow Fiend"},{file:"nevermore_alt1.png",id:"nevermore_alt1",name:"Shadow Fiend Alt"},{file:"shadow_shaman.png",id:"shadow_shaman",name:"Shadow Shaman"},{file:"silencer.png",id:"silencer",name:"Silencer"},{file:"skywrath_mage.png",id:"skywrath_mage",name:"Skywrath Mage"},{file:"slardar.png",id:"slardar",name:"Slardar"},{file:"slark.png",id:"slark",name:"Slark"},{file:"sniper.png",id:"sniper",name:"Sniper"},{file:"spectre.png",id:"spectre",name:"Spectre"},{file:"spirit_breaker.png",id:"spirit_breaker",name:"Spirit Breaker"},{file:"storm_spirit.png",id:"storm_spirit",name:"Storm Spirit"},{file:"sven.png",id:"sven",name:"Sven"},{file:"techies.png",id:"techies",name:"Techies"},{file:"techies_alt1.png",id:"techies_alt1",name:"Techies Alt"},{file:"templar_assassin.png",id:"templar_assassin",name:"Templar Assassin"},{file:"terrorblade.png",id:"terrorblade",name:"Terrorblade"},{file:"terrorblade_alt1.png",id:"terrorblade_alt1",name:"Terrorblade Alt"},{file:"tidehunter.png",id:"tidehunter",name:"Tidehunter"},{file:"shredder.png",id:"shredder",name:"Timbersaw"},{file:"tinker.png",id:"tinker",name:"Tinker"},{file:"tiny.png",id:"tiny",name:"Tiny"},{file:"treant.png",id:"treant",name:"Treant Protector"},{file:"troll_warlord.png",id:"troll_warlord",name:"Troll Warlord"},{file:"tusk.png",id:"tusk",name:"Tusk"},{file:"abyssal_underlord.png",id:"abyssal_underlord",name:"Underlord"},{file:"undying.png",id:"undying",name:"Undying"},{file:"ursa.png",id:"ursa",name:"Ursa"},{file:"vengefulspirit.png",id:"vengefulspirit",name:"Vengeful Spirit"},{file:"venomancer.png",id:"venomancer",name:"Venomancer"},{file:"viper.png",id:"viper",name:"Viper"},{file:"visage.png",id:"visage",name:"Visage"},{file:"warlock.png",id:"warlock",name:"Warlock"},{file:"weaver.png",id:"weaver",name:"Weaver"},{file:"windrunner.png",id:"windrunner",name:"Windranger"},{file:"winter_wyvern.png",id:"winter_wyvern",name:"Winter Wyvern"},{file:"witch_doctor.png",id:"witch_doctor",name:"Witch Doctor"},{file:"skeleton_king.png",id:"skeleton_king",name:"Wraith King"},{file:"zuus.png",id:"zuus",name:"Zeus"},{file:"zuus_alt1.png",id:"zuus_alt1",name:"Zeus Alt"},{file:"monkey_king.png",id:"monkey_king",name:"Monkey King"}],other:[{file:"ward_observer.png",id:"ward_observer",name:"Observer Ward"},{file:"bm_earth.png",id:"bm_earth",name:"Primal Split - Earth"},{file:"bm_fire.png",id:"bm_fire",name:"Primal Split - Fire"},{file:"bm_storm.png",id:"bm_storm",name:"Primal Split - Storm"},{file:"roshan.png",id:"roshan",name:"Roshan"},{file:"ward_sentry.png",id:"ward_sentry",name:"Sentry Ward"}]}},{}],53:[function(e,t,i){(function(i){var n="undefined"!=typeof window?window.$:"undefined"!=typeof i?i.$:null;e("jquery-ui/ui/version"),e("jquery-ui/ui/safe-active-element"),e("jquery-ui/ui/widget"),e("jquery-ui/ui/escape-selector"),e("jquery-ui/ui/form-reset-mixin"),e("jquery-ui/ui/keycode"),e("jquery-ui/ui/labels"),e("jquery-ui/ui/position"),e("jquery-ui/ui/unique-id"),e("jquery-ui/ui/widgets/button"),e("jquery-ui/ui/widgets/menu");var r=(e("jquery-ui/ui/widgets/spinner"),e("jquery-ui/ui/widgets/selectmenu"),function(e){return e+"°"}),s=n.widget("ui.degreespinner",n.ui.spinner,{_format:r,_parse:function(e){return parseFloat(e)}}),o=function(e){return e+"%"},a=n.widget("ui.percentspinner",n.ui.spinner,{_format:o,_parse:function(e){return parseFloat(e)}}),l=n.widget("custom.iconselectmenu",n.ui.selectmenu,{_renderItem:function(e,t){var i=n("<li>"),r=n("<div>");return t.disabled&&i.addClass("ui-state-disabled"),n("<div>",{class:"selectmenu-label",text:t.label}).appendTo(r),n("<div>",{style:t.element.attr("data-style"),class:"selectmenu-icon "+t.element.attr("data-class")}).appendTo(r),i.append(r).appendTo(e)}});t.exports={formatDegree:r,degreespinner:s,formatPercent:o,percentspinner:a,iconselectmenu:l}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"jquery-ui/ui/escape-selector":13,"jquery-ui/ui/form-reset-mixin":15,"jquery-ui/ui/keycode":18,"jquery-ui/ui/labels":19,"jquery-ui/ui/position":21,"jquery-ui/ui/safe-active-element":22,"jquery-ui/ui/unique-id":26,"jquery-ui/ui/version":27,"jquery-ui/ui/widget":28,"jquery-ui/ui/widgets/button":29,"jquery-ui/ui/widgets/menu":34,"jquery-ui/ui/widgets/selectmenu":37,"jquery-ui/ui/widgets/spinner":38}]},{},[46])(46)});
//# sourceMappingURL=bundle-563eb93.min.js.map